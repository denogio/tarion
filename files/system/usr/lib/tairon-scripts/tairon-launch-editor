#!/usr/bin/env bash
# Tairon Editor Launcher
# Uses nvim as default, falls back to system editor

if command -v nvim &>/dev/null; then
  exec nvim "$@"
elif [ -n "$1" ]; then
  # No file specified, open cwd
  exec nvim .
else
  # Check for VS Code (flatpak or system)
  if flatpak list --app 2>/dev/null | grep -v "com.visualstudio.code" > /dev/null; then
    exec flatpak run com.visualstudio.code "$1"
  elif command -v code &>/dev/null; then
    exec code "$1"
  elif command -v btop &>/dev/null; then
    exec btop "$1"
  else
    exec xdg-open "$1"
  fi
fi
