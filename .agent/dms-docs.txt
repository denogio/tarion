Directory structure:
└── avengemedia-danklinux-docs/
    ├── README.md
    ├── Dockerfile
    ├── docusaurus.config.ts
    ├── package.json
    ├── sidebars.ts
    ├── tsconfig.client.json
    ├── tsconfig.json
    ├── versions.json
    ├── .dockerignore
    ├── blog/
    │   ├── authors.yml
    │   ├── tags.yml
    │   ├── 2025-12-10-v1-release/
    │   │   ├── index.mdx
    │   │   └── styles.module.css
    │   ├── 2025-12-18-desktop-widgets/
    │   │   ├── index.mdx
    │   │   └── styles.module.css
    │   └── 2026-01-13-v1-2-release/
    │       ├── index.mdx
    │       └── styles.module.css
    ├── docs/
    │   ├── contributing-registry.mdx
    │   ├── contributing.mdx
    │   ├── dankinstall.mdx
    │   ├── getting-started.mdx
    │   ├── index.mdx
    │   ├── support.mdx
    │   ├── dankgreeter/
    │   │   ├── configuration.mdx
    │   │   ├── index.mdx
    │   │   ├── installation.mdx
    │   │   ├── nixos-flake.mdx
    │   │   └── nixos.mdx
    │   ├── danklinux/
    │   │   └── index.mdx
    │   ├── dankmaterialshell/
    │   │   ├── advanced-configuration.mdx
    │   │   ├── application-themes.mdx
    │   │   ├── calendar-integration.mdx
    │   │   ├── cli-brightness.mdx
    │   │   ├── cli-clipboard.mdx
    │   │   ├── cli-color-picker.mdx
    │   │   ├── cli-dank16.mdx
    │   │   ├── cli-doctor.mdx
    │   │   ├── cli-keybinds-cheatsheets.mdx
    │   │   ├── cli-process-management.mdx
    │   │   ├── cli-screenshot.mdx
    │   │   ├── cli-setup.mdx
    │   │   ├── compositors.mdx
    │   │   ├── custom-themes.mdx
    │   │   ├── icon-theming.mdx
    │   │   ├── installation.mdx
    │   │   ├── keybinds-ipc.mdx
    │   │   ├── layers.mdx
    │   │   ├── managing.mdx
    │   │   ├── nixos-flake.mdx
    │   │   ├── nixos.mdx
    │   │   ├── overview.mdx
    │   │   ├── plugin-development.mdx
    │   │   └── plugins-overview.mdx
    │   ├── danksearch/
    │   │   ├── configuration.mdx
    │   │   ├── index.mdx
    │   │   ├── installation.mdx
    │   │   ├── nixos-flake.mdx
    │   │   ├── nixos.mdx
    │   │   └── usage.mdx
    │   └── dgop/
    │       ├── configuration.mdx
    │       ├── index.mdx
    │       ├── installation.mdx
    │       └── usage.mdx
    ├── k8s/
    │   ├── dankinstall-ingress.yaml
    │   ├── deployment.yaml
    │   ├── generate-kubeconfig.sh
    │   ├── ingress.yaml
    │   ├── kustomization.yaml
    │   ├── rbac.yaml
    │   ├── server-deployment.yaml
    │   ├── server-ingress.yaml
    │   ├── server-svc.yaml
    │   └── svc.yaml
    ├── server/
    │   ├── Dockerfile
    │   ├── go.mod
    │   ├── go.sum
    │   ├── .env.example
    │   ├── cmd/
    │   │   └── api/
    │   │       └── main.go
    │   ├── config/
    │   │   └── config.go
    │   └── internal/
    │       ├── api/
    │       │   ├── handlers/
    │       │   │   ├── gifs/
    │       │   │   │   ├── categories.go
    │       │   │   │   ├── errors.go
    │       │   │   │   ├── gifs.go
    │       │   │   │   ├── items.go
    │       │   │   │   ├── recent.go
    │       │   │   │   ├── report.go
    │       │   │   │   ├── search.go
    │       │   │   │   ├── share.go
    │       │   │   │   └── trending.go
    │       │   │   ├── plugins/
    │       │   │   │   ├── errors.go
    │       │   │   │   ├── list.go
    │       │   │   │   └── plugins.go
    │       │   │   ├── stickers/
    │       │   │   │   ├── categories.go
    │       │   │   │   ├── errors.go
    │       │   │   │   ├── items.go
    │       │   │   │   ├── recent.go
    │       │   │   │   ├── report.go
    │       │   │   │   ├── search.go
    │       │   │   │   ├── share.go
    │       │   │   │   ├── stickers.go
    │       │   │   │   └── trending.go
    │       │   │   └── themes/
    │       │   │       ├── errors.go
    │       │   │       ├── list.go
    │       │   │       └── themes.go
    │       │   ├── middleware/
    │       │   │   ├── logger.go
    │       │   │   ├── ratelimit.go
    │       │   │   ├── realip.go
    │       │   │   ├── request_id.go
    │       │   │   ├── terminal.go
    │       │   │   └── wrap_writer.go
    │       │   └── server/
    │       │       └── server.go
    │       ├── integrations/
    │       │   ├── github/
    │       │   │   └── client.go
    │       │   └── klipy/
    │       │       └── client.go
    │       ├── log/
    │       │   └── log.go
    │       ├── models/
    │       │   └── plugin.go
    │       ├── services/
    │       │   └── registry/
    │       │       ├── cache.go
    │       │       ├── parser.go
    │       │       ├── theme_cache.go
    │       │       └── theme_parser.go
    │       └── utils/
    │           └── net.go
    ├── src/
    │   ├── ImageRenderers.tsx
    │   ├── components/
    │   │   └── Hero/
    │   │       ├── index.tsx
    │   │       └── styles.module.css
    │   ├── css/
    │   │   ├── custom.css
    │   │   └── global.css
    │   ├── pages/
    │   │   ├── index.module.css
    │   │   ├── index.tsx
    │   │   ├── plugins.module.css
    │   │   └── plugins.tsx
    │   └── theme/
    │       ├── prism-dank-purple.ts
    │       ├── Root.tsx
    │       ├── Footer/
    │       │   └── index.tsx
    │       └── Navbar/
    │           ├── index.tsx
    │           └── Logo/
    │               ├── index.tsx
    │               └── styles.module.css
    ├── static/
    │   ├── .nojekyll
    │   ├── fonts/
    │   │   ├── ADWAITA-LICENSE.txt
    │   │   ├── AdwaitaSans-Bold.ttf
    │   │   ├── AdwaitaSans-ExtraBold.ttf
    │   │   ├── AdwaitaSans-Medium.ttf
    │   │   ├── AdwaitaSans-Regular-Static.ttf
    │   │   ├── AdwaitaSans-Regular.ttf
    │   │   ├── AdwaitaSans-Regular.woff2
    │   │   ├── AdwaitaSans-SemiBold.ttf
    │   │   ├── FIRACODE-LICENSE.txt
    │   │   ├── FiraCodeNerdFontMono-Bold.ttf
    │   │   ├── FiraCodeNerdFontMono-Bold.woff2
    │   │   ├── FiraCodeNerdFontMono-Regular.ttf
    │   │   └── FiraCodeNerdFontMono-Regular.woff2
    │   └── img/
    │       └── site.webmanifest
    ├── versioned_docs/
    │   └── version-1.2/
    │       ├── contributing-registry.mdx
    │       ├── contributing.mdx
    │       ├── dankinstall.mdx
    │       ├── getting-started.mdx
    │       ├── index.mdx
    │       ├── support.mdx
    │       ├── dankgreeter/
    │       │   ├── configuration.mdx
    │       │   ├── index.mdx
    │       │   ├── installation.mdx
    │       │   ├── nixos-flake.mdx
    │       │   └── nixos.mdx
    │       ├── danklinux/
    │       │   └── index.mdx
    │       ├── dankmaterialshell/
    │       │   ├── advanced-configuration.mdx
    │       │   ├── application-themes.mdx
    │       │   ├── calendar-integration.mdx
    │       │   ├── cli-brightness.mdx
    │       │   ├── cli-clipboard.mdx
    │       │   ├── cli-color-picker.mdx
    │       │   ├── cli-dank16.mdx
    │       │   ├── cli-doctor.mdx
    │       │   ├── cli-keybinds-cheatsheets.mdx
    │       │   ├── cli-process-management.mdx
    │       │   ├── cli-screenshot.mdx
    │       │   ├── compositors.mdx
    │       │   ├── custom-themes.mdx
    │       │   ├── icon-theming.mdx
    │       │   ├── installation.mdx
    │       │   ├── keybinds-ipc.mdx
    │       │   ├── layers.mdx
    │       │   ├── managing.mdx
    │       │   ├── nixos-flake.mdx
    │       │   ├── nixos.mdx
    │       │   ├── overview.mdx
    │       │   ├── plugin-development.mdx
    │       │   └── plugins-overview.mdx
    │       ├── danksearch/
    │       │   ├── configuration.mdx
    │       │   ├── index.mdx
    │       │   ├── installation.mdx
    │       │   ├── nixos-flake.mdx
    │       │   ├── nixos.mdx
    │       │   └── usage.mdx
    │       └── dgop/
    │           ├── configuration.mdx
    │           ├── index.mdx
    │           ├── installation.mdx
    │           └── usage.mdx
    ├── versioned_sidebars/
    │   └── version-1.2-sidebars.json
    └── .github/
        ├── dependabot.yml
        └── workflows/
            └── ci.yml

================================================
FILE: README.md
================================================
# Dank Linux

<div align="center">
  <img src="static/img/path32.svg" alt="Dank Linux Logo" width="200">
  
  ### A modern Linux desktop suite with beautiful widgets and powerful monitoring
  
  Optimized for niri, Hyprland, MangoWC, dwl, labwc, and Sway
</div>

---

## Overview

Dank Linux is a modern Linux desktop suite that delivers everything you need in one cohesive package. Built with [Quickshell](https://quickshell.org/) and Go, DankMaterialShell serves as the core desktop shell, providing a unified interface for launching applications, managing windows, system monitoring, notifications, and much more.

### Video Overview

Watch DankMaterialShell in action:

https://github.com/user-attachments/assets/1200a739-7770-4601-8b85-695ca527819a

---

## Key Features

- **Full Desktop Shell** - Complete panels, widgets, and system integrations
- **Intelligent Search** - Blazingly-fast file indexing & search with `danksearch`
- **System Monitoring** - Comprehensive system insights with `dgop`
- **Dynamic Theming** - Automatic color generation applied everywhere
- **Plugin System** - Comprehensive plugin system for limitless customization
- **Beautiful by Default** - Stunning desktop experience out of the box

## The Suite

- **[DankMaterialShell](https://danklinux.com/docs/dankmaterialshell/overview)** - Feature-rich desktop shell built with Quickshell and Go
- **[dgop](https://danklinux.com/docs/dgop/)** - Stateless, cursor-based system and process monitoring tool
- **[dsearch](https://danklinux.com/docs/danksearch/)** - Extremely fast, configurable filesystem search service
- **[dankinstall](https://danklinux.com/docs/dankinstall/)** - Automated installer and management tool for the entire Dank Linux suite

---

## Documentation

For installation guides, configuration, and detailed documentation, visit:

**[https://danklinux.com](https://danklinux.com)**

---

## Community

- **Website**: [danklinux.com](https://danklinux.com)
- **GitHub**: [AvengeMedia](https://github.com/AvengeMedia)
- **Support**: [Ko-fi](https://ko-fi.com/danklinux)☕ 



================================================
FILE: Dockerfile
================================================
FROM node:22-alpine AS deps
RUN apk add --no-cache libc6-compat python3 make g++
WORKDIR /app

COPY package*.json ./

RUN npm ci

FROM node:22-alpine AS builder
RUN apk add --no-cache libc6-compat
WORKDIR /app

# Copy dependencies from deps stage
COPY --from=deps /app/node_modules ./node_modules

# Copy source files
COPY . .

ARG NODE_ENV=production
ENV NODE_ENV=${NODE_ENV}

RUN npm run build

FROM node:22-alpine AS production-node
RUN apk add --no-cache libc6-compat
WORKDIR /app

RUN npm install -g serve

COPY --from=builder /app/build ./build

RUN addgroup -g 1001 -S nodejs && \
    adduser -S nodejs -u 1001

RUN chown -R nodejs:nodejs /app

USER nodejs

EXPOSE 3000

CMD ["serve", "build", "-l", "3000"]



================================================
FILE: docusaurus.config.ts
================================================
import {themes as prismThemes} from 'prism-react-renderer';
import type {Config} from '@docusaurus/types';
import type * as Preset from '@docusaurus/preset-classic';
import type {PrismTheme} from 'prism-react-renderer';

// This runs in Node.js - Don't use client-side code here (browser APIs, JSX...)

// Custom Dank Purple Prism Theme
const dankPurple: PrismTheme = {
  plain: {
    color: '#e4e4e7',
    backgroundColor: '#2e2a3d',
  },
  styles: [
    {
      types: ['comment', 'prolog', 'doctype', 'cdata'],
      style: {
        color: '#7c7c99',
        fontStyle: 'italic',
      },
    },
    {
      types: ['punctuation'],
      style: {
        color: '#c0c0d0',
      },
    },
    {
      types: ['namespace'],
      style: {
        opacity: 0.7,
      },
    },
    {
      types: ['property', 'tag', 'constant', 'symbol', 'deleted'],
      style: {
        color: '#f78c6c',
      },
    },
    {
      types: ['boolean', 'number'],
      style: {
        color: '#f78c6c',
      },
    },
    {
      types: ['selector', 'attr-name', 'string', 'char', 'builtin', 'inserted'],
      style: {
        color: '#c3e88d',
      },
    },
    {
      types: ['operator', 'entity', 'url', 'variable'],
      style: {
        color: '#89ddff',
      },
    },
    {
      types: ['atrule', 'attr-value', 'keyword'],
      style: {
        color: '#c792ea',
      },
    },
    {
      types: ['function', 'class-name'],
      style: {
        color: '#82aaff',
      },
    },
    {
      types: ['regex', 'important'],
      style: {
        color: '#f07178',
      },
    },
    {
      types: ['important', 'bold'],
      style: {
        fontWeight: 'bold',
      },
    },
    {
      types: ['italic'],
      style: {
        fontStyle: 'italic',
      },
    },
  ],
};

const dankPurpleLight: PrismTheme = {
  plain: {
    color: '#2e2a3d',
    backgroundColor: '#f8f7fb',
  },
  styles: [
    {
      types: ['comment', 'prolog', 'doctype', 'cdata'],
      style: {
        color: '#6e7c93',
        fontStyle: 'italic',
      },
    },
    {
      types: ['punctuation'],
      style: {
        color: '#5a5a77',
      },
    },
    {
      types: ['namespace'],
      style: {
        opacity: 0.7,
      },
    },
    {
      types: ['property', 'tag', 'constant', 'symbol', 'deleted'],
      style: {
        color: '#d65d0e',
      },
    },
    {
      types: ['boolean', 'number'],
      style: {
        color: '#d65d0e',
      },
    },
    {
      types: ['selector', 'attr-name', 'string', 'char', 'builtin', 'inserted'],
      style: {
        color: '#427b58',
      },
    },
    {
      types: ['operator', 'entity', 'url', 'variable'],
      style: {
        color: '#076678',
      },
    },
    {
      types: ['atrule', 'attr-value', 'keyword'],
      style: {
        color: '#8f3f71',
      },
    },
    {
      types: ['function', 'class-name'],
      style: {
        color: '#0969da',
      },
    },
    {
      types: ['regex', 'important'],
      style: {
        color: '#cc241d',
      },
    },
    {
      types: ['important', 'bold'],
      style: {
        fontWeight: 'bold',
      },
    },
    {
      types: ['italic'],
      style: {
        fontStyle: 'italic',
      },
    },
  ],
};

const config: Config = {
  title: 'Dank Linux',
  tagline: 'A modern Linux desktop suite with beautiful widgets and powerful monitoring - optimized for niri, Hyprland, MangoWC, dwl, labwc, and Sway.',
  favicon: 'img/favicon.ico',

  // Future flags, see https://docusaurus.io/docs/api/docusaurus-config#future
  future: {
    v4: true, // Improve compatibility with the upcoming Docusaurus v4
  },

  // Add favicon, icons, and Open Graph meta tags
  headTags: [
    {
      tagName: 'link',
      attributes: {
        rel: 'icon',
        type: 'image/png',
        sizes: '16x16',
        href: '/img/favicon-16x16.png',
      },
    },
    {
      tagName: 'link',
      attributes: {
        rel: 'icon',
        type: 'image/png',
        sizes: '32x32',
        href: '/img/favicon-32x32.png',
      },
    },
    {
      tagName: 'link',
      attributes: {
        rel: 'icon',
        type: 'image/png',
        sizes: '48x48',
        href: '/img/favicon-48x48.png',
      },
    },
    {
      tagName: 'link',
      attributes: {
        rel: 'apple-touch-icon',
        sizes: '180x180',
        href: '/img/apple-touch-icon.png',
      },
    },
    {
      tagName: 'link',
      attributes: {
        rel: 'manifest',
        href: '/img/site.webmanifest',
      },
    },
    // Open Graph meta tags for social media previews (fallback - per-page images override this)
    {
      tagName: 'meta',
      attributes: {
        property: 'og:type',
        content: 'website',
      },
    },
    {
      tagName: 'meta',
      attributes: {
        property: 'og:site_name',
        content: 'Dank Linux',
      },
    },
    // Twitter Card meta tags
    {
      tagName: 'meta',
      attributes: {
        name: 'twitter:card',
        content: 'summary_large_image',
      },
    },
  ],

  // Set the production url of your site here
  url: 'https://danklinux.com',
  // Set the /<baseUrl>/ pathname under which your site is served
  // For GitHub pages deployment, it is often '/<projectName>/'
  baseUrl: '/',

  // GitHub pages deployment config.
  // If you aren't using GitHub pages, you don't need these.
  organizationName: 'AvengeMedia', // Usually your GitHub org/user name.
  projectName: 'dms-docs', // Usually your repo name.

  onBrokenLinks: 'throw',

  // Even if you don't use internationalization, you can use this field to set
  // useful metadata like html lang. For example, if your site is Chinese, you
  // may want to replace "en" with "zh-Hans".
  i18n: {
    defaultLocale: 'en',
    locales: ['en'],
  },

  presets: [
    [
      'classic',
      {
        docs: {
          sidebarPath: './sidebars.ts',
          editUrl: 'https://github.com/AvengeMedia/DankLinux-Docs/tree/master',
          lastVersion: '1.2',
          versions: {
            current: {
              label: '1.4',
              path: '1.4',
              banner: 'unreleased',
            },
            '1.2': {
              label: '1.2',
              path: '',
            },
          },
        },
        blog: {
          showReadingTime: true,
          blogTitle: 'Dank Linux Blog',
          blogDescription: 'News, releases, and updates from the Dank Linux project.',
          blogSidebarTitle: 'Recent Posts',
          blogSidebarCount: 5,
          feedOptions: {
            type: ['rss', 'atom'],
            copyright: `Copyright © ${new Date().getFullYear()} Dank Linux`,
          },
        },
        theme: {
          customCss: './src/css/custom.css',
        },
      } satisfies Preset.Options,
    ],
  ],

  markdown: {
    mermaid: true,
  },
  themes: ['@docusaurus/theme-mermaid'],

  plugins: [
    [
      require.resolve('@easyops-cn/docusaurus-search-local'),
      {
        hashed: true,
        language: ['en'],
        highlightSearchTermsOnTargetPage: true,
        explicitSearchResultPath: true,
      },
    ],
    [
      require.resolve('plugin-image-zoom'),
      {
        id: 'image-zoom-fullscreen',
      },
    ],
    [
      require.resolve('@actinc/docusaurus-plugin-panzoom'),
      {
        id: 'mermaid-panzoom',
      },
    ],
    [
      '@dipakparmar/docusaurus-plugin-umami',
      {
        websiteID: 'b79205dd-087a-4fbd-b7d7-c60650c76414',
        analyticsDomain: 'umami.danklinux.com',
        dataAutoTrack: true,
        dataDomains: 'danklinux.com',
      },
    ],
    [
      '@acid-info/docusaurus-og',
      {
        path: './preview-images',
        imageRenderers: {
          'docusaurus-plugin-content-docs': require('./lib/ImageRenderers').docs,
          'docusaurus-plugin-content-pages': require('./lib/ImageRenderers').pages,
          'docusaurus-plugin-content-blog': require('./lib/ImageRenderers').blog,
        },
      },
    ],
  ],

  themeConfig: {
    // Replace with your project's social card (fallback for pages without images)
    image: 'img/homepage/danklinux-preview.png',
    announcementBar: {
      id: 'dms-v1-release',
      content: '<span class="announcement-badge">New</span> <strong>DMS 1.2 Released!</strong> <a href="/blog/v1-2-release">Learn what\'s new in "Spicy Miso" →</a>',
      backgroundColor: 'var(--dank-purple-primary)',
      textColor: '#fff',
      isCloseable: true,
    },
    colorMode: {
      defaultMode: 'dark',
      respectPrefersColorScheme: true,
    },
    // Panzoom configuration for Mermaid diagrams only (images use fullscreen zoom)
    zoom: {
      selectors: [
        'div.mermaid[data-processed="true"]',
        'div.docusaurus-mermaid-container',
      ],
      wrap: true,
      timeout: 1000,
    },
    // Algolia DocSearch configuration (placeholder for future setup)
    // algolia: {
    //   appId: 'YOUR_APP_ID',
    //   apiKey: 'YOUR_SEARCH_API_KEY',
    //   indexName: 'danklinux',
    //   contextualSearch: true,
    // },
    navbar: {
      logo: {
        alt: 'Dank Linux Logo',
        src: 'img/path32_black.svg',
        srcDark: 'img/path32.svg',
      },
      items: [
        {
          to: '/docs/getting-started',
          label: 'Install',
          position: 'right',
          activeBasePath: '/docs/getting-started',
          className: 'navbar-install-link',
        },
        {
          to: '/docs/',
          label: 'Docs',
          position: 'right',
          activeBaseRegex: '^/docs(?!/getting-started|/dankmaterialshell/plugins-overview).*',
        },
        {
          to: '/plugins',
          label: 'Plugins & Themes',
          position: 'right',
          activeBasePath: '/plugins',
        },
        {
          to: '/blog',
          label: 'Blog',
          position: 'right',
        },
        {
          type: 'search',
          position: 'right',
        },
        {
          type: 'docsVersionDropdown',
          position: 'right',
          className: 'navbar-version-dropdown',
        },
        {
          href: 'https://github.com/AvengeMedia/DankMaterialShell',
          position: 'right',
          className: 'header-github-link',
          'aria-label': 'GitHub repository',
        },
        {
          href: 'https://discord.gg/ppWTpKmPgT',
          position: 'right',
          className: 'navbar-discord-link',
          'aria-label': 'Discord community',
        },
        {
          href: 'https://ko-fi.com/danklinux',
          position: 'right',
          className: 'navbar-kofi-link',
          'aria-label': 'Support on Ko-fi',
        },
      ],
    },
    footer: {
      style: 'dark',
      links: [
        {
          items: [
            {
              label: 'Install',
              to: '/docs/getting-started',
            },
            {
              label: 'Docs',
              to: '/docs/',
            },
            {
              label: 'Contributing',
              to: '/docs/contributing',
            },
          ],
        },
      ],
      copyright: `© ${new Date().getFullYear()} Dank Linux • Free Forever • MIT License`,
    },
    prism: {
      theme: dankPurpleLight,
      darkTheme: dankPurple,
      additionalLanguages: ['bash', 'json', 'yaml', 'toml', 'rust', 'python', 'javascript', 'typescript', 'qml'],
    },
  },
};

export default config;



================================================
FILE: package.json
================================================
{
  "name": "dms-docs-docusaurus",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "docusaurus": "docusaurus",
    "prestart": "tsc --project tsconfig.client.json",
    "start": "docusaurus start",
    "prebuild": "tsc --project tsconfig.client.json",
    "build": "docusaurus build",
    "swizzle": "docusaurus swizzle",
    "deploy": "docusaurus deploy",
    "clear": "docusaurus clear",
    "serve": "docusaurus serve",
    "write-translations": "docusaurus write-translations",
    "write-heading-ids": "docusaurus write-heading-ids",
    "typecheck": "tsc"
  },
  "dependencies": {
    "@acid-info/docusaurus-og": "^1.0.2",
    "@actinc/docusaurus-plugin-panzoom": "^1.0.1",
    "@dipakparmar/docusaurus-plugin-umami": "^2.4.0",
    "@docusaurus/core": "3.9.2",
    "@docusaurus/plugin-client-redirects": "^3.9.2",
    "@docusaurus/preset-classic": "3.9.2",
    "@docusaurus/theme-mermaid": "3.9.2",
    "@easyops-cn/docusaurus-search-local": "^0.52.2",
    "@mdx-js/react": "^3.0.0",
    "clsx": "^2.0.0",
    "plugin-image-zoom": "^1.2.0",
    "prism-react-renderer": "^2.3.0",
    "react": "^19.0.0",
    "react-dom": "^19.2.3"
  },
  "devDependencies": {
    "@docusaurus/module-type-aliases": "3.9.2",
    "@docusaurus/tsconfig": "3.9.2",
    "@docusaurus/types": "3.9.2",
    "typescript": "^5.9.3"
  },
  "browserslist": {
    "production": [
      ">0.5%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 3 chrome version",
      "last 3 firefox version",
      "last 5 safari version"
    ]
  },
  "engines": {
    "node": ">=20.0"
  },
  "overrides": {
    "lodash-es": "^4.17.21",
    "webpack-dev-server": "^5.2.1"
  }
}



================================================
FILE: sidebars.ts
================================================
import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';

// This runs in Node.js - Don't use client-side code here (browser APIs, JSX...)

/**
 * Creating a sidebar enables you to:
 - create an ordered group of docs
 - render a sidebar for each doc of that group
 - provide next/previous navigation

 The sidebars can be generated from the filesystem, or explicitly defined here.

 Create as many sidebars as you want.
 */
const sidebars: SidebarsConfig = {
  tutorialSidebar: [
    'index',
    'getting-started',
    'dankinstall',
    {
      type: 'category',
      label: 'DankMaterialShell (dms)',
      collapsed: false,
      items: [
        {
          type: 'doc',
          id: 'dankmaterialshell/overview',
          label: 'Overview & Architecture',
        },
        'dankmaterialshell/installation',
        {
          type: 'category',
          label: 'Installation - NixOS',
          collapsed: true,
          items: [
            {
              type: 'doc',
              id: 'dankmaterialshell/nixos',
              label: 'NixOS module',
            },
            {
              type: 'doc',
              id: 'dankmaterialshell/nixos-flake',
              label: 'Flake (NixOS/home-manager)',
            },
          ],
        },
        'dankmaterialshell/calendar-integration',
        {
          type: 'doc',
          id: 'dankmaterialshell/managing',
          label: 'Managing Your Installation',
        },
        'dankmaterialshell/compositors',
        'dankmaterialshell/layers',
        {
          type: 'category',
          label: 'Themes',
          collapsed: false,
          items: [
            'dankmaterialshell/application-themes',
            'dankmaterialshell/icon-theming',
            'dankmaterialshell/custom-themes',
          ],
        },
        'dankmaterialshell/keybinds-ipc',
        {
          type: 'category',
          label: 'CLI',
          collapsed: false,
          items: [
            'dankmaterialshell/cli-setup',
            'dankmaterialshell/cli-doctor',
            'dankmaterialshell/cli-process-management',
            'dankmaterialshell/cli-keybinds-cheatsheets',
            {
              type: 'doc',
              id: 'dankmaterialshell/cli-dank16',
              label: 'Dank16 (ANSI Colors)',
            },
            {
              type: 'doc',
              id: 'dankmaterialshell/cli-color-picker',
              label: 'Color Picker',
            },
            'dankmaterialshell/cli-brightness',
            {
              type: 'doc',
              id: 'dankmaterialshell/cli-clipboard',
              label: 'Clipboard Manager',
            },
            'dankmaterialshell/cli-screenshot',
          ],
        },
        {
          type: 'category',
          label: 'Plugins',
          collapsed: false,
          items: [
            'dankmaterialshell/plugins-overview',
            'dankmaterialshell/plugin-development',
          ],
        },
        'dankmaterialshell/advanced-configuration',
      ],
    },
    {
      type: 'category',
      label: 'DankLinux Repository',
      collapsed: false,
      items: [
        {
          type: 'doc',
          id: 'danklinux/index',
          label: 'Overview',
        },
      ],
    },
    {
      type: 'category',
      label: 'DankGreeter (dms-greeter)',
      collapsed: false,
      items: [
        {
          type: 'doc',
          id: 'dankgreeter/index',
          label: 'Overview',
        },
        'dankgreeter/installation',
        {
          type: 'category',
          label: 'Installation - NixOS',
          collapsed: true,
          items: [
            {
              type: 'doc',
              id: 'dankgreeter/nixos',
              label: 'NixOS module',
            },
            {
              type: 'doc',
              id: 'dankgreeter/nixos-flake',
              label: 'Flake',
            },
          ],
        },
        'dankgreeter/configuration',
      ],
    },
    {
      type: 'category',
      label: 'DankGOP (dgop)',
      collapsed: false,
      items: [
        {
          type: 'doc',
          id: 'dgop/index',
          label: 'Overview',
        },
        'dgop/installation',
        'dgop/configuration',
        'dgop/usage',
      ],
    },
    {
      type: 'category',
      label: 'DankSearch (dsearch)',
      collapsed: false,
      items: [
        {
          type: 'doc',
          id: 'danksearch/index',
          label: 'Overview',
        },
        'danksearch/installation',
        {
          type: 'category',
          label: 'Installation - NixOS',
          collapsed: true,
          items: [
            {
              type: 'doc',
              id: 'danksearch/nixos-flake',
              label: 'Flake (home-manager)',
            },
            {
              type: 'doc',
              id: 'danksearch/nixos',
              label: 'NixOS module',
            },
          ],
        },
        'danksearch/configuration',
        'danksearch/usage',
      ],
    },
    'contributing',
    {
      type: 'doc',
      id: 'contributing-registry',
      label: 'Contributing Plugins & Themes',
    },
    'support'
  ],
};

export default sidebars;



================================================
FILE: tsconfig.client.json
================================================
{
  "compilerOptions": {
    "noEmit": false,
    "composite": true,
    "incremental": true,
    "esModuleInterop": true,
    "tsBuildInfoFile": "./lib/.tsbuildinfo-client",
    "rootDir": "src",
    "outDir": "lib",
    "module": "CommonJS",
    "target": "esnext",
    "jsx": "react",
    "types": ["node"],
    "baseUrl": "./",
    "lib": ["DOM"],
    "skipLibCheck": true
  },
  "include": ["src/ImageRenderers.tsx"]
}



================================================
FILE: tsconfig.json
================================================
{
  // This file is not used in compilation. It is here just for a nice editor experience.
  "extends": "@docusaurus/tsconfig",
  "compilerOptions": {
    "baseUrl": "."
  },
  "exclude": [".docusaurus", "build"]
}



================================================
FILE: versions.json
================================================
[
  "1.2"
]



================================================
FILE: .dockerignore
================================================
# Dependencies
/node_modules

# Production
/build

# Generated files
.docusaurus
.cache-loader

# Misc
.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

npm-debug.log*
yarn-debug.log*
yarn-error.log*



================================================
FILE: blog/authors.yml
================================================
danklinux:
  name: Dank Linux Team
  url: https://github.com/AvengeMedia
  image_url: /img/apple-touch-icon.png
  socials:
    github: AvengeMedia



================================================
FILE: blog/tags.yml
================================================
release:
  label: 'Release'
  permalink: '/release'
  description: 'Major version releases and updates'

announcement:
  label: 'Announcement'
  permalink: '/announcement'
  description: 'Project announcements and news'



================================================
FILE: blog/2025-12-10-v1-release/index.mdx
================================================
---
title: DMS 1.0 "The Dark Knight" Released
description: DMS 1.0 is here! Read about the first major release of DankMaterialShell!
slug: v1-release
authors: danklinux
tags: [release, announcement]
---

import styles from './styles.module.css';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<div className={styles.blogHero}>
  <div className={styles.confetti} aria-hidden="true">
    {/* Far left edge */}
    <div style={{ position: 'absolute', top: '12%', left: '2%', transform: 'rotate(-15deg) scale(0.62)' }}>
      <span className={`${styles.bat} ${styles.bat1} ${styles.batAnim1}`} style={{ color: '#805AD5' }} />
    </div>
    <div style={{ position: 'absolute', top: '45%', left: '1%', transform: 'rotate(8deg) scale(0.7)' }}>
      <span className={`${styles.bat} ${styles.bat3} ${styles.batAnim3}`} style={{ color: '#9F7AEA' }} />
    </div>
    <div style={{ position: 'absolute', top: '75%', left: '3%', transform: 'rotate(-22deg) scale(0.58)' }}>
      <span className={`${styles.bat} ${styles.bat4} ${styles.batAnim2}`} style={{ color: '#B794F4' }} />
    </div>
    {/* Left inner - closer to text */}
    <div style={{ position: 'absolute', top: '8%', left: '12%', transform: 'rotate(5deg) scale(0.75)' }}>
      <span className={`${styles.bat} ${styles.bat2} ${styles.batAnim2}`} style={{ color: '#6B46C1' }} />
    </div>
    <div style={{ position: 'absolute', top: '32%', left: '15%', transform: 'rotate(-10deg) scale(0.65)' }}>
      <span className={`${styles.bat} ${styles.bat7} ${styles.batAnim1}`} style={{ color: '#805AD5' }} />
    </div>
    <div style={{ position: 'absolute', top: '58%', left: '10%', transform: 'rotate(18deg) scale(0.55)' }}>
      <span className={`${styles.bat} ${styles.bat1} ${styles.batAnim3}`} style={{ color: '#9F7AEA' }} />
    </div>
    <div style={{ position: 'absolute', top: '82%', left: '14%', transform: 'rotate(-8deg) scale(0.68)' }}>
      <span className={`${styles.bat} ${styles.bat3} ${styles.batAnim1}`} style={{ color: '#B794F4' }} />
    </div>
    {/* Top area - above text */}
    <div style={{ position: 'absolute', top: '5%', left: '28%', transform: 'rotate(12deg) scale(0.52)' }}>
      <span className={`${styles.bat} ${styles.bat4} ${styles.batAnim2}`} style={{ color: '#805AD5' }} />
    </div>
    <div style={{ position: 'absolute', top: '2%', left: '45%', transform: 'rotate(-6deg) scale(0.6)' }}>
      <span className={`${styles.bat} ${styles.bat2} ${styles.batAnim3}`} style={{ color: '#6B46C1' }} />
    </div>
    <div style={{ position: 'absolute', top: '8%', left: '68%', transform: 'rotate(20deg) scale(0.48)' }}>
      <span className={`${styles.bat} ${styles.bat1} ${styles.batAnim1}`} style={{ color: '#9F7AEA' }} />
    </div>
    {/* Bottom area - below text */}
    <div style={{ position: 'absolute', top: '88%', left: '32%', transform: 'rotate(-18deg) scale(0.55)' }}>
      <span className={`${styles.bat} ${styles.bat3} ${styles.batAnim3}`} style={{ color: '#B794F4' }} />
    </div>
    <div style={{ position: 'absolute', top: '92%', left: '55%', transform: 'rotate(10deg) scale(0.62)' }}>
      <span className={`${styles.bat} ${styles.bat7} ${styles.batAnim1}`} style={{ color: '#805AD5' }} />
    </div>
    <div style={{ position: 'absolute', top: '85%', left: '72%', transform: 'rotate(-12deg) scale(0.5)' }}>
      <span className={`${styles.bat} ${styles.bat4} ${styles.batAnim2}`} style={{ color: '#6B46C1' }} />
    </div>
    {/* Right inner - closer to text */}
    <div style={{ position: 'absolute', top: '10%', left: '82%', transform: 'rotate(-14deg) scale(0.72)' }}>
      <span className={`${styles.bat} ${styles.bat2} ${styles.batAnim3}`} style={{ color: '#B794F4' }} />
    </div>
    <div style={{ position: 'absolute', top: '35%', left: '78%', transform: 'rotate(8deg) scale(0.58)' }}>
      <span className={`${styles.bat} ${styles.bat1} ${styles.batAnim2}`} style={{ color: '#805AD5' }} />
    </div>
    <div style={{ position: 'absolute', top: '55%', left: '84%', transform: 'rotate(-20deg) scale(0.65)' }}>
      <span className={`${styles.bat} ${styles.bat3} ${styles.batAnim1}`} style={{ color: '#9F7AEA' }} />
    </div>
    <div style={{ position: 'absolute', top: '78%', left: '80%', transform: 'rotate(15deg) scale(0.6)' }}>
      <span className={`${styles.bat} ${styles.bat7} ${styles.batAnim3}`} style={{ color: '#6B46C1' }} />
    </div>
    {/* Far right edge */}
    <div style={{ position: 'absolute', top: '18%', left: '94%', transform: 'rotate(22deg) scale(0.65)' }}>
      <span className={`${styles.bat} ${styles.bat4} ${styles.batAnim1}`} style={{ color: '#B794F4' }} />
    </div>
    <div style={{ position: 'absolute', top: '48%', left: '96%', transform: 'rotate(-5deg) scale(0.72)' }}>
      <span className={`${styles.bat} ${styles.bat2} ${styles.batAnim2}`} style={{ color: '#805AD5' }} />
    </div>
    <div style={{ position: 'absolute', top: '70%', left: '93%', transform: 'rotate(16deg) scale(0.55)' }}>
      <span className={`${styles.bat} ${styles.bat1} ${styles.batAnim3}`} style={{ color: '#9F7AEA' }} />
    </div>
  </div>
  <div className={styles.heroContent}>
    <h1 className={styles.heroTitle}>
      DMS <span className={styles.gradientText}>1.0</span>
    </h1>
    <p className={styles.heroSubtitle}>The Dark Knight</p>
  </div>
</div>

We're excited to announce DankMaterialShell (DMS) 1.0! ~ DMS is a Desktop Shell for Wayland Compositors built with [Quickshell](https://quickshell.org/) & GO.

What started as a small hobby project has grown into a full desktop shell and application suite with thousands of users and dozens of contributors - with first class support for [niri](https://github.com/niri-wm/niri), [Hyprland](https://hypr.land), [Sway](https://swaywm.org), [MangoWC](https://mangowc.vercel.app/), and [LabWC](https://labwc.github.io/). As well as general support for all compositors implementing select wayland protocols.

{/* truncate */}

This release marks more than just a version number, it's a commitment to stability and predictability. Going forward, DMS will follow a milestone/roadmap-based release cycle, with bug-fix releases as needed in-between major versions.

DMS has come a long way since its inception, and we're excited to pivot towards a more structured development process - which represents a step towards making DMS a mainstream Linux desktop project.

<div className={styles.statsGrid} style={{ gridTemplateColumns: 'repeat(2, 1fr)', maxWidth: '600px' }}>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>2,300+</span>
    <span className={styles.statLabel}>Commits</span>
  </div>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>2.4k+</span>
    <span className={styles.statLabel}>GitHub Stars</span>
  </div>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>75+</span>
    <span className={styles.statLabel}>Contributors</span>
  </div>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>26</span>
    <span className={styles.statLabel}>Community Plugins</span>
  </div>
</div>

## What's New

### OMEGA Bar

Add up to **4** bar configurations, each with their own set of widgets, layout, and style. Configure which monitor each bar appears on and independently control each bar with new [IPCs](/docs/dankmaterialshell/keybinds-ipc#bar).

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Omega Bars"
    sources={{
      light: useBaseUrl('/img/blog/v1/omegabar_light.png'),
      dark: useBaseUrl('/img/blog/v1/omegabar_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Multiple bar configurations with independent widgets and styles</figcaption>
</figure>

### Comprehensive Keyboard Shortcuts (niri)

Configure global keyboard shortcuts - available to niri users. Requires quickshell version from DankLinux repositories or quickshell-git from AUR.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Keyboard Shortcuts"
    sources={{
      light: useBaseUrl('/img/blog/v1/keybinds_light.png'),
      dark: useBaseUrl('/img/blog/v1/keybinds_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Keyboard shortcuts configuration with conflict detection</figcaption>
</figure>

### Printer Management (CUPS)

Manage printers directly from DMS Settings with CUPS integration. Add, remove, and configure printers with ease. A new control center widget allows viewing printers and managing print jobs.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Printer Management"
    sources={{
      light: useBaseUrl('/img/blog/v1/printers_light.png'),
      dark: useBaseUrl('/img/blog/v1/printers_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>CUPS printer management with status monitoring and job control</figcaption>
</figure>

### Comprehensive Network Management

Comprehensive network view with support for NetworkManager, IWD, and systemd-networkd. Import VPN profiles, manage connections, and connect to Wi-Fi networks.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Network Management"
    sources={{
      light: useBaseUrl('/img/blog/v1/network_light.png'),
      dark: useBaseUrl('/img/blog/v1/network_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Network settings with WiFi and VPN management</figcaption>
</figure>

### Polkit Agent

DMS now includes its own Polkit agent for handling privilege escalation requests. No more need for external polkit agents like `polkit-gnome`, `mate-polkit`, or `kde-polkit`.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Polkit Agent"
    sources={{
      light: useBaseUrl('/img/blog/v1/polkit_light.png'),
      dark: useBaseUrl('/img/blog/v1/polkit_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Native polkit authentication dialog for privilege escalation</figcaption>
</figure>

### File-Type Associations

Set default applications for different file types and protocols directly from DMS Settings. Easily manage which apps open specific file formats and choose your preferred applications for handling various file types and links. See the [desktop integration documentation](/docs/dankmaterialshell/overview#desktop-integration).

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="App Picker"
    sources={{
      light: useBaseUrl('/img/blog/v1/apppicker_light.png'),
      dark: useBaseUrl('/img/blog/v1/apppicker_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Open with dialog for selecting default applications</figcaption>
</figure>

Special thanks to [@devnullvoid](https://github.com/devnullvoid) for the contribution.

### Dank Color Picker

The color picker is not new, but the eye dropper/color picker tool is now built-in to DMS - no more need for third-party tools! It is now integrated into DMS and available as a standalone tool for Wayland compositors. See the [CLI color picker documentation](https://danklinux.com/docs/dankmaterialshell/cli-color-picker).

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Color Picker"
    sources={{
      light: useBaseUrl('/img/blog/v1/colorpick_light.png'),
      dark: useBaseUrl('/img/blog/v1/colorpick_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Pick colors from anywhere on your screen with multiple output formats</figcaption>
</figure>

### Dank Screenshot

DMS now ships with its own screenshot tool - no need for grim, slurp, or grimblast anymore. Capture a region, a single screen, all screens, or currently focused window (Hyprland/MangoWC/DWL only). Save to clipboard, file, stdout, or mix and match. Get notified when it's done. Supports PNG, JPEG, and PPM formats. See the [CLI screenshot documentation](https://danklinux.com/docs/dankmaterialshell/cli-screenshot).

Compatible with many Wayland compositors including Hyprland, Sway, MangoWC, and niri.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Screenshot Tool"
    sources={{
      light: useBaseUrl('/img/blog/v1/screenshot_light.png'),
      dark: useBaseUrl('/img/blog/v1/screenshot_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Region selection with live dimensions across multiple monitors</figcaption>
</figure>

### DMS Plugin System

DMS features a powerful plugin system that allows developers and enthusiasts to extend the shell with custom functionality. The plugin ecosystem now includes 26 community-created plugins, with 6 new additions since the v0.6.2 release. From system utilities to creative tools, the plugin system makes it possible to add custom widgets, integrate with external services, or build entirely new features on top of DMS.

Explore the [full plugins directory](https://danklinux.com/plugins) to discover community contributions including wallpaper engines, system monitors, media controls, container management, and more. New plugins are being added regularly as the community continues to build amazing extensions.

<figure style={{ textAlign: 'center' }}>
  <img
    src={useBaseUrl('/img/blog/v1/dms_plugins.png')}
    alt="DMS Plugin System"
    style={{ maxWidth: '600px', width: '100%', borderRadius: '8px' }}
  />
  <figcaption>26 community plugins extending DMS functionality</figcaption>
</figure>

Special thanks to [rochacbruno](https://github.com/rochacbruno) for developing and iterating on the plugin system, as well as maintaining the [plugin registry](https://github.com/AvengeMedia/dms-plugin-registry).

## Packages for Ubuntu, Debian, OpenSUSE, Fedora, CentOS, and Arch Linux

<div className={`${styles.distroMashup} ${styles.noZoom}`}>
  <div className={styles.distroOrbit}>
    <img src={useBaseUrl('/img/path32.svg')} alt="DMS" className={styles.distroCenterLogo} />
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/arch.svg')} alt="Arch Linux" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/fedora.svg')} alt="Fedora" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/suse.svg')} alt="openSUSE" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/debian.svg')} alt="Debian" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/ubuntu.svg')} alt="Ubuntu" /></div>
  </div>
</div>

DMS is now available through the [DankLinux Repository](/docs/danklinux) with official packages for Ubuntu, Debian, OpenSUSE, and Fedora/CentOS via PPA, OBS, and COPR. Arch Linux users can grab it from the Arch User Repository (AUR).

This includes not only DMS itself but also core dependencies that may be used with or without DMS including:

- **niri** - Ubuntu, Debian, and OpenSUSE (includes **xwayland-satellite**)
- **quickshell** - Ubuntu, Debian, OpenSUSE, and Fedora
- **dgop** - All supported distributions
- **dsearch** - All supported distributions
- **dms-greeter** - AUR, Fedora, and Ubuntu (more via DankInstaller)
- **matugen** - Ubuntu, Debian, OpenSUSE, and Fedora
- **cliphist** - All supported distributions
- **ghostty** - Fedora, Debian and Ubuntu

*Development packages/nightly builds are also available via the same repositories*

### Available on nixpkgs

<div className={styles.noZoom}>
  <a href="https://search.nixos.org/options?channel=unstable&query=dms-" style={{ display: 'inline-block', margin: '1rem 0' }}>
    <ThemedImage
      alt="Packaged for Nixpkgs"
      sources={{
        light: useBaseUrl('/img/distros/nixpkgs-light.svg'),
        dark: useBaseUrl('/img/distros/nixpkgs-dark.svg'),
      }}
      style={{ maxWidth: '240px' }}
    />
  </a>
</div>

DMS is now available on nixpkgs unstable. This simplifies installation significantly for NixOS users and those using Nix package manager and represents a major step towards broader adoption. Check the available options on [search.nixos.org](https://search.nixos.org/options?channel=unstable&query=dms-).

Special thanks to [@LuckShiba](https://github.com/LuckShiba) for creating the nixpkgs package and [@marcusramberg](https://github.com/marcusramberg) for approving!

## More than just a Shell

DMS has become more than just a desktop shell. It is a comprehensive suite of tools that provide core desktop features in a cohesive, integrated way - or as completely standalone utilities to enrich non-DMS desktops.


- **DankMaterialShell (qml)** - The quickshell-based part of the shell
- **DankMaterialShell (go)** - A comprehensive backend service and suite of tools
  - **Dank16** - A contrast-aware color palette generator for Base16-style themes
  - **Matugen** - A custom matugen runner that enriches matugen templates with Dank16 and custom colors
  - **Brightness** - A complete management CLI and socket service for backlight, LED, and ddc/ci brightness control.
  - **Networking** - Native dbus integration with NetworkManager, IWD, and systemd-networkd for comprehensive network management - including VPNs, WiFi, and Ethernet.
  - **Keybinds** - A complete keybinds system with pluggable providers for reading and writing keybinds for cheatsheets and management interfaces.
  - **Color Picker** - A CLI color picker with multiple output formats and an eye dropper tool for Wayland.
  - **Screenshot** - A complete screenshot tool with region selection, window capture, and multiple output formats.
  - **Plugins** - A plugin system for extending the shell and launcher with custom functionality.
- **dgop** - A stateless system monitoring tool with a unique cursor-based approach. CLI and fully documented (With OpenAPI 3.1) REST API.
- **dsearch** - A blazingly fast, indexed filesystem search server with incremental indexes. Fully configurable - choose depth, folders, exclusions, metadata, content, and more. CLI, Unix Socket, and Rest API.

**TL;DR** *DMS* replaces many tools commonly used for Wayland desktops. No `brightnessctl`, `ddcutil`, `grimblast`, `nmcli`, `iwctl`, `grim`, `slurp`, `wofi`, `fuzzel`, `swayidle`, `hyprlock`, `mate/gnome/kde polkit`, `mako/dunst`, `hyprpicker`, `sddm`, or (a bunch of other stuff) needed anymore. Fully optional, and completely standalone from DMS itself.

## Bug Fixes and Improvements

<details style={{
  border: '1px solid rgba(128, 90, 213, 0.3)',
  borderRadius: '8px',
  padding: '1rem',
  margin: '1.5rem 0',
  background: 'linear-gradient(135deg, rgba(128, 90, 213, 0.08) 0%, rgba(107, 70, 193, 0.04) 100%)',
  backdropFilter: 'blur(8px)'
}}>
<summary style={{
  cursor: 'pointer',
  fontWeight: '600',
  fontSize: '1.1em',
  marginBottom: '1rem',
  userSelect: 'none',
  padding: '0.25rem 0.5rem',
  borderRadius: '4px',
  transition: 'all 0.2s ease',
  display: 'flex',
  alignItems: 'center',
  gap: '0.5rem',
  listStyle: 'none'
}} id="bug-fixes-summary">|- View Details (300+ commits) -|</summary>

Since the last v0.6.2 release, DMS has received extensive bug fixes and stability improvements across all components:

**Screenshot & Color Picker**
- Handle 24-bit frames from compositor and RGB888 bit flipping
- Color space and scaling fixes
- Handle transformed and multi-monitor displays
- Save button display fixes with eye dropper
- Fallback to niri picker when on niri

**Bar & Dock**
- Center section positioning and border thickness fixes
- Privacy indicator background color alignment
- Transparency handling improvements (>95% opacity, window-rules)
- Opacity binding and early-return fixes
- Maximize detection, scroll handling, and widget background options
- IPC reliability when screens change
- Auto-hide flickering and popout interaction fixes

**Display & Monitors**
- Workspace overview truncation and scaling (Hyprland)
- Physical vs. logical resolution display
- Icon vertical alignment in monitor widgets

**Audio & Media**
- Audio slider binding in control center
- Output device switching IPC and OSD
- Media control column positioning (bar awareness)
- Media OSD suppression on new players
- Player button control popup display

**Network & VPN**
- VPN icon consistency and lock screen status
- VPN password prompting fixes
- Binding loop fixes

**Keyboard & Input**
- Alt+Shift and KDL parsing for keybinds
- Keybind tab issues (niri)
- Capslock detection for devices without LED
- Window close on Esc prevention
- Context menu keyboard navigation

**Brightness & Gamma**
- Non-automation toggling fixes
- Night mode on startup
- DDC device erasure and OSD behavior
- Per-display pinned device IPCs
- Udev monitor integration for brightness events

**Settings & System**
- Weather setting (greeter)
- Mango config override (greeter)
- Launcher tab sizing
- Settings window scrollable areas
- Custom themes and font family handling

**Notifications & UI**
- Keyboard navigation in notification popout
- Button widget binding loops
- ProcessList context menu visibility
- Excessive repaints in modals
- DnD tooltip display

**Lock Screen & Power**
- VPN icon consistency
- Single-display lock screen option
- Hold-style confirmation for power actions
- Profile OSD and DBus activation

**Wallpaper & Themes**
- Per-monitor wallpaper display
- Wallpaper cycling
- Privacy widget background colors

**Build & Distribution**
- NixOS fprintd unlock, TUI startup crash, and systemd service PATH
- DMS CLI versioning in all builds
- IPC argument handling
- OpenSUSE package directory and hash versioning
- Hyprland configuration syntax
- NixOS nativeBuildInputs

**Plugin System**
- Plugin reactivity and tooltip updates
- Plugin popout binding and reload IPCs

And many more targeted fixes across the entire codebase to ensure stability and reliability across all supported compositors (Hyprland, Sway, niri, MangoWC, LabWC, and DWL).

</details>

## Resources

<a href="/docs/getting-started" className={styles.getStartedLink}>
  Get Started with DMS <span>→</span>
</a>

<div className={styles.linksRow}>
  <a href="https://github.com/AvengeMedia/DankMaterialShell" className={styles.supportLink}>GitHub</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://danklinux.com/docs/" className={styles.supportLink}>Documentation</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://plugins.danklinux.com" className={styles.supportLink}>Plugins</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://discord.gg/ppWTpKmPgT" className={styles.supportLink}>Discord</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://github.com/sponsors/AvengeMedia" className={styles.supportLink}>Sponsor on GitHub</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://ko-fi.com/danklinux" className={styles.supportLink}>Support on Ko-fi</a>
</div>

<div className={styles.niriThanks}>
  <img src={useBaseUrl('/img/niri.svg')} alt="niri" />
  <span>Special thanks to <a href="https://github.com/YaLTeR">YaLTeR</a> for collaborating with the DMS team, for <a href="https://github.com/niri-wm/niri">niri</a> - the compositor that inspired DMS, and for hosting DMS on the <a href="https://discord.gg/ppWTpKmPgT">niri Discord</a>.</span>
</div>
<div className={styles.thankYouHero}>
  <div className={styles.confetti} aria-hidden="true" />
  <div className={styles.heroContent}>
    <h2 className={styles.thankYouTitle}>
      Thank <span className={styles.gradientText}>You</span>
    </h2>
    <p className={styles.thankYouText}>
      To everyone who has supported DMS through feedback, contributions, sponsorships, donations, and packaging.
    </p>
    <p className={styles.thankYouTagline}>
      Here's to many more releases ahead!
    </p>
  </div>
</div>



================================================
FILE: blog/2025-12-10-v1-release/styles.module.css
================================================
/* ===== BLOG HERO ===== */
.blogHero {
  position: relative;
  padding: 3rem 2rem;
  margin: 1rem -1rem 3rem -1rem;
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(208, 188, 255, 0.2) 0%, transparent 60%),
    linear-gradient(180deg, rgba(128, 90, 213, 0.06) 0%, transparent 100%);
  border-radius: 24px;
  overflow: hidden;
}

[data-theme='light'] .blogHero {
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(128, 90, 213, 0.15) 0%, transparent 60%),
    linear-gradient(180deg, rgba(128, 90, 213, 0.04) 0%, transparent 100%);
}

/* Bat silhouettes - Dark Knight theme */
.confetti {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

/* Individual bat silhouettes */
.confetti::before,
.confetti::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
}

/* Sparkle particles (subtle background) */
.confetti::before {
  background-image:
    radial-gradient(circle at 10% 20%, #D0BCFF 1.5px, transparent 1.5px),
    radial-gradient(circle at 40% 70%, #805AD5 1.5px, transparent 1.5px),
    radial-gradient(circle at 70% 25%, #B794F4 1px, transparent 1px),
    radial-gradient(circle at 90% 60%, #9F7AEA 1.5px, transparent 1.5px),
    radial-gradient(circle at 25% 85%, #D0BCFF 1px, transparent 1px),
    radial-gradient(circle at 60% 45%, #805AD5 1.5px, transparent 1.5px),
    radial-gradient(circle at 85% 80%, #B794F4 1px, transparent 1px),
    radial-gradient(circle at 15% 50%, #9F7AEA 1px, transparent 1px),
    radial-gradient(circle at 22% 32%, #D0BCFF 1.5px, transparent 1.5px),
    radial-gradient(circle at 78% 55%, #805AD5 1px, transparent 1px),
    radial-gradient(circle at 52% 18%, #B794F4 1.5px, transparent 1.5px),
    radial-gradient(circle at 8% 75%, #9F7AEA 1px, transparent 1px),
    radial-gradient(circle at 88% 28%, #D0BCFF 1px, transparent 1px),
    radial-gradient(circle at 33% 58%, #805AD5 1.5px, transparent 1.5px),
    radial-gradient(circle at 67% 82%, #B794F4 1px, transparent 1px),
    radial-gradient(circle at 45% 12%, #9F7AEA 1.5px, transparent 1.5px);
  opacity: 0.5;
  animation: sparkle 3s ease-in-out infinite;
}

/* More sparkles offset */
.confetti::after {
  background-image:
    radial-gradient(circle at 5% 65%, #B794F4 1px, transparent 1px),
    radial-gradient(circle at 35% 15%, #D0BCFF 1.5px, transparent 1.5px),
    radial-gradient(circle at 55% 90%, #805AD5 1px, transparent 1px),
    radial-gradient(circle at 80% 40%, #9F7AEA 1.5px, transparent 1.5px),
    radial-gradient(circle at 95% 10%, #B794F4 1px, transparent 1px),
    radial-gradient(circle at 45% 35%, #D0BCFF 1px, transparent 1px),
    radial-gradient(circle at 18% 42%, #805AD5 1px, transparent 1px),
    radial-gradient(circle at 62% 68%, #B794F4 1.5px, transparent 1.5px),
    radial-gradient(circle at 28% 8%, #9F7AEA 1px, transparent 1px),
    radial-gradient(circle at 82% 72%, #D0BCFF 1.5px, transparent 1.5px),
    radial-gradient(circle at 12% 88%, #805AD5 1px, transparent 1px),
    radial-gradient(circle at 72% 38%, #B794F4 1px, transparent 1px),
    radial-gradient(circle at 38% 78%, #9F7AEA 1.5px, transparent 1.5px),
    radial-gradient(circle at 92% 48%, #D0BCFF 1px, transparent 1px);
  opacity: 0.4;
  animation: sparkle 3s ease-in-out infinite 1.5s;
}

@keyframes sparkle {
  0%, 100% { opacity: 0.2; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.02); }
}

/* Bat silhouettes with scalloped wing edges */
.bat {
  position: absolute;
  opacity: 0.55;
}

.bat::before {
  content: '';
  position: absolute;
  inset: 0;
  background: currentColor;
}

/* Bat 1 - Thinner bat */
.bat1 {
  width: 56px;
  height: 22px;
}
.bat1::before {
  clip-path: polygon(
    45% 25%, 50% 35%, 55% 25%,
    60% 35%, 70% 25%, 85% 15%,
    100% 30%,
    85% 50%, 75% 40%, 65% 55%, 58% 45%,
    50% 65%,
    42% 45%, 35% 55%, 25% 40%, 15% 50%,
    0% 30%,
    15% 15%, 30% 25%, 40% 35%
  );
}

/* Bat 2 - Thinner bat */
.bat2 {
  width: 52px;
  height: 22px;
}
.bat2::before {
  clip-path: polygon(
    45% 25%, 50% 35%, 55% 25%,
    60% 35%, 70% 25%, 85% 15%,
    100% 30%,
    85% 50%, 75% 40%, 65% 55%, 58% 45%,
    50% 65%,
    42% 45%, 35% 55%, 25% 40%, 15% 50%,
    0% 30%,
    15% 15%, 30% 25%, 40% 35%
  );
}

/* Bat 3 - Thinner bat */
.bat3 {
  width: 54px;
  height: 18px;
}
.bat3::before {
  clip-path: polygon(
    45% 25%, 50% 35%, 55% 25%,
    60% 35%, 70% 25%, 85% 15%,
    100% 30%,
    85% 50%, 75% 40%, 65% 55%, 58% 45%,
    50% 65%,
    42% 45%, 35% 55%, 25% 40%, 15% 50%,
    0% 30%,
    15% 15%, 30% 25%, 40% 35%
  );
}

/* Bat 4 - Thinner bat */
.bat4 {
  width: 50px;
  height: 18px;
}
.bat4::before {
  clip-path: polygon(
    45% 25%, 50% 35%, 55% 25%,
    60% 35%, 70% 25%, 85% 15%,
    100% 30%,
    85% 50%, 75% 40%, 65% 55%, 58% 45%,
    50% 65%,
    42% 45%, 35% 55%, 25% 40%, 15% 50%,
    0% 30%,
    15% 15%, 30% 25%, 40% 35%
  );
}

/* Bat 7 - Right middle bat, keep normal proportions */
.bat7 {
  width: 60px;
  height: 26px;
}
.bat7::before {
  clip-path: polygon(
    45% 25%, 50% 35%, 55% 25%,
    60% 35%, 70% 25%, 85% 15%,
    100% 30%,
    85% 50%, 75% 40%, 65% 55%, 58% 45%,
    50% 65%,
    42% 45%, 35% 55%, 25% 40%, 15% 50%,
    0% 30%,
    15% 15%, 30% 25%, 40% 35%
  );
}

/* Bat animation classes */
.batAnim1 {
  animation: batFly1 6s ease-in-out infinite;
}

.batAnim2 {
  animation: batFly2 7s ease-in-out infinite 1s;
}

.batAnim3 {
  animation: batFly3 8s ease-in-out infinite 2s;
}

/* Bat animations - subtle floating motion */
@keyframes batFly1 {
  0%, 100% {
    transform: translateY(0) translateX(0) scale(1) rotate(0deg) rotateX(0deg) rotateY(0deg);
    opacity: 0.55;
  }
  33% {
    transform: translateY(-3px) translateX(2px) scale(1.03) rotate(10deg) rotateX(6deg) rotateY(-5deg);
    opacity: 0.6;
  }
  66% {
    transform: translateY(-1px) translateX(-1px) scale(0.98) rotate(-8deg) rotateX(-5deg) rotateY(4deg);
    opacity: 0.57;
  }
}

@keyframes batFly2 {
  0%, 100% {
    transform: translateY(0) translateX(0) scale(1) rotate(0deg) rotateX(0deg) rotateY(0deg);
    opacity: 0.5;
  }
  33% {
    transform: translateY(-4px) translateX(-2px) scale(0.97) rotate(-10deg) rotateX(-6deg) rotateY(5deg);
    opacity: 0.58;
  }
  66% {
    transform: translateY(-2px) translateX(1px) scale(1.02) rotate(8deg) rotateX(5deg) rotateY(-4deg);
    opacity: 0.54;
  }
}

@keyframes batFly3 {
  0%, 100% {
    transform: translateY(0) translateX(0) scale(1) rotate(0deg) rotateX(0deg) rotateY(0deg);
    opacity: 0.52;
  }
  33% {
    transform: translateY(-2px) translateX(3px) scale(1.02) rotate(8deg) rotateX(5deg) rotateY(-6deg);
    opacity: 0.58;
  }
  66% {
    transform: translateY(-3px) translateX(-2px) scale(0.98) rotate(-10deg) rotateX(-6deg) rotateY(5deg);
    opacity: 0.55;
  }
}

.heroContent {
  position: relative;
  text-align: center;
  z-index: 1;
}

.heroTitle {
  font-size: clamp(3.5rem, 10vw, 6rem);
  font-weight: 800;
  line-height: 1;
  margin: 0;
  letter-spacing: -0.04em;
}

.gradientText {
  background: linear-gradient(135deg, #D0BCFF, #805AD5);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  padding-right: 0.05em;
}

[data-theme='light'] .gradientText {
  background: linear-gradient(135deg, #805AD5, #6B46C1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.heroSubtitle {
  font-size: clamp(0.9rem, 2.5vw, 1.2rem);
  font-weight: 600;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: rgba(208, 188, 255, 0.4);
  margin-top: 0.5rem;
}

[data-theme='light'] .heroSubtitle {
  color: rgba(128, 90, 213, 0.35);
}


/* ===== STATS GRID ===== */
.statsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1.5rem;
  margin: 3rem 0;
}

.statCard {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem 1.5rem;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(208, 188, 255, 0.15);
  border-radius: 20px;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  overflow: hidden;
}

[data-theme='light'] .statCard {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(128, 90, 213, 0.2);
}

.statCard::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, rgba(208, 188, 255, 0.1), transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.statCard:hover {
  transform: translateY(-4px);
  border-color: rgba(208, 188, 255, 0.3);
  box-shadow: 0 12px 40px rgba(208, 188, 255, 0.15);
}

[data-theme='light'] .statCard:hover {
  border-color: rgba(128, 90, 213, 0.4);
  box-shadow: 0 12px 40px rgba(128, 90, 213, 0.15);
}

.statCard:hover::before {
  opacity: 1;
}

.statNumber {
  font-size: clamp(2.5rem, 5vw, 3.5rem);
  font-weight: 800;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, #D0BCFF, #805AD5);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.1;
}

[data-theme='light'] .statNumber {
  background: linear-gradient(135deg, #805AD5, #6B46C1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.statLabel {
  font-size: 1rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.7);
  margin-top: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

[data-theme='light'] .statLabel {
  color: rgba(26, 22, 37, 0.6);
}

/* ===== GET STARTED LINK ===== */
.getStartedLink {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  font-weight: 500;
  color: #D0BCFF;
  text-decoration: none;
  transition: gap 0.2s ease;
}

.getStartedLink:hover {
  gap: 0.6rem;
  text-decoration: underline;
}

[data-theme='light'] .getStartedLink {
  color: #805AD5;
}

.linksRow {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.75rem;
  font-size: 0.95rem;
}

.supportLink {
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
}

.supportLink:hover {
  color: #D0BCFF;
  text-decoration: underline;
}

[data-theme='light'] .supportLink {
  color: rgba(0, 0, 0, 0.6);
}

[data-theme='light'] .supportLink:hover {
  color: #805AD5;
}

.linkDivider {
  color: rgba(255, 255, 255, 0.3);
}

[data-theme='light'] .linkDivider {
  color: rgba(0, 0, 0, 0.3);
}

/* ===== THANK YOU HERO ===== */
.thankYouHero {
  position: relative;
  padding: 2.5rem 2rem;
  margin: 3rem -1rem 1rem -1rem;
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(208, 188, 255, 0.2) 0%, transparent 60%),
    linear-gradient(180deg, rgba(128, 90, 213, 0.06) 0%, transparent 100%);
  border-radius: 24px;
  overflow: hidden;
}

[data-theme='light'] .thankYouHero {
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(128, 90, 213, 0.15) 0%, transparent 60%),
    linear-gradient(180deg, rgba(128, 90, 213, 0.04) 0%, transparent 100%);
}

.thankYouTitle {
  font-size: clamp(2.5rem, 8vw, 4rem);
  font-weight: 800;
  line-height: 1;
  margin: 0 0 1rem 0;
  letter-spacing: -0.04em;
}

.thankYouText {
  font-size: 1.1rem;
  color: rgba(255, 255, 255, 0.8);
  margin: 0 auto 0.5rem;
  max-width: 500px;
  text-align: center;
}

[data-theme='light'] .thankYouText {
  color: rgba(26, 22, 37, 0.7);
}

.thankYouTagline {
  font-size: 1rem;
  font-weight: 600;
  color: #D0BCFF;
  margin: 0;
}

[data-theme='light'] .thankYouTagline {
  color: #805AD5;
}

/* ===== NO ZOOM ===== */
.noZoom,
.noZoom img {
  cursor: default !important;
  pointer-events: none;
}

.noZoom a {
  pointer-events: auto;
  cursor: pointer;
}

/* ===== DISTRO MASHUP ===== */
.distroMashup {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  margin: 1rem auto 0;
  max-width: 400px;
  aspect-ratio: 1;
}

.distroOrbit {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.distroOrbit::before {
  content: '';
  position: absolute;
  width: 66%;
  height: 66%;
  border: 2px dashed rgba(208, 188, 255, 0.2);
  border-radius: 50%;
}

[data-theme='light'] .distroOrbit::before {
  border-color: rgba(128, 90, 213, 0.2);
}

.distroCenterLogo {
  position: absolute;
  width: 120px;
  height: 120px;
  z-index: 10;
  filter: drop-shadow(0 8px 24px rgba(208, 188, 255, 0.4));
  cursor: default;
}

[data-theme='light'] .distroCenterLogo {
  filter: drop-shadow(0 8px 24px rgba(128, 90, 213, 0.3));
}

.distroLogo {
  position: absolute;
  width: 56px;
  height: 56px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 16px;
  backdrop-filter: blur(8px);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: default;
}

[data-theme='light'] .distroLogo {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(128, 90, 213, 0.2);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.distroLogo:hover {
  transform: scale(1.15);
  border-color: rgba(208, 188, 255, 0.5);
  box-shadow: 0 8px 24px rgba(208, 188, 255, 0.3);
}

[data-theme='light'] .distroLogo:hover {
  border-color: rgba(128, 90, 213, 0.4);
  box-shadow: 0 8px 24px rgba(128, 90, 213, 0.2);
}

.distroLogo img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Position distros evenly in a circle (72° apart, radius ~32%) */
.distroLogo:nth-child(2) { top: 18%; left: 50%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(3) { top: 40%; left: 80%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(4) { top: 78%; left: 68%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(5) { top: 78%; left: 32%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(6) { top: 40%; left: 20%; transform: translate(-50%, -50%); }

.distroLogo:hover {
  transform: translate(-50%, -50%) scale(1.1);
}

/* ===== NIRI THANKS ===== */
.niriThanks {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin: 1rem 0;
  padding: 0.75rem 1rem;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(72, 172, 216, 0.08) 0%, rgba(89, 165, 205, 0.04) 100%);
  border: 1px solid rgba(72, 172, 216, 0.15);
}

.niriThanks > img {
  width: 40px;
  height: 40px;
  flex-shrink: 0;
}

.niriThanks > span {
  font-size: 0.95em;
  line-height: 1.5;
}

/* ===== DISCORD BUTTON ===== */
.discordButton {
  display: inline-flex;
  align-items: center;
  gap: 0.25em;
  padding: 0 0.35em;
  background: #5865F2;
  color: #fff !important;
  font-size: inherit;
  font-weight: 600;
  text-decoration: none !important;
  border-radius: 3px;
  transition: all 0.2s ease;
}

.discordButton:hover {
  background: #4752c4;
}

.discordButton img {
  flex-shrink: 0;
  height: 0.75em;
  width: auto;
  filter: brightness(0) invert(1);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .blogHero {
    padding: 3rem 1.5rem;
    margin: -0.5rem -0.5rem 2rem -0.5rem;
  }

  .statsGrid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .statCard {
    padding: 1.5rem 1rem;
  }

  .distroMashup {
    max-width: 350px;
    padding: 2rem 0.5rem;
  }

  .distroCenterLogo {
    width: 80px;
    height: 80px;
  }

  .distroLogo {
    width: 44px;
    height: 44px;
    padding: 8px;
    border-radius: 12px;
  }
}



================================================
FILE: blog/2025-12-18-desktop-widgets/index.mdx
================================================
---
title: New Desktop Widgets & Plugins Coming in DMS 1.2
description: A sneak peek at desktop widgets landing in DMS 1.2 - and why you should build one.
slug: desktop-widgets-1-2
authors: danklinux
tags: [announcement]
---

import styles from './styles.module.css';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

The next DMS release has a new type of widget and plugin, **Desktop Widgets**. These are little applets that live on your desktop, below your windows and above your wallpaper.

We are pre-announcing this feature to highlight the plugin ecosystem and to encourage the community to build these new types of widgets.

{/* truncate */}

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Desktop Widgets"
    sources={{
      light: useBaseUrl('/img/blog/widgets/widgets_light.png'),
      dark: useBaseUrl('/img/blog/widgets/widgets_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
</figure>

## What Are Desktop Widgets?

Desktop widgets are small, interactive components that live below windows and above your desktop wallpaper. With these new widgets, you can add useful information and tools to your desktop without cluttering your workspace.

They can be positioned, placed, and sized per-display.

With the DMS plugin system, these widgets are extremely easy to build so we are looking forward to seeing what the community creates! We hope to feature some community widgets in the next 1.2 release.

## Built-in Desktop Widgets

DMS 1.2 will ship with two built-in desktop widgets:

### Clock

A configurable clock with configurable analog and digital modes, modeled after the Material expressive clock widgets.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Desktop Clock Widget"
    sources={{
      light: useBaseUrl('/img/blog/widgets/clock_light.png'),
      dark: useBaseUrl('/img/blog/widgets/clock_dark.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
</figure>

### System Monitor (dgop)

A configurable system monitor that can display CPU, memory, GPU, disk, network, process, temperature, and other system information in a variety of formats.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="System Monitor Widget"
    sources={{
      light: useBaseUrl('/img/blog/widgets/dgop_light.png'),
      dark: useBaseUrl('/img/blog/widgets/dgop_dark.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
</figure>

## Desktop Widget Plugins

There is one first-party plugin that is now available on the registry: *Dank Desktop Weather* (requires DMS git/nightly). This plugin adds a weather widget to your desktop that shows current weather conditions and forecasts.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Dank Desktop Weather Plugin"
    sources={{
      light: useBaseUrl('/img/blog/widgets/weather_light.png'),
      dark: useBaseUrl('/img/blog/widgets/weather_dark.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
</figure>

## Building Your Own

Making your own desktop widget is straight forward. If you've written javascript and a declarative layout (something like react, vue, json, etc) - it should not feel too foreign.

### 1. Create the plugin folder

```bash
mkdir -p ~/.config/DankMaterialShell/plugins/MyDesktopWidget
cd ~/.config/DankMaterialShell/plugins/MyDesktopWidget
```

### 2. Write the manifest

Save as `plugin.json`:

```json
{
  "id": "myDesktopWidget",
  "name": "My Desktop Widget",
  "description": "A custom desktop widget",
  "version": "1.0.0",
  "author": "Your Name",
  "type": "desktop",
  "license": "<your-license-here>",
  "component": "./MyWidget.qml",
  "icon": "widgets",
  "settings": "./MySettings.qml",
  "requires_dms": ">=1.2.0"
}
```

The key bit is `"type": "desktop"` - that tells DMS this is a desktop widget, not a bar widget.

### 3. Create the widget

Save as `MyWidget.qml`:

```qml
import QtQuick
import qs.Common
import qs.Widgets
import qs.Modules.Plugins

DesktopPluginComponent {
    id: root

    minWidth: 150
    minHeight: 100

    property string displayText: pluginData.displayText ?? "Hello!"
    property real bgOpacity: (pluginData.backgroundOpacity ?? 80) / 100

    Rectangle {
        anchors.fill: parent
        radius: Theme.cornerRadius
        color: Theme.withAlpha(Theme.surfaceContainer, root.bgOpacity)

        StyledText {
            anchors.centerIn: parent
            text: root.displayText
            color: Theme.surfaceText
            font.pixelSize: Theme.fontSizeLarge
        }
    }
}
```

Users can right-click and drag to move or resize the widget. The `minWidth`/`minHeight` properties set the lower bounds.

### 4. Create the settings panel

Save as `MySettings.qml`:

```qml
import QtQuick
import qs.Common
import qs.Modules.Plugins

PluginSettings {
    id: root
    pluginId: "myDesktopWidget"

    StringSetting {
        settingKey: "displayText"
        label: "Display Text"
        description: "Text shown in the widget"
        placeholder: "Enter text"
        defaultValue: "Hello!"
    }

    SliderSetting {
        settingKey: "backgroundOpacity"
        label: "Background Opacity"
        defaultValue: 80
        minimum: 0
        maximum: 100
        unit: "%"
    }
}
```

Display settings (position, size, which monitors) are injected automatically - you don't need to handle those yourself.

### 5. Load it

1. Open **Settings → Plugins**
2. Click **Scan for Plugins**
3. Toggle your plugin on
4. Open **Settings → Widgets** and enable the widget on your desired display

That's it. For settings panels, timers, graphs, and more - check out the full [plugin development guide](/docs/dankmaterialshell/plugin-development#desktop-plugins).

## Get Involved

We hope to see the plugin registry grow with new desktop widgets. Some ideas that would be great as desktop widgets:
- Media controls (mpris, spotify, etc)
- Todo lists
- Stock/Crypto tickers
- News feeds

Submit plugins to the [plugin registry](https://github.com/AvengeMedia/dms-plugin-registry) - we hope to feature some of them in the next DMS release.

---

Desktop widgets land in **DMS 1.2**. Keep an eye on the repo and [join the Discord](https://discord.gg/ppWTpKmPgT) if you want to get started early.



================================================
FILE: blog/2025-12-18-desktop-widgets/styles.module.css
================================================
/* Desktop Widgets Blog Post Styles */
/* Add custom styles here as needed - these are scoped to this post only */

/* Example: Widget preview cards */
.widgetPreview {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1.5rem;
  margin: 1.5rem 0;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(208, 188, 255, 0.15);
  border-radius: 16px;
  backdrop-filter: blur(10px);
}

[data-theme='light'] .widgetPreview {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(128, 90, 213, 0.2);
}

.widgetPreview img {
  max-width: 100%;
  border-radius: 8px;
}

.widgetPreview figcaption {
  margin-top: 0.75rem;
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.6);
}

[data-theme='light'] .widgetPreview figcaption {
  color: rgba(26, 22, 37, 0.6);
}



================================================
FILE: blog/2026-01-13-v1-2-release/index.mdx
================================================
---
title: DMS 1.2 "Spicy Miso" Released
description: The second major release of DMS
slug: v1-2-release
authors: danklinux
tags: [release, announcement]
---

import styles from './styles.module.css';
import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';

export const PepperA = ({ color, className, opacity = 0.3, mirror = false }) => (
  <svg viewBox="0 0 32 64" className={className} style={{ width: '100%', height: '100%', overflow: 'visible', opacity }}>
    <g transform={mirror ? 'translate(32,0) scale(-1,1) rotate(-5, 16, 10)' : 'rotate(-5, 16, 10)'}>
      <path fill="#2d4a22" d="M14.5 2C14 0 15 -2 17 -2.5C18 -2.7 18.5 -2 18 -1C17.5 0 17 2 16.5 4" />
      <path fill="#3a5a2a" d="M11 6C12 5 13 4.5 16 4.5C19 4.5 20 5 21 6C22 7 20 8 18.5 8.5C16.5 9 14.5 9 13 8.5C11.5 8 10 7 11 6Z" />
      <path fill={color} d="M10 6.5C12 5.5 20 5.5 22 6.5C24 9 25 15 24 22C23 28 20 34 15 42C13 45 11 46 10 45C9 44 10 42 12 40C15 35 11 28 9 22C7 16 8 9 10 6.5Z" />
      <path fill="rgba(255,255,255,0.15)" d="M11 10C10.5 14 10 22 12 30C12.5 33 13 36 13 36C12 29 13 18 16 10C14.5 10 12 10 11 10Z" />
    </g>
  </svg>
);

export const PepperB = ({ color, className, opacity = 0.3, mirror = false }) => (
  <svg viewBox="0 0 32 64" className={className} style={{ width: '100%', height: '100%', overflow: 'visible', opacity }}>
    <g transform={mirror ? 'translate(32,0) scale(-1,1) translate(2,0)' : 'translate(2,0)'}>
      <path fill="#2d4a22" d="M13 2C12.5 0 13.5 -2 16 -2.5C17 -2.7 17.5 -2 17 -1C16.5 0 16 2 16 4" />
      <path fill="#3a5a2a" d="M10 6C11 5 12 4.5 15 4.5C18 4.5 19 5 20 6C21 7 19 8 17.5 8.5C15.5 9 13.5 9 12 8.5C10.5 8 9 7 10 6Z" />
      <path fill={color} d="M10 6.5C12 5.5 18 5.5 20 6.5C22 8 23 13 22 20C21 28 17 38 10 50C9 52 8 52 7 50C10 40 12 30 11 20C10.5 13 9 8 10 6.5Z" />
      <path fill="rgba(255,255,255,0.15)" d="M12 10C11.5 16 12 24 11 32C10.5 36 9 40 9 40C12 30 14 20 16 10C14.5 10 13 10 12 10Z" />
    </g>
  </svg>
);

export const PepperC = ({ color, className, opacity = 0.3, mirror = false }) => (
  <svg viewBox="0 0 32 64" className={className} style={{ width: '100%', height: '100%', overflow: 'visible', opacity }}>
    <g transform={mirror ? 'translate(32,0) scale(-1,1) translate(4,0)' : 'translate(4,0)'}>
      <path fill="#2d4a22" d="M11 3C10.5 1 11.5 -1 14 -1.5C15 -1.7 15.5 -1 15 0C14.5 1 14 3 14 5" />
      <path fill="#3a5a2a" d="M8 7C9 6 10 5.5 13 5.5C16 5.5 17 6 18 7C19 8 17 9 15.5 9.5C13.5 10 11.5 10 10 9.5C8.5 9 7 8 8 7Z" />
      <path fill={color} d="M8 7.5C10 6.5 16 6.5 18 7.5C20 9 21 14 19 22C17 32 11 42 1 52C0 53 -1 52 0 50C8 40 11 30 10 20C9.5 14 7 9 8 7.5Z" />
      <path fill="rgba(255,255,255,0.15)" d="M10 11C9.5 17 10 25 8 33C7 37 5 41 5 41C9 30 12 20 14 11C12.5 11 11 11 10 11Z" />
    </g>
  </svg>
);

<div className={styles.blogHero}>
  <div className={styles.confetti} aria-hidden="true">
    <div style={{ position: 'absolute', top: '2%', left: '4%', width: '34px', height: '68px', transform: 'rotate(-22deg) scale(0.9)' }}>
      <PepperA className={styles.chiliAnim1} color="#ef4444" opacity={0.35} />
    </div>
    <div style={{ position: 'absolute', top: '5%', left: '16%', width: '28px', height: '56px', transform: 'rotate(38deg) scale(0.75)' }}>
      <PepperB className={styles.chiliAnim2} color="#dc2626" opacity={0.28} mirror />
    </div>
    <div style={{ position: 'absolute', top: '3%', left: '76%', width: '30px', height: '60px', transform: 'rotate(-31deg) scale(0.8)' }}>
      <PepperC className={styles.chiliAnim3} color="#f97316" opacity={0.3} mirror />
    </div>
    <div style={{ position: 'absolute', top: '6%', left: '88%', width: '32px', height: '64px', transform: 'rotate(25deg) scale(0.85)' }}>
      <PepperA className={styles.chiliAnim1} color="#ef4444" opacity={0.32} mirror />
    </div>
    <div style={{ position: 'absolute', top: '18%', left: '2%', width: '32px', height: '64px', transform: 'rotate(29deg) scale(0.85)' }}>
      <PepperC className={styles.chiliAnim3} color="#f97316" opacity={0.3} />
    </div>
    <div style={{ position: 'absolute', top: '38%', left: '4%', width: '30px', height: '60px', transform: 'rotate(-41deg) scale(0.8)' }}>
      <PepperB className={styles.chiliAnim2} color="#dc2626" opacity={0.28} mirror />
    </div>
    <div style={{ position: 'absolute', top: '58%', left: '2%', width: '34px', height: '68px', transform: 'rotate(17deg) scale(0.9)' }}>
      <PepperA className={styles.chiliAnim1} color="#ef4444" opacity={0.32} />
    </div>
    <div style={{ position: 'absolute', top: '75%', left: '5%', width: '28px', height: '56px', transform: 'rotate(-33deg) scale(0.75)' }}>
      <PepperC className={styles.chiliAnim3} color="#f97316" opacity={0.25} mirror />
    </div>
    <div style={{ position: 'absolute', top: '28%', left: '12%', width: '26px', height: '52px', transform: 'rotate(47deg) scale(0.7)' }}>
      <PepperB className={styles.chiliAnim1} color="#dc2626" opacity={0.18} />
    </div>
    <div style={{ position: 'absolute', top: '65%', left: '10%', width: '24px', height: '48px', transform: 'rotate(-28deg) scale(0.65)' }}>
      <PepperA className={styles.chiliAnim2} color="#f97316" opacity={0.15} mirror />
    </div>
    <div style={{ position: 'absolute', top: '74%', left: '22%', width: '30px', height: '60px', transform: 'rotate(-45deg) scale(0.8)' }}>
      <PepperB className={styles.chiliAnim2} color="#dc2626" opacity={0.28} />
    </div>
    <div style={{ position: 'absolute', top: '78%', left: '42%', width: '26px', height: '52px', transform: 'rotate(35deg) scale(0.7)' }}>
      <PepperC className={styles.chiliAnim1} color="#ef4444" opacity={0.22} mirror />
    </div>
    <div style={{ position: 'absolute', top: '75%', left: '58%', width: '28px', height: '56px', transform: 'rotate(-19deg) scale(0.75)' }}>
      <PepperA className={styles.chiliAnim3} color="#f97316" opacity={0.25} />
    </div>
    <div style={{ position: 'absolute', top: '72%', left: '75%', width: '30px', height: '60px', transform: 'rotate(42deg) scale(0.8)' }}>
      <PepperB className={styles.chiliAnim2} color="#dc2626" opacity={0.28} mirror />
    </div>
    <div style={{ position: 'absolute', top: '32%', left: '82%', width: '24px', height: '48px', transform: 'rotate(-38deg) scale(0.65)' }}>
      <PepperC className={styles.chiliAnim3} color="#f97316" opacity={0.15} />
    </div>
    <div style={{ position: 'absolute', top: '62%', left: '84%', width: '26px', height: '52px', transform: 'rotate(31deg) scale(0.7)' }}>
      <PepperA className={styles.chiliAnim1} color="#ef4444" opacity={0.18} mirror />
    </div>
    <div style={{ position: 'absolute', top: '20%', left: '92%', width: '32px', height: '64px', transform: 'rotate(-26deg) scale(0.85)' }}>
      <PepperB className={styles.chiliAnim2} color="#dc2626" opacity={0.3} />
    </div>
    <div style={{ position: 'absolute', top: '42%', left: '90%', width: '30px', height: '60px', transform: 'rotate(37deg) scale(0.8)' }}>
      <PepperA className={styles.chiliAnim1} color="#f97316" opacity={0.28} mirror />
    </div>
    <div style={{ position: 'absolute', top: '55%', left: '93%', width: '34px', height: '68px', transform: 'rotate(-21deg) scale(0.9)' }}>
      <PepperC className={styles.chiliAnim3} color="#ef4444" opacity={0.32} mirror />
    </div>
    <div style={{ position: 'absolute', top: '73%', left: '91%', width: '28px', height: '56px', transform: 'rotate(44deg) scale(0.75)' }}>
      <PepperB className={styles.chiliAnim2} color="#dc2626" opacity={0.25} />
    </div>
  </div>
  <div className={styles.heroContent}>
    <h1 className={styles.heroTitle}>
      DMS <span className={styles.gradientText}>1.2</span>
    </h1>
    <p className={styles.heroSubtitle}>Spicy Miso</p>
  </div>
</div>

We're excited to announce DankMaterialShell (DMS) 1.2 "Spicy Miso"! This release features numerous new features and major improvements to both the DMS core and plugin system.

{/* truncate */}

<div className={styles.statsGrid} style={{ gridTemplateColumns: 'repeat(2, 1fr)', maxWidth: '600px' }}>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>2,800+</span>
    <span className={styles.statLabel}>Commits</span>
  </div>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>3.3k+</span>
    <span className={styles.statLabel}>GitHub Stars</span>
  </div>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>100+</span>
    <span className={styles.statLabel}>Contributors</span>
  </div>
  <div className={styles.statCard}>
    <span className={styles.statNumber}>40</span>
    <span className={styles.statLabel}>Plugins</span>
  </div>
</div>

## What's New

### Desktop Widgets & Plugins

DMS 1.2 introduces Desktop Widgets - small applets that live on your desktop, below windows and above your wallpaper. Position, resize, and configure them per-display.

<div className={styles.widgetGrid}>
  <div className={styles.widgetCard}>
    <img src={useBaseUrl('/img/blog/v1.2/clock.png')} alt="Clock Widget" />
    <div className={styles.widgetInfo}>
      <p className={styles.widgetName}>Clock <span className={`${styles.widgetBadge} ${styles.widgetBadgeBuiltin}`}>Built-in</span></p>
      <p className={styles.widgetAuthor}>Analog & digital modes</p>
    </div>
  </div>
  <div className={styles.widgetCard}>
    <img src={useBaseUrl('/img/blog/v1.2/dgop.png')} alt="System Monitor Widget" />
    <div className={styles.widgetInfo}>
      <p className={styles.widgetName}>System Monitor <span className={`${styles.widgetBadge} ${styles.widgetBadgeBuiltin}`}>Built-in</span></p>
      <p className={styles.widgetAuthor}>CPU, memory, GPU, temps & more</p>
    </div>
  </div>
  <div className={styles.widgetCard}>
    <img src={useBaseUrl('/img/blog/v1.2/weather.png')} alt="Weather Widget" />
    <div className={styles.widgetInfo}>
      <p className={styles.widgetName}>Weather <span className={`${styles.widgetBadge} ${styles.widgetBadgeCommunity}`}>Plugin</span></p>
      <p className={styles.widgetAuthor}>by Avenge Media</p>
    </div>
  </div>
  <div className={styles.widgetCard}>
    <img src={useBaseUrl('/img/blog/v1.2/mediaplayer.png')} alt="Media Player Widget" />
    <div className={styles.widgetInfo}>
      <p className={styles.widgetName}>Media Player <span className={`${styles.widgetBadge} ${styles.widgetBadgeCommunity}`}>Plugin</span></p>
      <p className={styles.widgetAuthor}>by Abdur Rahman Rifat</p>
    </div>
  </div>
  <div className={styles.widgetCard}>
    <img src={useBaseUrl('/img/blog/v1.2/appshortcut.png')} alt="App Shortcut Widget" />
    <div className={styles.widgetInfo}>
      <p className={styles.widgetName}>App Shortcuts <span className={`${styles.widgetBadge} ${styles.widgetBadgeCommunity}`}>Plugin</span></p>
      <p className={styles.widgetAuthor}>by Omar (@oabragh)</p>
    </div>
  </div>
  <div className={styles.widgetCard}>
    <img src={useBaseUrl('/img/blog/v1.2/desktopcommand.jpg')} alt="Desktop Command Widget" />
    <div className={styles.widgetInfo}>
      <p className={styles.widgetName}>Desktop Command <span className={`${styles.widgetBadge} ${styles.widgetBadgeCommunity}`}>Plugin</span></p>
      <p className={styles.widgetAuthor}>by yayuuu</p>
    </div>
  </div>
</div>

The plugin system makes building your own widgets straightforward - see the [plugin development guide](/docs/dankmaterialshell/plugin-development#desktop-plugins) to get started.

### Theme Registry

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Theme Registry"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/themeregistrylight.png'),
      dark: useBaseUrl('/img/blog/v1.2/themeregistry.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
  <figcaption>Theme browser integrated into DMS settings.</figcaption>
</figure>

DMS 1.2 introduces a theme system where a single theme can have multiple variants and accent colors. The plugin registry now includes a [Theme Registry](https://danklinux.com/plugins?tab=themes) with community-developed themes available for easy installation. Learn how to [contribute your own themes](https://github.com/AvengeMedia/dms-plugin-registry/blob/master/CONTRIBUTING.md#contributing-a-theme).

### Native Clipboard and History

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Clipboard Settings"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/clipboardlight.png'),
      dark: useBaseUrl('/img/blog/v1.2/clipboard.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
  <figcaption>Configure clipboard history size, entry limits, and auto-cleanup behavior.</figcaption>
</figure>

Full, zero-dependency clipboard and clipboard history integration.
- No dependency on external tools, such as cliphist or wl-clipboard.
- Configurable max entry size, retention duration, and automatic cleanup.
- Search API and CLI with pagination, filtering by text, images, or any mime type.
- Automatically ignores data from password managers (such as KeepassXC and 1Password). Preventing sensitive data from being stored in the clipboard history.
- Export & import functionality
- Migration tool for transferring history from cliphist.

### Monitor Configurator

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Monitor Configuration"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/monitorlight.png'),
      dark: useBaseUrl('/img/blog/v1.2/monitordark.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
  <figcaption>Configure display settings directly from DMS Settings.</figcaption>
</figure>

Configure display settings directly from DMS Settings. Available for niri, Hyprland, and MangoWC. Includes positioning, resolution, refresh rate, VRR, full layout customization (niri), HDR (Hyprland), scaling, mirroring (Hyprland), and more.


### Notification Improvements

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Notification Center"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/notiflight.png'),
      dark: useBaseUrl('/img/blog/v1.2/notifdark.png'),
    }}
    style={{ maxWidth: '400px', width: '100%' }}
  />
  <figcaption>Notification center with history and swipe-to-dismiss.</figcaption>
</figure>

Notifications get several new features and improvements:

- Configurable history with variable size, expirations, and auto-cleanup
- Gestures to dismiss notifications
- Ability to display on lock screen (count only, name only, or full content - based on privacy preference)

### Cursor & Layout Configuration

<div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', flexWrap: 'wrap', marginBottom: '1rem', alignItems: 'flex-end' }}>
  <figure style={{ textAlign: 'center', margin: 0, flex: '1 1 300px', maxWidth: '400px' }}>
    <img
      src={useBaseUrl('/img/blog/v1.2/cursor-control.png')}
      alt="Cursor Control Settings"
      style={{ width: '100%', borderRadius: '8px' }}
    />
    <figcaption>Cursor theme, size, and behavior settings.</figcaption>
  </figure>
  <figure style={{ textAlign: 'center', margin: 0, flex: '1 1 300px', maxWidth: '400px', display: 'flex', flexDirection: 'column', justifyContent: 'flex-end' }}>
    <div style={{ padding: '2rem 1rem', background: 'var(--ifm-card-background-color)', borderRadius: '8px' }}>
      <img
        src={useBaseUrl('/img/blog/v1.2/layout.png')}
        alt="Layout Override Settings"
        style={{ width: '100%', borderRadius: '4px' }}
      />
    </div>
    <figcaption>Override gaps, corner radius, and border size.</figcaption>
  </figure>
</div>

Customize your compositor settings directly from DMS Settings. Available for niri, Hyprland, and MangoWC:

- **Cursor** - Choose from available cursor themes, adjust size, and configure compositor-specific hiding behavior (hide on typing, hide on touch, inactive timeout)
- **Gaps** - Adjust gaps around windows
- **Borders & Corner Radius** - Override theme defaults for window border width and corner radius
- **Focus Ring** - Customize focus ring color, width, and style

Cursor settings are automatically applied to XWayland applications via XResources, ensuring consistent appearance across native Wayland and XWayland apps.

### DMS Doctor

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DMS Doctor"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/doctorlight.png'),
      dark: useBaseUrl('/img/blog/v1.2/doctordark.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
  <figcaption>System check dialog showing service status and optional features.</figcaption>
</figure>

New `dms doctor` command for diagnosing configuration issues and conflicts that may negatively affect DMS feature availability or performance. Also available via DMS GUI.

Shout out to [@LuckShiba](https://github.com/LuckShiba) for the contribution!

### Keyboard Shortcuts Editor for niri, Hyprland & MangoWC

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Keyboard Shortcuts"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/bindslight.png'),
      dark: useBaseUrl('/img/blog/v1.2/bindsdark.png'),
    }}
    style={{ maxWidth: '500px', width: '100%' }}
  />
  <figcaption>Configure keyboard shortcuts with search, filtering, and conflict detection.</figcaption>
</figure>

The world famous DMS keyboard shortcuts tool is now available for niri, Hyprland, and MangoWC. Search, edit, and add new keybinds directly from DMS Settings.

### Settings Search

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Settings Search"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/searchlight.png'),
      dark: useBaseUrl('/img/blog/v1.2/searchdark.png'),
    }}
    style={{ maxWidth: '280px', width: '100%' }}
  />
  <figcaption>Search across all settings to quickly find what you need.</figcaption>
</figure>

New settings search makes it easier to find what you want to change. Includes integrated launcher search with `?` by default.

### i18n: RTL Support

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="RTL Language Support"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/rtllight.png'),
      dark: useBaseUrl('/img/blog/v1.2/rtldark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>DMS Settings displayed in Farsi with full RTL layout support.</figcaption>
</figure>

DMS 1.2 introduces proper support for right-to-left languages with proper layout mirroring across components. DMS currently has translations for Hebrew and Farsi.

To contribute to translations see the [pinned github issue](https://github.com/AvengeMedia/DankMaterialShell/issues/324)

### Launcher Improvements

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Launcher File Search"
    sources={{
      light: useBaseUrl('/img/blog/v1.2/launcherlight.png'),
      dark: useBaseUrl('/img/blog/v1.2/launcherdark.png'),
    }}
    style={{ maxWidth: '400px', width: '100%' }}
  />
  <figcaption>Indexed filesystem search with the /path prefix.</figcaption>
</figure>

The DMS launcher has undergone several improvements. Performance improvements, support for plugins to define context menus (with full keyboard navigation), built-in settings search, and a new first-party plugin for searching keybinds (niri, Hyprland, MangoWC, Sway, and custom providers via `dms keybinds`).

DMS' launcher with plugins supports calculator, niri window management, CLI commands with history, emoji and gitmoji search, web search, extremely fast indexed filesystem search, and more. It also work on the niri overview without any triggers needed.


## Debian SID, OpenSUSE Slowroll, Leap 16.0, and CentOS Stream 10 Packages

<div className={styles.distroMashup}>
  <div className={styles.distroOrbit}>
    <img src={useBaseUrl('/img/path32.svg')} alt="DMS" className={styles.distroCenterLogo} />
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/arch.svg')} alt="Arch Linux" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/fedora.svg')} alt="Fedora" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/suse.svg')} alt="openSUSE" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/debian.svg')} alt="Debian" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/ubuntu.svg')} alt="Ubuntu" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/CentOS_color_logo.svg')} alt="CentOS" /></div>
    <div className={styles.distroLogo}><img src={useBaseUrl('/img/distros/NixOS.svg')} alt="NixOS" /></div>
  </div>
</div>

DMS 1.2 expands distribution support with official packages now available for:

- **Debian SID** - Rolling release packages via OBS
- **OpenSUSE Slowroll** - Packages via OBS
- **OpenSUSE Leap 16.0** - Packages via OBS
- **CentOS Stream 10** - Packages via COPR

These are in addition to existing packages for Debian, Ubuntu, Fedora, Arch Linux, and NixOS.

Packages include DMS, niri, quickshell, dgop, dsearch, and other core dependencies. See the [installation guide](/docs/getting-started) for setup instructions.

## Upgrade Notes

:::warning
This release contains changes that may require manual intervention.
:::

### (Breaking) Theme Updates

Ghostty and VSCode theming have changed and will stop working without manual intervention.

<details>
<summary>Ghostty & VS Code Theme Changes</summary>

**Ghostty**

The theme path has changed to `~/.config/ghostty/themes/danktheme`. Update your Ghostty configuration:

```toml
# ~/.config/ghostty/config
# Add this
theme = dankcolors

# ! Remove this
# config-file = ./config-dankcolors
```

**VS Code / Codium**

The theme extension needs to be reinstalled due to internal changes:

1. Uninstall the current "Dank material shell theme" extension
2. Reinstall from the extensions marketplace: search for "Dank material shell theme" by "DankLinux"
3. Ctrl+Shift+P -> "Preferences: Color Theme" -> Select "Dynamic Base16 DankShell"
4. Trigger theme re-generation - change theme in DMS Settings or restart DMS
5. Fully exit and restart VSCode

</details>

### Clipboard History Migration

Steps are recommended to remove existing clipboard history daemon and migrate existing history to the new DMS clipboard system.

<details>
<summary>Cleanup & Migration Steps</summary>

**1. Cleanup old clipboard history integration:**

Remove the `wl-paste --watch cliphist store` daemon/startup from your compositor configuration.

```js
// ~/.config/niri/config.kdl
spawn-at-startup "wl-paste --watch cliphist store" // REMOVE THIS LINE
```

```toml
# ~/.config/hypr/hyprland.conf
exec-once = wl-paste --watch cliphist store # REMOVE THIS LINE
```

**2. Configure DMS clipboard settings (optional):**

Before migrating, you may want to configure your retention settings in DMS Settings -> System -> Clipboard. You can configure maximum entry size, total entries, and retention durations. Only required if you want to override the defaults.


**3. Migrate clipboard history from `cliphist` to DMS:**

Clipboard history will not be automatically migrated from previous versions. You can still access it with the `cliphist` CLI. New clipboard history located in `~/.cache/DankMaterialShell/clipboard/db` - this is a [bbolt](https://github.com/etcd-io/bbolt) database.

To migrate old history:

```bash
# First stop DMS
systemctl --user stop dms # Or dms kill, if not using systemd
# Run migration (optionally override path with cliphist-migrate /path/to/db)
dms cl cliphist-migrate
# Start DMS again
systemctl --user start dms # or dms run -d, if not using systemd
```

You can then uninstall cliphist and remove the old database at `~/.cache/cliphist/db`

`wl-clipboard` can also be removed, although it's useful to keep for plugins or scripts that depend on it.

```bash
# DMS clipboard CLI has feature-parity with wl-clipboard
# To copy text:
echo "Hello, World!" | dms cl copy
# To paste text:
dms cl paste
```

</details>

### Compositor Configuration Updates

For niri or Hyprland you can run `dms setup` to generate a new compositor configuration - monitor configuration will be preserved and original configuration will be backed up. The main change is migrating to a more modular configuration.

Changes are required only if you wish to use the new cursor, output, layout, and keybind controls from DMS Settings.

<details>
<summary>niri</summary>

Required to use GUI cursor and output settings.

1. Create new files

```bash
mkdir -p ~/.config/niri/dms
touch ~/.config/niri/dms/cursor.kdl
touch ~/.config/niri/dms/outputs.kdl
```

2. Move existing configuration to new files

```js
// ~/.config/niri/dms/cursor.kdl
// Move cursor {} block from config.kdl
cursor {
    xcursor-theme "Bibata-Original-Ice"
    xcursor-size 24
}

// ~/.config/niri/dms/outputs.kdl
// Move output {} blocks from config.kdl
output "DP-1" {
    position 0 0
    scale 1.0
    transform normal
}
```

3. Include new files in your config

```js
// ~/.config/niri/config.kdl
// Recommended to place at the end of the file
include "dms/cursor.kdl"
include "dms/outputs.kdl"
include "dms/layout.kdl"
```

</details>

<details>
<summary>Hyprland</summary>

Required to use GUI cursor, output, layout, and keybind settings.

1. Create new files

```bash
mkdir -p ~/.config/hypr/dms
touch ~/.config/hypr/dms/cursor.conf
touch ~/.config/hypr/dms/outputs.conf
touch ~/.config/hypr/dms/layout.conf
touch ~/.config/hypr/dms/binds.conf
```

2. Move existing configuration to new files

```bash
# ~/.config/hypr/dms/cursor.conf
# Move cursor settings from hyprland.conf
env = HYPRCURSOR_THEME,Bibata-Original-Ice
env = HYPRCURSOR_SIZE,24
env = XCURSOR_THEME,Bibata-Original-Ice
env = XCURSOR_SIZE,24

# ~/.config/hypr/dms/outputs.conf
# Move monitor lines from hyprland.conf
monitor = DP-1,2560x1440@144,0x0,1

# ~/.config/hypr/dms/layout.conf
# Move general layout settings from hyprland.conf
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
}

# ! Binds do not need to be moved, only edited/new binds via GUI will be stored here
```

3. Source new files in your config

```bash
# ~/.config/hypr/hyprland.conf
# Recommended to place at the end of the file
source = ./dms/cursor.conf
source = ./dms/outputs.conf
source = ./dms/layout.conf
source = ./dms/binds.conf
```

</details>

<details>
<summary>MangoWC</summary>

Required to use GUI cursor, output, layout, and keybind settings.

1. Create new files

```bash
mkdir -p ~/.config/mangowc/dms
touch ~/.config/mangowc/dms/cursor.conf
touch ~/.config/mangowc/dms/outputs.conf
touch ~/.config/mangowc/dms/layout.conf
touch ~/.config/mangowc/dms/binds.conf
```

2. Move existing configuration to new files

```bash
# ~/.config/mangowc/dms/cursor.conf
# Move cursor settings from mangowc.conf
cursor_size=24
cursor_theme=Bibata-Original-Ice

# ~/.config/mangowc/dms/outputs.conf
# Move output blocks from mangowc.conf
monitorrule=DP-2,0.55,1,tile,0,1,0,0,2560,1440,144
monitorrule=eDP-1,0.55,1,tile,0,1,2560,0,2560,1600,240

# ~/.config/mangowc/dms/layout.conf
# Move layout settings from mangowc.conf
border_radius=13
gappih=4
gappiv=4
gappoh=4
gappov=4
borderpx=2

# ~/.config/mangowc/dms/binds.conf
# Moving binds is not required, only edited/new binds via GUI will be stored here
```

3. Source new files in your config

```bash
# ~/.config/mangowc/mangowc.conf
# Recommended to place at the end of the file
source = ./dms/cursor.conf
source = ./dms/outputs.conf
source = ./dms/layout.conf
source = ./dms/binds.conf
```

</details>

### NixOS Updates

DMS 1.2 brings significant improvements to NixOS integration and the flake-based installation experience:

**Home Manager Module Enhancements**
- New `clipboardSettings` option for declarative clipboard configuration
- Plugins can now include per-plugin settings directly in their configuration
- Removed `default*` settings options in favor of being able to set the actual settings file
- Improved plugin installation and management through home-manager module

**NixOS Module Improvements**
- Added plugin support in NixOS module with declarative installation
- Enabled `power-profiles-daemon` and `accounts-daemon` by default for better power management and user account integration
- QML dependencies are now properly included in `dms-shell` package

**Niri Integration**
- Added support for config includes with niri-flake. DMS-generated configuration files now work seamlessly with niri's flake-based setup

**Plugin Registry Flake**
- New [dms-plugin-registry](https://github.com/AvengeMedia/dms-plugin-registry) Nix flake provides all community plugins as packages
- Plugins are automatically updated daily from the registry
- Simple declarative installation - just enable plugins by their ID
- Works with both NixOS and Home Manager modules

:::note
The DMS Flake options name was now changed from `programs.dankMaterialShell` to `programs.dank-material-shell`. The modules names also changed.
While the old module names will still work, you'll receive a deprecation warning informing about the new name.
:::

:::info
The documentation for the [nixpkgs module](/docs/dankmaterialshell/nixos) will get updated as soon as DMS 1.2 gets into `nixos-unstable`.
:::

Please check [the documentation](/docs/dankmaterialshell/nixos-flake) for more information in how to configure DMS 1.2 with the new features.

## Bug Fixes and Improvements

<details style={{
  border: '1px solid rgba(239, 68, 68, 0.3)',
  borderRadius: '8px',
  padding: '1rem',
  margin: '1.5rem 0',
  background: 'linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(220, 38, 38, 0.04) 100%)',
  backdropFilter: 'blur(8px)'
}}>
<summary style={{
  cursor: 'pointer',
  fontWeight: '600',
  fontSize: '1.1em',
  marginBottom: '1rem',
  userSelect: 'none',
  padding: '0.25rem 0.5rem',
  borderRadius: '4px',
  transition: 'all 0.2s ease',
  display: 'flex',
  alignItems: 'center',
  gap: '0.5rem',
  listStyle: 'none'
}} id="bug-fixes-summary">|- View Details (300+ commits) -|</summary>

Since the v1.0 release, DMS has received extensive bug fixes and stability improvements across all components:

**Clipboard**
- Native clipboard and history implementation with zero external dependencies
- Add cliphist-migrate CLI for importing existing history
- Add shift+enter to paste from clipboard history modal
- Configurable persistence, mime-type handling, and auto-cleanup
- Automatically ignore sensitive mime types from password managers
- Fix mime type selection and nil offer handling

**Bar & Dock**
- Add shadow option for bars
- Add scroll wheel behavior configuration
- Add bar get/setPosition IPC
- Improve high-DPI scrolling logic
- Fix exclusive zone popup positioning
- Fix reveal on overview/niri when auto-hide enabled
- Fix tooltip positioning with adjacent bars
- Improve pinned app re-ordering feedback
- Make control center widget per-instance
- Add option to show bar when hidden and no windows
- Respect compact mode on vertical bar
- Mouse wheel options for media player widget
- Fix widget base hover blend logic
- Add isolate running apps by display option

**Desktop Widgets & Plugins**
- New desktop widget plugin type with draggable per-monitor widgets
- Built-in clock and system monitor desktop widgets
- Add grid/grid size hints for widget positioning
- Add overlay IPC and overview option
- Enable desktop plugins by default
- Fix widget display toggle and key event handling
- Centralize config in desktop widgets tab
- Add niri overview only option
- Persistent plugins with async updates
- Fix first plugin install reactivity
- Hide uninstall/update buttons for system plugins
- IPC visibility conditions for plugins

**Display & Monitor Configuration**
- Add configurator for niri, Hyprland, and MangoWC
- Configure position, VRR, orientation, resolution, refresh rate
- Add Hyprland HDR options
- Add niri-specific layout options
- Add mirroring option for Hyprland
- Add disable output option for Hyprland
- Fix reverted state for position
- Fix text-alignment in model mode
- Explicitly write scale 1 for niri
- Add adaptiveSyncSupported to wlroutput API

**Notifications**
- Add configurable persistent history with variable size and expiration
- Add swipe to dismiss functionality
- Add support for lock screen display (count, app name, or full detail)
- Add compact mode with expansion in history and popup
- Add image persistence
- Right-click to toggle Do Not Disturb
- Add Do Not Disturb to IPC
- Add modal function for clearing all notifications
- Fix notifications being transient when history disabled
- Fix redundant height animation and spacing improvements
- Minimize rapid window creation/destruction

**Themes & Matugen**
- Theme registry with community themes and variants
- Support for accent colors and theme variants
- Add color reload capability to VSCode theme
- Add GTK theme method and fix light mode
- Move Ghostty theming to new path
- Add Zen Browser template
- Add gruvbox material custom theme varieties
- Add neovim to matugen pipeline with soothing theme
- Fix adw-gtk3 setting in light mode
- Set cursor color for themes
- Fix terminals always dark with custom themes
- Update VSCode template with improved highlighting

**Cursor & Layout**
- DMS Cursor Control for size and theme in niri
- Create/update XResources for XWayland apps
- Add Hyprland and MangoWC cursor config support
- Add GUI gaps, window radius, and border overrides
- Support for niri, Hyprland, and MangoWC layouts

**Launcher**
- Built-in settings search plugin with ? trigger
- Support for plugins to define context menus
- Add ID search fallback for non-English apps
- Allow terminal apps
- F10 as alt for menu key
- Optimize bindings and filters
- Fix invalid icon rendering

**Settings**
- Add search across all settings
- Add doctor command with GUI integration
- Add battery charge limit setting
- Add lock screen layout settings
- Add volume and brightness percentages
- Fix desktop widget accordion row height
- Fix generic color selector clipping
- Fix theme application of default-settings
- Guard saving before load completed
- Make default height screen-aware
- Read-only handling refactor

**Network & VPN**
- Support hidden SSIDs
- Listen to NetworkManager wired interface
- Use nmcli for route metrics
- Right-click VPN widget to quick connect
- Aggregate VPN import errors with toast details
- Support pkcs11 prompts
- Cache pkcs11 pin input

**Keyboard & Input**
- Initial support for writable Hyprland and MangoWC keybinds
- Add media control bindings for audio playback
- Fix keybind handling of cooldown-ms parameter
- Fix empty string args and screenshot-window options
- Add log if ShortcutInhibitor is missing
- Accept numpad enter key for screenshot selection

**Lock Screen & Power**
- Add fade to monitor off option
- Clear lock screen textbox on Escape
- Handle case where session lock is rejected
- Fix font alignment
- Add PAM login fallback
- Fade to lock and monitor off by default

**Audio & Media**
- Recreate media players on pipewire device change
- Add option to disable visualizer in bar widget
- Add scroll wheel behavior configuration
- Allow adjusting notification volume
- Larger option for media player widget

**i18n & RTL**
- Initial RTL support for notifications, settings, control center, launcher
- Fix RTL alignment of settings sidebar and plugin settings
- Add Farsi and Hungarian translations
- General term cleanup and sync

**niri**
- Add gaps and radius override
- Add warnings on auto-generated files
- Fix effectiveScreenAssignment in modal
- Fix gap reactivity
- Handle window urgency event
- Preserve remaining settings when turning off output
- Release focus for popouts on overview
- Track open modals for focus transfers
- Hack for config includes with niri flake

**Hyprland**
- Always use single window mode
- Fix cursor setting
- Change DPMS off to DPMS toggle
- Update reference config for 0.53
- Smart compositor entry point detection

**Core & Backend**
- Add resolve-include recursive functionality
- Add test coverage for wayland stack with race detection
- Mock wayland context for tests
- Detect quickshell crash on SIGTERM
- Exit non-zero on SIGUSR1 for systemd restart
- Preserve quickshell exit code
- Fix socket reported CLI version
- Use stdlib for XDG dirs
- Implement screensaver interface for idle inhibitor
- Poll with wake pipe instead of read deadlines

**Greeter**
- Change Hyprland startup to exec-once
- Use FolderListModel for session iteration
- Add launch timeout
- Simplify start-hyprland check
- Fix per-monitor and per-mode wallpapers (NixOS)

**Wallpaper**
- Add seconds to wallpaper cycling
- Pause cycling when locked
- Encode image URIs
- Clamp max texture size
- Scale texture to physical pixels

**Build & Distribution**
- Debian SID, OpenSUSE Slowroll, Leap 16.0, CentOS Stream 10 packages
- Ubuntu ARM64 support
- Artix Linux and Void Linux widget mappings
- Remove cliphist dependency on dms-git
- OBS and PPA automation improvements
- NixOS module refactoring and fixes

**Miscellaneous**
- Add welcome page with doctor integration for first launch
- Configurable app ID substitutions
- Map steam_app_ID to steam_icon_ID for game icons
- Flatpak introspection utilities
- Detect flatpak installations of Zen Browser and Vesktop
- Fix touchpad scrolling behavior
- Add group workspace apps toggle
- Reverse workspace scrolling option
- Add hide option for updater widget
- Use volume_mute icon for volume==0

</details>

## Resources

<a href="/docs/getting-started" className={styles.getStartedLink}>
  Get Started with DMS <span>→</span>
</a>

<div className={styles.linksRow}>
  <a href="https://github.com/AvengeMedia/DankMaterialShell" className={styles.supportLink}>GitHub</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://danklinux.com/docs/" className={styles.supportLink}>Documentation</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://plugins.danklinux.com" className={styles.supportLink}>Plugins</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://discord.gg/ppWTpKmPgT" className={styles.supportLink}>Discord</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://github.com/sponsors/AvengeMedia" className={styles.supportLink}>Sponsor on GitHub</a>
  <span className={styles.linkDivider}>•</span>
  <a href="https://ko-fi.com/danklinux" className={styles.supportLink}>Support on Ko-fi</a>
</div>

<div className={styles.niriThanks}>
  <img src={useBaseUrl('/img/niri.svg')} alt="niri" />
  <span>Special thanks to <a href="https://github.com/YaLTeR">YaLTeR</a> for collaborating with the DMS team, for <a href="https://github.com/niri-wm/niri">niri</a> - the compositor that inspired DMS, and for hosting DMS on the <a href="https://discord.gg/ppWTpKmPgT">niri Discord</a>.</span>
</div>
<div className={styles.thankYouHero}>
  <div className={styles.confetti} aria-hidden="true" />
  <div className={styles.heroContent}>
    <h2 className={styles.thankYouTitle}>
      Thank <span className={styles.gradientText}>You</span>
    </h2>
    <p className={styles.thankYouText}>
      To everyone who has supported DMS through feedback, contributions, sponsorships, donations, and packaging.
    </p>
    <p className={styles.thankYouTagline}>
      Zan, Zendegi, Azadi
    </p>
  </div>
</div>



================================================
FILE: blog/2026-01-13-v1-2-release/styles.module.css
================================================
/* ===== BLOG HERO ===== */
.blogHero {
  position: relative;
  padding: 3rem 2rem;
  margin: 1rem -1rem 3rem -1rem;
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(255, 100, 50, 0.18) 0%, transparent 60%),
    linear-gradient(180deg, rgba(200, 60, 30, 0.06) 0%, transparent 100%);
  border-radius: 24px;
  overflow: hidden;
}

[data-theme='light'] .blogHero {
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(200, 60, 30, 0.12) 0%, transparent 60%),
    linear-gradient(180deg, rgba(200, 60, 30, 0.04) 0%, transparent 100%);
}

/* Chili peppers - Spicy Miso theme */
.confetti {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

/* Individual chili silhouettes */
.confetti::before,
.confetti::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
}

/* Sparkle particles (subtle background - warm tones) */
.confetti::before,
.confetti::after {
  filter: blur(.2px);
}

.confetti::before {
  background-image:
    radial-gradient(circle at 10% 20%, #FF6B35 1.5px, transparent 1.5px),
    radial-gradient(circle at 40% 70%, #E63A2E 1.5px, transparent 1.5px),
    radial-gradient(circle at 70% 25%, #FF8C42 1px, transparent 1px),
    radial-gradient(circle at 90% 60%, #D62828 1.5px, transparent 1.5px),
    radial-gradient(circle at 25% 85%, #FF6B35 1px, transparent 1px),
    radial-gradient(circle at 60% 45%, #E63A2E 1.5px, transparent 1.5px),
    radial-gradient(circle at 85% 80%, #FF8C42 1px, transparent 1px),
    radial-gradient(circle at 15% 50%, #D62828 1px, transparent 1px),
    radial-gradient(circle at 22% 32%, #FF6B35 1.5px, transparent 1.5px),
    radial-gradient(circle at 78% 55%, #E63A2E 1px, transparent 1px),
    radial-gradient(circle at 52% 18%, #FF8C42 1.5px, transparent 1.5px),
    radial-gradient(circle at 8% 75%, #D62828 1px, transparent 1px),
    radial-gradient(circle at 88% 28%, #FF6B35 1px, transparent 1px),
    radial-gradient(circle at 33% 58%, #E63A2E 1.5px, transparent 1.5px),
    radial-gradient(circle at 67% 82%, #FF8C42 1px, transparent 1px),
    radial-gradient(circle at 45% 12%, #D62828 1.5px, transparent 1.5px);
  opacity: 0.35;
  animation: sparkle 3s ease-in-out infinite;
}

/* More sparkles offset */
.confetti::after {
  background-image:
    radial-gradient(circle at 5% 65%, #FF8C42 1px, transparent 1px),
    radial-gradient(circle at 35% 15%, #FF6B35 1.5px, transparent 1.5px),
    radial-gradient(circle at 55% 90%, #E63A2E 1px, transparent 1px),
    radial-gradient(circle at 80% 40%, #D62828 1.5px, transparent 1.5px),
    radial-gradient(circle at 95% 10%, #FF8C42 1px, transparent 1px),
    radial-gradient(circle at 45% 35%, #FF6B35 1px, transparent 1px),
    radial-gradient(circle at 18% 42%, #E63A2E 1px, transparent 1px),
    radial-gradient(circle at 62% 68%, #FF8C42 1.5px, transparent 1.5px),
    radial-gradient(circle at 28% 8%, #D62828 1px, transparent 1px),
    radial-gradient(circle at 82% 72%, #FF6B35 1.5px, transparent 1.5px),
    radial-gradient(circle at 12% 88%, #E63A2E 1px, transparent 1px),
    radial-gradient(circle at 72% 38%, #FF8C42 1px, transparent 1px),
    radial-gradient(circle at 38% 78%, #D62828 1.5px, transparent 1.5px),
    radial-gradient(circle at 92% 48%, #FF6B35 1px, transparent 1px);
  opacity: 0.35;
  animation: sparkle 3s ease-in-out infinite 1.5s;
}

@keyframes sparkle {
  0%, 100% { opacity: 0.15; transform: scale(1); }
  50% { opacity: 0.35; transform: scale(1.02); }
}

/* Chili animation classes - gentle sway */
.chiliAnim1 {
  animation: chiliSway1 6s ease-in-out infinite;
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
}

.chiliAnim2 {
  animation: chiliSway2 7s ease-in-out infinite 1s;
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
}

.chiliAnim3 {
  animation: chiliSway3 8s ease-in-out infinite 2s;
  filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
}

/* Chili animations - subtle floating/swaying motion */
@keyframes chiliSway1 {
  0%, 100% {
    transform: translateY(0) translateX(0) rotate(0deg);
  }
  33% {
    transform: translateY(-2px) translateX(1px) rotate(3deg);
  }
  66% {
    transform: translateY(-1px) translateX(-1px) rotate(-2deg);
  }
}

@keyframes chiliSway2 {
  0%, 100% {
    transform: translateY(0) translateX(0) rotate(0deg);
  }
  33% {
    transform: translateY(-3px) translateX(-2px) rotate(-4deg);
  }
  66% {
    transform: translateY(-1px) translateX(2px) rotate(3deg);
  }
}

@keyframes chiliSway3 {
  0%, 100% {
    transform: translateY(0) translateX(0) rotate(0deg);
  }
  33% {
    transform: translateY(-2px) translateX(2px) rotate(4deg);
  }
  66% {
    transform: translateY(-2px) translateX(-1px) rotate(-3deg);
  }
}

.heroContent {
  position: relative;
  text-align: center;
  z-index: 1;
}

.heroTitle {
  font-size: clamp(3.5rem, 10vw, 6rem);
  font-weight: 800;
  line-height: 1;
  margin: 0;
  letter-spacing: -0.04em;
}

.gradientText {
  background: linear-gradient(135deg, #FF6B35, #D62828);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  padding-right: 0.05em;
}

[data-theme='light'] .gradientText {
  background: linear-gradient(135deg, #E63A2E, #B81C1C);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.heroSubtitle {
  font-size: clamp(0.9rem, 2.5vw, 1.2rem);
  font-weight: 600;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: rgba(255, 107, 53, 0.45);
  margin-top: 0.5rem;
}

[data-theme='light'] .heroSubtitle {
  color: rgba(214, 40, 40, 0.4);
}

/* ===== STATS GRID ===== */
.statsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1.5rem;
  margin: 3rem 0;
}

.statCard {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem 1.5rem;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 107, 53, 0.15);
  border-radius: 20px;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  overflow: hidden;
}

[data-theme='light'] .statCard {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(214, 40, 40, 0.2);
}

.statCard::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, rgba(255, 107, 53, 0.1), transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.statCard:hover {
  transform: translateY(-4px);
  border-color: rgba(255, 107, 53, 0.3);
  box-shadow: 0 12px 40px rgba(255, 107, 53, 0.15);
}

[data-theme='light'] .statCard:hover {
  border-color: rgba(214, 40, 40, 0.4);
  box-shadow: 0 12px 40px rgba(214, 40, 40, 0.15);
}

.statCard:hover::before {
  opacity: 1;
}

.statNumber {
  font-size: clamp(2.5rem, 5vw, 3.5rem);
  font-weight: 800;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, #FF8C42, #D62828);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.1;
}

[data-theme='light'] .statNumber {
  background: linear-gradient(135deg, #E63A2E, #B81C1C);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.statLabel {
  font-size: 1rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.7);
  margin-top: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

[data-theme='light'] .statLabel {
  color: rgba(26, 22, 37, 0.6);
}

/* ===== GET STARTED LINK ===== */
.getStartedLink {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  font-weight: 500;
  color: #FF8C42;
  text-decoration: none;
  transition: gap 0.2s ease;
}

.getStartedLink:hover {
  gap: 0.6rem;
  text-decoration: underline;
}

[data-theme='light'] .getStartedLink {
  color: #D62828;
}

.linksRow {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.75rem;
  font-size: 0.95rem;
}

.supportLink {
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
}

.supportLink:hover {
  color: #FF8C42;
  text-decoration: underline;
}

[data-theme='light'] .supportLink {
  color: rgba(0, 0, 0, 0.6);
}

[data-theme='light'] .supportLink:hover {
  color: #D62828;
}

.linkDivider {
  color: rgba(255, 255, 255, 0.3);
}

[data-theme='light'] .linkDivider {
  color: rgba(0, 0, 0, 0.3);
}

/* ===== THANK YOU HERO ===== */
.thankYouHero {
  position: relative;
  padding: 2.5rem 2rem;
  margin: 3rem -1rem 1rem -1rem;
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(255, 107, 53, 0.2) 0%, transparent 60%),
    linear-gradient(180deg, rgba(214, 40, 40, 0.06) 0%, transparent 100%);
  border-radius: 24px;
  overflow: hidden;
}

[data-theme='light'] .thankYouHero {
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(214, 40, 40, 0.15) 0%, transparent 60%),
    linear-gradient(180deg, rgba(214, 40, 40, 0.04) 0%, transparent 100%);
}

.thankYouTitle {
  font-size: clamp(2.5rem, 8vw, 4rem);
  font-weight: 800;
  line-height: 1;
  margin: 0 0 1rem 0;
  letter-spacing: -0.04em;
}

.thankYouText {
  font-size: 1.1rem;
  color: rgba(255, 255, 255, 0.8);
  margin: 0 auto 0.5rem;
  max-width: 500px;
  text-align: center;
}

[data-theme='light'] .thankYouText {
  color: rgba(26, 22, 37, 0.7);
}

.thankYouTagline {
  font-size: 1rem;
  font-weight: 600;
  color: #FF8C42;
  margin: 0;
}

[data-theme='light'] .thankYouTagline {
  color: #D62828;
}

/* ===== NO ZOOM ===== */
.noZoom,
.noZoom img {
  cursor: default !important;
  pointer-events: none;
}

.noZoom a {
  pointer-events: auto;
  cursor: pointer;
}

/* ===== DISTRO MASHUP ===== */
.distroMashup {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: 0 auto;
  max-width: 340px;
  aspect-ratio: 1;
}

.distroOrbit {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.distroOrbit::before {
  content: '';
  position: absolute;
  width: 66%;
  height: 66%;
  border: 2px dashed rgba(255, 107, 53, 0.2);
  border-radius: 50%;
}

[data-theme='light'] .distroOrbit::before {
  border-color: rgba(214, 40, 40, 0.2);
}

.distroCenterLogo {
  position: absolute;
  width: 120px;
  height: 120px;
  z-index: 10;
  filter: drop-shadow(0 8px 24px rgba(255, 107, 53, 0.4));
  cursor: default;
}

[data-theme='light'] .distroCenterLogo {
  filter: drop-shadow(0 8px 24px rgba(214, 40, 40, 0.3));
}

.distroLogo {
  position: absolute;
  width: 56px;
  height: 56px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 107, 53, 0.2);
  border-radius: 16px;
  backdrop-filter: blur(8px);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: default;
}

[data-theme='light'] .distroLogo {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(214, 40, 40, 0.2);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.distroLogo:hover {
  transform: scale(1.15);
  border-color: rgba(255, 107, 53, 0.5);
  box-shadow: 0 8px 24px rgba(255, 107, 53, 0.3);
}

[data-theme='light'] .distroLogo:hover {
  border-color: rgba(214, 40, 40, 0.4);
  box-shadow: 0 8px 24px rgba(214, 40, 40, 0.2);
}

.distroLogo img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Position distros evenly in a circle (~51deg apart for 7 logos, radius ~32%) */
.distroLogo:nth-child(2) { top: 18%; left: 50%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(3) { top: 30%; left: 75%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(4) { top: 57%; left: 81%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(5) { top: 79%; left: 64%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(6) { top: 79%; left: 36%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(7) { top: 57%; left: 19%; transform: translate(-50%, -50%); }
.distroLogo:nth-child(8) { top: 30%; left: 25%; transform: translate(-50%, -50%); }

.distroLogo:hover {
  transform: translate(-50%, -50%) scale(1.1);
}

/* ===== NIRI THANKS ===== */
.niriThanks {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin: 1rem 0;
  padding: 0.75rem 1rem;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255, 107, 53, 0.08) 0%, rgba(214, 40, 40, 0.04) 100%);
  border: 1px solid rgba(255, 107, 53, 0.15);
}

.niriThanks > img {
  width: 40px;
  height: 40px;
  flex-shrink: 0;
}

.niriThanks > span {
  font-size: 0.95em;
  line-height: 1.5;
}

/* ===== DISCORD BUTTON ===== */
.discordButton {
  display: inline-flex;
  align-items: center;
  gap: 0.25em;
  padding: 0 0.35em;
  background: #5865F2;
  color: #fff !important;
  font-size: inherit;
  font-weight: 600;
  text-decoration: none !important;
  border-radius: 3px;
  transition: all 0.2s ease;
}

.discordButton:hover {
  background: #4752c4;
}

.discordButton img {
  flex-shrink: 0;
  height: 0.75em;
  width: auto;
  filter: brightness(0) invert(1);
}

/* ===== WIDGET GRID ===== */
.widgetGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 1.25rem;
  margin: 1.5rem 0;
}

.widgetCard {
  position: relative;
  display: flex;
  flex-direction: column;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 107, 53, 0.15);
  border-radius: 16px;
  overflow: hidden;
  transition: all 0.3s ease;
}

[data-theme='light'] .widgetCard {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(214, 40, 40, 0.15);
}

.widgetCard:hover {
  transform: translateY(-3px);
  border-color: rgba(255, 107, 53, 0.35);
  box-shadow: 0 8px 24px rgba(255, 107, 53, 0.12);
}

[data-theme='light'] .widgetCard:hover {
  border-color: rgba(214, 40, 40, 0.35);
  box-shadow: 0 8px 24px rgba(214, 40, 40, 0.1);
}

.widgetCard img {
  width: 100%;
  aspect-ratio: 16 / 10;
  object-fit: cover;
  border-bottom: 1px solid rgba(255, 107, 53, 0.1);
}

[data-theme='light'] .widgetCard img {
  border-bottom-color: rgba(214, 40, 40, 0.1);
}

.widgetInfo {
  padding: 0.9rem 1rem;
}

.widgetName {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.25rem 0;
  color: rgba(255, 255, 255, 0.95);
}

[data-theme='light'] .widgetName {
  color: rgba(26, 22, 37, 0.9);
}

.widgetAuthor {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.5);
  margin: 0;
}

[data-theme='light'] .widgetAuthor {
  color: rgba(26, 22, 37, 0.5);
}

.widgetBadge {
  display: inline-block;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.15rem 0.4rem;
  border-radius: 4px;
  margin-left: 0.5rem;
  vertical-align: middle;
}

.widgetBadgeBuiltin {
  background: rgba(255, 107, 53, 0.2);
  color: #FF8C42;
}

[data-theme='light'] .widgetBadgeBuiltin {
  background: rgba(214, 40, 40, 0.15);
  color: #D62828;
}

.widgetBadgeCommunity {
  background: rgba(99, 179, 237, 0.2);
  color: #63B3ED;
}

[data-theme='light'] .widgetBadgeCommunity {
  background: rgba(49, 130, 206, 0.15);
  color: #3182CE;
}

/* ===== DETAILS/COLLAPSIBLE ===== */
details {
  margin: 1rem 0;
  padding: 0;
  border: 1px solid rgba(255, 107, 53, 0.2);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.02);
}

[data-theme='light'] details {
  border-color: rgba(214, 40, 40, 0.2);
  background: rgba(255, 255, 255, 0.5);
}

details summary {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  font-weight: 600;
  cursor: pointer;
  list-style: none;
}

details summary::-webkit-details-marker {
  display: none;
}

details summary::before {
  content: '▶';
  font-size: 0.7em;
  transition: transform 0.2s ease;
}

details[open] summary::before {
  transform: rotate(90deg);
}

details[open] summary {
  border-bottom: 1px solid rgba(255, 107, 53, 0.15);
}

[data-theme='light'] details[open] summary {
  border-bottom-color: rgba(214, 40, 40, 0.15);
}

details > *:not(summary) {
  padding: 0 1rem;
}

details > *:last-child {
  padding-bottom: 1rem;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .blogHero {
    padding: 3rem 1.5rem;
    margin: -0.5rem -0.5rem 2rem -0.5rem;
  }

  .statsGrid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .statCard {
    padding: 1.5rem 1rem;
  }

  .distroMashup {
    max-width: 350px;
    padding: 2rem 0.5rem;
  }

  .distroCenterLogo {
    width: 80px;
    height: 80px;
  }

  .distroLogo {
    width: 44px;
    height: 44px;
    padding: 8px;
    border-radius: 12px;
  }
}



================================================
FILE: docs/contributing-registry.mdx
================================================
[Binary file]


================================================
FILE: docs/contributing.mdx
================================================
[Binary file]


================================================
FILE: docs/dankinstall.mdx
================================================
[Binary file]


================================================
FILE: docs/getting-started.mdx
================================================
[Binary file]


================================================
FILE: docs/index.mdx
================================================
---
title: Welcome
description: Welcome to Dank Linux
sidebar_position: 1
image: img/danklinux-docs.png
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗    ██╗     ██╗███╗   ██╗██╗   ██╗██╗  ██╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝    ██║     ██║████╗  ██║██║   ██║╚██╗██╔╝
██║  ██║███████║██╔██╗ ██║█████╔╝     ██║     ██║██╔██╗ ██║██║   ██║ ╚███╔╝
██║  ██║██╔══██║██║╚██╗██║██╔═██╗     ██║     ██║██║╚██╗██║██║   ██║ ██╔██╗
██████╔╝██║  ██║██║ ╚████║██║  ██╗    ███████╗██║██║ ╚████║╚██████╔╝██╔╝ ██╗
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝    ╚══════╝╚═╝╚═╝  ╚═══╝ ╚═════╝ ╚═╝  ╚═╝`}
  hideTitle={true}
/>

## Quick Start

*This will set up Dank Linux on your system, including all dependencies, the DankMaterialShell™, and default compositor and terminal configurations.*

```bash
curl -fsSL https://install.danklinux.com | sh
```

Supports Arch Linux + Derivatives, Fedora + Derivatives, Ubuntu, Debian, openSUSE, and Gentoo.

:::tip

The installer adds the appropriate repository (AUR, COPR, OBS, or PPA) and installs packages through your distro's package manager. Future updates come through normal system updates. If you install DMS directly from packages, run `dms setup` to generate starter compositor and terminal configs (niri/Hyprland only). Other compositors like sway, MangoWC, and labwc are supported—see [manual configuration](dankmaterialshell/installation#post-install).

:::

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DankDash Overview"
    sources={{
      light: useBaseUrl('/img/dankdashlight.png'),
      dark: useBaseUrl('/img/dankdash.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>DankMaterialShell's DankDash with a Suite of DankBar Widgets</figcaption>
</figure>

## The Suite

- **[DankMaterialShell](dankmaterialshell/overview)** - A feature-rich desktop shell built with [Quickshell](https://quickshell.org/) and [Go](https://golang.org/).
- **[dgop](dgop/)** - A stateless, cursor-based system and process monitoring tool with a tui, cli, and REST API.
- **[dsearch](danksearch/)** - Extremely fast, configurable, zero-dependency indexed filesystem search service.
- **[dankinstall](dankinstall/)** - An automated installer and management tool for the entire Dank Linux suite
- **dcal (in development)** - A calendar application that integrates with online and local calendars.

## Batteries Included

The age of assembling your desktop from dozens of separate tools and spending hours trying to make it feel cohesive is over. While traditional Wayland setups require you to hunt down, configure, and maintain a sprawling collection of utilities, Dank Linux delivers everything in one cohesive package with minimal dependencies.

### The Traditional Way: Package Hunting Simulator

A typical Hyprland, niri, Sway, MangoWC, dwl, labwc, or generic Wayland setup forces you to learn about and configure a dozen or more separate tools, such as:

- **Status Bar**: waybar, eww, or custom scripts
- **Notifications**: mako, swaync, or dunst
- **App Launcher**: rofi, wofi, fuzzel, or tofi
- **Screen Locking**: swaylock, hyprlock, or gtklock
- **Idle Management**: swayidle, hypridle
- **System Tools**: htop, btop, nm-applet, blueman, pavucontrol
- **Audio Control**: pavucontrol, pamixer scripts
- **Brightness Control**: brightnessctl with custom bindings
- **Clipboard Manager**: clipman, cliphist, or wl-clipboard scripts
- **Wallpaper Management**: swaybg, swww, hyprpaper, or wpaperd
- **Theming**: manually configuring gtk, qt, various apps, bars, compositor gaps and colors
- **Power Management**: custom scripts or additional daemons
- **Greeter**: gdm, sddm, lightdm, greetd

Each tool has its own configuration format, its own quirks, and its own dependencies. You'll spend hours writing glue scripts, debugging integration issues, and discovering missing functionality at the worst possible moments.

### With preconfigured "dotfiles"

Preconfigured "dotfiles" are often shared so others can replicate a working setup, but they come with their own challenges:
- **Intrusive Configurations**: They often change a lot of various configuration files on your system, making it hard to track and revert changes.
  - **DMS** does not modify *any* user configurations nor require it, everything is self-contained.
- **Compatibility**: Your system may differ in subtle ways that break the setup.
- **Complexity**: Understanding and adapting someone else's configuration can be daunting.
- **Preferences**: They may not align with your personal preferences or workflow needs.

*Note:* The community does an **incredible** job at sharing incredibly unique setups, and we highly encourage exploring those! They can provide incredibly unique things that dms cannot, but they are just often very opinionated and touch a lot of system configurations - while dms doesn't.

### The Dank Way: Completely Integrated

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Control Center"
    sources={{
      light: useBaseUrl('/img/cclight.png'),
      dark: useBaseUrl('/img/cc.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Control Center with system controls and quick settings</figcaption>
</figure>

Dank Linux replaces this fragmented ecosystem with **DankMaterialShell** - a single, integrated solution built with [Quickshell](https://quickshell.org) and [Go](https://go.dev):

- ✅ **Full Desktop Shell** - Complete panels, widgets, and system integrations
- ✅ **Unified Configuration** - One consistent approach, not 15 different syntaxes
- ✅ **Intelligent Search** - `danksearch` for blazingly-fast file indexing & search
- ✅ **System Monitoring** - `dgop` provides comprehensive system insights without additional tools, persistent daemons, or long-running samplers preventing CPU sleep states.
- ✅ **Dynamic Theming** - Automatic color generation with `matugen`, applied everywhere
- ✅ **All Essentials Included** - Notifications, app launcher, system tray, media controls, and more
- ✅ **Comprehensive Plugin System** - Comprehensive plugin system allows limitless possibilities for new widgets and launcher functions.
- ✅ **Smart Defaults** - Works beautifully out of the box, customizable when you want it

No more late-night debugging sessions because you forgot to install a clipboard manager. No more manually syncing color schemes across a dozen config files.

**One install. One shell. Everything works.**

That's Dank Linux - we've already done the integration work so you can focus on using your desktop, not building it.

### Pre-configured Images

Want even less setup? Some distributions ship with DankMaterialShell pre-configured:

- <a href="https://github.com/zirconium-dev/zirconium/" style={{display: 'inline-flex', alignItems: 'center', gap: '0.4rem'}}><img src="/img/z.svg" alt="" style={{width: '1.1em', height: '1.1em', verticalAlign: 'middle'}} /> **Zirconium**</a> - A Fedora-based immutable OS with niri + DMS, optimized for container-focused development

## Beautiful by Default

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Desktop Overview"
    sources={{
      light: useBaseUrl('/img/desktoplight.png'),
      dark: useBaseUrl('/img/desktop.png'),
    }}
    style={{ maxWidth: '800px', width: '100%' }}
  />
  <figcaption>Full desktop view with terminal, launcher, and system monitoring</figcaption>
</figure>

DankMaterialShell provides a stunning desktop experience right out of the box:
- **Dozens of Customizable Widgets**: Extendable launcher, workspace switcher, media player, clock, weather, system tray, notifications, lock screen, greeter, network integration, bluetooth integration, and more.
- **Dynamic Theming**: Automatic color schemes applied across the desktop.
- **Smooth Animations**: Polished transitions and effects throughout the desktop
- **Material Design**: Modern, clean aesthetics inspired by Material Design 3

## Innovating Solutions

Dank Linux is engineering solutions to problems that have never been solved before in the Linux space.

### dgop - first-of-its-kind Stateless System & Process Status Tool 

Before dgop, if you wanted to measure CPU usage - for example, you either had to:
1. Collect samples over a substantial time period, say 1-5 seconds, and then calculate the difference between the samples to get an average CPU usage over that time, or:
2. Use a persistent daemon that continuously samples and stores system metrics on-disk or in-memory, which can consume resources and complicate system design.

Both approaches have significant drawbacks, including delayed responsiveness, increased resource consumption, and added complexity.

With dgop, this problem is solved using a novel, cursor-based sampling technique:
1. Request CPU percentage, receive baseline values with a `cursor`
2. Request CPU percentage again, whenever you want, passing the previous `cursor` and you will receive the CPU, process, and system metrics calculated over the exact time since the last request - instantaneously.

This approach is also used for other time-based metrics, such as disk thoroughput and network usage.

dgop also provides a top-like TUI, advanced CLI, and a fully-documented OpenAPI 3.1 REST API for programmatic access - with "meta" commands that allow you to mix and match any type of metrics you want.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DGOP Preview"
    sources={{
      light: useBaseUrl('/img/dgoplight.png'),
      dark: useBaseUrl('/img/dgop.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>dgop tui interface</figcaption>
</figure>

### danksearch - Blazingly Fast Filesystem Search

Traditional filesystem search tools usually come as part of the [KDE](https://kde.org/) or [GNOME](https://www.gnome.org/) desktop environments. They require many dependencies, are hard to configure, difficult to search in a programmatic way, and often users opt to just disable them.

DankSearch is a zero-dependency, blazingly-fast, fully configurable in 1 file, indexed filesystem search service that works as a standalone tool.

- **Zero Dependencies**: Written in Go, runs anywhere
- **Configurable**: One simple configuration file, populated with sensible defaults.
- **Fast Indexing**: Index tens of thousands of files in minutes.
- **Index Synching**: Automatically keeps the index up to date with filesystem changes.
- **Advanced Search**: Full text search, regex, fuzzy matching, extension filters, metadata searching, etc.
- **Programmatic Access**: Provides a fully documented OpenAPI 3.1 spec REST API for easy integration with other tools and scripts, as well as a CLI for direct use.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DankSearch"
    sources={{
      light: useBaseUrl('/img/dsearchlight.png'),
      dark: useBaseUrl('/img/dsearch.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>DankSearch file search interface</figcaption>
</figure>

## Open Source

Dank Linux and all its components are open source and MIT-licensed.

Source code:
- [DankMaterialShell/dms](https://github.com/AvengeMedia/DankMaterialShell)
- [DankMaterialShell/dms backend (core) + dankinstall](https://github.com/AvengeMedia/DankMaterialShell/core)
- [dms first-party plugins](https://github.com/AvengeMedia/dms-plugins)
- [dgop GitHub](https://github.com/AvengeMedia/dgop)
- [danksearch GitHub](https://github.com/AvengeMedia/danksearch)

## Get Started

Ready to dive in? Head over to the [Getting Started](getting-started) guide to begin your Dank Linux journey!

## Join the Community

- **GitHub**: [github.com/AvengeMedia](https://github.com/AvengeMedia)
- **Discord**: `DankMaterialShell` has a subsection on the niri discord server, keep relevant discussions in the relevant `#dms-*` channels.
  - [niri discord](https://discord.gg/ppWTpKmPgT)
- **Documentation**: You're already here!
- **Support Development**: [Ko-fi](https://ko-fi.com/danklinux) - Tip us if you'd like to support the project!


================================================
FILE: docs/support.mdx
================================================
[Binary file]


================================================
FILE: docs/dankgreeter/configuration.mdx
================================================
---
title: Configuration
description: Configure DankGreeter login screen appearance
sidebar_position: 4
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗ ██████╗ ██████╗ ███████╗███████╗████████╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝██╔════╝ ██╔══██╗██╔════╝██╔════╝╚══██╔══╝
██║  ██║███████║██╔██╗ ██║█████╔╝ ██║  ███╗██████╔╝█████╗  █████╗     ██║
██║  ██║██╔══██║██║╚██╗██║██╔═██╗ ██║   ██║██╔══██╗██╔══╝  ██╔══╝     ██║
██████╔╝██║  ██║██║ ╚████║██║  ██╗╚██████╔╝██║  ██║███████╗███████╗   ██║
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝╚══════╝   ╚═╝
                                                                            `}
/>

# Configuration

## Custom Compositor Configuration

:::tip

Custom compositor configurations allow you to configure displays (resolution, refresh rate, position, etc.) specifically for the greeter.

:::

### niri

1. Create a baseline configuration file at `/etc/greetd/niri.kdl`:
  ```bash
  sudo tee /etc/greetd/niri.kdl > /dev/null << 'EOF'
  hotkey-overlay {
      skip-at-startup
  }

  environment {
      DMS_RUN_GREETER "1"
  }

  gestures {
    hot-corners {
      off
    }
  }

  layout {
    background-color "#000000"
  }
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command niri -C /etc/greetd/niri.kdl"
  #...existing configuration
  ```

3. Edit `/etc/greetd/niri.kdl` however you see fit, the greeter will run under this compositor configuration

### Hyprland

1. Create a baseline configuration file at `/etc/greetd/hypr.conf`:
  ```bash
  sudo tee /etc/greetd/hypr.conf > /dev/null << 'EOF'
  env = DMS_RUN_GREETER,1

  misc {
      disable_hyprland_logo = true
  }
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command hyprland -C /etc/greetd/hypr.conf"
  #...existing configuration
  ```

3. Edit `/etc/greetd/hypr.conf` however you see fit, the greeter will run under this compositor configuration


### Sway

1. Create a baseline configuration file at `/etc/greetd/sway`:
  ```bash
  sudo tee /etc/greetd/sway > /dev/null << 'EOF'
  # Sway greeter configuration
  # The exec command to launch the greeter is automatically appended by dms-greeter
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command sway -C /etc/greetd/sway"
  #...existing configuration
  ```

3. Edit `/etc/greetd/sway` however you see fit, the greeter will run under this compositor configuration

### MangoWC

1. Create a baseline configuration file at `/etc/greetd/mangowc.conf`:
  ```bash
  sudo tee /etc/greetd/mangowc.conf > /dev/null << 'EOF'
  # MangoWC greeter configuration
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command mangowc -C /etc/greetd/mangowc.conf"
  #...existing configuration
  ```

3. Edit `/etc/greetd/mangowc.conf` however you see fit, the greeter will run under this compositor configuration

## Syncing with DMS

You can automatically sync the system greeter with the logged in user's wallpaper, themes, fonts, etc.

### Automatic Sync

You can use `dms greeter sync` to automatically set up theme syncing. This command is available for:
- dankinstall users
- Arch AUR users
- Fedora COPR users

:::note

**NixOS users:** The `dms greeter sync` command is not available on NixOS. Please follow the manual sync steps below.

:::

```bash
dms greeter sync
```

This will:
- Add your user to the `greeter` group (if needed)
- Set up ACL permissions on parent directories for greeter access
- Configure group permissions on DMS config directories
- Create symlinks to sync settings, wallpapers, and color themes

:::note

After running `dms greeter sync`, you will need to log out and log back in for group membership changes to take effect. After logging back in, your greeter will automatically reflect your current DMS theme, wallpaper, and settings.

:::

### Manual Sync

If you prefer to set up syncing manually:

1. Add your user to the `greeter` group:
  ```bash
  sudo usermod -aG greeter <username>
  ```

2. Set up ACL permissions on parent directories:
  ```bash
  setfacl -m u:greeter:x ~
  setfacl -m u:greeter:x ~/.config
  setfacl -m u:greeter:x ~/.local
  setfacl -m u:greeter:x ~/.cache
  setfacl -m u:greeter:x ~/.local/state
  ```

3. Set group permissions on DMS config directories:
  ```bash
  sudo chgrp -R greeter ~/.config/DankMaterialShell
  sudo chmod -R g+rX ~/.config/DankMaterialShell

  sudo chgrp -R greeter ~/.local/state/DankMaterialShell
  sudo chmod -R g+rX ~/.local/state/DankMaterialShell

  sudo chgrp -R greeter ~/.cache/quickshell
  sudo chmod -R g+rX ~/.cache/quickshell
  ```

4. Create configuration symlinks:
  ```bash
  sudo ln -sf ~/.config/DankMaterialShell/settings.json /var/cache/dms-greeter/settings.json
  sudo ln -sf ~/.local/state/DankMaterialShell/session.json /var/cache/dms-greeter/session.json
  sudo ln -sf ~/.cache/quickshell/dankshell/dms-colors.json /var/cache/dms-greeter/colors.json
  ```

:::note

You will have to logout or reboot for group change to take effect.

:::

## Checking Sync Status

To verify that your greeter is properly configured and syncing with your user settings, run:

```bash
dms greeter status
```

This command is available for all users and will check:
- ✓ Group membership (whether your user is in the `greeter` group)
- ✓ Cache directory existence
- ✓ Configuration symlinks (settings, wallpaper, colors)
- ✓ Whether source files exist and are readable

### Example Output

```
=== DMS Greeter Status ===

Group Membership:
  ✓ User is in greeter group

Greeter Cache Directory:
  ✓ /var/cache/dms-greeter exists

Configuration Symlinks:
  ✓ Settings: synced correctly
  ✓ Session state: synced correctly
  ✓ Color theme: synced correctly

✓ All checks passed! Greeter is properly configured.
```

### Troubleshooting

If `dms greeter status` shows issues:

**User not in greeter group:**
```bash
dms greeter sync
# Then log out and log back in
```

**Symlinks missing or broken:**
```bash
dms greeter sync
```

**ACL permission issues (themes/wallpapers not appearing):**
```bash
# Check if ACLs are set
getfacl ~ ~/.config ~/.local ~/.cache ~/.local/state | grep "user:greeter"

# If not, run sync again
dms greeter sync
```

## Manual Configuration

The greeter uses three main configuration files located in `/var/cache/dms-greeter/` (or your custom `DMS_GREET_CFG_DIR`):

- `settings.json` - Appearance, behavior, and widget settings
- `session.json` - Wallpaper configuration
- `colors.json` - Color scheme configuration

:::note

These files are read-only by the greeter, not written or updated.

:::

### Colors

Colors can be configured in the exact same way described in [DankMaterialShell Custom Themes](/docs/dankmaterialshell/custom-themes)

### Settings

The `settings.json` file controls the greeter's appearance and behavior. Here's a complete reference:

#### Clock & Time

```json
{
  "use24HourClock": true,
  "showSeconds": false,
  "lockDateFormat": ""
}
```

- `use24HourClock`: Use 24-hour format (`true`) or 12-hour format (`false`)
- `showSeconds`: Display seconds in the clock
- `lockDateFormat`: Custom Qt date format string (empty = `Locale.LongFormat`)

#### Weather

```json
{
  "weatherEnabled": true,
  "weatherLocation": "New York, NY",
  "weatherCoordinates": "40.7128,-74.0060",
  "useAutoLocation": false,
  "useFahrenheit": false
}
```

- `weatherEnabled`: Show weather widget in top-right
- `weatherLocation`: Display name for location
- `weatherCoordinates`: `"latitude,longitude"` string
- `useAutoLocation`: Auto-detect location via IP geolocation
- `useFahrenheit`: Use Fahrenheit (`true`) or Celsius (`false`)

#### Appearance

```json
{
  "currentThemeName": "blue",
  "customThemeFile": "",
  "matugenScheme": "scheme-tonal-spot",
  "iconTheme": "System Default",
  "fontFamily": "Inter Variable",
  "fontWeight": 400,
  "fontScale": 1.0,
  "cornerRadius": 12,
  "widgetBackgroundColor": "sch",
  "surfaceBase": "s",
  "animationSpeed": 2
}
```

- `currentThemeName`: Built-in theme name (`"blue"`, `"red"`, `"green"`, etc.)
- `customThemeFile`: Path to custom matugen JSON theme file
- `matugenScheme`: Matugen color scheme variant
- `iconTheme`: Icon theme name for DankIcon fallbacks
- `fontFamily`: Primary font family
- `fontWeight`: Font weight (`400` = normal, `700` = bold)
- `fontScale`: Font size multiplier (`1.0` = default)
- `cornerRadius`: Corner radius in pixels for UI elements
- `widgetBackgroundColor`: Widget background scheme (`"sch"`, `"s"`, `"sv"`)
- `surfaceBase`: Surface base color scheme (`"s"`, `"sv"`, `"sb"`)
- `animationSpeed`: Animation speed (`0` = fastest, `4` = slowest, `2` = default)

#### Complete Example

`/var/cache/dms-greeter/settings.json`:

```json
{
  "use24HourClock": true,
  "showSeconds": false,
  "lockDateFormat": "",
  "lockScreenShowPowerActions": true,
  "useFahrenheit": false,
  "weatherLocation": "New York, NY",
  "weatherCoordinates": "40.7128,-74.0060",
  "useAutoLocation": false,
  "weatherEnabled": true,
  "currentThemeName": "blue",
  "customThemeFile": "",
  "matugenScheme": "scheme-tonal-spot",
  "nightModeEnabled": false,
  "iconTheme": "System Default",
  "fontFamily": "Inter Variable",
  "fontWeight": 400,
  "fontScale": 1.0,
  "cornerRadius": 12,
  "widgetBackgroundColor": "sch",
  "surfaceBase": "s",
  "animationSpeed": 2
}
```

### Wallpapers

The `session.json` file controls wallpaper settings.

#### Basic Configuration

```json
{
  "wallpaperPath": "/path/to/wallpaper.jpg",
  "wallpaperFillMode": "PreserveAspectCrop"
}
```

- `wallpaperPath`: Default wallpaper for all monitors
- `wallpaperFillMode`: Qt fill mode
  - `"PreserveAspectCrop"` - Crop to fill (default)
  - `"PreserveAspectFit"` - Fit within bounds
  - `"Stretch"` - Stretch to fill

#### Per-Monitor Wallpapers

```json
{
  "wallpaperPath": "/path/to/default.jpg",
  "wallpaperFillMode": "PreserveAspectCrop",
  "monitorWallpapers": {
    "DP-1": "/path/to/monitor1-wallpaper.jpg",
    "DP-2": "/path/to/monitor2-wallpaper.jpg",
    "HDMI-A-1": "#1a1a1a"
  }
}
```

- `monitorWallpapers`: Per-monitor wallpaper overrides
  - Key: Monitor name from `niri msg outputs` or `hyprctl monitors`
  - Value formats:
    - File paths: `/path/to/image.jpg`
    - Solid colors: `#RRGGBB` format
    - Wallpaper Engine: `we:workshop_id` format

#### Complete Example

`/var/cache/dms-greeter/session.json`:

```json
{
  "wallpaperPath": "/usr/share/backgrounds/default.jpg",
  "wallpaperFillMode": "PreserveAspectCrop",
  "monitorWallpapers": {
    "DP-1": "/home/user/Pictures/wallpaper-main.png",
    "DP-2": "#2e3440",
    "HDMI-A-1": "/home/user/Pictures/wallpaper-side.jpg"
  }
}
```




================================================
FILE: docs/dankgreeter/index.mdx
================================================
---
title: DankGreeter
description: Dank greeter for greetd
sidebar_position: 1
image: img/dgreet.png
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗ ██████╗ ██████╗ ███████╗███████╗████████╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝██╔════╝ ██╔══██╗██╔════╝██╔════╝╚══██╔══╝
██║  ██║███████║██╔██╗ ██║█████╔╝ ██║  ███╗██████╔╝█████╗  █████╗     ██║
██║  ██║██╔══██║██║╚██╗██║██╔═██╗ ██║   ██║██╔══██╗██╔══╝  ██╔══╝     ██║
██████╔╝██║  ██║██║ ╚████║██║  ██╗╚██████╔╝██║  ██║███████╗███████╗   ██║
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝╚══════╝   ╚═╝
                                                                            `}
/>

# DankGreeter

`dms-greeter` is a [greetd](https://github.com/kennylevinsen/greetd) greeter using the same aesthetics as the DankMaterialShell lock screen.

## Documentation

- [Installation](installation) - Install & Setup
- [Configuration](configuration) - Configure themes, wallpapers, etc.

## Contributing

DankGreeter is open source and welcomes contributions:

- **Source Code**: [GitHub Repository](https://github.com/AvengeMedia/DankMaterialShell/tree/master/quickshell/Modules/Greetd)
- **Issues**: Report bugs and request features on GitHub
- **Documentation**: Help improve the documentation

## License

DankGreeter is released under the MIT License.



================================================
FILE: docs/dankgreeter/installation.mdx
================================================
---
title: Installation
description: Install DankGreeter display manager
sidebar_position: 2
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗ ██████╗ ██████╗ ███████╗███████╗████████╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝██╔════╝ ██╔══██╗██╔════╝██╔════╝╚══██╔══╝
██║  ██║███████║██╔██╗ ██║█████╔╝ ██║  ███╗██████╔╝█████╗  █████╗     ██║
██║  ██║██╔══██║██║╚██╗██║██╔═██╗ ██║   ██║██╔══██╗██╔══╝  ██╔══╝     ██║
██████╔╝██║  ██║██║ ╚████║██║  ██╗╚██████╔╝██║  ██║███████╗███████╗   ██║
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝╚══════╝   ╚═╝
                                                                            `}
/>

# Installation

## Installation Methods

Choose the installation method for your distribution:

## Arch Linux

Install from the AUR:

```bash
paru -S greetd-dms-greeter-git
# Or with yay
yay -S greetd-dms-greeter-git
```

After installation, proceed to [Completing Setup](#completing-setup) below.

## Fedora

```bash
sudo dnf copr enable avengemedia/danklinux
sudo dnf install dms-greeter
```

After installation, proceed to [Completing Setup](#completing-setup) below.

## NixOS

:::tip

NixOS has dedicated documentation with two installation methods:
- [Native nixpkgs installation](./nixos) - **Recommended** for NixOS unstable users
- [Flake-based installation](./nixos-flake) - For NixOS stable or quicker updates

:::

## Other distributions

### For dankinstall users

If you installed DMS using [dankinstall](/docs/dankinstall) on a distribution other than Arch or Fedora, use this automated command:

```bash
dms greeter install
```

This command will automatically:
- Install greetd (if not already installed)
- Set up the dms-greeter wrapper
- Configure permissions and ACLs for theme syncing
- Create the greeter cache directory
- Configure greetd to use DMS

Then proceed to [Completing Setup](#completing-setup) below.

### Manual installation (DMS already installed)

If you already have DMS installed but need to set up the greeter manually, install `greetd` and then the greeter wrapper:

```bash
sudo wget https://raw.githubusercontent.com/AvengeMedia/DankMaterialShell/refs/heads/master/quickshell/Modules/Greetd/assets/dms-greeter -O /usr/local/bin/dms-greeter
sudo chmod +x /usr/local/bin/dms-greeter
```

Then proceed to [Completing Setup](#completing-setup) below, using the following command in `/etc/greetd/config.toml`:

```toml
command = "dms-greeter --command niri -p /usr/share/quickshell/dms"
```

### Manual installation (without DMS)

For non-dankinstall users without DMS, install `greetd`, `quickshell`, and then the greeter:

```bash
sudo mkdir -p /etc/xdg/quickshell
sudo git clone https://github.com/AvengeMedia/DankMaterialShell.git /etc/xdg/quickshell/dms-greeter
sudo mkdir /var/cache/dms-greeter
sudo chown greeter:greeter /var/cache/dms-greeter
```

:::note

Some distributions may have different user/group names for the greetd user.

:::

#### Prerequisites for Theme Syncing

If you want to sync your user's theme with the greeter, ensure the `acl` package is installed.
ACLs (Access Control Lists) are required to allow the greeter user to traverse your home directory and access configuration files.

## Completing Setup

After installing the greeter package, you can use automated commands to complete setup, or follow manual steps.

### Automated Setup (All users)

After installing the greeter package, you can use these commands to enable and sync the greeter:

#### 1. Enable the Greeter

```bash
dms greeter enable
```

This will:
- Configure `/etc/greetd/config.toml` with the correct compositor command
- Disable conflicting display managers (gdm, lightdm, sddm)
- Enable and start the greetd service

#### 2. Sync with Your User Theme

```bash
dms greeter sync
```

This will:
- Add your user to the `greeter` group (if needed)
- Set up ACL permissions on parent directories for greeter access
- Configure group permissions on DMS config directories
- Create symlinks to sync settings, wallpapers, and color themes

:::note

After running `dms greeter sync`, you will need to log out and log back in for group membership changes to take effect.

:::

:::note

**NixOS users:** The `dms greeter enable` and `dms greeter sync` commands are not available on NixOS. Please follow the manual steps below or see the [NixOS installation guides](./nixos).

:::

### For all users

You can check your greeter configuration at any time:

```bash
dms greeter status
```

This verifies your greeter setup and sync status. See the [Configuration guide](/docs/dankgreeter/configuration#checking-sync-status) for detailed information.

---

### Manual Setup (all distros)

If you prefer to set up the greeter manually, follow these steps:

:::tip

**All users:** You can use `dms greeter enable` to automate this process instead of following the manual steps below.

:::

1. Edit `/etc/greetd/config.toml` and set `command =` to use dms-greeter:
  ```toml
  [terminal]
  vt = 1

  [default_session]
  user = "greeter"
  command = "dms-greeter --command niri"
  ### Uncomment the below line to run the greeter on Hyprland
  # command = "dms-greeter --command Hyprland"
  ### Uncomment to run the greeter on sway
  # command = "dms-greeter --command sway"
  ```

2. Disable any existing conflicting greeters:

:::warning

Disabling a greeter while logged in under that greeter will log you out and bring you to a non-graphical TTY.

:::

  ```bash
  sudo systemctl disable gdm lightdm sddm
  ```

3. Enable and start the greeter:
  ```bash
  sudo systemctl enable greetd
  sudo systemctl start greetd
  ```



================================================
FILE: docs/dankgreeter/nixos-flake.mdx
================================================
[Binary file]


================================================
FILE: docs/dankgreeter/nixos.mdx
================================================
[Binary file]


================================================
FILE: docs/danklinux/index.mdx
================================================
[Binary file]


================================================
FILE: docs/dankmaterialshell/advanced-configuration.mdx
================================================
---
title: Advanced Configuration
description: Advanced settings and customization options
sidebar_position: 9
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell supports several advanced configuration options through environment variables prefixed with `DMS_`.

## Core Configuration

### DMS_RUN_GREETER

Enables greeter/login screen mode instead of regular shell mode. Used for display manager integration with greetd.

```bash
DMS_RUN_GREETER=1 dms run
```

### DMS_GREET_CFG_DIR

Specifies custom configuration directory for greeter mode (defaults to `/etc/greetd/.dms`). Useful for isolating greeter settings from user settings.

```bash
DMS_GREET_CFG_DIR=/custom/path dms run
```

### DMS_SOCKET

Custom Unix socket path for DMS internal services communication. Used by DMSService, NetworkService, SessionService, and PortalService for IPC.

```bash
DMS_SOCKET=/tmp/custom-dms.sock dms run
```

## Display & Rendering

### DMS_DISABLE_MATUGEN

Disables matugen dynamic theming system for troubleshooting or when using static themes. Set to `1` or `true` to disable.

```bash
DMS_DISABLE_MATUGEN=1 dms run
```

### DMS_DISABLE_CAVA

Disables the built-in Cava audio visualizer. Set to `1` to disable.

```bash
DMS_DISABLE_CAVA=1 dms run
```

### DMS_DISABLE_LAYER

Disables layer effects on popout widgets for performance or compatibility reasons. Set to `true` to disable layer rendering.

```bash
DMS_DISABLE_LAYER=true dms run
```

### DMS_DANKBAR_LAYER

Controls Wayland layer for DankBar panel. Valid values: `bottom`, `overlay`, `background`, or `top` (default). Useful for window stacking issues.

```bash
DMS_DANKBAR_LAYER=overlay dms run
```


### DMS_POPOUT_LAYER

Controls Wayland layer for DankBar popout widgets. Valid values: `bottom`, `overlay`, `background`, or `top` (default). Useful for window stacking issues.

```bash
DMS_POPOUT_LAYER=overlay dms run
```

### DMS_MODAL_LAYER

Controls Wayland layer for modal windows like the launcher, settings panel, and other popups. Valid values: `bottom`, `overlay`, `background`, or `top` (default).

```bash
DMS_MODAL_LAYER=overlay dms run
```

### DMS_NOTIFICATION_LAYER

Controls Wayland layer for notification popups. Valid values: `bottom`, `overlay`, `background`, or `top` (default).

```bash
DMS_NOTIFICATION_LAYER=overlay dms run
```

## System Integration

### DMS_DISABLE_POLKIT

Disable's the native polkit integration, if you prefer to use a different polkit agent.

```bash
DMS_DISABLE_POLKIT=1 dms run
```

### DMS_PREFERRED_BATTERY

Forces specific battery device when multiple batteries detected (e.g., dual-battery laptops). Provide the UPower device name/path.

```bash
DMS_PREFERRED_BATTERY=/org/freedesktop/UPower/devices/battery_BAT0 dms run
```

### DMS_HIDE_TRAYIDS

Comma-separated list of system tray icon IDs to hide from the system tray bar.

```bash
DMS_HIDE_TRAYIDS=discord,spotify,steam dms run
```

```bash
DMS_DWL_TAG_COUNT=5 dms run
```

## Printing Configuration

### DMS_IPP_HOST

Specifies the hostname or IP address of the IPP/CUPS print server. Defaults to `localhost` if not set.

```bash
DMS_IPP_HOST=printserver.local dms run
```

### DMS_IPP_PORT

Specifies the port number for the IPP/CUPS print server. Defaults to `631` (standard IPP port) if not set.

```bash
DMS_IPP_PORT=631 dms run
```

### DMS_IPP_USERNAME

Username for authenticating with the IPP/CUPS print server. Leave unset if authentication is not required.

```bash
DMS_IPP_USERNAME=printuser dms run
```

### DMS_IPP_PASSWORD

Password for authenticating with the IPP/CUPS print server. Leave unset if authentication is not required.

```bash
DMS_IPP_PASSWORD=secret dms run
```

## Setting Environment Variables

:::tip Systemd / DankInstall Users

If you manage DMS with systemd (including dankinstall users), set environment variables in `~/.config/environment.d/90-dms.conf`:

```ini
TERMINAL=ghostty
DMS_DISABLE_MATUGEN=1
DMS_DANKBAR_LAYER=overlay
DMS_HIDE_TRAYIDS=discord,spotify
```
At least the TERMINAL variable should be present, if you want to use the `System Updates` widget.
Log out and back in for changes to take effect.

You can also run `systemctl --user edit dms` and add `Environment=` lines under `[Service]`:

```ini
[Service]
Environment=TERMINAL=ghostty
Environment=DMS_DISABLE_MATUGEN=1
```

This only affects DMS and apps it launches, whereas `90-dms.conf` applies to all user sessions.

:::

### niri

Add to your niri config:

```kdl
environment {
  DMS_DISABLE_MATUGEN "1"
  DMS_DANKBAR_LAYER "overlay"
  DMS_HIDE_TRAYIDS "discord,spotify"
}
```

### Hyprland

Add to your Hyprland config:

```conf
env = DMS_DISABLE_MATUGEN,1
env = DMS_DANKBAR_LAYER,overlay
env = DMS_HIDE_TRAYIDS,discord,spotify
```

### Sway

Add to your Sway config:

```conf
set $DMS_DISABLE_MATUGEN 1
set $DMS_DANKBAR_LAYER overlay
set $DMS_HIDE_TRAYIDS discord,spotify
```

### Manual Launch

Set variables before launching:

```bash
export DMS_DISABLE_MATUGEN=1
export DMS_DANKBAR_LAYER=overlay
dms run
```

## Use Cases

**Disable dynamic theming:**
```bash
DMS_DISABLE_MATUGEN=1
```
Useful for performance testing or when using only static themes.

**Hide system tray icons:**
```bash
DMS_HIDE_TRAYIDS=discord,slack,teams
```
Clean up system tray by hiding unwanted application icons.

**Fix bar layering issues:**
```bash
DMS_DANKBAR_LAYER=overlay
```
If DankBar appears behind windows or other issues, adjust the Wayland layer.

**Dual battery laptops:**
```bash
DMS_PREFERRED_BATTERY=/org/freedesktop/UPower/devices/battery_BAT0
```
Force DMS to use a specific battery when multiple are detected.

**Performance tuning:**
```bash
DMS_DISABLE_LAYER=true
```
Disable layer effects to improve performance on lower-end hardware.

**Remote print server:**
```bash
DMS_IPP_HOST=printserver.local
DMS_IPP_PORT=631
DMS_IPP_USERNAME=printuser
DMS_IPP_PASSWORD=secret
```
Connect to a remote CUPS/IPP print server with authentication.



================================================
FILE: docs/dankmaterialshell/application-themes.mdx
================================================
[Binary file]


================================================
FILE: docs/dankmaterialshell/calendar-integration.mdx
================================================
---
title: Calendar Integration
description: Sync CalDAV calendars for dashboard integration
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

Sync your CalDAV-compatible calendar (Google Calendar, Office365, etc.) for dashboard integration.

:::warning
Setting up khal and vdirsyncer is very user-unfriendly and convoluted, in a future release this integration will be replaced with DankCalendar.
:::

:::tip
Fore more details, view the [khal](https://khal.readthedocs.io/en/latest/) documentation directly. DMS will automatically pick up khal events once configured.
:::

## Installation

Install the required dependencies for calendar synchronization:

### Arch & Derivatives

```bash
sudo pacman -S vdirsyncer khal python-aiohttp-oauthlib
```

### Fedora & Derivatives

```bash
sudo dnf install python3-vdirsyncer khal python3-aiohttp-oauthlib
```

## Configuration

### 1. Configure vdirsyncer

Create `~/.vdirsyncer/config`:

```ini
[general]
status_path = "~/.calendars/status"

[pair personal_sync]
a = "personal"
b = "personallocal"
collections = ["from a", "from b"]
conflict_resolution = "a wins"
metadata = ["color"]

[storage personal]
type = "google_calendar"
token_file = "~/.vdirsyncer/google_calendar_token"
client_id = "your_client_id"
client_secret = "your_client_secret"

[storage personallocal]
type = "filesystem"
path = "~/.calendars/Personal"
fileext = ".ics"
```

### 2. Initial Sync

Run the initial synchronization and configure khal:

```bash
vdirsyncer sync
khal configure
```

### 3. Auto-sync (Optional)

Set up automatic synchronization every 5 minutes using cron:

```bash
crontab -e
```

Add the following line:

```cron
*/5 * * * * /usr/bin/vdirsyncer sync
```

## Troubleshooting

### Calendar not syncing

Check vdirsyncer credentials and network connectivity:

```bash
vdirsyncer -vdebug sync
```

### Missing calendar events

Verify khal is configured correctly:

```bash
khal list
```

### Authentication issues

For Google Calendar, ensure your OAuth client ID and secret are correct. You may need to re-authenticate:

```bash
rm ~/.vdirsyncer/google_calendar_token
vdirsyncer sync
```


================================================
FILE: docs/dankmaterialshell/cli-brightness.mdx
================================================
---
title: Brightness Control
description: Control backlight, LED, and DDC/I2C monitor brightness
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ██████╗ ██╗ ██████╗ ██╗  ██╗████████╗███╗   ██╗███████╗███████╗███████╗
██╔══██╗██╔══██╗██║██╔════╝ ██║  ██║╚══██╔══╝████╗  ██║██╔════╝██╔════╝██╔════╝
██████╔╝██████╔╝██║██║  ███╗███████║   ██║   ██╔██╗ ██║█████╗  ███████╗███████╗
██╔══██╗██╔══██╗██║██║   ██║██╔══██║   ██║   ██║╚██╗██║██╔══╝  ╚════██║╚════██║
██████╔╝██║  ██║██║╚██████╔╝██║  ██║   ██║   ██║ ╚████║███████╗███████║███████║
╚═════╝ ╚═╝  ╚═╝╚═╝ ╚═════╝ ╚═╝  ╚═╝   ╚═╝   ╚═╝  ╚═══╝╚══════╝╚══════╝╚══════╝`}
  hideTitle={true}
/>

The `dms brightness` command provides a unified interface for controlling brightness across different device types. It's a replacement for tools like `brightnessctl` and `ddcutil`, supporting backlight devices, LEDs, and DDC/I2C monitors.

## Overview

**Supported Device Types**:
- **Backlight devices**: Laptop screens, integrated displays (e.g., `amdgpu_bl1`, `intel_backlight`, `nvidia_0`)
- **LED devices**: Keyboard backlights, indicator LEDs (e.g., `asus::kbd_backlight`, `phy0-led`)
- **DDC/I2C monitors**: External monitors via DDC/CI protocol (requires `--ddc` flag)

**Key Features**:
- List all brightness devices with current values
- Get and set brightness for specific devices
- Support for exponential brightness scaling for more natural perception
- Fast operation for backlight/LED devices
- Optional DDC/I2C support for external monitors

## Quick Start

List all available brightness devices:

```bash
dms brightness list
```

**Example output**:
```
Device                      Class         Name                   Brightness
────────────────────────────────────────────────────────────────────────────────
leds:phy0-led               leds          phy0-led               100%
backlight:amdgpu_bl1        backlight     amdgpu_bl1              43%
backlight:nvidia_0          backlight     nvidia_0               100%
leds:asus::kbd_backlight    leds          asus::kbd_backlight      0%
```

Set brightness for a specific device:

```bash
# Set laptop backlight to 50%
dms brightness set backlight:amdgpu_bl1 50

# Set keyboard backlight to 25%
dms brightness set leds:asus::kbd_backlight 25
```

Get current brightness for a device:

```bash
dms brightness get backlight:amdgpu_bl1
```

## Device Identification

Devices are identified using the format `<class>:<name>`:

- **Class**: The device class (`backlight`, `leds`, or `ddc`)
- **Name**: The device name as shown in the list output

**Examples**:
- `backlight:amdgpu_bl1` - AMD GPU backlight
- `backlight:intel_backlight` - Intel integrated graphics backlight
- `backlight:nvidia_0` - NVIDIA GPU backlight
- `leds:asus::kbd_backlight` - ASUS keyboard backlight
- `leds:phy0-led` - WiFi/network activity LED

## Commands

### `dms brightness list`

List all available brightness devices with their current brightness values.

```bash
dms brightness list [flags]
```

**Flags**:
- `--ddc`: Include DDC/I2C monitors (slower, requires additional scanning)
- `-h, --help`: Show help

**Examples**:

```bash
# List backlight and LED devices (fast)
dms brightness list

# Include external DDC/I2C monitors (slower)
dms brightness list --ddc
```

**Note**: The `--ddc` flag causes the command to scan for external monitors via DDC/I2C, which takes longer than listing backlight/LED devices.

### `dms brightness get`

Get the current brightness percentage for a specific device.

```bash
dms brightness get <device_id> [flags]
```

**Arguments**:
- `device_id` (required): Device identifier (e.g., `backlight:amdgpu_bl1`)

**Flags**:
- `--ddc`: Enable DDC/I2C device support
- `-h, --help`: Show help

**Examples**:

```bash
# Get laptop backlight brightness
dms brightness get backlight:amdgpu_bl1

# Get external monitor brightness
dms brightness get ddc:monitor-name --ddc
```

### `dms brightness set`

Set the brightness percentage (0-100) for a specific device.

```bash
dms brightness set <device_id> <percent> [flags]
```

**Arguments**:
- `device_id` (required): Device identifier
- `percent` (required): Brightness percentage (0-100)

**Flags**:
- `--ddc`: Enable DDC/I2C device support
- `--exponential`: Use exponential brightness scaling
- `--exponent <value>`: Exponent for exponential scaling (default: 1.2)
- `-h, --help`: Show help

**Examples**:

```bash
# Set brightness to 50%
dms brightness set backlight:amdgpu_bl1 50

# Set brightness with exponential scaling
dms brightness set backlight:amdgpu_bl1 50 --exponential

# Set brightness with custom exponent
dms brightness set backlight:amdgpu_bl1 50 --exponential --exponent 1.5

# Set external monitor brightness
dms brightness set ddc:monitor-name 75 --ddc
```

## Exponential Brightness Scaling

Human perception of brightness is non-linear. A 50% brightness value may appear much brighter than expected. Exponential scaling makes brightness changes feel more natural.

**How it works**:
- Applies an exponential curve to the brightness value before setting it
- Default exponent: 1.2
- Higher exponents create more aggressive curves (darker at mid-range)
- Lower exponents create gentler curves

**Example**:

```bash
# Without exponential scaling: 50% may feel like 70%
dms brightness set backlight:amdgpu_bl1 50

# With exponential scaling: 50% feels more like 50%
dms brightness set backlight:amdgpu_bl1 50 --exponential

# More aggressive curve
dms brightness set backlight:amdgpu_bl1 50 --exponential --exponent 1.5
```

**Tip**: Try exponential scaling if you find yourself rarely using the lower half of your brightness range.

## DDC/I2C Monitor Support

External monitors can be controlled via the DDC/CI protocol over I2C. This requires the `--ddc` flag and may be slower than backlight/LED control.

**Requirements**:
- Monitor must support DDC/CI
- I2C permissions (typically handled by udev rules or user groups)

**Usage**:

```bash
# List all devices including DDC/I2C monitors
dms brightness list --ddc

# Get external monitor brightness
dms brightness get ddc:monitor-name --ddc

# Set external monitor brightness
dms brightness set ddc:monitor-name 60 --ddc
```

**Note**: DDC operations are slower than backlight operations due to the I2C communication protocol. Expect a slight delay when setting brightness on external monitors.

## Integration with DMS

DMS integrates with the shell over IPC via a Unix socket. To show brightness OSDs and use shell-integrated brightness controls, use `dms ipc` commands instead of the direct CLI commands.

The `dms ipc call brightness` target provides additional functionality:
- On-screen display (OSD) when brightness changes
- Increment/decrement brightness by steps
- Per-device exponential mode toggling
- Status queries

See the [Keybinds & IPC](/docs/dankmaterialshell/keybinds-ipc#brightness) documentation for complete details on the brightness IPC target.

**Example keybind integration**:

```conf
# Hyprland example - shows OSD overlay
bind = , XF86MonBrightnessUp, exec, dms ipc call brightness increment 5
bind = , XF86MonBrightnessDown, exec, dms ipc call brightness decrement 5
bind = , XF86MonBrightnessDown+Shift, exec, dms ipc call brightness toggleExponential
```

## Comparison with Other Tools

### vs brightnessctl

- **Same functionality** for backlight and LED devices
- **Simpler device identification** (class:name format)
- **Exponential scaling** built-in
- **DDC/I2C support** in the same tool

### vs ddcutil

- **Same functionality** for DDC/I2C monitors
- **Faster** for simple brightness operations
- **Unified interface** with backlight devices

## Troubleshooting

### Permission Denied

If you get permission errors:

1. Check if your user is in the `video` or `input` group:
   ```bash
   groups
   ```

2. Add yourself to the appropriate group:
   ```bash
   sudo usermod -a -G video $USER
   sudo usermod -a -G input $USER
   ```

3. Log out and log back in for changes to take effect

### Device Not Found

If a device isn't listed:

- For backlights: Check `/sys/class/backlight/`
- For LEDs: Check `/sys/class/leds/`
- For DDC: Make sure to use the `--ddc` flag and verify monitor supports DDC/CI

### DDC/I2C Not Working

If external monitors don't respond:

1. Verify DDC/CI is enabled in your monitor's OSD settings
2. Check I2C kernel module is loaded:
   ```bash
   lsmod | grep i2c
   ```
3. Test with `i2cdetect`:
   ```bash
   sudo i2cdetect -l
   ```

## Command Reference

```bash
dms brightness [command] [flags]
```

**Available Commands**:
- `list`: List all brightness devices
- `get <device_id>`: Get brightness for a device
- `set <device_id> <percent>`: Set brightness for a device

**Global Flags**:
- `-c, --config <path>`: Specify custom DMS config directory
- `-h, --help`: Show help

**Command-Specific Flags**:
- `--ddc`: Include DDC/I2C monitors (available on all commands)
- `--exponential`: Use exponential scaling (set command only)
- `--exponent <value>`: Custom exponent value (set command only, default: 1.2)



================================================
FILE: docs/dankmaterialshell/cli-clipboard.mdx
================================================
[Binary file]


================================================
FILE: docs/dankmaterialshell/cli-color-picker.mdx
================================================
---
title: Color Picker
description: Pick colors from anywhere on your Wayland screen with multiple output formats
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={` ██████╗ ██████╗ ██╗      ██████╗ ██████╗ ███████╗
██╔════╝██╔═══██╗██║     ██╔═══██╗██╔══██╗██╔════╝
██║     ██║   ██║██║     ██║   ██║██████╔╝███████╗
██║     ██║   ██║██║     ██║   ██║██╔══██╗╚════██║
╚██████╗╚██████╔╝███████╗╚██████╔╝██║  ██║███████║
 ╚═════╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝`}
  hideTitle={true}
/>

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Color Picker"
    sources={{
      light: useBaseUrl('/img/blog/v1/colorpick_light.png'),
      dark: useBaseUrl('/img/blog/v1/colorpick_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Pick colors from anywhere on your screen</figcaption>
</figure>

The `dms color pick` command launches an interactive color picker for Wayland. Click any pixel on your screen to capture its color, with support for multiple output formats and custom templates.

## Quick Start

```bash
# Pick a color, output as hex
dms color pick

# Output as RGB
dms color pick --rgb

# Auto-copy to clipboard
dms color pick -a
```

Press **Escape** to cancel the picker at any time.

## Output Formats

Only one format flag can be used at a time. Default is `--hex`.

| Flag | Output | Example |
|------|--------|---------|
| `--hex` | Hexadecimal | `#FF8040` |
| `--rgb` | RGB values | `255 128 64` |
| `--hsl` | HSL values | `24 75% 60%` |
| `--hsv` | HSV values | `24 75% 100%` |
| `--cmyk` | CMYK values | `0% 50% 75% 0%` |
| `--json` | All formats | See below |

### JSON Output

```bash
dms color pick --json
```

Returns all color formats in a single JSON object, useful for scripting.

## Custom Format Templates

The `-o` flag lets you define a custom output format using placeholders `{0}`, `{1}`, `{2}` (and `{3}` for CMYK).

### Placeholder Reference

| Format | {0} | {1} | {2} | {3} |
|--------|-----|-----|-----|-----|
| `--hex` (default) | R (hex, e.g. FF) | G (hex) | B (hex) | - |
| `--rgb` | R (0-255) | G (0-255) | B (0-255) | - |
| `--hsl` | H (0-360) | S (0-100) | L (0-100) | - |
| `--hsv` | H (0-360) | S (0-100) | V (0-100) | - |
| `--cmyk` | C (0-100) | M (0-100) | Y (0-100) | K (0-100) |

### Examples

```bash
# CSS rgb() function
dms color pick --rgb -o "rgb({0}, {1}, {2})"
# Output: rgb(255, 128, 64)

# CSS hsl() function
dms color pick --hsl -o "hsl({0}, {1}%, {2}%)"
# Output: hsl(24, 75%, 60%)

# Hex without hash
dms color pick -o "{0}{1}{2}"
# Output: FF8040

# Custom CMYK format
dms color pick --cmyk -o "C={0} M={1} Y={2} K={3}"
# Output: C=0 M=50 Y=75 K=0
```

## Options

| Flag | Short | Description |
|------|-------|-------------|
| `--hex` | | Output as hexadecimal (#RRGGBB) |
| `--rgb` | | Output as RGB (R G B) |
| `--hsl` | | Output as HSL (H S% L%) |
| `--hsv` | | Output as HSV (H S% V%) |
| `--cmyk` | | Output as CMYK (C% M% Y% K%) |
| `--json` | | Output all formats as JSON |
| `--lowercase` | `-l` | Output hex in lowercase |
| `--autocopy` | `-a` | Copy result to clipboard |
| `--output-format` | `-o` | Custom output format template |
| `--config` | `-c` | Custom DMS config directory path |
| `--help` | `-h` | Show help |

## Use Cases

### Quick Color Reference

Grab any color from your screen for use in design work:

```bash
dms color pick -a
# Picked color is now in your clipboard
```

### CSS Development

Get colors ready for your stylesheets:

```bash
# For CSS custom properties
dms color pick --hsl -o "hsl({0}deg {1}% {2}%)" -a

# For rgba with full opacity
dms color pick --rgb -o "rgba({0}, {1}, {2}, 1)" -a
```

### Color Extraction Scripts

Capture colors programmatically:

```bash
#!/bin/bash
color=$(dms color pick --json)
hex=$(echo "$color" | jq -r '.hex')
echo "Selected: $hex"
```



================================================
FILE: docs/dankmaterialshell/cli-dank16.mdx
================================================
[Binary file]


================================================
FILE: docs/dankmaterialshell/cli-doctor.mdx
================================================
---
title: System Diagnostics (doctor)
description: Diagnose DMS installation, dependencies, and system configuration
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

The `dms doctor` command diagnoses your DMS installation, verifies dependencies, and checks system configuration. Use it to troubleshoot issues or verify your setup is complete.

## Usage

```bash
dms doctor           # Standard output
dms doctor -v        # Verbose output with paths and details
dms doctor -j        # JSON output for scripting
```

## Status Indicators

| Icon | Status | Meaning |
|------|--------|---------|
| 🟢 | OK | Check passed |
| 🟡 | Warning | Non-critical issue, may affect some features |
| 🔴 | Error | Critical issue that needs attention |
| ⚪ | Info | Informational, no action needed |

---

## System Checks

### Operating System

All GNU/Linux distributions are supported - this information is purely informational.

### Architecture

Only amd64/arm64 is officially supported, although other architectures may work with manual compilation.

### Display Server

DMS only supports Wayland, this check verifies you're not using X11.

---

## Version Checks

### DMS CLI

DMS CLI is the backend and command-line interface for DMS. Its version should match the version of the quickshell configuration.

### Quickshell

Quickshell is the framework used by DMS. Older versions of quickshell may result in a reduced feature set within DMS.

### DMS Shell

The version of the shell configuration, which should match the DMS CLI version.

---

## Installation Checks

### DMS Configuration

By default DMS installs its configuration, plugins, and themes in `$XDG_CONFIG_HOME/.config/DankMaterialShell/`. This check verifies that the configuration directory exists. 

### shell.qml

The location of the `shell.qml` is the installed location of the DMS shell configuration.

### Install Type

- `system`: Installed via system package manager (e.g. `apt`, `dnf`, `pacman`)
- `user`: if manually  installed via manual compilation & installation
- `nix`: if installed via Nix package manager

---

## Compositor Checks

All wayland compositors that implement the [layer shell protocol](https://wayland.app/protocols/wlr-layer-shell-unstable-v1) are supported, with varying feature sets.

### Supported Compositors

| Compositor | Detection | Version Parsing |
|------------|-----------|-----------------|
| niri | `niri` | `niri --version` |
| Hyprland | `hyprland`, `Hyprland` | `hyprctl version` |
| mangowc | `mangowc` | `mangowc --version` |
| labwc | `labwc` | `labwc --version` |
| Sway | `sway` | `sway --version` |
| River | `river` | `river -version` |
| Wayfire | `wayfire` | `wayfire --version` |

### Active Compositor

Currently running compositor.

---

## Quickshell Features

These features depend on how Quickshell was built. Using `quickshell-git` provides full feature support, some builds of quickshell can exclude features based on compilation options.

:::note
All of these features currently require `quickshell-git` or `quickshell` from the Dank Linux repositories (Fedora, Debian, Ubuntu, OpenSUSE)
:::

### Polkit

Polkit is used for escalation prompts, items that require root authorization.

### IdleMonitor

Used to automatically lock, power off monitors, suspend, or hibernate.

### IdleInhibitor

Used to prevent the system from idling or sleeping.

### ShortcutInhibitor

Used to manage keyboard shortcuts, specific to the niri compositor.
---

## Optional Features

### accountsservice

Required to persist user profile changes, such as profile picture.

### power-profiles-daemon

Required to manage power profiles. (e.g. performance, balanced, power-saver)

### I2C/DDC

Required for external monitor brightness control, on most distributions requires `i2c-tools` and the user to be in the `i2c` group.

### Terminal

Detected terminals (in priority order): `ghostty`, `kitty`, `alacritty`, `foot`, `wezterm`

### matugen

DMS leverages matugen with custom color enrichment (dank16) to generate themes for itself and various applications, terminals, and IDEs.

### dgop

Required to use system monitoring widgets and applets (CPU, RAM, Disk, Network, Processes). See [dgop documentation](../dgop/) for more information.

### cava

Required for audio visualization in media players.

### khal

Required to enrich calendar with events from local, CalDAV, or other sources supported by khal.

### Network

Detected backends: NetworkManager, iwd, systemd-networkd, iwd+systemd-networkd.

DMS supports different network stacks, NetworkManager is recommended for the vast majority of use cases as its also compatible with Gnome, KDE, etc. This is purely for integration within the shell itself (such as conencting to networks, viewing network status, etc.)

- NetworkManager : all features supported (Wifi, Ethernet, VPN)
- iwd : Wifi only, no Ethernet or VPN support
- systemd-networkd : Ethernet only, no Wifi or VPN support
- iwd+systemd-networkd : Wifi and Ethernet supported, no VPN support

### danksearch

Used for indexed filesystem search in the launcher. Use `/` to initiate a fs search. See [DankSearch documentation](../danksearch/) for more information.

### loginctl

Available on systems using `systemd` or `elogind`. Used for various session management features such as lock integration, lock before suspend, etc.

### fprintd

Adds fingerprint authentication support to the lock screen.

---

## Configuration Files

| File | Location | Purpose |
|------|----------|---------|
| `settings.json` | `~/.config/DankMaterialShell/` | Main settings |
| `clsettings.json` | `~/.config/DankMaterialShell/` | Clipboard settings |
| `plugin_settings.json` | `~/.config/DankMaterialShell/` | Plugin configuration |
| `session.json` | `~/.local/state/DankMaterialShell/` | Session state |
| `dms-colors.json` | `~/.cache/DankMaterialShell/` | Cached color scheme |

---

## Services

### dms.service

If in use, DMS lifecycle will be managed by systemd. This is optional, DMS can also be started manually or via other init systems.

### greetd

Required for the Dank Greeter. (See [DankGreeter documentation](../dankgreeter/) for more information.)

---

## Environment Variables

### QT_QPA_PLATFORMTHEME

Used to set the Qt platform theme - usually one of `gtk3`, `qt6ct`, or `kde`. This will define how QT applications are themed. Including some elements of DMS (such as icon themes)

### QS_ICON_THEME

Optional environment variable to set the icon theme for DMS only. Will not effect other applications.

---

## JSON Output

Use `dms doctor -j` for machine-readable output:

```json
{
  "summary": {
    "errors": 0,
    "warnings": 1,
    "ok": 15,
    "info": 5
  },
  "results": [
    {
      "category": "System",
      "name": "Operating System",
      "status": "ok",
      "message": "Arch Linux",
      "details": "ID: arch, Version: rolling, Arch: amd64"
    }
  ]
}
```

## Welcome Wizard Integration

The doctor checks are also available in the Welcome Wizard's System Check page. Access it via:

```bash
dms ipc call welcome doctor
```

Or through Settings → About → Tools → System Check.



================================================
FILE: docs/dankmaterialshell/cli-keybinds-cheatsheets.mdx
================================================
---
title: Keybinds & Cheatsheets
description: Manage and display keybinds and cheatsheets for various applications
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██╗  ██╗███████╗██╗   ██╗██████╗ ██╗███╗   ██╗██████╗ ███████╗
██║ ██╔╝██╔════╝╚██╗ ██╔╝██╔══██╗██║████╗  ██║██╔══██╗██╔════╝
█████╔╝ █████╗   ╚████╔╝ ██████╔╝██║██╔██╗ ██║██║  ██║███████╗
██╔═██╗ ██╔══╝    ╚██╔╝  ██╔══██╗██║██║╚██╗██║██║  ██║╚════██║
██║  ██╗███████╗   ██║   ██████╔╝██║██║ ╚████║██████╔╝███████║
╚═╝  ╚═╝╚══════╝   ╚═╝   ╚═════╝ ╚═╝╚═╝  ╚═══╝╚═════╝ ╚══════╝`}
  hideTitle={true}
/>

The `dms keybinds` command provides a unified interface for viewing and managing keybinds across different applications. It can parse application-specific configurations (like Hyprland) and display user-defined cheatsheets in a consistent format.

## Overview

The keybinds framework offers:
- **Auto-discovery**: Automatically finds keybinds from application configs
- **Custom cheatsheets**: Create JSON files for any application
- **Multiple providers**: Built-in support for Hyprland, Sway, MangoWC, and labwc, with extensibility for other applications
- **XDG compliance**: Follows XDG Base Directory standards for config locations

## Quick Start

List all available keybind providers:

```bash
dms keybinds list
# Alias options:
dms cheatsheet list
dms chsht list
```

Show keybinds for a specific application:

```bash
dms keybinds show hyprland
dms keybinds show sway
dms keybinds show mangowc
dms keybinds show tmux
dms keybinds show firefox
```

:::tip Display in Shell
You can also display keybinds directly within DMS using IPC:
```bash
dms ipc call keybinds toggle hyprland
dms ipc call keybinds toggle sway
dms ipc call keybinds toggle <provider>
```
This opens a modal overlay showing the keybinds in the shell interface.
:::

<ThemedImage
  alt="DMS Keybinds UI display"
  sources={{
    light: useBaseUrl('/img/keybinds_light.png'),
    dark: useBaseUrl('/img/keybinds.png'),
  }}
  style={{ maxWidth: '800px', width: '100%', marginTop: '1rem', marginBottom: '1rem' }}
/>

## Built-in Providers

### Hyprland

The Hyprland provider automatically parses your Hyprland configuration files and extracts keybinds.

**Features**:
- Parses all `*.conf` files in your Hyprland config directory
- Supports section headers with `##!` (categories) and `###!` (subcategories)
- Auto-generates descriptions for common dispatchers
- Respects `[hidden]` comments to exclude certain binds
- Categorizes binds by type (Window, Workspace, Execute, etc.)

**Usage**:

```bash
# Use default Hyprland config path (~/.config/hypr)
dms keybinds show hyprland

# Specify custom path
dms keybinds show hyprland --path /path/to/hypr/config
```

**Description Priority**:

The provider generates descriptions in this order:
1. Custom comment in your config (e.g., `bind = SUPER, T, exec, kitty # Open terminal`)
2. Auto-generated for known dispatchers (e.g., `killactive` → "Close window")
3. Fallback format showing dispatcher and params (e.g., `togglegroup`)

**Category Logic**:

Binds are automatically categorized based on their dispatcher:
- **Workspace**: workspace navigation and management
- **Monitor**: monitor-related actions
- **Window**: window management (move, resize, focus, kill, etc.)
- **Execute**: launching applications and scripts
- **System**: system actions (exit, dpms, etc.)
- **Other**: miscellaneous dispatchers

**Example Hyprland config**:

```conf
##! Window Management
bind = SUPER, Q, killactive
bind = SUPER, F, fullscreen, 0

###! Movement
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r

##! Workspaces
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2

##! Applications
bind = SUPER, T, exec, kitty # Open terminal
bind = SUPER, E, exec, thunar # File manager
```

### Sway

The Sway provider automatically parses your Sway configuration files and extracts keybinds.

**Features**:
- Parses the Sway config file (typically `~/.config/sway/config`)
- Supports section comments with `##!` (categories) and `###!` (subcategories)
- Auto-generates descriptions for common Sway commands
- Respects `[hidden]` comments to exclude certain binds
- Categorizes binds by type (Window, Workspace, Execute, etc.)

**Usage**:

```bash
# Use default Sway config path (~/.config/sway/config)
dms keybinds show sway

# Specify custom path
dms keybinds show sway --path /path/to/sway/config
```

**Example Sway config**:

```conf
##! Window Management
bindsym $mod+q kill
bindsym $mod+f fullscreen toggle

###! Movement
bindsym $mod+Left focus left
bindsym $mod+Right focus right

##! Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2

##! Applications
bindsym $mod+Return exec kitty # Open terminal
```

### MangoWC

The MangoWC provider automatically parses your MangoWC (dwl) configuration and extracts keybinds.

**Features**:
- Parses MangoWC keybind definitions
- Supports section comments with `##!` (categories) and `###!` (subcategories)
- Auto-generates descriptions for common MangoWC actions
- Respects `[hidden]` comments to exclude certain binds
- Categorizes binds by type

**Usage**:

```bash
# Use default MangoWC config path
dms keybinds show mangowc

# Specify custom path
dms keybinds show mangowc --path /path/to/mangowc/config
```

### Niri

The Niri provider parses KDL-format Niri configuration files and extracts keybinds. Unlike the other providers, Niri is **writable**—you can create and manage keybind overrides through DMS.

**Features**:
- Parses KDL-format config files
- Follows `include` directives to merge all keybind sources
- Supports DMS overrides via `~/.config/niri/dms/binds.kdl`
- Detects conflicts between DMS defaults and your binds
- Validates config before writing using `niri validate`
- Supports bind options: `repeat`, `cooldown-ms`, `allow-when-locked`

**Usage**:

```bash
# Use default Niri config path (~/.config/niri)
dms keybinds show niri

# Specify custom config directory
dms keybinds show niri --path /path/to/niri/config
```

#### Writing Keybinds

Set overrides that get written to `~/.config/niri/dms/binds.kdl`:

```bash
# Basic keybind
dms keybinds set niri "Mod+T" "spawn kitty"

# With description (shown in hotkey overlay)
dms keybinds set niri "Mod+T" "spawn kitty" --desc "Open terminal"

# With options
dms keybinds set niri "Mod+V" "spawn pavucontrol" \
  --desc "Volume control" \
  --allow-when-locked

# Disable key repeat
dms keybinds set niri "Mod+Q" "close-window" --no-repeat

# Set cooldown between activations
dms keybinds set niri "Mod+Print" "screenshot" --cooldown-ms 500

# Replace an existing keybind with a new key
dms keybinds set niri "Mod+Shift+T" "spawn kitty" \
  --desc "Open terminal" \
  --replace-key "Mod+T"
```

Remove a keybind:

```bash
dms keybinds remove niri "Mod+T"
```

#### Niri Config Setup

Include the DMS binds file in your Niri config:

```kdl
// ~/.config/niri/config.kdl

// Include DMS keybind overrides
include "~/.config/niri/dms/binds.kdl"

binds {
    Mod+Q { close-window; }
    Mod+T { spawn "kitty"; }
}
```

:::tip Include Order Matters
- DMS include **before** your binds: Your binds override DMS defaults
- DMS include **after** your binds: DMS binds take priority

The cheatsheet output includes conflict detection showing which binds are overridden.
:::

#### Bind Options

| Option | Flag | Description |
|--------|------|-------------|
| repeat | `--no-repeat` | Disable key repeat (default: enabled) |
| cooldown-ms | `--cooldown-ms <ms>` | Minimum time between activations |
| allow-when-locked | `--allow-when-locked` | Allow bind when screen is locked |
| hotkey-overlay-title | `--desc <text>` | Description shown in Niri's hotkey overlay |

#### Action Formats

```bash
# Simple action
dms keybinds set niri "Mod+F" "fullscreen"

# Action with argument
dms keybinds set niri "Mod+1" "focus-workspace 1"

# Spawn with simple command
dms keybinds set niri "Mod+T" "spawn kitty"

# Spawn with shell command
dms keybinds set niri "Mod+P" "spawn sh -c \"wofi --show drun\""
```

#### Category Logic

Binds are auto-categorized based on their action:

| Category | Actions |
|----------|---------|
| Alt-Tab | `next-window`, `previous-window` |
| Screenshot | Anything containing "screenshot" |
| Overview | `show-hotkey-overlay`, `toggle-overview` |
| System | `quit`, `power-off-monitors`, DPMS actions |
| Execute | `spawn` commands |
| Workspace | Actions containing "workspace" |
| Monitor | `focus-monitor-*`, `move-*-to-monitor-*` |
| Window | Focus, move, swap, resize, column actions |
| Other | Everything else |

## Custom Cheatsheets

You can create custom cheatsheets for any application by adding JSON files to the cheatsheets directory.

### Directory Locations

The framework follows XDG Base Directory standards:

**Default location** (when no XDG vars set):
```
~/.config/DankMaterialShell/cheatsheets/
```

**With XDG_CONFIG_HOME set**:
```
$XDG_CONFIG_HOME/DankMaterialShell/cheatsheets/
```

**With XDG_CONFIG_DIRS set** (NixOS compatibility):
The framework searches in this order:
1. `$XDG_CONFIG_HOME/DankMaterialShell/cheatsheets/`
2. Each directory in `$XDG_CONFIG_DIRS/DankMaterialShell/cheatsheets/`

### JSON Format

Create a file named after your application (e.g., `vim.json`, `tmux.json`):

```json
{
  "title": "Vim Keybinds",
  "provider": "vim",
  "binds": {
    "Mode": [
      {
        "key": "i",
        "desc": "Enter insert mode",
        "subcat": "Insert"
      },
      {
        "key": "Esc",
        "desc": "Exit insert mode",
        "subcat": "Normal"
      }
    ],
    "Editing": [
      {
        "key": "dd",
        "desc": "Delete current line",
        "subcat": "Delete"
      },
      {
        "key": "yy",
        "desc": "Copy current line",
        "subcat": "Yank"
      },
      {
        "key": "p",
        "desc": "Paste after cursor",
        "subcat": "Paste"
      }
    ],
    "Navigation": [
      {
        "key": "gg",
        "desc": "Go to first line"
      },
      {
        "key": "G",
        "desc": "Go to last line"
      }
    ]
  }
}
```

### Field Reference

- **`title`** (required): Display name shown when viewing the cheatsheet
- **`provider`** (optional): Provider identifier used in commands (defaults to filename without extension)
- **`binds`** (required): Object where keys are category names and values are arrays of keybindings
  - **`key`** (required): The key combination (e.g., "Ctrl+Alt+J", "SUPER+T")
  - **`desc`** (required): Description of what the keybind does
  - **`subcat`** (optional): Subcategory for finer organization within a category

### Example: tmux Cheatsheet

File: `~/.config/DankMaterialShell/cheatsheets/tmux.json`

```json
{
  "title": "tmux Keybinds",
  "provider": "tmux",
  "binds": {
    "Sessions": [
      {
        "key": "Ctrl+B, $",
        "desc": "Rename session"
      },
      {
        "key": "Ctrl+B, d",
        "desc": "Detach from session"
      }
    ],
    "Windows": [
      {
        "key": "Ctrl+B, c",
        "desc": "Create new window"
      },
      {
        "key": "Ctrl+B, ,",
        "desc": "Rename window"
      },
      {
        "key": "Ctrl+B, n",
        "desc": "Next window"
      },
      {
        "key": "Ctrl+B, p",
        "desc": "Previous window"
      }
    ],
    "Panes": [
      {
        "key": "Ctrl+B, %",
        "desc": "Split vertically",
        "subcat": "Split"
      },
      {
        "key": "Ctrl+B, \"",
        "desc": "Split horizontally",
        "subcat": "Split"
      },
      {
        "key": "Ctrl+B, x",
        "desc": "Close pane",
        "subcat": "Management"
      }
    ]
  }
}
```

After creating the file, it will automatically be discovered:

```bash
dms keybinds list
# Shows: hyprland, mangowc, sway, firefox, tmux, vim, ...

dms keybinds show tmux
# Displays your custom tmux cheatsheet
```

## Command Reference

### `dms keybinds list`

Lists all available keybind providers (both built-in and custom).

**Aliases**: `dms cheatsheet list`, `dms chsht list`

```bash
dms keybinds list
```

**Example output**:
```
Available providers:
  - hyprland
  - mangowc
  - sway
  - firefox
  - tmux
  - vim
```

### `dms keybinds show <provider>`

Displays keybinds for the specified provider.

**Aliases**: `dms cheatsheet show`, `dms chsht show`

```bash
dms keybinds show <provider> [flags]
```

**Flags**:
- `--path <path>`: Override the default config location for any provider
- `-h, --help`: Show help for the command

**Examples**:

```bash
# Show Hyprland keybinds from default location
dms keybinds show hyprland

# Show Hyprland keybinds from custom location
dms keybinds show hyprland --path /custom/path/to/hypr

# Show Sway keybinds with custom config
dms keybinds show sway --path /etc/sway/config

# Show MangoWC keybinds with custom config
dms keybinds show mangowc --path /custom/mangowc/config

# Show custom cheatsheet
dms keybinds show vim
```

## Tips & Best Practices

### Organizing Hyprland Configs

Use section headers to organize your keybinds:

```conf
##! Window Management
###! Focus
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r

###! Layout
bind = SUPER, F, fullscreen, 0
bind = SUPER, V, togglefloating

##! Applications
bind = SUPER, T, exec, kitty
bind = SUPER, B, exec, firefox
```

### Hiding Internal Binds

Use `[hidden]` to exclude binds from the display:

```conf
# This won't appear in the keybinds list
bind = SUPER, X, exec, secret-script # [hidden]
```

### Descriptive Comments

Add clear comments to override auto-generated descriptions:

```conf
# Auto-generated: "Launch application: kitty"
bind = SUPER, T, exec, kitty

# Custom: "Open terminal"
bind = SUPER, T, exec, kitty # Open terminal
```

### Consistent Naming

When creating custom cheatsheets, use consistent naming:
- Filename: `application.json` (lowercase, no spaces)
- Provider: Match the filename or use a common identifier
- Title: Use the application's proper name




================================================
FILE: docs/dankmaterialshell/cli-process-management.mdx
================================================
---
title: Process Management
description: Manage DankMaterialShell processes with run, restart, and kill commands
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ██████╗  ██████╗  ██████╗███████╗███████╗███████╗
██╔══██╗██╔══██╗██╔═══██╗██╔════╝██╔════╝██╔════╝██╔════╝
██████╔╝██████╔╝██║   ██║██║     █████╗  ███████╗███████╗
██╔═══╝ ██╔══██╗██║   ██║██║     ██╔══╝  ╚════██║╚════██║
██║     ██║  ██║╚██████╔╝╚██████╗███████╗███████║███████║
╚═╝     ╚═╝  ╚═╝ ╚═════╝  ╚═════╝╚══════╝╚══════╝╚══════╝`}
  hideTitle={true}
/>

The `dms` command provides process management functionality for running, restarting, and killing DankMaterialShell instances. These commands manage the DMS backend server, which in turn spawns and manages the Quickshell UI process as a child, configuring IPC communication between them.

## Overview

DankMaterialShell consists of a Go backend server that spawns and manages a Quickshell UI frontend as a child process. The process management commands orchestrate both components:
- Launching the DMS backend server
- Spawning Quickshell as a child process with DMS configuration
- Configuring IPC communication between backend and frontend
- Restarting both processes to apply configuration changes
- Managing daemon and session modes

## Quick Start

Launch DMS:

```bash
dms run
```

Restart DMS (kills existing instances and relaunches):

```bash
dms restart
```

Kill all running DMS instances:

```bash
dms kill
```

## Commands

### `dms run`

Launch DankMaterialShell by starting the backend server and Quickshell UI process, then establishing IPC communication between them via Unix socket.

```bash
dms run [flags]
```

**Flags**:
- `-d, --daemon`: Run in daemon mode (detached from terminal)
- `--session`: Session managed mode (for use with systemd or other session managers)
- `-h, --help`: Show help

**Examples**:

```bash
# Run DMS normally (attached to terminal)
dms run

# Run DMS in daemon mode (detached)
dms run --daemon

# Run DMS as a session-managed process
dms run --session
```

**When to use each mode**:
- **Normal mode**: For testing, debugging, or manual shell management
- **Daemon mode**: For background operation without terminal attachment
- **Session mode**: When managing DMS via systemd user units or similar session managers

### `dms restart`

Kill the DMS backend server (along with its Quickshell child process) and relaunch them. This is useful when you've made configuration changes and want to reload the shell.

```bash
dms restart [flags]
```

**Flags**:
- `-h, --help`: Show help

**Examples**:

```bash
# Restart DMS
dms restart
```

**What it does**:
1. Terminates the DMS backend server (which also kills its Quickshell child process)
2. Cleans up any orphaned Quickshell processes if needed
3. Relaunches the backend, which spawns a fresh Quickshell instance
4. Re-establishes IPC communication

**Use cases**:
- After modifying DMS configuration files
- After updating themes or plugins
- When the shell becomes unresponsive
- After applying compositor changes that affect DMS

### `dms kill`

Kill the DMS backend server (which automatically terminates its Quickshell child process) without restarting.

```bash
dms kill [flags]
```

**Flags**:
- `-h, --help`: Show help

**Examples**:

```bash
# Kill all DMS instances
dms kill
```

**Use cases**:
- Stopping DMS before logging out
- Cleaning up stuck processes
- Switching to a different desktop environment
- Troubleshooting process issues

## Running DMS at Login

:::tip DankInstall Users

If you used [dankinstall](../dankinstall), DMS is already configured as a systemd service and starts automatically. You don't need to configure anything here.

:::

### Systemd User Service (Recommended)

Systemd provides automatic startup, session integration, and logging via journalctl. This is the default for dankinstall setups.

```bash
# Enable and start
systemctl --user enable --now dms

# Check status
systemctl --user status dms

# View logs
journalctl --user -u dms -f
```

The `dms restart` and `dms kill` commands work regardless of whether you're using systemd or manual startup.

:::warning

If using systemd, don't add `dms run` to your compositor config - you'll end up with two instances.

:::

### Manual Launch

Add to your compositor's autostart configuration:

**Hyprland** (`~/.config/hypr/hyprland.conf`):
```conf
exec-once = dms run
```

**Sway** (`~/.config/sway/config`):
```conf
exec dms run
```

**Niri** (`~/.config/niri/config.kdl`):
```kdl
spawn-at-startup "dms" "run"
```

### Custom Systemd Unit (Advanced)

Package installations and dankinstall ship a systemd unit file. If you need a custom unit (e.g., for a source build without `make install`), create `~/.config/systemd/user/dms.service`:

```ini
[Unit]
Description=Dank Material Shell (DMS)
PartOf=graphical-session.target
After=graphical-session.target
Requisite=graphical-session.target

[Service]
Type=simple
ExecStart=/usr/bin/dms run --session
Restart=always
RestartSec=2
TimeoutStopSec=10

[Install]
WantedBy=graphical-session.target
```

Then reload and enable:

```bash
systemctl --user daemon-reload
systemctl --user enable --now dms
```

## Process Architecture

DMS operates as a multi-process system with IPC communication:

1. **DMS Backend Server** (Go): Handles IPC requests, plugin management, system monitoring, and CLI operations
2. **Quickshell UI Process**: Qt/QML runtime that renders the shell interface (spawned as a child of the backend)
3. **IPC Layer**: Unix socket communication between backend and frontend
4. **Plugins**: Optional processes that extend functionality

**Process hierarchy**:
```
compositor (hyprland/sway/niri/etc)
└── dms backend server
    ├── IPC server (Unix socket)
    ├── Plugin manager
    └── quickshell (child process)
        └── Connects to parent via IPC
```

When you run `dms run`, the backend server starts first, creates the IPC socket, then spawns Quickshell as a child process. Quickshell connects back to its parent via the Unix socket for commands like brightness control, keybind displays, and other system operations.

## Troubleshooting

### DMS Won't Start

Check if Quickshell is installed:
```bash
which qs
```

Check for conflicting processes:
```bash
ps aux | grep quickshell
```

Try running without daemon mode to see errors:
```bash
dms run
```

### Multiple Instances Running

Kill all instances and restart:
```bash
dms kill
sleep 1
dms run --daemon
```

### Configuration Not Reloading

Use `dms restart` instead of manually killing processes:
```bash
dms restart
```

### Systemd Service Fails

Check logs for errors:
```bash
journalctl --user -u dms.service -n 50
```

Verify the service file has correct paths:
```bash
systemctl --user cat dms.service
```

## Integration with Compositor

DMS is designed to work with Wayland compositors. The process management commands ensure DMS runs cleanly within the compositor's session:

- **Hyprland**: Use `exec-once` for autostart
- **Sway**: Use `exec` for autostart
- **Niri**: Use `spawn-at-startup` for autostart
- **MangoWC**: Use compositor-specific autostart mechanism

When the compositor exits, the DMS backend should automatically terminate, which will also kill its Quickshell child process. If processes don't clean up properly, run `dms kill` before logging out.

## Command Reference

```bash
dms [command] [flags]
```

**Process Management Commands**:
- `run [flags]`: Launch Quickshell with DMS configuration
- `restart`: Kill and relaunch DMS
- `kill`: Kill all running DMS instances

**Global Flags**:
- `-c, --config <path>`: Specify custom DMS config directory
- `-h, --help`: Show help

**Run Command Flags**:
- `-d, --daemon`: Run in daemon mode
- `--session`: Session managed mode

## Other CLI Commands

The `dms` command also provides other functionality:

- **IPC**: `dms ipc` - Send commands to running DMS instances (see [Keybinds & IPC](/docs/dankmaterialshell/keybinds-ipc))
- **Keybinds**: `dms keybinds` - Manage keybind cheatsheets (see [Keybinds & Cheatsheets](/docs/dankmaterialshell/cli-keybinds-cheatsheets))
- **Brightness**: `dms brightness` - Control device brightness (see [Brightness Control](/docs/dankmaterialshell/cli-brightness))
- **Dank16**: `dms dank16` - Generate color palettes (see [Dank16](/docs/dankmaterialshell/cli-dank16))
- **Plugins**: `dms plugins` - Manage DMS plugins (see [Plugins Overview](/docs/dankmaterialshell/plugins-overview))
- **Update**: `dms update` - Update DankMaterialShell
- **Version**: `dms version` - Show version information

Run `dms --help` for a complete list of available commands.



================================================
FILE: docs/dankmaterialshell/cli-screenshot.mdx
================================================
---
title: Screenshot
description: Capture screenshots from Wayland displays with multiple modes and formats
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`███████╗ ██████╗██████╗ ███████╗███████╗███╗   ██╗
██╔════╝██╔════╝██╔══██╗██╔════╝██╔════╝████╗  ██║
███████╗██║     ██████╔╝█████╗  █████╗  ██╔██╗ ██║
╚════██║██║     ██╔══██╗██╔══╝  ██╔══╝  ██║╚██╗██║
███████║╚██████╗██║  ██║███████╗███████╗██║ ╚████║
╚══════╝ ╚═════╝╚═╝  ╚═╝╚══════╝╚══════╝╚═╝  ╚═══╝`}
  hideTitle={true}
/>

The `dms screenshot` command captures screenshots from Wayland displays with support for multiple capture modes, output formats, and clipboard integration.

## Quick Start

```bash
# Region select, save file + clipboard
dms screenshot

# Full screen of focused output
dms screenshot full

# Clipboard only
dms screenshot --no-file
```

Press **Escape** to cancel region selection at any time.

## Capture Modes

| Mode | Command | Description |
|------|---------|-------------|
| `region` | `dms screenshot` | Select a region interactively (default) |
| `full` | `dms screenshot full` | Capture the focused output |
| `all` | `dms screenshot all` | Capture all outputs combined |
| `output` | `dms screenshot output -o NAME` | Capture a specific output by name |
| `last` | `dms screenshot last` | Capture the last selected region |

### List Available Outputs

```bash
dms screenshot list
```

## Output Formats

Use `--format` or `-f` to specify the output format. Default is `png`.

| Format | Flag | Notes |
|--------|------|-------|
| PNG | `-f png` | Default, lossless |
| JPEG | `-f jpg` | Use `-q` to set quality (1-100) |
| PPM | `-f ppm` | Raw format |

```bash
# JPEG with custom quality
dms screenshot -f jpg -q 85
```

## Options

| Flag | Short | Description |
|------|-------|-------------|
| `--cursor` | | Include cursor in screenshot |
| `--stdout` | | Output to stdout (for piping) |
| `--dir` | `-d` | Output directory |
| `--filename` | | Output filename (auto-generated if empty) |
| `--format` | `-f` | Output format: png, jpg, ppm (default: png) |
| `--quality` | `-q` | JPEG quality 1-100 (default: 90) |
| `--output` | `-o` | Output name for 'output' mode |
| `--no-clipboard` | | Don't copy to clipboard |
| `--no-file` | | Don't save to file |
| `--no-notify` | | Don't show notification |
| `--config` | `-c` | Custom DMS config directory path |
| `--help` | `-h` | Show help |

## Examples

### Region Selection

```bash
# Interactive selection, save file + clipboard
dms screenshot

# File only, no clipboard
dms screenshot --no-clipboard

# Clipboard only, no file
dms screenshot --no-file
```

### Full Screen Capture

```bash
# Focused output
dms screenshot full

# All outputs combined
dms screenshot all

# Specific output
dms screenshot output -o DP-1
```

### Repeat Last Capture

```bash
# Capture the same region as before
dms screenshot last
```

### Include Cursor

```bash
dms screenshot full --cursor
```

### Pipe to Editor

```bash
# Send to swappy for annotation
dms screenshot --stdout | swappy -f -
```

### Custom Output Location

```bash
# Save to specific directory
dms screenshot -d ~/Pictures/screenshots

# Custom filename
dms screenshot --filename my-screenshot.png
```



================================================
FILE: docs/dankmaterialshell/cli-setup.mdx
================================================
---
title: Setup
description: Deploy default DMS configuration files for your compositor
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`███████╗███████╗████████╗██╗   ██╗██████╗
██╔════╝██╔════╝╚══██╔══╝██║   ██║██╔══██╗
███████╗█████╗     ██║   ██║   ██║██████╔╝
╚════██║██╔══╝     ██║   ██║   ██║██╔═══╝
███████║███████╗   ██║   ╚██████╔╝██║
╚══════╝╚══════╝   ╚═╝    ╚═════╝ ╚═╝`}
  hideTitle={true}
/>

The `dms setup` command generates default configuration files for your compositor (niri or Hyprland). It only writes files that don't already exist or are empty, so it won't clobber anything you've customized.

Running `dms setup` with no arguments deploys all defaults at once. You can also deploy individual configs one at a time.

## Quick Start

Deploy all default configs:

```bash
dms setup
```

Deploy just keybinds:

```bash
dms setup binds
```

## Subcommands

| Subcommand | Description | niri | Hyprland |
|---|---|---|---|
| `binds` | Default keybinds config | `~/.config/niri/dms/binds.kdl` | `~/.config/hypr/dms/binds.conf` |
| `colors` | Default colors config | `~/.config/niri/dms/colors.kdl` | `~/.config/hypr/dms/colors.conf` |
| `layout` | Default layout config | `~/.config/niri/dms/layout.kdl` | `~/.config/hypr/dms/layout.conf` |
| `outputs` | Default outputs config | `~/.config/niri/dms/outputs.kdl` | `~/.config/hypr/dms/outputs.conf` |
| `cursor` | Default cursor config | `~/.config/niri/dms/cursor.kdl` | `~/.config/hypr/dms/cursor.conf` |
| `windowrules` | Default window rules config | `~/.config/niri/dms/windowrules.kdl` | `~/.config/hypr/dms/windowrules.conf` |
| `alttab` | Default alt-tab config (niri only) | `~/.config/niri/dms/alttab.kdl` | — |

Running `dms setup` with no subcommand deploys all of the above.

:::tip
If you installed DMS from packages (not through the interactive installer), run `dms setup` after install to get working compositor and terminal configs right away.
:::

## NixOS Home-Manager Users

If you manage your niri or Hyprland config through home-manager, you probably don't want `dms setup` writing files that conflict with your declarative config. Instead, use the individual subcommands to generate only the pieces you need.

For example, if you handle keybinds through the niri home-manager module but want DMS defaults for colors and layout:

```bash
dms setup colors
dms setup layout
```

The niri home-manager module's `niri.includes` option references these same files under `~/.config/niri/dms/`. See the [niri integration docs](nixos-flake#config-includes) for the full list of included files.

:::info
The individual subcommands are safe to run at any time — they skip files that already have content. To force a reset, delete or empty the file first, then run the subcommand again.
:::



================================================
FILE: docs/dankmaterialshell/compositors.mdx
================================================
---
title: Compositor Setup
sidebar_position: 8
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell works with any Wayland compositor, but we provide optimized configurations for niri, Hyprland, Sway, MangoWC, and labwc. These configs include DMS-specific keybindings, proper layer shell rules, and recommended settings.

## niri Configuration

niri uses the KDL configuration format. DankMaterialShell integrates seamlessly with niri's scrollable tiling layout.


### Key Configuration Sections

DMS will automatically apply key binds, gaps, window radius, and colors if you include the following files in your niri config. You can customize gaps, border radius, and window radius in **Settings → Compositor**.


```kdl
// Add to the end of ~/.config/niri/config.kdl
include "dms/colors.kdl"
include "dms/layout.kdl"
include "dms/alttab.kdl"
include "dms/binds.kdl"
```

:::tip
Be sure that all files exist before including them in the niri configuration.
```bash
mkdir -p ~/.config/niri/dms
touch ~/.config/niri/dms/{colors,layout,alttab,binds}.kdl
```
:::

For manual configuration recommendations, continue below.

#### Layout

The niri layout should have a transparent background, in order to integrate wallpapers onto the overview.

```kdl
layout {
    // You can tailor the gaps to fit dms spacing.
    gaps 5
    background-color "transparent"
}
```

#### Layer Rules

Tell niri to place the wallpaper on the overview.

```kdl
layer-rule {
    match namespace="^quickshell$"
    place-within-backdrop true
}
```

If "Blur Layer" is enabled, you can place the blurred wallpaper on the overview.

```kdl
layer-rule {
    match namespace="dms:blurwallpaper"
    place-within-backdrop true
}
```
For more about layer rules see [layer rules](./layers.mdx).

#### Startup

For systemd autostart setup, see the [Installation guide](./installation#niri). If you prefer not to use systemd, add DMS directly to your niri config:

```kdl
spawn-at-startup "dms" "run"

// Optional: Clipboard history
spawn-at-startup "bash" "-c" "wl-paste --watch cliphist store &"
```

#### Environment Variables

```kdl
environment {
  XDG_CURRENT_DESKTOP "niri"
  QT_QPA_PLATFORM "wayland"
  ELECTRON_OZONE_PLATFORM_HINT "auto"
  QT_QPA_PLATFORMTHEME "gtk3"
  QT_QPA_PLATFORMTHEME_QT6 "gtk3"
}
```

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx)

```kdl
binds {
    // Application Launchers
    Mod+Space hotkey-overlay-title="Application Launcher" {
        spawn "dms" "ipc" "call" "spotlight" "toggle";
    }
    Mod+V hotkey-overlay-title="Clipboard Manager" {
        spawn "dms" "ipc" "call" "clipboard" "toggle";
    }
    Mod+M hotkey-overlay-title="Task Manager" {
        spawn "dms" "ipc" "call" "processlist" "focusOrToggle";
    }
    Mod+Comma hotkey-overlay-title="Settings" {
        spawn "dms" "ipc" "call" "settings" "focusOrToggle";
    }
    Mod+N hotkey-overlay-title="Notification Center" {
        spawn "dms" "ipc" "call" "notifications" "toggle";
    }
    Mod+Y hotkey-overlay-title="Browse Wallpapers" {
        spawn "dms" "ipc" "call" "dankdash" "wallpaper";
    }

    // Security
    Mod+Alt+L hotkey-overlay-title="Lock Screen" {
        spawn "dms" "ipc" "call" "lock" "lock";
    }

    // Audio Controls
    XF86AudioRaiseVolume allow-when-locked=true {
        spawn "dms" "ipc" "call" "audio" "increment" "3";
    }
    XF86AudioLowerVolume allow-when-locked=true {
        spawn "dms" "ipc" "call" "audio" "decrement" "3";
    }
    XF86AudioMute allow-when-locked=true {
        spawn "dms" "ipc" "call" "audio" "mute";
    }

    // Brightness Controls
    XF86MonBrightnessUp allow-when-locked=true {
       spawn "dms" "ipc" "call" "brightness" "increment" "5" "";
    }
    XF86MonBrightnessDown allow-when-locked=true {
       spawn "dms" "ipc" "call" "brightness" "decrement" "5" "";
    }
}
```

### Window Rules

Recommended window rules, tailor to your preferences:

```kdl
window-rule {
    match app-id=r#"^org\.gnome\."#
    draw-border-with-background false
    geometry-corner-radius 12
    clip-to-geometry true
}

window-rule {
    match app-id=r#"^org\.wezfurlong\.wezterm$"#
    match app-id="Alacritty"
    match app-id="zen"
    match app-id="com.mitchellh.ghostty"
    match app-id="kitty"
    draw-border-with-background false
}

window-rule {
    match is-active=false
    opacity 0.9
}

window-rule {
    geometry-corner-radius 12
    clip-to-geometry true
}

// Open DMS windows as floating by default
window-rule {
    match app-id=r#"org.quickshell$"#
    open-floating true
}
```

## Hyprland Configuration

Hyprland uses a simple config file format at `~/.config/hypr/hyprland.conf`.

### Key Configuration Sections

DMS will automatically apply gaps, window radius, and colors if you include the following files in your Hyprland config. You can customize gaps, border radius, and window radius in **Settings → Compositor**.

```conf
# Add to the end of ~/.config/hypr/hyprland.conf
source = ~/.config/hypr/dms/colors.conf
source = ~/.config/hypr/dms/layout.conf
source = ~/.config/hypr/dms/outputs.conf
```

:::tip
Be sure that all files exist before including them in the Hyprland configuration.
```bash
mkdir -p ~/.config/hypr/dms
touch ~/.config/hypr/dms/{colors,layout,outputs}.conf
```
:::

For manual configuration recommendations, continue below.

#### Startup

For systemd autostart setup (recommended if you have multiple desktop environments), see the [Installation guide](./installation#hyprland). If you prefer not to use systemd, add DMS directly to your Hyprland config:

```conf
exec-once = dms run

# Optional: Clipboard history
exec-once = bash -c "wl-paste --watch cliphist store &"
```

#### Miscellaneous

Disables the hyprland backdrop/logo

```conf
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}
```

#### Environment Variables

```conf
env = QT_QPA_PLATFORM,wayland
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = QT_QPA_PLATFORMTHEME,gtk3
env = QT_QPA_PLATFORMTHEME_QT6,gtk3
```

#### Layer Rules

```conf
layerrule = noanim, ^(dms)$
```
For more about layer rules see [layer rules](./layers.mdx).

#### General Layout

```conf
general {
    gaps_in = 5
    gaps_out = 5
    border_size = 0

    col.active_border = rgba(707070ff)
    col.inactive_border = rgba(d0d0d0ff)

    layout = dwindle
}
```

#### Decoration

```conf
decoration {
    rounding = 12

    active_opacity = 1.0
    inactive_opacity = 0.9

    shadow {
        enabled = true
        range = 30
        render_power = 5
        offset = 0 5
        color = rgba(00000070)
    }
}
```

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx)

```conf
$mod = SUPER

# Application Launchers
bind = $mod, space, exec, dms ipc call spotlight toggle
bind = $mod, V, exec, dms ipc call clipboard toggle
bind = $mod, M, exec, dms ipc call processlist focusOrToggle
bind = $mod, comma, exec, dms ipc call settings focusOrToggle
bind = $mod, N, exec, dms ipc call notifications toggle
bind = $mod, Y, exec, dms ipc call dankdash wallpaper
bind = $mod, TAB, exec, dms ipc call hypr toggleOverview

# Security
bind = $mod ALT, L, exec, dms ipc call lock lock

# Audio Controls
bindel = , XF86AudioRaiseVolume, exec, dms ipc call audio increment 3
bindel = , XF86AudioLowerVolume, exec, dms ipc call audio decrement 3
bindl = , XF86AudioMute, exec, dms ipc call audio mute

# Brightness Controls
bindel = , XF86MonBrightnessUp, exec, dms ipc call brightness increment 5
bindel = , XF86MonBrightnessDown, exec, dms ipc call brightness decrement 5
```

### Window Rules

```conf
# Opacity for inactive windows
windowrulev2 = opacity 0.9 0.9, floating:0, focus:0

# GNOME apps
windowrulev2 = rounding 12, class:^(org\.gnome\.)
windowrulev2 = noborder, class:^(org\.gnome\.)

# Terminal apps - no borders
windowrulev2 = noborder, class:^(org\.wezfurlong\.wezterm)$
windowrulev2 = noborder, class:^(Alacritty)$
windowrulev2 = noborder, class:^(zen)$
windowrulev2 = noborder, class:^(com\.mitchellh\.ghostty)$
windowrulev2 = noborder, class:^(kitty)$

# Floating windows
windowrulev2 = float, class:^(gnome-calculator)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(org\.gnome\.Nautilus)$

# Open DMS windows as floating by default
windowrulev2 = float, class:^(org.quickshell)$
```

## MangoWC Configuration

[MangoWC](https://github.com/DreamMaoMao/mangowc) is a dynamic tiling Wayland compositor based on dwl (wlroots). Configuration lives at `~/.config/mango/config.conf`.

### Key Configuration Sections

DMS will automatically apply gaps, window radius, and colors if you include the following files in your MangoWC config. You can customize gaps, border radius, and window radius in **Settings → Compositor**.

```conf
# Add to the end of ~/.config/mango/config.conf
source=~/.config/mango/dms/colors.conf
source=~/.config/mango/dms/layout.conf
source=~/.config/mango/dms/outputs.conf
```

:::tip
Be sure that all files exist before including them in the MangoWC configuration.
```bash
mkdir -p ~/.config/mango/dms
touch ~/.config/mango/dms/{colors,layout,outputs}.conf
```
:::

For manual configuration recommendations, continue below.

#### Startup

For systemd autostart setup (recommended if you have multiple desktop environments), see the [Installation guide](./installation#mangowc). If you prefer not to use systemd, add DMS directly to your MangoWC config:

```conf
exec-once=dms run

# Optional: Clipboard history
exec-once=wl-paste --type text --watch cliphist store
```

#### Environment Variables

```conf
env=QT_QPA_PLATFORM,wayland
env=ELECTRON_OZONE_PLATFORM_HINT,auto
env=QT_QPA_PLATFORMTHEME,gtk3
```

#### Appearance

Recommended appearance settings for DMS integration:

```conf
# Window appearance
border_radius=12
borderpx=0
focused_opacity=1.0
unfocused_opacity=0.9

# Gaps
gappih=5
gappiv=5
gappoh=5
gappov=5

# Shadows (optional)
shadows=1
shadow_only_floating=1
shadows_size=10
shadows_blur=15
```

#### Layer Rules

```conf
# Disable animation on DMS layers
layerrule=noanim:1,layer_name:^dms
```

For more about layer rules see [layer rules](./layers.mdx).

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx).

```conf
# Application Launchers
bind=SUPER,space,spawn,dms ipc call spotlight toggle
bind=SUPER,v,spawn,dms ipc call clipboard toggle
bind=SUPER,m,spawn,dms ipc call processlist focusOrToggle
bind=SUPER,comma,spawn,dms ipc call settings focusOrToggle
bind=SUPER,n,spawn,dms ipc call notifications toggle
bind=SUPER,y,spawn,dms ipc call dankdash wallpaper

# Security
bind=SUPER+ALT,l,spawn,dms ipc call lock lock

# Audio Controls
bind=NONE,XF86AudioRaiseVolume,spawn,dms ipc call audio increment 3
bind=NONE,XF86AudioLowerVolume,spawn,dms ipc call audio decrement 3
bind=NONE,XF86AudioMute,spawn,dms ipc call audio mute

# Brightness Controls
bind=NONE,XF86MonBrightnessUp,spawn,dms ipc call brightness increment 5
bind=NONE,XF86MonBrightnessDown,spawn,dms ipc call brightness decrement 5
```

### Window Rules

```conf
# GNOME apps
windowrule=isnoborder:1,appid:^org\.gnome\.

# Terminal apps - no borders
windowrule=isnoborder:1,appid:^org\.wezfurlong\.wezterm$
windowrule=isnoborder:1,appid:^Alacritty$
windowrule=isnoborder:1,appid:^com\.mitchellh\.ghostty$
windowrule=isnoborder:1,appid:^kitty$

# Float DMS windows
windowrule=isfloating:1,appid:^org\.quickshell$
```

## Sway Configuration

[Sway](https://swaywm.org/) is an i3-compatible Wayland compositor. DankMaterialShell integrates with Sway's tiling layout.

### Key Configuration Sections

:::info Coming Soon

Detailed Sway configuration sections are coming soon. Sway configuration will include:
- Startup commands
- Environment variables
- DMS keybindings
- Layer rules
- Window rules

For now, refer to the [Example for Sway](#example-for-sway) in the "Other Compositors" section below for basic setup.

:::

#### Startup

For systemd autostart setup (recommended if you have multiple desktop environments), see the [Installation guide](./installation#sway). Otherwise, add DMS directly to your Sway config:

```conf
exec dms run

# Optional: Clipboard history
exec wl-paste --watch cliphist store
```

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx). Basic Sway keybinding examples are available in the [Example for Sway](#example-for-sway) section below.

## labwc Configuration

[labwc](https://labwc.github.io/) is a wlroots-based window-stacking compositor for Wayland, inspired by Openbox.

### Key Configuration Sections

:::info Coming Soon

Detailed labwc configuration sections are coming soon. labwc configuration will include:
- Startup commands
- Environment variables
- DMS keybindings
- Layer rules
- Window rules

For now, refer to the [labwc documentation](https://labwc.github.io/manual.html) for basic setup.

:::


#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx). labwc keybinding configuration coming soon.

## Other Compositors

DankMaterialShell works with any Wayland compositor that supports:
- Layer shell protocol (for panels and overlays)
- Session lock protocol (for lock screen)
- ext-workspace-v1 protocol (for workspace management)
- wlr-output-management-unstable-v1 protocol (for interface scaling + output management)

**Note:** Some compositor-specific features will be unavailable, such as workspace switching.

### Basic Integration

For other compositors, you need to:

1. **Auto-start DMS:**
   ```bash
   dms run
   ```

2. **Configure keybindings** using the IPC commands from the [Keybinds & IPC](keybinds-ipc) guide

3. **Set environment variables** in `~/.config/environment.d/90-dms.conf` (for systemd users) or your compositor config:
   ```ini
   QT_QPA_PLATFORM=wayland
   ```
   You can also use `systemctl --user edit dms` and add `Environment=QT_QPA_PLATFORM=wayland` under `[Service]`. This only affects DMS and apps it launches, whereas `90-dms.conf` applies to all user sessions.

### Example for Sway

Add to `~/.config/sway/config`:

```conf
# DMS Keybindings
bindsym $mod+space exec dms ipc call spotlight toggle
bindsym $mod+v exec dms ipc call clipboard toggle
bindsym $mod+m exec dms ipc call processlist focusOrToggle
bindsym $mod+comma exec dms ipc call settings focusOrToggle

# Audio controls
bindsym XF86AudioRaiseVolume exec dms ipc call audio increment 3
bindsym XF86AudioLowerVolume exec dms ipc call audio decrement 3
bindsym XF86AudioMute exec dms ipc call audio mute

# Brightness controls
bindsym XF86MonBrightnessUp exec dms ipc call brightness increment 5
bindsym XF86MonBrightnessDown exec dms ipc call brightness decrement 5
```

## Troubleshooting

### DMS doesn't start automatically

Check your compositor's logs to ensure the `exec-once` or equivalent startup command is running. You can also manually start DMS with `dms run` to see any error messages.

### Keybindings don't work

Verify that:
- DMS is running (`pgrep -f "dms run"`)
- Your keybinding syntax matches your compositor's format

## Next Steps

- Customize your shell appearance in [Themes](application-themes)
- Explore all available IPC commands in [Keybinds & IPC](keybinds-ipc)
- Add functionality with [Plugins](plugins-overview)



================================================
FILE: docs/dankmaterialshell/custom-themes.mdx
================================================
---
title: Custom Themes
description: Create custom color themes for DankMaterialShell
sidebar_position: 4.1
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`████████╗██╗  ██╗███████╗███╗   ███╗███████╗███████╗
╚══██╔══╝██║  ██║██╔════╝████╗ ████║██╔════╝██╔════╝
     ██║   ███████║█████╗  ██╔████╔██║█████╗  ███████╗
     ██║   ██╔══██║██╔══╝  ██║╚██╔╝██║██╔══╝  ╚════██║
     ██║   ██║  ██║███████╗██║ ╚═╝ ██║███████╗███████║
     ╚═╝   ╚═╝  ╚═╝╚══════╝╚═╝     ╚═╝╚══════╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell supports custom color themes using arbitrary color schemes. You can create your own themes or use pre-made ones.

## Theme Structure

Custom themes are defined in JSON files that generally map to [matugen color keywords](https://github.com/InioX/matugen/wiki/Configuration#colors). Themes can have separate `dark` and `light` variants, or use a single color scheme for both modes.

### Complete Theme Example

```json
{
  "dark": {
    "name": "Cyberpunk Electric Dark",
    "primary": "#00FFCC",
    "primaryText": "#000000",
    "primaryContainer": "#00CC99",
    "secondary": "#FF4DFF",
    "surface": "#0F0F0F",
    "surfaceText": "#E0FFE0",
    "surfaceVariant": "#1F2F1F",
    "surfaceVariantText": "#CCFFCC",
    "surfaceTint": "#00FFCC",
    "background": "#000000",
    "backgroundText": "#F0FFF0",
    "outline": "#80FF80",
    "surfaceContainer": "#1A2B1A",
    "surfaceContainerHigh": "#264026",
    "surfaceContainerHighest": "#33553F",
    "error": "#FF0066",
    "warning": "#CCFF00",
    "info": "#00FFCC",
    "matugen_type": "scheme-expressive"
  },
  "light": {
    "name": "Cyberpunk Electric Light",
    "primary": "#00B899",
    "primaryText": "#FFFFFF",
    "primaryContainer": "#66FFDD",
    "secondary": "#CC00CC",
    "surface": "#F0FFF0",
    "surfaceText": "#1F2F1F",
    "surfaceVariant": "#E6FFE6",
    "surfaceVariantText": "#2D4D2D",
    "surfaceTint": "#00B899",
    "background": "#FFFFFF",
    "backgroundText": "#000000",
    "outline": "#4DCC4D",
    "surfaceContainer": "#F5FFF5",
    "surfaceContainerHigh": "#EBFFEB",
    "surfaceContainerHighest": "#E1FFE1",
    "error": "#B3004D",
    "warning": "#99CC00",
    "info": "#00B899",
    "matugen_type": "scheme-expressive"
  }
}
```

### Single Mode Theme

For themes without light/dark variants, define colors at the top level:

```json
{
  "name": "Theme Name",
  "primary": "#eeeeee",
  "primaryText": "#000000",
  "surface": "#ffffff",
  "surfaceText": "#000000",
  "background": "#f5f5f5",
  "backgroundText": "#000000",
  "outline": "#cccccc",
  "matugen_type": "scheme-tonal-spot"
}
```

## Required Color Properties

### Primary Colors
- `primary` - Main accent color for buttons, highlights, and active states
- `primaryText` - Text color contrasting with primary background
- `primaryContainer` - Variant of primary for containers

### Secondary Colors
- `secondary` - Supporting accent color for variety and hierarchy
- `surfaceTint` - Tint color applied to surfaces (usually derived from primary)

### Surface Colors

<ThemedImage
  alt="Surface Colors Hierarchy"
  sources={{
    light: useBaseUrl('/img/surfacecolorslight.jpg'),
    dark: useBaseUrl('/img/surfacecolors.jpg'),
  }}
/>

- `surface` - Default surface color for cards and panels
- `surfaceText` - Primary text color on surface backgrounds
- `surfaceVariant` - Alternate surface for subtle differentiation
- `surfaceVariantText` - Text color for surfaceVariant backgrounds
- `surfaceContainer` - Container surface, slightly different from surface
- `surfaceContainerHigh` - Elevated container for layered interfaces
- `surfaceContainerHighest` - Highest elevation container for top-level surfaces

### Background Colors
- `background` - Main background color for the interface
- `backgroundText` - Text color for background areas

### Outline
- `outline` - Color for subtle borders, dividers, muted icons, and extra subtle text

## Optional Properties

### Semantic Colors
- `error` - Error states, delete buttons, critical warnings
- `warning` - Warning states and caution indicators
- `info` - Informational states and neutral indicators

### Matugen Type

The `matugen_type` property controls the color scheme algorithm used for system app theming. Default is `scheme-tonal-spot` if not specified.

Available options:
- `scheme-content` - Content-based color extraction
- `scheme-expressive` - Expressive, vibrant color schemes
- `scheme-fidelity` - High fidelity to source material
- `scheme-fruit-salad` - Colorful, fruit salad-like schemes
- `scheme-monochrome` - Monochromatic color schemes
- `scheme-neutral` - Neutral, subdued color schemes
- `scheme-rainbow` - Rainbow-like color schemes
- `scheme-tonal-spot` - Tonal spot color schemes (default)

## Example Themes

Pre-built example themes are available in the [DankMaterialShell repository](https://github.com/AvengeMedia/DankMaterialShell/tree/master/docs):

- [Cyberpunk Electric](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_cyberpunk_electric.json) - Neon green and magenta cyberpunk aesthetic
- [Hotline Miami](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_hotline_miami.json) - Retro 80s hot pink and blue
- [Miami Vice](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_miami_vice.json) - Classic teal and pink vice aesthetic
- [Synthwave Electric](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_synthwave_electric.json) - Electric purple and cyan synthwave

## Applying Custom Themes

### Via Settings UI

1. Open **Settings → Theme & Colors**
2. Select **Custom** from the theme dropdown
3. Choose your theme file path

### Via Configuration File

Edit `~/.config/DankMaterialShell/settings.json`:

```json
{
  "currentThemeName": "custom",
  "customThemeFile": "/path/to/mytheme.json"
}
```

### Live Editing

Custom theme files are reactive - editing the JSON file automatically updates the shell if it's the currently active theme.

## Theme Development Tips

- **Start from examples:** Use the pre-built themes as templates
- **Adjust incrementally:** Change one color at a time to see the impact
- **Test both modes:** If providing dark/light variants, test both thoroughly
- **Consider contrast:** Ensure text colors have sufficient contrast with backgrounds
- **Experiment with matugen_type:** Different schemes work better with different color palettes
- **Version control:** Store themes in your dotfiles for easy synchronization



================================================
FILE: docs/dankmaterialshell/icon-theming.mdx
================================================
---
title: Icon Theming
description: Configure icon themes for Qt and GTK applications in DMS
sidebar_position: 4.3
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██╗ ██████╗ ██████╗ ███╗   ██╗███████╗
██║██╔════╝██╔═══██╗████╗  ██║██╔════╝
██║██║     ██║   ██║██╔██╗ ██║███████╗
██║██║     ██║   ██║██║╚██╗██║╚════██║
██║╚██████╗╚██████╔╝██║ ╚████║███████║
╚═╝ ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell will use the QT6 icon theme system as primary source for application icons. Depending on which platform theme you're using, icons are configured in different locations.

## How Icon Theming Works

Qt6 applications, including DankMaterialShell, look for icon themes based on your `QT_QPA_PLATFORMTHEME` setting. Each platform theme reads icon configuration from a different location:

- **gtk3**: Reads from GTK settings (`~/.config/gtk-3.0/settings.ini`)
- **qt6ct**: Reads from qt6ct configuration (`~/.config/qt6ct/qt6ct.conf`)
- **kde**: Reads from KDE Plasma settings (`~/.config/kdeglobals`)

DMS respects these platform-specific configurations and doesn't override your icon theme choices.

### Environment Variable Override

You can also set the icon theme directly using the `QS_ICON_THEME` environment variable:

```bash
export QS_ICON_THEME=Papirus-Dark
```

This takes precedence over platform theme settings and is useful for testing or when you want DMS to use a different icon theme than your other Qt applications.

## GTK Platform Theme (gtk3)

If you're using the GTK passthrough method for Qt theming, icon themes are controlled via GTK settings.

### Configuration

Edit `~/.config/gtk-3.0/settings.ini`:

```ini
[Settings]
gtk-icon-theme-name=Papirus-Dark
```

**Common icon themes:**
- `Papirus` / `Papirus-Dark`
- `Adwaita`
- `breeze` / `breeze-dark`
- `Tela`
- `Nordzy`

### Installing Icon Themes

```bash
# Arch - Papirus
sudo pacman -S papirus-icon-theme

# Arch - Adwaita (usually pre-installed)
sudo pacman -S adwaita-icon-theme

# Flatpak icon themes (available to all apps)
flatpak install flathub org.kde.PaplirusIconTheme
```

## Qt6ct Platform Theme

When using qt6ct for dedicated Qt control, icon themes are managed through the qt6ct interface or configuration file.

### Configuration via GUI

1. Launch `qt6ct` from your application launcher
2. Navigate to the **Icon Theme** tab
3. Select your preferred icon theme from the list
4. Click **Apply**

### Configuration via File

Edit `~/.config/qt6ct/qt6ct.conf`:

```ini
[Appearance]
icon_theme=Papirus-Dark
```

## KDE Platform Theme

If you're using KDE Plasma or the KDE platform theme, icon themes are managed through KDE's configuration system.

### Configuration via File

Edit `~/.config/kdeglobals`:

```ini
[Icons]
Theme=Papirus-Dark
```

## Installing Icon Themes

Icon themes can be installed system-wide or per-user.

### System-wide Installation

```bash
# Arch
sudo pacman -S papirus-icon-theme
sudo pacman -S breeze-icons
sudo pacman -S adwaita-icon-theme

# Fedora
sudo dnf install papirus-icon-theme
sudo dnf install breeze-icon-theme
sudo dnf install adwaita-icon-theme
```

### Per-user Installation

Download icon themes and extract to `~/.local/share/icons/`:

```bash
# Example: Installing from a downloaded archive
mkdir -p ~/.local/share/icons
cd ~/.local/share/icons
tar xf ~/Downloads/Papirus-Dark.tar.gz
```

### Flatpak Icon Themes

Flatpak applications use icon themes from the Flatpak runtime:

```bash
# List available icon theme extensions
flatpak search icon

# Install Papirus for Flatpak apps
flatpak install flathub org.kde.PaplirusIconTheme
```

## Verifying Your Configuration

Check which platform theme you're currently using:

```bash
echo $QT_QPA_PLATFORMTHEME
```

:::tip DankInstall Users

dankinstall sets `QT_QPA_PLATFORMTHEME=gtk3` in `~/.config/environment.d/90-dms.conf`. Check this file to see your current setting. You can also override this per-service with `systemctl --user edit dms` (only affects DMS and apps it launches).

:::

:::note

This variable must be exposed to the `dms` process. dankinstall users have this in `~/.config/environment.d/90-dms.conf`. Manual setups typically set it in the compositor config, a custom environment.d file, or via `systemctl --user edit dms` (only affects DMS and apps it launches).

:::

Check icon theme for each configuration:

```bash
# GTK configuration
cat ~/.config/gtk-3.0/settings.ini | grep icon-theme

# qt6ct configuration
cat ~/.config/qt6ct/qt6ct.conf | grep icon_theme

# KDE configuration
cat ~/.config/kdeglobals | grep -A 1 "\[Icons\]"
```

## Common Icon Theme Recommendations

### Material Design Style
- **Papirus** / **Papirus-Dark**: Most popular, excellent coverage
- **Tela**: Modern, colorful icons with good app coverage

### Gnome or KDE Style
- **Adwaita**: GNOME's default, clean and simple
- **breeze**: KDE's default, professional appearance

## Troubleshooting

### Icons not changing

Make sure you've restarted applications after changing icon themes. Qt applications cache icon information and need to be relaunched.

```bash
# Restart DMS to apply icon theme changes
dms restart
```

### Missing icons

Some applications might show missing icons if the theme doesn't include all required icons. Install a fallback theme:

```bash
# Arch
sudo pacman -S adwaita-icon-theme hicolor-icon-theme

# Fedora
sudo dnf install adwaita-icon-theme hicolor-icon-theme
```

### Wrong theme being used

Verify that your platform theme environment variable matches your configuration:

```bash
# Check current setting
echo $QT_QPA_PLATFORMTHEME
```

If you change `QT_QPA_PLATFORMTHEME`, you must restart your compositor session for the change to take effect.

### qt6ct shows no themes

If qt6ct shows an empty icon theme list, check that icon themes are installed in the correct location:

```bash
# Check system icon themes
ls /usr/share/icons/

# Check user icon themes
ls ~/.local/share/icons/
```

### Flatpak apps using different icons

Flatpak applications run in a sandboxed environment and may not see your system icon themes. Install icon themes via Flatpak:

```bash
flatpak install flathub org.kde.PaplirusIconTheme
```

## Platform Theme Comparison

| Feature | GTK3 | qt6ct | KDE |
|---------|------|-------|-----|
| **Configuration File** | `~/.config/gtk-3.0/settings.ini` | `~/.config/qt6ct/qt6ct.conf` | `~/.config/kdeglobals` |
| **GUI Tool** | GNOME Settings, nwg-look | `qt6ct` | System Settings |
| **Best For** | GTK-heavy desktops | Mixed Qt/GTK | KDE Plasma users |
| **Icon Cache** | GTK icon cache | Qt icon cache | KDE icon cache |

## Related Documentation

- [Application Theming](/docs/dankmaterialshell/application-themes): Configure color themes for GTK and Qt apps
- [Custom Themes](/docs/dankmaterialshell/custom-themes): Create custom DMS themes



================================================
FILE: docs/dankmaterialshell/installation.mdx
================================================
---
title: Installation
description: Install DankMaterialShell on your system
sidebar_position: 2
image: img/dankinstall.png
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

This guide covers installation of DankMaterialShell across different Linux distributions and methods.

## Dependencies

- [**Quickshell**](https://github.com/quickshell-mirror/quickshell) (required) - The core framework
- [**cava**](https://github.com/karlstav/cava) (optional) - Audio visualizer widget
- [**cliphist**](https://github.com/sentriz/cliphist) + [**wl-clipboard**](https://github.com/bugaevc/wl-clipboard) (optional) - Clipboard history
- [**dgop**](https://github.com/AvengeMedia/dgop) (optional) - System telemetry for resource widgets
- [**dsearch**](https://github.com/AvengeMedia/danksearch) (optional) - Filesystem search engine
- [**matugen**](https://github.com/InioX/matugen) (optional) - Material Design color palette generation
- [**niri**](https://github.com/niri-wm/niri) (optional) - DMS Team's choice of Wayland compositor
- [**qt6-multimedia**](https://github.com/qt/qtmultimedia) (optional) - System sound feedback

For pre-built packages on Fedora, Debian, Ubuntu, and OpenSUSE, see the [DankLinux Repository](../danklinux) page.

:::note

Only **Quickshell** is required. All other dependencies are optional and enable specific features.

:::

## Arch & Derivatives

`dms` is available on the [AUR](https://aur.archlinux.org/), it is assumed that you have an aur helper installed such as [paru](https://aur.archlinux.org/packages/paru) or [yay](https://aur.archlinux.org/packages/yay).

For the sake of consistency, we will use `paru` in the examples.

### Stable Release

```bash
paru -S dms-shell-bin
```

### Latest Development Build

```bash
paru -S dms-shell-git
```

These packages ship the shell, widgets, and CLI. Pair them with `niri`, `hyprland`, `sway`, `mangowc`, or `labwc` packages from the official repositories for a complete desktop stack.

## Fedora & CentOS

DankMaterialShell is available through COPR repositories for Fedora 41/42/43 rawhide and CentOS 10. Enable the COPR repositories managed by the team to install prebuilt packages:

### Stable Release

```bash
sudo dnf copr enable avengemedia/dms
sudo dnf install dms
```

### Latest Development Build

```bash
sudo dnf copr enable avengemedia/dms-git
sudo dnf install dms
```

The COPR repositories also provide companion packages such as `quickshell-git`, `cliphist`, `matugen`, and other utilities used by the default configuration.

## Debian & Ubuntu

DankMaterialShell is available through Open Build Service (OBS) for Debian and Launchpad PPA for Ubuntu.

### Debian

For **Debian 13 (Trixie)**:

```bash
# DankLinux repository
curl -fsSL https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/Debian_13/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/danklinux.gpg
echo "deb [signed-by=/etc/apt/keyrings/danklinux.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/danklinux/Debian_13/ /" | \
  sudo tee /etc/apt/sources.list.d/danklinux.list

# DMS stable repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_13/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_13/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms.list

# DMS development repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_13/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms-git.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms-git.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_13/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms-git.list
sudo apt update
```

For **Debian Testing**:

```bash
# DankLinux repository
curl -fsSL https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/Debian_Testing/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/danklinux.gpg
echo "deb [signed-by=/etc/apt/keyrings/danklinux.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/danklinux/Debian_Testing/ /" | \
  sudo tee /etc/apt/sources.list.d/danklinux.list

# DMS stable repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Testing/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Testing/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms.list

# DMS development repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Testing/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms-git.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms-git.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Testing/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms-git.list
sudo apt update
```

For **Debian Sid**:

```bash
# DankLinux repository
curl -fsSL https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/Debian_Unstable/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/danklinux.gpg
echo "deb [signed-by=/etc/apt/keyrings/danklinux.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/danklinux/Debian_Unstable/ /" | \
  sudo tee /etc/apt/sources.list.d/danklinux.list

# DMS stable repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Unstable/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Unstable/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms.list

# DMS development repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Unstable/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms-git.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms-git.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Unstable/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms-git.list
sudo apt update
```

#### Install Packages

Install the **stable release**:

```bash
sudo apt install dms
```

Install the **latest development build**:

```bash
sudo apt install dms-git
```

### Ubuntu

Ubuntu 25.10+ (Questing) is supported via Launchpad PPA.

#### Stable Release

```bash
sudo add-apt-repository ppa:avengemedia/danklinux
sudo add-apt-repository ppa:avengemedia/dms
sudo apt update
sudo apt install dms
```

#### Latest Development Build

```bash
sudo add-apt-repository ppa:avengemedia/danklinux
sudo add-apt-repository ppa:avengemedia/dms-git
sudo apt update
sudo apt install dms-git
```

:::tip

Visit the [DankLinux Repository](../danklinux) page for OBS and PPA links and more information about available packages.\
Add **niri** or **niri-git** to your system to get the best experience.

:::

## OpenSUSE & Derivatives

DankMaterialShell is available through the Open Build Service (OBS) for OpenSUSE Tumbleweed, Leap 16/16.1 & Slowroll.

### OpenSUSE Tumbleweed

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Tumbleweed/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/openSUSE_Tumbleweed/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Tumbleweed/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/openSUSE_Tumbleweed/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

### OpenSUSE Leap 16

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.0/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/16.0/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.0/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/16.0/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

### OpenSUSE Leap 16.1

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.1/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/16.1/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.1/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/16.1/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

### OpenSUSE Slowroll

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Slowroll/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/openSUSE_Slowroll/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Slowroll/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/openSUSE_Slowroll/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

## Gentoo (Community)

:::warning Community Maintained

This overlay is maintained by the community, not the DMS team. For issues with the ebuild itself, report to the [quilat-overlay repository](https://github.com/Graght/quilat-overlay).

:::

The [quilat-overlay](https://github.com/Graght/quilat-overlay) provides a live ebuild for DMS with OpenRC and systemd support.

### Add the Overlay

Using eselect-repository:

```bash
sudo eselect repository add quilat-overlay git https://github.com/Graght/quilat-overlay.git
sudo emaint sync -r quilat-overlay
```

Or manually in `/etc/portage/repos.conf/quilat-overlay.conf`:

```ini
[quilat-overlay]
location = /var/db/repos/quilat-overlay
sync-type = git
sync-uri = https://github.com/Graght/quilat-overlay.git
```

Then sync:

```bash
sudo emaint sync -r quilat-overlay
```

### Install DMS

```bash
# With systemd
sudo emerge --ask gui-shell/dms

# With OpenRC (elogind)
sudo USE="-systemd" emerge --ask gui-shell/dms
```

The ebuild pulls from git master (`dms-9999`), so updates come via `emerge --sync && emerge -uDN @world`.

## NixOS

:::tip

NixOS has dedicated documentation with two installation methods:
- [Native nixpkgs installation](./nixos) - **Recommended** for NixOS unstable users
- [Flake-based installation](./nixos-flake) - For NixOS stable, home-manager support, or quicker updates

:::

## All Other Distributions

:::warning

This guide doesn't cover compositor installation. You need a compatible Wayland compositor (niri, Hyprland, sway, dwl/MangoWC, etc.).

:::

### 1. Install Essential Dependencies

#### Quickshell

If your distribution does not provide a quickshell package, you'll need to build it from source. Quickshell requires:

**Base dependencies:**
- cmake, qt6base, qt6declarative, qtshadertools, pkg-config, cli11
- Private Qt headers for qt6declarative (and qt6wayland on Qt < 6.10)
- Qt 6.6 or newer

**Key features and their dependencies:**
- **Wayland support** (enabled by default) - qt6wayland, wayland, wayland-protocols
- **Crash reporter** (recommended) - google-breakpad
- **Jemalloc** (recommended for better memory management) - jemalloc
- **System tray** - qt6dbus
- **PAM authentication** - pam

For complete build instructions and feature flags, see the [Quickshell BUILD.md](https://git.outfoxxed.me/quickshell/quickshell/raw/branch/master/BUILD.md).

#### AccountsService

:::note

AccountsService is needed to persist user profile configurations such as profile pictures. Available in most repositories as `accountsservice`.

:::

```bash
# Arch + Friends
sudo pacman -S accountsservice
# Fedora + Friends
sudo dnf install accountsservice
# Debian, Ubuntu + Friends
sudo apt install accountsservice
# openSUSE + Friends
sudo zypper install accountsservice
# Gentoo
sudo emerge --ask sys-apps/accountsservice
```

### 2. Clone the DMS Repository

```bash
git clone https://github.com/AvengeMedia/DankMaterialShell.git ~/dms
```

### 3. Compile & Install the DMS Backend

*Requires GO 1.24+*

```bash
cd ~/dms
sudo make install
```

:::note

To uninstall a source build, run `sudo make uninstall` from the repository directory.

:::

### 4. Install Optional Integrations

Install optional components for full functionality using your distribution's package manager:

- `dgop` - Detailed system metrics and process lists
- `dsearch` - Filesystem search engine
- `matugen` - Material Design color palette generation
- `i2c-tools` - ddc monitor backlight control
- `wl-clipboard` + `cliphist` - Clipboard history
- `cava` - Audio visualizer widget
- `qt6-multimedia` - System sound feedback

## Post Install

After completing installation:

1. **Generate compositor config** (niri/Hyprland only): Run `dms setup` to create a starter configuration with DMS keybinds and autostart. Other compositors (sway, MangoWC, labwc) are supported but require manual configuration.
2. Enable the systemd service (recommended) or add `dms run` to your compositor config
3. Configure your compositor keybinds - see the [Keybinds & IPC](keybinds-ipc) guide
4. Customize appearance via [Themes](application-themes)
5. Extend functionality with [Plugins](plugins-overview)

See [Managing Your Installation](managing) for detailed guidance on service management, environment variables, and updates.

### Systemd Integration (Recommended)

:::tip DankInstall Users

If you used [dankinstall](../dankinstall), this is already configured. The installer runs `systemctl --user enable --now dms` during setup.

:::

**Enable autostart:**

```bash
systemctl --user enable dms
```

**Manual control:**

```bash
# Start DMS now
systemctl --user start dms

# Check status
systemctl --user status dms

# View logs
journalctl --user -u dms -f

# Restart DMS
systemctl --user restart dms

# Disable autostart
systemctl --user disable dms
```

:::warning

If using systemd autostart, remove `dms run` / `spawn "dms" "run"` / `exec-once=dms run` from your compositor's configuration to avoid running DMS twice.

:::

### Compositor-Specific Systemd Setup

Different compositors have different levels of systemd session integration. Choose the section that matches your compositor.

:::tip Why use add-wants?

If you have multiple desktop environments installed (e.g., Plasma, GNOME, niri), using `systemctl --user enable dms` starts DMS in *all* of them. Using `add-wants` binds DMS to a specific compositor's service or session target, so it only runs where you want it. DMS won't launch when you log into Plasma or GNOME.

:::

#### niri

niri has native systemd session integration. Bind DMS to niri's service:

```bash
systemctl --user add-wants niri.service dms
```

DMS starts when niri starts and stops when niri exits. It won't run in other sessions.

#### Hyprland

Hyprland doesn't initialize the systemd user session by default. You need to export the environment to systemd for user services to work.

Create a session target:

```ini title="~/.config/systemd/user/hyprland-session.target"
[Unit]
Description=Hyprland Session Target
Requires=graphical-session.target
After=graphical-session.target
```

Add to your Hyprland config (after any `env =` lines):

```conf title="~/.config/hypr/hyprland.conf"
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user start hyprland-session.target
```

Bind DMS to the session target:

```bash
systemctl --user add-wants hyprland-session.target dms
```

#### MangoWC

[MangoWC](https://github.com/DreamMaoMao/mangowc) is a dynamic tiling compositor based on dwl (wlroots). Like other wlroots compositors, it requires manual environment export for systemd user services.

Create a session target:

```ini title="~/.config/systemd/user/mango-session.target"
[Unit]
Description=MangoWC Session Target
Requires=graphical-session.target
After=graphical-session.target
```

Add to your MangoWC config:

```conf title="~/.config/mango/config.conf"
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=systemctl --user start mango-session.target
```

Bind DMS to the session:

```bash
systemctl --user add-wants mango-session.target dms
```

#### Sway

Sway (wlroots-based) needs the environment exported for systemd services.

Create a session target:

```ini title="~/.config/systemd/user/sway-session.target"
[Unit]
Description=Sway Session Target
Requires=graphical-session.target
After=graphical-session.target
```

Add to your Sway config:

```conf title="~/.config/sway/config"
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec systemctl --user start sway-session.target
```

Bind DMS to the session:

```bash
systemctl --user add-wants sway-session.target dms
```



================================================
FILE: docs/dankmaterialshell/keybinds-ipc.mdx
================================================
---
title: Keybinds & IPC
description: Comprehensive IPC functionality for external control of DankMaterialShell
sidebar_position: 5
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell provides comprehensive IPC (Inter-Process Communication) functionality that allows external control of the shell through command-line commands. All IPC commands follow the format:

```bash
dms ipc call <target> <function> [parameters...]
```

## Core Controls

### audio

Manage audio output and input devices.

| Function | Description | Parameters |
| --- | --- | --- |
| `setvolume <percentage>` | Set output volume | percentage (0-100) |
| `increment <step>` | Increase output volume | step (default: 5) |
| `decrement <step>` | Decrease output volume | step (default: 5) |
| `mute` | Toggle output mute | - |
| `setmic <percentage>` | Set microphone volume | percentage (0-100) |
| `micmute` | Toggle microphone mute | - |
| `cycleoutput` | Cycle through audio output devices | - |
| `status` | Get current audio status | - |

**Examples:**
```bash
dms ipc call audio setvolume 50
dms ipc call audio increment 10
dms ipc call audio mute
dms ipc call audio cycleoutput
```

### brightness

Control display brightness for internal and external displays.

| Function | Description | Parameters |
| --- | --- | --- |
| `set <percentage> [device]` | Set brightness level | percentage (1-100), device (optional) |
| `increment <step> [device]` | Increase brightness | step, device (optional) |
| `decrement <step> [device]` | Decrease brightness | step, device (optional) |
| `status` | Get current brightness status | - |
| `list` | List all brightness devices | - |
| `enableExponential [device]` | Enable exponential brightness mode | device (optional, uses current if not specified) |
| `disableExponential [device]` | Disable exponential brightness mode | device (optional, uses current if not specified) |
| `toggleExponential [device]` | Toggle exponential brightness mode | device (optional, uses current if not specified) |

**Examples:**
```bash
dms ipc call brightness set 80
dms ipc call brightness increment 10 ""
dms ipc call brightness decrement 5 "intel_backlight"
dms ipc call brightness disableExponential "backlight:intel_backlight"
dms ipc call brightness toggleExponential
```

### night

Night mode (gamma/color temperature) control.

| Function | Description | Parameters |
| --- | --- | --- |
| `toggle` | Toggle night mode on/off | - |
| `enable` | Enable night mode | - |
| `disable` | Disable night mode | - |
| `status` | Get night mode status | - |
| `temperature [value]` | Get/set color temperature | value in Kelvin (2500-6000, optional) |
| `automation [mode]` | Get/set automation mode | "manual", "time", or "location" (optional) |
| `schedule <start> <end>` | Set time-based schedule | start time (HH:MM), end time (HH:MM) |
| `location <lat> <lon>` | Set location coordinates | latitude, longitude |

**Examples:**
```bash
dms ipc call night toggle
dms ipc call night temperature 4000
dms ipc call night automation time
dms ipc call night schedule 20:00 06:00
dms ipc call night location 40.7128 -74.0060
```

### mpris

Media player control via MPRIS interface.

| Function | Description |
| --- | --- |
| `list` | List all available media players |
| `play` | Start playback |
| `pause` | Pause playback |
| `playPause` | Toggle play/pause |
| `previous` | Skip to previous track |
| `next` | Skip to next track |
| `stop` | Stop playback |

**Examples:**
```bash
dms ipc call mpris playPause
dms ipc call mpris next
```

### lock

Screen lock control and status.

| Function | Description |
| --- | --- |
| `lock` | Lock the screen immediately |
| `demo` | Show lock screen demo (doesn't lock) |
| `isLocked` | Check if screen is locked |

**Examples:**
```bash
dms ipc call lock lock
dms ipc call lock isLocked
```

### inhibit

Idle inhibitor control to prevent automatic sleep/lock.

| Function | Description |
| --- | --- |
| `toggle` | Toggle idle inhibit state |
| `enable` | Enable idle inhibit (prevent sleep) |
| `disable` | Disable idle inhibit (allow sleep) |

**Examples:**
```bash
dms ipc call inhibit toggle
dms ipc call inhibit enable
```

## Wallpaper & Profile

### wallpaper

Wallpaper management with support for global and per-monitor configurations.

#### Global Wallpaper Functions

| Function | Description | Parameters |
| --- | --- | --- |
| `get` | Get current wallpaper path | - |
| `set <path>` | Set wallpaper | path to image file |
| `clear` | Clear all wallpapers | - |
| `next` | Cycle to next wallpaper | - |
| `prev` | Cycle to previous wallpaper | - |

#### Per-Monitor Functions

| Function | Description | Parameters |
| --- | --- | --- |
| `getFor <screen>` | Get wallpaper for monitor | monitor name (e.g., "DP-2") |
| `setFor <screen> <path>` | Set wallpaper for monitor | monitor name, path to image |
| `nextFor <screen>` | Cycle to next wallpaper | monitor name |
| `prevFor <screen>` | Cycle to previous wallpaper | monitor name |

**Examples:**
```bash
# Global wallpaper mode
dms ipc call wallpaper set /path/to/image.jpg
dms ipc call wallpaper next

# Per-monitor wallpaper mode
dms ipc call wallpaper setFor DP-2 /path/to/image1.jpg
dms ipc call wallpaper setFor eDP-1 /path/to/image2.jpg
dms ipc call wallpaper nextFor eDP-1

# Clear and return to global mode
dms ipc call wallpaper clear
```

**Note:** When per-monitor mode is enabled, legacy global functions will return error messages directing you to use the per-monitor equivalents.

### profile

User profile image management.

| Function | Description | Parameters |
| --- | --- | --- |
| `getImage` | Get current profile image path | - |
| `setImage <path>` | Set profile image | path to image file |
| `clearImage` | Clear profile image | - |

**Examples:**
```bash
dms ipc call profile setImage /path/to/avatar.png
dms ipc call profile clearImage
```

## Appearance Controls

### theme

Theme mode control (light/dark mode switching).

| Function | Description |
| --- | --- |
| `toggle` | Toggle between light and dark themes |
| `light` | Switch to light theme |
| `dark` | Switch to dark theme |
| `getMode` | Get current theme mode |

**Examples:**
```bash
dms ipc call theme toggle
dms ipc call theme dark
```

### bar

Control individual bars using flexible selectors.

| Function | Description | Parameters |
| --- | --- | --- |
| `reveal <selector> <value>` | Show a bar | selector + value |
| `hide <selector> <value>` | Hide a bar | selector + value |
| `toggle <selector> <value>` | Toggle bar visibility | selector + value |
| `status <selector> <value>` | Get bar visibility status | selector + value |
| `autoHide <selector> <value>` | Enable auto-hide mode | selector + value |
| `manualHide <selector> <value>` | Disable auto-hide mode | selector + value |
| `toggleAutoHide <selector> <value>` | Toggle auto-hide mode | selector + value |
| `getPosition <selector> <value>` | Get bar position | selector + value |
| `setPosition <selector> <value> <position>` | Set bar position | selector + value + position (top, bottom, left, right) |

**Selectors:**
- `index` - Select by position (0-based)
- `id` - Select by unique bar ID
- `name` - Select by bar name

**Examples:**
```bash
# By index
dms ipc call bar hide index 0
dms ipc call bar reveal index 1
dms ipc call bar toggle index 0

# By name
dms ipc call bar toggle name "Main Bar"
dms ipc call bar status name "Secondary"

# By ID
dms ipc call bar reveal id abc123

# Auto-hide controls
dms ipc call bar autoHide index 0
dms ipc call bar manualHide name "Main Bar"
dms ipc call bar toggleAutoHide index 1

# Position controls
dms ipc call bar getPosition index 0
dms ipc call bar getPosition id default
dms ipc call bar setPosition index 0 top
dms ipc call bar setPosition id default left
```

### dock

Dock visibility and behavior control.

| Function | Description |
| --- | --- |
| `reveal` | Show the dock |
| `hide` | Hide the dock |
| `toggle` | Toggle dock visibility |
| `status` | Get dock visibility status |
| `autoHide` | Enable auto-hide mode |
| `manualHide` | Disable auto-hide mode |
| `toggleAutoHide` | Toggle auto-hide mode |

**Examples:**
```bash
dms ipc call dock toggle
dms ipc call dock hide
dms ipc call dock reveal
dms ipc call dock status

# Auto-hide controls
dms ipc call dock autoHide
dms ipc call dock manualHide
dms ipc call dock toggleAutoHide
```

### widget

Control bar widget popouts, menus, and visibility (including plugins).

| Function | Description | Parameters |
| --- | --- | --- |
| `toggle <widgetId>` | Toggle widget popout visibility | widget ID |
| `list` | List all registered widget IDs with visibility state | - |
| `status <widgetId>` | Get widget popout visibility status | widget ID |
| `visibility <widgetId>` | Get widget visibility state | widget ID |
| `reveal <widgetId>` | Force widget to be visible | widget ID |
| `hide <widgetId>` | Force widget to be hidden | widget ID |
| `reset <widgetId>` | Clear visibility override, return to normal behavior | widget ID |

**Examples:**
```bash
dms ipc call widget list
dms ipc call widget toggle clock
dms ipc call widget status weather

# Control widget visibility on the bar
dms ipc call widget visibility weather
dms ipc call widget hide weather
dms ipc call widget reveal weather
dms ipc call widget reset weather
```

**Notes:**
- Use `list` to discover available widget IDs with their current visibility state (`[visible]` or `[hidden]`)
- Widget IDs depend on which widgets are enabled in your bar settings
- The `status` function returns "visible" or "hidden" for the widget **popout** state
- The `visibility`, `reveal`, `hide`, and `reset` functions control the widget's **bar presence** (whether it appears on the bar at all)
- Plugins can define conditional visibility via `visibilityCommand` — use `reset` to return to that behavior after overriding

## Modal Controls

These targets control various modal windows and overlays.

### spotlight

Application launcher modal with search capabilities.

| Function | Description | Parameters |
| --- | --- | --- |
| `open` | Show launcher | - |
| `close` | Hide launcher | - |
| `toggle` | Toggle launcher visibility | - |
| `openQuery <query>` | Show launcher with search | search text |
| `toggleQuery <query>` | Toggle launcher with search | search text |

**Examples:**
```bash
dms ipc call spotlight toggle
dms ipc call spotlight openQuery browser
dms ipc call spotlight toggleQuery "!"
```

### Other Modals

All these modals support `open`, `close`, and `toggle` functions:

- **clipboard** - Clipboard history manager
- **notifications** - Notification center (also supports `clearAll`, `dismissAllPopups`, `toggleDoNotDisturb`, and `getDoNotDisturb`)
- **processlist** - System process list and performance monitor (also supports `focusOrToggle`)
- **powermenu** - Power menu for system actions
- **control-center** - Quick settings (network, bluetooth, audio, etc.)
- **notepad** - Quick notepad/scratchpad

**Examples:**
```bash
dms ipc call clipboard toggle
dms ipc call notifications open
dms ipc call notifications clearAll
dms ipc call notifications dismissAllPopups
dms ipc call notifications toggleDoNotDisturb
dms ipc call notifications getDoNotDisturb
dms ipc call processlist open
dms ipc call powermenu toggle
dms ipc call control-center toggle
dms ipc call notepad open
```

### settings

Settings modal with additional read/write access to configuration values.

| Function | Description | Parameters |
| --- | --- | --- |
| `open` | Show settings modal | - |
| `openWith <tab>` | Open settings to specific tab | tab ID |
| `close` | Hide settings modal | - |
| `toggle` | Toggle settings modal | - |
| `toggleWith <tab>` | Toggle settings to specific tab | tab ID |
| `focusOrToggle` | Focus settings if open, otherwise toggle | - |
| `focusOrToggleWith <tab>` | Focus/toggle to specific tab | tab ID |
| `tabs` | List available tab IDs | - |
| `get <key>` | Get a setting value | setting key name |
| `set <key> <value>` | Set a setting value | setting key, new value |

**Available Tab IDs:**
- **Personalization:** `personalization`, `wallpaper`, `theme`, `typography`, `time_weather`, `sounds`
- **Dankbar:** `dankbar`, `dankbar_settings`, `dankbar_widgets`
- **Widgets:** `workspaces_widgets`, `workspaces`, `media_player`, `notifications`, `osd`, `running_apps`, `updater`
- **Dock & Launcher:** `dock_launcher`, `dock`, `launcher`
- **System:** `keybinds`, `displays`, `network`, `printers`
- **Power & Security:** `power_security`, `lock_screen`, `power_sleep`
- **Other:** `plugins`, `about`

**Examples:**
```bash
dms ipc call settings toggle
dms ipc call settings openWith theme
dms ipc call settings toggleWith dock
dms ipc call settings tabs
dms ipc call settings set showSeconds true
dms ipc call settings set opacity 0.9
```

**Note:** The `set` function supports boolean, number, and string values. Objects and arrays are not currently supported.

### dash

Dashboard popup with multiple tabs.

| Function | Description | Parameters |
| --- | --- | --- |
| `open [tab]` | Show dashboard | tab: "", "overview", "media", "weather" |
| `close` | Hide dashboard | - |
| `toggle [tab]` | Toggle dashboard | tab |

**Examples:**
```bash
dms ipc call dash toggle ""
dms ipc call dash open overview
dms ipc call dash toggle media
dms ipc call dash open weather
```

### file

File browser controls for selecting wallpapers and profile images.

| Function | Description | Parameters |
| --- | --- | --- |
| `browse <type>` | Open file browser | "wallpaper" or "profile" |

**Examples:**
```bash
dms ipc call file browse wallpaper
dms ipc call file browse profile
```

### dankdash

DankDash wallpaper browser control.

| Function | Description |
| --- | --- |
| `wallpaper` | Toggle DankDash wallpaper browser |

**Examples:**
```bash
dms ipc call dankdash wallpaper
```

### welcome

First-launch welcome wizard with feature overview, system diagnostics, and configuration quick links.

| Function | Description | Parameters |
| --- | --- | --- |
| `open` | Show wizard at Welcome page | - |
| `doctor` | Show wizard at System Check page | - |
| `page <num>` | Show wizard at specific page | 0=Welcome, 1=Doctor, 2=Complete |

**Pages:**
- **0 - Welcome**: Feature overview with DMS highlights
- **1 - System Check**: Runs `dms doctor` with filterable results (Errors, Warnings, Info, OK)
- **2 - Complete**: Configuration quick links, keybind shortcuts, and external resources

**Examples:**
```bash
dms ipc call welcome open
dms ipc call welcome doctor
dms ipc call welcome page 2
```

**Settings Integration:** Available in Settings → About → Tools as "Show Welcome" and "System Check" buttons.

## System Utilities

### niri

**Requires niri 25.11+**

Screenshot functionality for the niri compositor. Captures are opened in your configured editor for markup and annotation.

| Function | Description |
| --- | --- |
| `screenshot` | Interactive selection screenshot |
| `screenshotScreen` | Capture entire screen |
| `screenshotWindow` | Capture focused window |

**Examples:**
```bash
dms ipc call niri screenshot
dms ipc call niri screenshotScreen
dms ipc call niri screenshotWindow
```

**Configuration:**

Set the `DMS_SCREENSHOT_EDITOR` environment variable to choose your preferred screenshot editor backend:

```bash
# Use Swappy (default)
export DMS_SCREENSHOT_EDITOR=swappy

# Use Satty
export DMS_SCREENSHOT_EDITOR=satty
```

**Requirements:** niri compositor and your chosen screenshot editor (Swappy or Satty) must be installed.

### keybinds

Dynamic keybinds cheatsheet modal that works with multiple providers.

| Function | Description | Parameters |
| --- | --- | --- |
| `open <provider>` | Show keybinds modal | provider name (e.g., "hyprland", "sway", "mangowc") |
| `openWithPath <provider> <path>` | Show keybinds modal with custom config path | provider name, path to config |
| `close` | Hide keybinds modal | - |
| `toggle <provider>` | Toggle keybinds modal visibility | provider name |
| `toggleWithPath <provider> <path>` | Toggle keybinds modal with custom config path | provider name, path to config |

**Examples:**
```bash
dms ipc call keybinds toggle hyprland
dms ipc call keybinds toggle sway
dms ipc call keybinds toggle mangowc
dms ipc call keybinds open tmux

# With custom config paths
dms ipc call keybinds openWithPath hyprland /custom/path/to/hypr
dms ipc call keybinds toggleWithPath sway /etc/sway/config
```

**Supported Providers:**

The keybinds modal supports all providers available through the `dms keybinds` CLI:
- **Built-in providers**: Hyprland, Sway, MangoWC (automatically parse compositor configs)
- **Custom cheatsheets**: Any JSON-based cheatsheet in `~/.config/DankMaterialShell/cheatsheets/`

The modal automatically parses configuration files and displays keybinds organized by category with optional subcategories. See the [Keybinds & Cheatsheets](/docs/dankmaterialshell/cli-keybinds-cheatsheets) documentation for more details on providers and creating custom cheatsheets.

### window-rules

**niri only**

Window rules editor modal for managing compositor window rules.

| Function | Description |
| --- | --- |
| `open` | Open the window rules editor |
| `close` | Close the window rules editor |
| `toggle` | Toggle window rules editor visibility |

**Examples:**
```bash
dms ipc call window-rules open
dms ipc call window-rules close
dms ipc call window-rules toggle
```

:::note
This feature is only available on the niri compositor.
:::

### workspace-rename

**Niri and Hyprland only**

Rename the currently active workspace via a dialog.

| Function | Description |
| --- | --- |
| `open` | Open the workspace rename dialog |

**Examples:**
```bash
dms ipc call workspace-rename open
```

**Note:** Returns an error if running on an unsupported compositor.

### outputs

Monitor output profile management for switching between display configurations.

| Function | Description | Parameters |
| --- | --- | --- |
| `listProfiles` | List all available output profiles | - |
| `current` | Get the currently active profile | - |
| `setProfile <name>` | Switch to a specific output profile | profile name |
| `status` | Get current output configuration status | - |
| `refresh` | Refresh output configuration | - |

**Examples:**
```bash
# List available profiles
dms ipc call outputs listProfiles

# Check current profile
dms ipc call outputs current

# Switch to a specific profile
dms ipc call outputs setProfile "docked"
dms ipc call outputs setProfile "laptop-only"

# Get output status
dms ipc call outputs status

# Refresh configuration
dms ipc call outputs refresh
```

:::note
This feature is only available on niri, Hyprland, and MangoWC compositors.
:::

### hypr

**Hyprland-only features**

Hyprland-specific workspace overview control.

| Function | Description |
| --- | --- |
| `openOverview` | Show Hyprland workspace overview |
| `closeOverview` | Hide Hyprland workspace overview |
| `toggleOverview` | Toggle Hyprland workspace overview visibility |

**Examples:**
```bash
dms ipc call hypr toggleOverview
```

**Workspace Overview:**

The workspace overview shows all your workspaces across all monitors with live window previews:
- **Multi-monitor support** - Shows workspaces from all connected monitors with monitor name labels
- **Live window previews** - Real-time screen capture of all windows on each workspace
- **Drag-and-drop** - Move windows between workspaces and monitors by dragging
- **Keyboard navigation** - Use Left/Right arrow keys to switch between workspaces on current monitor
- **Visual indicators** - Active workspace highlighted when it contains windows
- **Click to switch** - Click any workspace to switch to it
- **Click outside or press Escape** - Close the overview

**Note:** All hypr functions return `HYPR_NOT_AVAILABLE` if not running Hyprland.

### plugins

Manage plugins at runtime - useful for development and troubleshooting.

| Function | Description | Parameters |
| --- | --- | --- |
| `list` | List all available plugins with status | - |
| `status <pluginId>` | Check if a plugin is loaded | plugin ID |
| `reload <pluginId>` | Hot-reload a plugin without restarting | plugin ID |
| `enable <pluginId>` | Enable a disabled plugin | plugin ID |
| `disable <pluginId>` | Disable a loaded plugin | plugin ID |

**Examples:**
```bash
# See what plugins are available
dms ipc call plugins list

# Check if a specific plugin is running
dms ipc call plugins status myPlugin

# Hot-reload during development (no shell restart needed)
dms ipc call plugins reload myPlugin

# Toggle plugins on/off
dms ipc call plugins enable myPlugin
dms ipc call plugins disable myPlugin
```

### systemupdater

System updater external check request.

| Function | Description |
| --- | --- |
| `updatestatus` | Trigger system update check |

**Examples:**
```bash
dms ipc call systemupdater updatestatus
```

### desktopWidget

Control desktop widget instances (clocks, system monitors, etc.).

| Function | Description | Parameters |
| --- | --- | --- |
| `list` | List all widget instances with ID, type, name, and status | - |
| `status <instanceId>` | Get widget status (enabled, overlay, clickThrough, etc.) | instance ID |
| `enable <instanceId>` | Enable the widget | instance ID |
| `disable <instanceId>` | Disable the widget | instance ID |
| `toggleEnabled <instanceId>` | Toggle widget enabled/disabled | instance ID |
| `toggleOverlay <instanceId>` | Toggle show on overlay layer | instance ID |
| `setOverlay <instanceId> <bool>` | Set overlay visibility | instance ID, true/false |
| `toggleClickThrough <instanceId>` | Toggle click-through mode | instance ID |
| `setClickThrough <instanceId> <bool>` | Set click-through mode | instance ID, true/false |
| `toggleSyncPosition <instanceId>` | Toggle position sync across screens | instance ID |
| `setSyncPosition <instanceId> <bool>` | Set position sync across screens | instance ID, true/false |

**Examples:**
```bash
# List all desktop widgets
dms ipc call desktopWidget list

# Get widget status
dms ipc call desktopWidget status dw_1234567890_abc123

# Toggle overlay visibility (useful for keybinds)
dms ipc call desktopWidget toggleOverlay dw_1234567890_abc123

# Enable click-through mode
dms ipc call desktopWidget setClickThrough dw_1234567890_abc123 true

# Toggle position sync
dms ipc call desktopWidget toggleSyncPosition dw_1234567890_abc123
```

**Notes:**
- Use `list` to discover widget instance IDs
- Click-through mode allows mouse clicks to pass through the widget to windows below
- Position sync keeps the widget at the same relative position across multiple monitors

### toast

Display toast notifications for user feedback and scripted alerts.

| Function | Description | Parameters |
| --- | --- | --- |
| `info <message>` | Show info toast (1.5s) | message text |
| `infoWith <message> <details> <command> <category>` | Info toast with extras | message, details, command, category |
| `warn <message>` | Show warning toast (3s) | message text |
| `warnWith <message> <details> <command> <category>` | Warning toast with extras | message, details, command, category |
| `error <message>` | Show error toast (5s) | message text |
| `errorWith <message> <details> <command> <category>` | Error toast with extras (8s, expandable) | message, details, command, category |
| `hide` | Hide current toast | - |
| `dismiss <category>` | Dismiss toasts by category | category name |
| `status` | Get current toast state | - |

**Examples:**
```bash
# Simple messages
dms ipc call toast info "Build complete"
dms ipc call toast warn "Disk space low"
dms ipc call toast error "Connection failed"

# With details (expandable in UI)
dms ipc call toast errorWith "Git push failed" "Permission denied (publickey)" "git push origin main" "git"

# With category for later dismissal
dms ipc call toast warnWith "Downloading update..." "" "" "updater"
dms ipc call toast dismiss "updater"

# Check current state
dms ipc call toast status

# Force hide
dms ipc call toast hide
```

**Notes:**
- The `*With` variants accept optional details (expandable in UI), a command string, and a category
- Use empty strings (`""`) for optional parameters you want to skip
- Categories allow grouping related toasts for batch dismissal
- The `status` function returns `hidden` or `visible:level:message`

## Scripting and Automation

IPC commands are designed for integration with keybindings, scripts, and automation tools.

### Time-based Automation

```bash
#!/bin/bash
# Toggle night mode based on time of day
hour=$(date +%H)
if [ $hour -ge 20 ] || [ $hour -le 6 ]; then
    dms ipc call night enable
else
    dms ipc call night disable
fi
```

### Status Checking

```bash
# Check if screen is locked before performing action
if dms ipc call lock isLocked | grep -q "false"; then
    dms ipc call notifications open
fi
```

### Conditional Logic

```bash
# Increase brightness only if below threshold
current=$(dms ipc call brightness status | grep -oP '\d+')
if [ "$current" -lt 50 ]; then
    dms ipc call brightness set 50
fi
```

## Return Values

Most IPC functions return string messages indicating:
- Success confirmation with current values
- Error messages if operation fails
- Status information for query functions
- Empty/void return for simple action functions

Functions that return void (like media controls) execute the action but don't provide feedback. Check the application state through other means if needed.

## Next Steps

See compositor-specific keybinding configuration in your compositor's documentation to integrate these IPC commands with your workflow.



================================================
FILE: docs/dankmaterialshell/layers.mdx
================================================
---
title: Layer Namespaces
description: Layer namespaces DMS components
sidebar_position: 7
---

# Wayland Layer Shell & Layer Rules

Configuring blur for Wayland layer shells can be tricky since each compositor handles it differently.

## Overview

DMS uses Wayland's layer shell protocol for all UI components: the bar, popups, modals, OSDs, and notifications. Each component type gets its own namespace, allowing your compositor to target them individually for blur effects.

Layer shell surfaces differ from regular windows—they're UI overlays positioned at specific layers (background, bottom, top, overlay). By assigning unique namespaces to each component type, you can apply blur selectively (e.g., "blur all modals" or "blur all popouts") without affecting other elements.

## Component Namespaces

Every component namespace starts with `dms:` followed by the rest of the namespace, DMS uses the following namespaces for layer shell components:

### Modals
Full-screen modal dialogs including settings, power menu, and clipboard history. These overlay the entire screen and optionally dim the background.

| Component            | Namespace                       |
| -------------------- | ------------------------------- |
| Clipboard history    | `dms:clipboard`                 |
| File browser         | `dms:file-browser`              |
| Settings             | `dms:settings`                  |
| Launcher             | `dms:spotlight`                 |
| Bluetooth pairing    | `dms:bluetooth-pairing`         |
| Color picker         | `dms:color-picker`              |
| Hyprkeybinds         | `dms:hyprkeybinds`              |
| Network info         | `dms:network-info`              |
| Network info (wired) | `dms:network-info-wired`        |
| Notification         | `dms:notification-center-modal` |
| Polkit               | `dms:polkit`                    |
| Power menu           | `dms:power-menu`                |
| Process list         | `dms:process-list-modal`        |
| Wifi password        | `dms:wifi-password`             |
| Confirm modal        | `dms:confirm-modal`             |
| Fallback namespace   | `dms:modal`                     |

### Popouts
Popup panels triggered by bar widgets, such as the control center, app drawer, and notification center. These are anchored to the bar and slide out accordingly.

| Component                 | Namespace                        |
| ------------------------- | -------------------------------- |
| App drawer                | `dms:app-launcher`               |
| Control center            | `dms:control-center`             |
| Battery                   | `dms:battery`                    |
| Vpn                       | `dms:vpn`                        |
| DankDash                  | `dms:dash`                       |
| Notification center       | `dms:notification-center-popout` |
| Process list              | `dms:process-list-popout`        |
| Fallback namespace        | `dms:popout`                     |
| Plugin                    | `dms:plugins:<namespace>`        |
| Fallback plugin namespace | `dms:plugins:plugin`             |


### Desktop widgets
Desktop widget (both builtins and plugins) and other layers related to desktop widgets.

| Component      | Namespace                        |
| -------------- | -------------------------------- |
| Desktop widget | `dms:desktop-widget:<plugin id>` |
| Preview        | `dms:desktop-widget-preview`     |
| Grid           | `dms:desktop-widget-grid`        |
| Helper         | `dms:desktop-widget-helper`      |

### Misc Components
Namespaces for other component that aren't modals or popouts.

| Component          | Namespace                | Use                                                                                                                                  |
| ------------------ | ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| DankBar            | `dms:bar`                | The main panel, which can be positioned at the top, bottom, left, or right edge of the screen.                                       |
| Dock               | `dms:dock`               | Application dock (optional component).                                                                                               |
| Workspace overview | `dms:workspace-overview` | The workspace overview for hyprland.                                                                                                 |
| Notification popup | `dms:notification-popup` | Toast notifications displayed when applications request user attention.                                                              |
| OSD                | `dms:osd`                | On-screen displays for volume and brightness indicators. These appear briefly to show status information and fade out automatically. |
| Slideout           | `dms:slideout`           | Sliding panels from screen edges (optional component).                                                                               |
| Tooltip            | `dms:tooltip`            | Tooltip shown for example when hovering an app on the dock.                                                                          |
| Dock context menu  | `dock-context-menu`      | Context menu when right clicking an app on the dock.                                                                                 |
| Toast              | `dms:toast`              | Toast appearing on top middle of the screen.                                                                                         |
| Tray menu window   | `dms:tray-menu-window`   | Menu appearing when right clicking an applet in the system tray.                                                                     |
 
> **Tip:** If you are unsure about a component's namespace, you can check it using your compositor's tools:
> - **Hyprland**: Run `hyprctl layers` with the layer opened
> - **Niri**: Run `niri msg layers` to list active layer surfaces

If you're a plugin dev, see the [plugin development](./plugin-development.mdx#widget-with-popout) page to add your layer namespace.
## Compositor Examples

Each compositor has its own syntax for layer rules.

### Hyprland

:::info

In order for some layer rules (such as `animation`, `blur` and `dimaround`), you will have to disable the shell's animations and dim effect.

- You can disable animations in **Settings**>**Personalization**>**Animation Speed** and set to **None**.
- You can disable the dim in **Theme & Colors**>**Widget Styling** and untoggle **Darken Modal Background**.

:::

#### Blur Settings

```conf
decoration {
    blur {
        enabled = true
        size = 10
        passes = 4

        ignore_opacity = true
        new_optimizations = true
        xray = false

        noise = 0.02
        contrast = 1.1
        vibrancy = 0.2
        vibrancy_darkness = 0.3
    }

    drop_shadow = true
    shadow_range = 20
    shadow_render_power = 3
    col.shadow = rgba(00000099)
}
```

#### Layer Rules

Add these layer rules to enable blur for DMS components:

```conf
# Animations
layerrule {
    animation = slide right
    match:namespace = dms:control-center
}

layerrule {
    animation = slide top
    match:namespace = dms:workspace-overview
}
# You can find all available animations here: https://wiki.hypr.land/Configuring/Animations/#animation-tree

# Blur
# You can use match:namespace with regex to target multiple layers
layerrule {
    blur = on
    ignore_alpha = 0
    match:namespace = dms:(color-picker|clipboard|spotlight|settings)
}

# Dim (if you prefer a dim instead of a blur effect)
layerrule {
    dimaround = on
    match:namespace = dms:(color-picker|clipboard|spotlight|settings)
}
```
#### Examples

<details>
<summary>Examples</summary>
##### Add a blur effect on the shell's Components

Lower the shell's components' opacity in **Theme & Colors**>**Widget Styling**.
```conf
# Modals
layerrule {
    blur = on
    ignore_alpha = 0
    match:namespace = dms:(polkit|notification-center-modal|workspace-overview|color-picker|clipboard|spotlight|settings|process-list-modal)
}

# Shell components (bar, popouts, etc.)
layerrule {
    blur = on
    ignore_alpha = 0
    match:namespace = dms:(bar|tooltip|toast|dock-context-menu|tray-menu-window|control-center|notification-center-popout|dash|system-update|process-list-popout|battery|popout|app-launcher)
}
```
</details>
#### Performance Tuning

If blur is impacting system performance, try these optimizations in order:

1. **Reduce passes**: Set `passes = 2` instead of 4
2. **Reduce size**: Set `size = 6` instead of 10
4. **Use xray mode**: Set `xray = true` to reduce blur on stacked layers

You can test blur impact in real-time:
```bash
hyprctl keyword decoration:blur:enabled false
# Test performance
hyprctl keyword decoration:blur:enabled true
```

You can find more about Hyprland's layer rules [here](https://wiki.hypr.land/Configuring/Window-Rules/#layer-rules).

### Niri

Niri uses a different configuration format with `layer-rule` blocks. Each rule can match namespaces using regex patterns.

#### Layer Rules

```kdl
// Block out sensitive components from screencasts
layer-rule {
    match namespace="^dms:clipboard$"

    block-out-from "screencast"
}

// Match all DMS layers with a regex
layer-rule {
    match namespace=r#"^dms:.*"#

    // Apply rules to all DMS components
}
```

#### Shadow Settings

```kdl
layer-rule {
    match namespace="^dms:bar$"
    match namespace="^dms:dock$"

    shadow {
        on
        // off
        softness 40
        spread 5
        offset x=0 y=5
        draw-behind-window true
        color "#00000064"
        // inactive-color "#00000064"
    }
}
```

You can find more about Niri's layer rules [here](https://github.com/niri-wm/niri/wiki/Configuration:-Layer-Rules).

## Other Compositors

Not all compositors support blur or layer rules. Check your compositor's documentation for available options.

DMS is compositor-agnostic—it only sets namespaces and lets the compositor handle the effects. Once you determine the appropriate layer rule syntax for your compositor, you can target the same namespaces listed above.

- [MangoWC's layer rules wiki page](https://github.com/DreamMaoMao/mangowc/wiki#layer-rules)



================================================
FILE: docs/dankmaterialshell/managing.mdx
================================================
---
title: Managing Your Installation
description: Update, configure, and manage DankMaterialShell
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

This guide covers how to manage, update, and configure DankMaterialShell after installation.

## Service Management

DMS can run as a systemd user service or be launched manually. The `dms` CLI handles both transparently - commands like `dms restart` work regardless of how DMS was started.

:::tip DankInstall Users

If you installed via [dankinstall](../dankinstall), DMS is configured as a systemd service by default. The installer runs `systemctl --user enable --now dms` during setup. You don't need to add `dms run` to your compositor config.

:::

### Systemd (Recommended)

Systemd provides automatic startup, proper session integration, and logging via journalctl.

**Enable and start:**

```bash
systemctl --user enable --now dms
```

**Common operations:**

```bash
# Check status
systemctl --user status dms

# View logs
journalctl --user -u dms -f

# Restart (or just use: dms restart)
systemctl --user restart dms

# Stop
systemctl --user stop dms

# Disable autostart
systemctl --user disable dms
```

:::warning

If using systemd, remove any `dms run` / `spawn "dms" "run"` lines from your compositor config to avoid running DMS twice.

:::

#### niri: Per-Session Control

niri has proper systemd session integration. You can make DMS only start under niri (not Plasma, GNOME, etc.):

```bash
systemctl --user add-wants niri.service dms
```

This ties the dms service to niri's session, so it won't start under other desktop environments.

#### Other Compositors

Hyprland, Sway, and MangoWC don't have systemd session targets. If you use multiple desktop environments and only want DMS on one of them, disable the systemd unit and start DMS from your compositor config instead:

```bash
systemctl --user disable dms
```

Then add `dms run` to your compositor's autostart (see [Manual Launch](#manual-launch) below).

### Manual Launch

For testing, debugging, or if you prefer compositor-managed startup:

**Compositor autostart:**

```bash
# Hyprland (~/.config/hypr/hyprland.conf)
exec-once = dms run

# Sway (~/.config/sway/config)
exec dms run

# niri (~/.config/niri/config.kdl)
spawn-at-startup "dms" "run"
```

**Manual control:**

```bash
# Launch (foreground)
dms run

# Launch (background/daemon)
dms run -d

# Restart
dms restart

# Kill
dms kill
```

### Switching Between Methods

**From manual to systemd:**

1. Remove `dms run` from your compositor config
2. Enable the service: `systemctl --user enable --now dms`
3. Restart your compositor or log out/in

**From systemd to manual:**

1. Disable the service: `systemctl --user disable --now dms`
2. Add `dms run` to your compositor's autostart
3. Restart your compositor or log out/in

## Environment Variables

DMS and its themed applications need certain environment variables set. Where these live depends on your setup.

:::tip DankInstall Users

dankinstall creates `~/.config/environment.d/90-dms.conf` with the necessary variables. This file is loaded by systemd for all user sessions. If you need to change Qt theming (e.g., switching to qt6ct), edit this file.

You can also run `systemctl --user edit dms` and add `Environment=VAR=Value` lines under `[Service]`. This only affects DMS and apps it launches, whereas `90-dms.conf` applies to all user sessions.

:::

### Checking Your Environment

```bash
# See what's currently set
env | grep -E "QT_|GTK|XDG"

# Check dankinstall's environment file (if it exists)
cat ~/.config/environment.d/90-dms.conf
```

### Manual Configuration

If you didn't use dankinstall, set environment variables in your compositor config:

**niri** (`~/.config/niri/config.kdl`):
```kdl
environment {
  QT_QPA_PLATFORM "wayland"
  QT_QPA_PLATFORMTHEME "gtk3"
  ELECTRON_OZONE_PLATFORM_HINT "auto"
}
```

**Hyprland** (`~/.config/hypr/hyprland.conf`):
```conf
env = QT_QPA_PLATFORM,wayland
env = QT_QPA_PLATFORMTHEME,gtk3
env = ELECTRON_OZONE_PLATFORM_HINT,auto
```

Or create `~/.config/environment.d/90-dms.conf`:
```ini
QT_QPA_PLATFORM=wayland
QT_QPA_PLATFORMTHEME=gtk3
ELECTRON_OZONE_PLATFORM_HINT=auto
```

Changes to `environment.d` require logging out and back in (or rebooting) to take effect.

You can also run `systemctl --user edit dms` and add `Environment=` lines under `[Service]`:
```ini
[Service]
Environment=QT_QPA_PLATFORM=wayland
Environment=QT_QPA_PLATFORMTHEME=gtk3
Environment=ELECTRON_OZONE_PLATFORM_HINT=auto
```

This only affects DMS and apps it launches, whereas `90-dms.conf` applies to all user sessions.

## Updating

### Package Installations

**Arch & Derivatives:**

```bash
paru -Syu dms-shell-bin
# or
paru -Syu dms-shell-git
```

**Fedora & Derivatives:**

```bash
sudo dnf upgrade dms
```

**Debian & Ubuntu:**

```bash
sudo apt update && sudo apt upgrade dms
# or dms-git
```

**OpenSUSE:**

```bash
sudo zypper refresh && sudo zypper update dms
```

**NixOS:**

```bash
# Update flake inputs, then:
sudo nixos-rebuild switch
```

After package updates, restart the shell:

```bash
dms restart
```

### Manual Installations

For source builds or [non-packaged](installation) distro dankinstall setups:

```bash
dms update
```

For manually compiled dependencies (quickshell, niri, etc.), use the interactive TUI:

```bash
dms
# Navigate to Update → select packages to rebuild
```

## After Updating

1. Restart DMS: `dms restart`
2. Check [release notes](https://github.com/AvengeMedia/DankMaterialShell/releases) for breaking changes
3. Review Settings if new options are available
4. Update plugins if needed

## Uninstalling

### Package Installations

**Arch & Derivatives:**

```bash
# Whichever you have installed
sudo pacman -Rns dms-shell-bin
# or
sudo pacman -Rns dms-shell-git
```

**Fedora, Debian, Ubuntu, OpenSUSE:**

```bash
# Stable
sudo dnf remove dms      # Fedora
sudo apt remove dms      # Debian/Ubuntu
sudo zypper remove dms   # OpenSUSE

# Or git version
sudo dnf remove dms-git
sudo apt remove dms-git
sudo zypper remove dms-git
```

### Manual/Source Installs

```bash
# Stop and disable the service
systemctl --user disable --now dms

# Remove the binary and shell config
rm -rf ~/.config/quickshell/dms
sudo rm /usr/local/bin/dms
```

### Cleanup

After uninstalling (package or manual), remove leftover user data:

```bash
rm -r ~/.config/DankMaterialShell ~/.local/state/DankMaterialShell ~/.cache/DankMaterialShell
```

## Troubleshooting

**DMS won't start:**
- Check logs: `journalctl --user -u dms -n 50` (systemd) or run `dms run` in a terminal
- Verify quickshell is installed: `which qs`
- Kill stuck processes: `dms kill`

**Settings not applying:**
- Backup and remove `~/.config/DankMaterialShell/settings.json`
- Restart DMS to regenerate defaults

**Environment variables not working:**
- For `environment.d` changes: log out and back in
- For compositor config changes: restart the compositor
- Verify with `echo $QT_QPA_PLATFORMTHEME`

**Multiple instances running:**
```bash
dms kill
dms restart
```



================================================
FILE: docs/dankmaterialshell/nixos-flake.mdx
================================================
---
title: NixOS Installation (Flake)
description: Install and configure DankMaterialShell on NixOS using flakes
sidebar_position: 4
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell can be installed on NixOS either system-wide using the NixOS module or per-user using home-manager. This guide covers both flake-based installation methods.

:::info Native nixpkgs Available
DankMaterialShell is now available in nixpkgs unstable! If you're on NixOS unstable (26.05), see [Installation - NixOS](nixos) for the native nixpkgs installation method which doesn't require flakes.
:::

## Installation Methods

Choose one of the following installation methods based on your needs:

- **NixOS Module**: System-wide installation, ideal for multi-user systems or when you want DMS available to all users
- **Home-Manager Module**: Per-user installation, ideal for single-user setups or when you want user-specific configurations

## Installation

### 1. Add Flake Inputs

First, add the required flake inputs to your `flake.nix`:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";

    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

:::tip Using Unstable Version
If you want to use the unstable (-git) version from the master branch, you can use:
```nix
dms.url = "github:AvengeMedia/DankMaterialShell";
```
However, be aware that the documentation here may not be updated for the latest changes. You're advised to check the Nix modules source code in the repository directly, and keep in mind that it may not work properly.
:::

### 2. Import the NixOS or home-manager Module

Add the relevant DankMaterialShell module to your configuration imports:

If you're using the NixOS module:

```nix
imports = [
  inputs.dms.nixosModules.dank-material-shell
];
```

Alternatively, if you're using the home-manager module:
```nix
imports = [
  inputs.dms.homeModules.dank-material-shell
];
```

### 3. Enable DankMaterialShell

In your configuration, enable DankMaterialShell:

```nix
programs.dank-material-shell.enable = true;
```

That's it! Rebuild your system (or standalone home-manager configuration) and DankMaterialShell will be installed  with sensible defaults.


:::warning dgop on NixOS Stable
`dgop` is not available in nixpkgs stable (25.11). If you're using NixOS stable, you'll need to either:
- Import dgop from the dgop flake and manually set the package, or
- Use nixpkgs unstable for dgop

To import dgop from the flake, first add it to your flake inputs:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-25.11";xd
    
    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
    
    dgop = {
      url = "github:AvengeMedia/dgop";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then configure DankMaterialShell to use the dgop package from the flake:

```nix
programs.dank-material-shell = {
  enable = true;
  enableSystemMonitoring = true;
  dgop.package = inputs.dgop.packages.${pkgs.system}.default;
};
```
:::

## niri Integration

If you're using the niri compositor, the home-manager module provides additional integration options including automatic keybindings and startup configuration.

:::warning
Note that `niri-stable` package from niri-flake is on version `25.08`, while the needed version for DankMaterialShell is the latest `25.11` (available in nixpkgs).
:::

### Prerequisites

If you choose to use [niri-flake](https://github.com/sodiboo/niri-flake), ensure you have it in your inputs:

```nix
niri = {
  url = "github:sodiboo/niri-flake";
  inputs.nixpkgs.follows = "nixpkgs";
};
```

Import it in your home-manager configuration:

```nix
imports = [
  inputs.niri.homeModules.niri
];
```

:::tip
If you're using the niri-flake's NixOS module (`inputs.niri.nixosModules.niri`), you don't need to import the home-manager module separately as it's already included.
:::

### Enable niri Module

You can import and use the niri-specific DankMaterialShell module:

```nix
imports = [
  inputs.dms.homeModules.dank-material-shell
  inputs.dms.homeModules.niri
];
```

Enable niri integration features:

```nix
programs.dank-material-shell = {
  enable = true;
  niri = {
    enableKeybinds = true;   # Sets static preset keybinds
    enableSpawn = true;      # Auto-start DMS with niri, if enabled
  };
};
```

This will automatically configure preset keybindings for launcher, notifications, settings, and all other DankMaterialShell features.

:::note
You should not use both `systemd.enable` and `niri.enableSpawn` at the same time, as this will make two instances of DankMaterialShell to be spawned at the same time.
:::


### Config includes

DankMaterialShell's niri home-manager module has a "hack" for config includes support under the `programs.dank-material-shell.niri.includes` option set.

:::note
It is not recommended to use both `niri.includes` (which is enabled by default) and `niri.enableKeybinds`, as the latter one is less flexible and may introduce conflicts.

Also note that this will overwrite your `~/.config/niri/config.kdl`, so your niri-flake generated files will be in `~/.config/niri/hm.kdl` instead (or whatever else you define in `originalFileName`).
:::

In most cases, it should work out of the box, but configuration options are available.

:::tip Generating Include Files
The files referenced by `filesToInclude` must exist or niri will error on startup. If you're not generating them through home-manager, use [`dms setup`](cli-setup) to deploy the defaults — or generate individual files like `dms setup binds`, `dms setup colors`, etc.
:::

#### Defaults

```nix
programs.dank-material-shell = {
  enable = true;

  niri.includes = {
    enable = true;             # Enable config includes hack. Enabled by default.

    override = true;           # If disabled, DMS settings won't be prioritized over settings defined using niri-flake
    originalFileName = "hm";   # A new name (without extension) for the config file generated by niri-flake.
    filesToInclude = [         # Files under `$XDG_CONFIG_HOME/niri/dms` to be included into the new config
      "alttab"                 # Please note that niri will throw an error if any of these files are missing.
      "binds"
      "colors"
      "layout"
      "outputs"
      "wpblur"
    ];
  };
}
```

### Polkit Agent

If you want to use DankMaterialShell's built-in polkit agent and use the niri-flake's NixOS module, you'll need to disable niri-flake's default polkit agent to avoid conflicts:

```nix
systemd.user.services.niri-flake-polkit.enable = false;
```

## Configuration Options

:::info
The configuration options below work for **both** the NixOS module and the home-manager module. However, note that:
- **NixOS module**: Installs packages system-wide and places quickshell configs in `/etc/xdg/quickshell/dms`
- **Home-manager module**: Additionally supports plugins, default settings, and default session configuration
:::

DankMaterialShell provides numerous configuration options to customize your installation. Here are the main options:

### Feature Toggles

```nix
programs.dank-material-shell = {
  enable = true;

  systemd = {
    enable = true;             # Systemd service for auto-start
    restartIfChanged = true;   # Auto-restart dms.service when dank-material-shell changes
  };

  # Core features
  enableSystemMonitoring = true;     # System monitoring widgets (dgop)
  enableVPN = true;                  # VPN management widget
  enableDynamicTheming = true;       # Wallpaper-based theming (matugen)
  enableAudioWavelength = true;      # Audio visualizer (cava)
  enableCalendarEvents = true;       # Calendar integration (khal)
  enableClipboardPaste = true;       # Pasting items from the clipboard (wtype)
};
```

### Custom Quickshell Package

:::info Quickshell from Source

The DankMaterialShell flake already uses Quickshell built from source by default, as many features rely on unreleased Quickshell features. No additional configuration is needed.

:::

If you need to override the Quickshell package:

```nix
programs.dank-material-shell = {
  enable = true;
  quickshell.package = pkgs.quickshell; # or your custom package
};
```

### Settings (home-manager only)

You can configure settings using the home-manager module:

```nix
programs.dank-material-shell = {
  enable = true;

  settings = {
    theme = "dark";
    dynamicTheming = true;
    # Add any other settings here
  };

  session = {
    isLightMode = false;
    # Add any other session state settings here
  };

  clipboardSettings = {
    maxHistory = 25;
    maxEntrySize = 5242880;
    autoClearDays = 1;
    clearAtStartup = true;
    disabled = false;
    disableHistory = false;
    disablePersist = true;
  };
};
```

If you change settings in the GUI while managing settings with home-manager, you will get a popup saying that settings are read-only, with an option to copy the new settings. You can then use json2nix on the copied settings to update your home-manager configuration. 

A complete up-to-date list of available settings can be found [here](https://raw.githubusercontent.com/AvengeMedia/DankMaterialShell/refs/heads/master/quickshell/Common/settings/SettingsSpec.js) and similarly for session settings an up-to-date list can be found [here](https://github.com/AvengeMedia/DankMaterialShell/raw/refs/heads/master/quickshell/Common/settings/SessionSpec.js).


### Plugins

Install DankMaterialShell plugins declaratively. There are two methods:

#### Method 1: Using the Plugin Registry (Recommended)

The [dms-plugin-registry](https://github.com/AvengeMedia/dms-plugin-registry) flake provides all community plugins as packages with daily updates. This is the simplest way to install plugins using Nix.

First, add the plugin registry as a flake input:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
    
    dms-plugin-registry = {
      url = "github:AvengeMedia/dms-plugin-registry";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then import the module and enable plugins:

```nix
{
  imports = [
    inputs.dms.homeModules.dank-material-shell
    inputs.dms-plugin-registry.modules.default
  ];

  programs.dank-material-shell = {
    enable = true;

    plugins = {
      # Simply enable plugins by their ID (from the registry)
      dankBatteryAlerts.enable = true;
      dockerManager.enable = true;
      
      # Add plugin-specific settings
      mediaPlayer = {
        enable = true;

        # You can only define settings here if using the home-manager module
        settings = {
          preferredSource = "spotify";
        };
      };
    };
  };
}
```

The plugin IDs can be found in the [plugin store](https://danklinux.com/plugins) - it's the last part of the install URL. For example, `dms://plugin/install/dankBatteryAlerts` has the ID `dankBatteryAlerts`.

#### Method 2: Manual Installation from Source

If you don't want to use the registry flake, you can install plugins manually by providing the source:

```nix
programs.dank-material-shell = {
  enable = true;

  plugins = {
    DockerManager = {
      src = pkgs.fetchFromGitHub {
        owner = "LuckShiba";
        repo = "DmsDockerManager";
        rev = "v1.2.0";
        sha256 = "sha256-VoJCaygWnKpv0s0pqTOmzZnPM922qPDMHk4EPcgVnaU=";
      };
      settings = {
        someOption = "value";
      };
    };
    AnotherPlugin = {
      enable = true;
      src = pkgs.another-plugin;
    };
  };
};
```

#### Plugin Settings Management (home-manager only)

You can choose whether or not to manage plugin settings with home-manager through the `managePluginSettings` option. 

```nix
programs.dank-material-shell = {
  enable = true;
  
  # Auto-enabled when plugins have settings configured
  managePluginSettings = true;
  
  plugins = {
    somePlugin = {
      enable = true;
      settings = {
        # Your plugin settings here
      };
    };
  };
};
```

- If there are no plugins with settings defined but `managePluginSettings = true`, a minimal `plugin_settings.json` is created that enables the plugins.
- If there are plugin settings defined, `managePluginSettings` defaults to `true` and those settings are placed in `plugin_settings.json`.
- If there are plugin settings defined and `managePluginSettings` is set to `false`, there will be a warning, but `plugin_settings.json` won't be created.



## Advanced Configuration

For a complete list of available options, check the module files in the DankMaterialShell repository:
- **NixOS module**: `distro/nix/nixos.nix`
- **Home-manager module**: `distro/nix/home.nix`
- **niri module**: `distro/nix/niri.nix`
- **Common options**: `distro/nix/options.nix`

## Rebuilding

After making configuration changes, rebuild your system:

```bash
# For home-manager standalone
home-manager switch

# For NixOS with home-manager as a module
sudo nixos-rebuild switch
```

## Troubleshooting

### DMS doesn't start automatically

Make sure you have either:
- `systemd.enable = true` for systemd-based startup, or
- `niri.enableSpawn = true` for niri-managed startup

### Missing dependencies

Each feature has its own dependency set. If a feature isn't working, ensure the corresponding `enable` option is set to `true`. For example, system monitoring requires `enableSystemMonitoring = true` which installs `dgop`.

### Custom keybindings conflict with niri defaults

If `niri.enableKeybinds = true` conflicts with your existing niri configuration, you can disable it and manually configure keybindings using the examples in the [Keybinds & IPC](keybinds-ipc) guide.

## Next Steps

- Configure your preferences via [Themes](application-themes)
- Set up compositor keybindings in [Keybinds & IPC](keybinds-ipc)
- Extend functionality with [Plugins](plugins-overview)



================================================
FILE: docs/dankmaterialshell/nixos.mdx
================================================
---
title: NixOS Installation
description: Install and configure DankMaterialShell on NixOS using native nixpkgs
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell can be installed on NixOS using the NixOS module. This guide covers the native nixpkgs installation method.

:::info NixOS Unstable Required
DankMaterialShell is currently only available in the **unstable** branch of nixpkgs. If you're on NixOS stable (currently 25.11), you'll need to use the [Flake Installation](nixos-flake) method instead.
:::

## Installation

### 1. Enable NixOS Unstable

Ensure you're using NixOS unstable by setting your channel or flake input:

**Using channels:**
```bash
sudo nix-channel --add https://nixos.org/channels/nixos-unstable nixos
sudo nix-channel --update
```

**Using flakes (in `flake.nix`):**
```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
  };
}
```

### 2. Enable DankMaterialShell

In your NixOS configuration, enable DankMaterialShell:

```nix
programs.dms-shell.enable = true;
```

That's it! Rebuild your system and DankMaterialShell will be installed with sensible defaults.

## Configuration Options

DankMaterialShell provides numerous configuration options to customize your installation. Here are the main options:

### Feature Toggles

```nix
programs.dms-shell = {
  enable = true;

  systemd = {
    enable = true;             # Systemd service for auto-start
    restartIfChanged = true;   # Auto-restart dms.service when dms-shell changes
  };
  
  # Core features
  enableSystemMonitoring = true;     # System monitoring widgets (dgop)
  enableVPN = true;                  # VPN management widget
  enableDynamicTheming = true;       # Wallpaper-based theming (matugen)
  enableAudioWavelength = true;      # Audio visualizer (cava)
  enableCalendarEvents = true;       # Calendar integration (khal)
  enableClipboardPaste = true;       # Pasting from the clipboard history (wtype)
};
```

### Custom Quickshell Package

If you need a specific version of Quickshell:

```nix
programs.dms-shell = {
  enable = true;
  quickshell.package = pkgs.quickshell; # or your custom package
};
```

#### Using Quickshell from Source

:::tip Recommended for Latest Features

Many features in DankMaterialShell rely on unreleased Quickshell features. For the best experience, you may want to use Quickshell built from source.

:::

To use Quickshell from source, add it as a flake input:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    quickshell = {
      url = "git+https://git.outfoxxed.me/quickshell/quickshell";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then use it in your configuration:

```nix
programs.dms-shell = {
  enable = true;
  quickshell.package = inputs.quickshell.packages.${pkgs.stdenv.hostPlatform.system}.quickshell;
};
```

### Using Flake Package with NixOS Module

You can use the package from the DankMaterialShell flake while still using the native NixOS module. This allows you to get quicker updates while keeping the module configuration:

First, add the flake input to your `flake.nix`:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

:::tip Using Unstable Version
If you want to use the unstable (-git) version from the master branch for quicker updates, remove `/stable` from the URL:
```nix
dms.url = "github:AvengeMedia/DankMaterialShell";
```
However, be aware that the unstable version may not work properly and could contain breaking changes. The documentation may not reflect the latest changes in the unstable version.
:::

Then use the flake package with the native module:

```nix
programs.dms-shell = {
  enable = true;
  package = inputs.dms.packages.${pkgs.stdenv.hostPlatform.system}.default;
};
```

:::warning

When using the flake package with the native nixpkgs module, some dependencies may not be automatically enabled by default, and certain configurations might be missing. You may need to manually install optional dependencies or adjust feature toggles to match your needs.

:::

### Plugins

Install DankMaterialShell plugins declaratively. There are two methods:

#### Method 1: Using the Plugin Registry (Recommended)

The [dms-plugin-registry](https://github.com/AvengeMedia/dms-plugin-registry) flake provides all community plugins as packages with daily updates. This is the simplest way to install plugins.

First, add the plugin registry as a flake input:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    dms-plugin-registry = {
      url = "github:AvengeMedia/dms-plugin-registry";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then import the module and enable plugins:

```nix
{
  imports = [ inputs.dms-plugin-registry.modules.default ];

  programs.dms-shell = {
    enable = true;

    plugins = {
      # Simply enable plugins by their ID (from the registry)
      dankBatteryAlerts.enable = true;
      dockerManager.enable = true;
    };
  };
}
```

The plugin IDs can be found in the [plugin store](https://danklinux.com/plugins) - it's the last part of the install URL. For example, `dms://plugin/install/dankBatteryAlerts` has the ID `dankBatteryAlerts`.

#### Method 2: Manual Installation from Source

If you don't want to use the registry flake, you can install plugins manually by providing the source:

```nix
programs.dms-shell = {
  enable = true;

  plugins = {
    dockerManager = {
      src = pkgs.fetchFromGitHub {
        owner = "LuckShiba";
        repo = "DmsDockerManager";
        rev = "v1.2.0";
        sha256 = "sha256-VoJCaygWnKpv0s0pqTOmzZnPM922qPDMHk4EPcgVnaU=";
      };
    };
    anotherPlugin = {
      enable = true;
      src = pkgs.another-plugin;
    };
  };
};
```

## Compositor Config Files

The NixOS module installs DMS but doesn't generate compositor-specific config files (keybinds, colors, layout, etc.). Use [`dms setup`](cli-setup) to deploy the defaults for your compositor, or generate individual configs:

```bash
# Deploy all defaults
dms setup

# Or pick and choose
dms setup binds
dms setup colors
dms setup layout
```

See the [Setup CLI reference](cli-setup) for the full list of subcommands.

## Advanced Configuration

For a complete list of available options, check [the module file](https://github.com/NixOS/nixpkgs/blob/nixos-unstable/nixos/modules/programs/wayland/dms-shell.nix) in nixpkgs.

## Rebuilding

After making configuration changes, rebuild your system:

```bash
sudo nixos-rebuild switch
```

## Troubleshooting

### DMS doesn't start automatically

Make sure you have `systemd.enable = true` set:

```nix
programs.dms-shell = {
  enable = true;
  systemd.enable = true;
};
```

### Missing dependencies

Each feature has its own dependency set. If a feature isn't working, ensure the corresponding `enable` option is set to `true`. For example, clipboard history pasting requires `enableClipboardPaste = true` which installs `wtype`.

## Next Steps

- Configure your preferences via [Themes](application-themes)
- Set up compositor keybindings in [Keybinds & IPC](keybinds-ipc)
- Extend functionality with [Plugins](plugins-overview)



================================================
FILE: docs/dankmaterialshell/overview.mdx
================================================
---
title: Overview & Architecture
description: Modern Wayland desktop shell
sidebar_position: 1
image: img/dankdash.png
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell (dms) is a Wayland desktop shell built with [Quickshell](https://quickshell.org/) and [Go](https://go.dev/). It serves a purpose similar to GNOME Shell or KDE Plasma, providing a unified interface for launching applications, managing windows, managing hardware interfaces, notifications, and much more.

## General Features

- Launcher (Apps, file search, web search, emoji search, calculations, and extendable with plugins)
- System Tray
- Notifications with grouping support
- Network Management (via NetworkManager, iwd, systemd-networkd, or some hybrid setups)
- VPN Management (via NetworkManager)
- Bluetooth Management (via BlueZ)
- Audio Management (via PipeWire)
- Idle & Power Management
- Brightness controls (Backlight, LEDs, and i2c/ddc)
- Lock Screen
- Process & System Monitoring
- Theming (Light, Dark, Automatic Colors, Premade themes, and Custom Accent Colors)
- Multi-monitor support
- Gamma control (night mode)
- Wallpaper management with transitions, multi-monitor support, and automatic transitioning.
- Clipboard history manager
- System sounds (such as notifications, volume changes, etc.)
- Mpris media controls with audio visualization
- Browser picker modal for URL handling with default browser selection
- Dozens of widgets and plugins available to allow virtually any feature you can imagine.

*There's really too much to list, but those are some of the highlights!*

## Architecture

DankMaterialShell uses a client-server architecture where a Go backend (`dms`) manages system integrations and spawns the Quickshell-based UI as a child process. Communication happens over Unix socket using REQ/REP and PUB/SUB patterns.

<div style={{overflowX: 'auto', maxWidth: '100%'}}>

```mermaid
flowchart TB
    DMS[dms]

    subgraph UI[" "]
        QS[Quickshell Qt6]
        QML[QML App]
        SOCK[Unix Socket<br/>REQ/REP & PUB/SUB]
    end

    subgraph SystemInterfaces["System Interfaces"]
        WL[Wayland]
        DBUS_DMS[D-Bus]
        I2C[i2c/DDC]
        SYSFS[sysfs]
        IPP[IPP]
        EVDEV[evdev]
    end

    subgraph QuickshellInterfaces[" "]
        DBUS_QS[D-Bus]
        WL_QS[Wayland]
    end

    subgraph DBusServices["D-Bus Services"]
        NM[NetworkManager]
        IWD[iwd]
        NETD[systemd-networkd]
        BLZ[BlueZ]
        ACC[accountsservice]
        LOGIN[login1]
    end

    CUPS[CUPS]

    DMS -->|spawns| QS
    QS --> QML
    QML <--> SOCK
    SOCK <--> DMS

    DMS --> WL
    DMS --> DBUS_DMS
    DMS --> I2C
    DMS --> SYSFS
    DMS --> IPP
    DMS --> EVDEV

    QS --> DBUS_QS
    QS --> WL_QS

    DBUS_DMS --> NM
    DBUS_DMS --> IWD
    DBUS_DMS --> NETD
    DBUS_DMS --> BLZ
    DBUS_DMS --> ACC
    DBUS_DMS --> LOGIN

    IPP --> CUPS
```

</div>

**Key Points:**

- **dms** spawns **Quickshell** as a child process
- **dms** and **Quickshell** both integrate with Wayland and D-Bus APIs independently
- **dms** fills gaps that Quickshell doesn't handle natively
- Communication between QML app and dms backend happens via Unix socket

### Component Overview

| Component | Role |
| --- | --- |
| **DankMaterialShell - Quickshell** | Frontend powering widgets, modals, and user experience. |
| **DankMaterialShell - Backend (cli)** | Bridges DBus, Wayland, and plugin APIs - also a management CLI |
| **dgop** | Optional system telemetry service used by resource widgets. |
| **dsearch** | Optional filesystem search engine used by the Spotlight launcher. |

## Desktop Integration

DankMaterialShell includes a browser picker modal that appears when URLs are activated within the shell.

### Opening URLs

You can open URLs directly from the terminal using the `dms open` command:

```bash
dms open https://danklinux.com
```

When a URL is opened, DankMaterialShell displays a modal dialog with a list of installed web browsers, allowing you to select your preferred browser or set a default for future URL openings.

### Setting Default Web Browser

To set DankMaterialShell as your default web browser handler:

```bash
xdg-settings set default-web-browser dms-open.desktop
```

### File Associations

You can configure file type associations using `xdg-mime` commands. For example, to set DankMaterialShell as the default handler for specific MIME types:

```bash
# Set as default for HTTP/HTTPS URLs
xdg-mime default dms-open.desktop x-scheme-handler/http
xdg-mime default dms-open.desktop x-scheme-handler/https
```

### Desktop Entry

The desktop entry file (`dms-open.desktop`) follows the [freedesktop.org Desktop Entry Specification](https://specifications.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html) and allows DankMaterialShell to be launched from application menus and integrated with desktop environments.

## Next Steps

Continue with [Installation](installation) to get DankMaterialShell running on your system.

DankMaterialShell is open source and welcomes contributions ranging from core code changes to new widgets and plugins to documentation improvements.



================================================
FILE: docs/dankmaterialshell/plugin-development.mdx
================================================
---
title: Development
description: Build plugins for DankMaterialShell
sidebar_position: 7
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███████╗██╗   ██╗
██╔══██╗██╔════╝██║   ██║
██║  ██║█████╗  ██║   ██║
██║  ██║██╔══╝  ╚██╗ ██╔╝
██████╔╝███████╗ ╚████╔╝
╚═════╝ ╚══════╝  ╚═══╝  `}
  hideTitle={true}
/>

Build and ship plugins for DankMaterialShell. This guide covers the actual patterns and components you'll use, with real working examples from the plugin library.

## Development Environment

For IDE support (autocomplete, type checking, etc.), clone the DMS repo and develop plugins there:

```bash
mkdir -p ~/repos && cd ~/repos
git clone https://github.com/AvengeMedia/DankMaterialShell.git
cd DankMaterialShell/quickshell

# Generate QML language server config
touch .qmlls.ini
qs -p .  # Press Ctrl+C after it starts

# Create your plugins here
mkdir -p dms-plugins/MyPlugin
```

### VSCode Setup

1. Install the [QML Extension](https://marketplace.visualstudio.com/items?itemName=TheQtCompany.qt-qml)
2. Configure qmlls path via `Ctrl+Shift+P` → "Preferences: Open User Settings (JSON)":

```json
{
  "qt-qml.doNotAskForQmllsDownload": true,
  "qt-qml.qmlls.customExePath": "/usr/lib/qt6/bin/qmlls"
}
```

3. Open VSCode in the `~/repos/DankMaterialShell/quickshell` directory

### Live Development

Symlink your plugin to the DMS plugins directory for live testing:

```bash
ln -sf ~/repos/DankMaterialShell/quickshell/dms-plugins/MyPlugin \
       ~/.config/DankMaterialShell/plugins/MyPlugin
```

Reload your plugin at runtime without restarting DMS:

```bash
dms ipc call plugins reload myPlugin
```

List all plugins and their status:

```bash
dms ipc call plugins list
```

:::tip
Use [Run on Save](https://marketplace.visualstudio.com/items?itemName=emeraldwalk.RunOnSave) to auto-reload your plugin during development. The reload command uses the plugin `id` from your `plugin.json`.
:::

## Quick Start

### 1. Create Plugin Directory

```bash
mkdir -p ~/.config/DankMaterialShell/plugins/MyPlugin
cd ~/.config/DankMaterialShell/plugins/MyPlugin
```

### 2. Create Manifest

Save this as `plugin.json`:

```json
{
  "id": "myPlugin",
  "name": "My Plugin",
  "description": "What this plugin does",
  "version": "1.0.0",
  "author": "Your Name",
  "icon": "widgets",
  "type": "widget",
  "component": "./MyWidget.qml",
  "settings": "./MySettings.qml",
  "permissions": ["settings_read", "settings_write"]
}
```

### 3. Create Widget Component

Save this as `MyWidget.qml`:

```qml
import QtQuick
import qs.Common
import qs.Services
import qs.Widgets
import qs.Modules.Plugins

PluginComponent {
    id: root

    property string displayText: pluginData.displayText || "Hello"

    horizontalBarPill: Component {
        Row {
            spacing: Theme.spacingS

            DankIcon {
                name: "widgets"
                size: Theme.iconSize
                color: Theme.primary
                anchors.verticalCenter: parent.verticalCenter
            }

            StyledText {
                text: root.displayText
                font.pixelSize: Theme.fontSizeMedium
                color: Theme.surfaceText
                anchors.verticalCenter: parent.verticalCenter
            }
        }
    }

    verticalBarPill: Component {
        Column {
            spacing: Theme.spacingXS

            DankIcon {
                name: "widgets"
                size: Theme.iconSize
                color: Theme.primary
                anchors.horizontalCenter: parent.horizontalCenter
            }

            StyledText {
                text: root.displayText
                font.pixelSize: Theme.fontSizeSmall
                color: Theme.surfaceText
                anchors.horizontalCenter: parent.horizontalCenter
            }
        }
    }
}
```

### 4. Create Settings Component

Save this as `MySettings.qml`:

```qml
import QtQuick
import qs.Common
import qs.Modules.Plugins
import qs.Widgets

PluginSettings {
    id: root
    pluginId: "myPlugin"

    StyledText {
        width: parent.width
        text: "My Plugin Settings"
        font.pixelSize: Theme.fontSizeLarge
        font.weight: Font.Bold
        color: Theme.surfaceText
    }

    StyledText {
        width: parent.width
        text: "Configure your plugin here"
        font.pixelSize: Theme.fontSizeSmall
        color: Theme.surfaceVariantText
        wrapMode: Text.WordWrap
    }

    StringSetting {
        settingKey: "displayText"
        label: "Display Text"
        description: "Text shown in the bar"
        placeholder: "Enter text"
        defaultValue: "Hello"
    }
}
```

### 5. Load It

1. Open DMS Settings → Plugins
2. Click "Scan for Plugins"
3. Toggle your plugin on
4. Add to DankBar widget list
5. Restart shell: `dms restart`

You now have a working plugin.

## Widget Plugins

Widget plugins show up in DankBar or the Control Center. They use `PluginComponent` as the base.

### DankBar Widget

Here's a real color display widget:

```qml
import QtQuick
import qs.Common
import qs.Services
import qs.Widgets
import qs.Modules.Plugins

PluginComponent {
    id: root

    property color customColor: pluginData.customColor || Theme.primary

    horizontalBarPill: Component {
        Row {
            spacing: Theme.spacingS

            Rectangle {
                width: 20
                height: 20
                radius: 4
                color: root.customColor
                border.color: Theme.outlineStrong
                border.width: 1
                anchors.verticalCenter: parent.verticalCenter
            }

            StyledText {
                text: root.customColor.toString()
                font.pixelSize: Theme.fontSizeSmall
                color: Theme.surfaceText
                anchors.verticalCenter: parent.verticalCenter
            }
        }
    }

    verticalBarPill: Component {
        Column {
            spacing: Theme.spacingXS

            Rectangle {
                width: 20
                height: 20
                radius: 4
                color: root.customColor
                border.color: Theme.outlineStrong
                border.width: 1
                anchors.horizontalCenter: parent.horizontalCenter
            }

            StyledText {
                text: root.customColor.toString()
                font.pixelSize: Theme.fontSizeSmall
                color: Theme.surfaceText
                anchors.horizontalCenter: parent.horizontalCenter
            }
        }
    }
}
```

The widget pulls `customColor` from `pluginData`, which automatically syncs with your settings. No manual loading needed.

### Widget with Popout

Add a popout menu that opens when you click the widget.

To add a layer namespace to your plugin, just add `layerNamespacePlugin: "<namespace for your plugin>"` like below.
Make sure to only type what you want the namespace to be and to not add a prefix (like `dms:` or `dms:plugins:` for example) since the shell will add `dms:plugins:` as a prefix automatically.
For example, the namespace of the plugin below will be `dms:plugins:emoji-launcher`.

While you don't have to add a layer namespace to you widget (it will fallback to `dms:plugins:plugin`), it's prefered to do so.
:::warning

As of right now, layer namespace only work with popout widget plugins.

:::
```qml
PluginComponent {
    id: root

    layerNamespacePlugin: "emoji-launcher"

    property var displayedEmojis: ["😊", "😢", "❤️"]

    horizontalBarPill: Component {
        Row {
            spacing: Theme.spacingXS
            Repeater {
                model: root.displayedEmojis
                StyledText {
                    text: modelData
                    font.pixelSize: Theme.fontSizeLarge
                }
            }
        }
    }

    verticalBarPill: Component {
        Column {
            spacing: Theme.spacingXS
            Repeater {
                model: root.displayedEmojis
                StyledText {
                    text: modelData
                    font.pixelSize: Theme.fontSizeMedium
                    anchors.horizontalCenter: parent.horizontalCenter
                }
            }
        }
    }

    popoutContent: Component {
        PopoutComponent {
            id: popoutColumn

            headerText: "Emoji Picker"
            detailsText: "Click an emoji to copy it"
            showCloseButton: true

            property var allEmojis: [
                "😀", "😃", "😄", "😁", "😆", "🤣",
                "❤️", "🧡", "💛", "💚", "💙", "💜"
            ]

            Item {
                width: parent.width
                implicitHeight: root.popoutHeight - popoutColumn.headerHeight -
                               popoutColumn.detailsHeight - Theme.spacingXL

                DankGridView {
                    anchors.fill: parent
                    cellWidth: 50
                    cellHeight: 50
                    model: popoutColumn.allEmojis

                    delegate: StyledRect {
                        width: 45
                        height: 45
                        radius: Theme.cornerRadius
                        color: emojiMouse.containsMouse ?
                               Theme.surfaceContainerHighest :
                               Theme.surfaceContainerHigh

                        StyledText {
                            anchors.centerIn: parent
                            text: modelData
                            font.pixelSize: Theme.fontSizeXLarge
                        }

                        MouseArea {
                            id: emojiMouse
                            anchors.fill: parent
                            hoverEnabled: true
                            cursorShape: Qt.PointingHandCursor

                            onClicked: {
                                Quickshell.execDetached(["sh", "-c",
                                    "echo -n '" + modelData + "' | wl-copy"])
                                ToastService.showInfo("Copied " + modelData)
                                popoutColumn.closePopout()
                            }
                        }
                    }
                }
            }
        }
    }

    popoutWidth: 400
    popoutHeight: 500
}
```

The `PopoutComponent` helper gives you consistent header/footer and a `closePopout()` function.

### Control Center Widget

Add a toggle to the Control Center:

```qml
PluginComponent {
    id: root

    property bool isEnabled: pluginData.isEnabled || false
    property int clickCount: pluginData.clickCount || 0

    ccWidgetIcon: isEnabled ? "toggle_on" : "toggle_off"
    ccWidgetPrimaryText: "Example Toggle"
    ccWidgetSecondaryText: isEnabled ? `Active • ${clickCount} clicks` : "Inactive"
    ccWidgetIsActive: isEnabled

    onCcWidgetToggled: {
        isEnabled = !isEnabled
        clickCount += 1
        if (pluginService) {
            pluginService.savePluginData(pluginId, "isEnabled", isEnabled)
            pluginService.savePluginData(pluginId, "clickCount", clickCount)
        }
        ToastService.showInfo(isEnabled ? "Enabled" : "Disabled")
    }

    horizontalBarPill: Component {
        Row {
            DankIcon {
                name: root.isEnabled ? "toggle_on" : "toggle_off"
                color: root.isEnabled ? Theme.primary : Theme.surfaceVariantText
            }
            StyledText {
                text: `${root.clickCount} clicks`
                color: Theme.surfaceText
            }
        }
    }

    verticalBarPill: Component {
        Column {
            DankIcon {
                name: root.isEnabled ? "toggle_on" : "toggle_off"
                color: root.isEnabled ? Theme.primary : Theme.surfaceVariantText
                anchors.horizontalCenter: parent.horizontalCenter
            }
            StyledText {
                text: `${root.clickCount}`
                color: Theme.surfaceText
                anchors.horizontalCenter: parent.horizontalCenter
            }
        }
    }
}
```

Set `ccWidgetIcon`, `ccWidgetPrimaryText`, `ccWidgetSecondaryText`, and `ccWidgetIsActive`. Handle `onCcWidgetToggled` for toggle clicks.

## Daemon Plugins

Daemon plugins run in the background without UI. They monitor events, automate tasks, or provide services.

Here's a daemon that runs a script whenever the wallpaper changes:

```qml
import QtQuick
import Quickshell
import Quickshell.Io
import qs.Common
import qs.Services
import qs.Modules.Plugins

PluginComponent {
    id: root

    property string scriptPath: pluginData.scriptPath || ""

    Connections {
        target: SessionData
        function onWallpaperPathChanged() {
            if (scriptPath && scriptPath !== "") {
                var process = scriptProcessComponent.createObject(root, {
                    wallpaperPath: SessionData.wallpaperPath
                })
                process.running = true
            }
        }
    }

    Component {
        id: scriptProcessComponent

        Process {
            property string wallpaperPath: ""
            command: [scriptPath, wallpaperPath]

            stdout: SplitParser {
                onRead: line => console.log("Script:", line)
            }

            stderr: SplitParser {
                onRead: line => {
                    if (line.trim()) {
                        ToastService.showError("Script error", line)
                    }
                }
            }

            onExited: (exitCode) => {
                if (exitCode !== 0) {
                    ToastService.showError("Script failed", "Exit code: " + exitCode)
                }
                destroy()
            }
        }
    }

    Component.onCompleted: {
        console.info("Wallpaper watcher daemon started")
    }
}
```

Daemon manifest uses `"type": "daemon"`:

```json
{
  "id": "wallpaperWatcher",
  "type": "daemon",
  "component": "./WallpaperWatcher.qml"
}
```

## Desktop Plugins {#desktop-plugins}

Desktop plugins render directly on the desktop background layer using Wayland's wlr-layer-shell protocol. Users can freely position and resize them.

### Basic Desktop Widget

```qml
import QtQuick
import Quickshell
import qs.Common
import qs.Modules.Plugins

DesktopPluginComponent {
    id: root

    // Size constraints
    minWidth: 150
    minHeight: 100

    // Access saved settings via pluginData
    property string displayText: pluginData.displayText ?? "Hello"
    property real bgOpacity: (pluginData.backgroundOpacity ?? 80) / 100

    Rectangle {
        anchors.fill: parent
        radius: Theme.cornerRadius
        color: Theme.withAlpha(Theme.surfaceContainer, root.bgOpacity)

        Text {
            anchors.centerIn: parent
            text: root.displayText
            color: Theme.surfaceText
            font.pixelSize: Theme.fontSizeLarge
        }
    }
}
```

Desktop manifest uses `"type": "desktop"`:

```json
{
  "id": "myDesktopWidget",
  "name": "My Desktop Widget",
  "description": "A custom desktop widget",
  "version": "1.0.0",
  "author": "Your Name",
  "type": "desktop",
  "capabilities": ["desktop-widget"],
  "component": "./MyWidget.qml",
  "icon": "widgets",
  "settings": "./MySettings.qml",
  "requires_dms": ">=1.2.0",
  "permissions": ["settings_read", "settings_write"]
}
```

### DesktopPluginComponent Properties

**Auto-injected** (don't declare these):

| Property | Type | Description |
|----------|------|-------------|
| `pluginService` | var | Reference to PluginService for data persistence |
| `pluginId` | string | Your plugin's unique identifier |
| `widgetWidth` | real | Current widget width |
| `widgetHeight` | real | Current widget height |
| `pluginData` | var | Object containing all saved plugin settings |

**Optional** (define on your component):

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `minWidth` | real | 100 | Minimum allowed width |
| `minHeight` | real | 100 | Minimum allowed height |
| `defaultWidth` | real | 200 | Initial width for new widgets |
| `defaultHeight` | real | 200 | Initial height for new widgets |
| `forceSquare` | bool | false | Constrain to square aspect ratio |

**Helper functions:**

```qml
// Read a specific setting with default value
function getData(key, defaultValue)

// Write a setting (triggers pluginDataChanged signal)
function setData(key, value)
```

### User Interaction

Desktop widgets support:

| Action | Trigger | Description |
|--------|---------|-------------|
| Move | Right-click + drag anywhere | Repositions the widget |
| Resize | Right-click + drag bottom-right corner | Resizes within min/max bounds |

### Responsive Layout

Adapt to widget dimensions:

```qml
GridLayout {
    columns: {
        if (root.widgetWidth < 200) return 1
        if (root.widgetWidth < 400) return 2
        return 3
    }
}
```

### Dynamic Size Constraints

```qml
DesktopPluginComponent {
    id: root

    property bool showAllTiles: pluginData.showAllTiles ?? true

    minWidth: showAllTiles ? 200 : 100
    minHeight: {
        if (tileCount === 0) return 60
        if (tileCount === 1) return 80
        return 120 + (tileCount - 2) * 40
    }
}
```

### Time-Based Updates

Use `SystemClock` for efficient time updates:

```qml
import Quickshell

DesktopPluginComponent {
    id: root

    SystemClock {
        id: clock
        precision: SystemClock.Seconds  // or Minutes

        onDateChanged: updateDisplay()
    }

    function updateDisplay() {
        // Update widget content
    }
}
```

### Canvas/Graph Performance

For graphing widgets:

```qml
Canvas {
    id: graph
    renderStrategy: Canvas.Cooperative

    property var history: []

    onHistoryChanged: requestPaint()

    onPaint: {
        var ctx = getContext("2d")
        ctx.reset()
        // Draw graph...
    }
}
```

### Complete Example: Desktop Clock

A clock widget with analog and digital modes, demonstrating dynamic component loading and responsive sizing.

```qml
// DesktopClock.qml
import QtQuick
import Quickshell
import qs.Common
import qs.Modules.Plugins

DesktopPluginComponent {
    id: root

    minWidth: 120
    minHeight: 120

    property bool showSeconds: pluginData.showSeconds ?? true
    property bool showDate: pluginData.showDate ?? true
    property string clockStyle: pluginData.clockStyle ?? "analog"
    property real backgroundOpacity: (pluginData.backgroundOpacity ?? 50) / 100

    SystemClock {
        id: systemClock
        precision: root.showSeconds ? SystemClock.Seconds : SystemClock.Minutes
    }

    Rectangle {
        id: background
        anchors.fill: parent
        radius: Theme.cornerRadius
        color: Theme.surfaceContainer
        opacity: root.backgroundOpacity
    }

    Loader {
        anchors.fill: parent
        anchors.margins: Theme.spacingM
        sourceComponent: root.clockStyle === "digital" ? digitalClock : analogClock
    }

    Component {
        id: analogClock

        Item {
            id: analogClockRoot

            property real clockSize: Math.min(width, height) - (root.showDate ? 30 : 0)

            Item {
                id: clockFace
                width: analogClockRoot.clockSize
                height: analogClockRoot.clockSize
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.top: parent.top
                anchors.topMargin: Theme.spacingS

                // Hour markers
                Repeater {
                    model: 12

                    Rectangle {
                        required property int index
                        property real markAngle: index * 30
                        property real markRadius: clockFace.width / 2 - 8

                        x: clockFace.width / 2 + markRadius * Math.sin(markAngle * Math.PI / 180) - width / 2
                        y: clockFace.height / 2 - markRadius * Math.cos(markAngle * Math.PI / 180) - height / 2
                        width: index % 3 === 0 ? 8 : 4
                        height: width
                        radius: width / 2
                        color: index % 3 === 0 ? Theme.primary : Theme.outlineVariant
                    }
                }

                // Hour hand
                Rectangle {
                    id: hourHand
                    property int hours: systemClock.date?.getHours() % 12 ?? 0
                    property int minutes: systemClock.date?.getMinutes() ?? 0

                    x: clockFace.width / 2 - width / 2
                    y: clockFace.height / 2 - height + 4
                    width: 6
                    height: clockFace.height * 0.25
                    radius: 3
                    color: Theme.primary
                    antialiasing: true
                    transformOrigin: Item.Bottom
                    rotation: (hours + minutes / 60) * 30
                }

                // Minute hand
                Rectangle {
                    id: minuteHand
                    property int minutes: systemClock.date?.getMinutes() ?? 0
                    property int seconds: systemClock.date?.getSeconds() ?? 0

                    x: clockFace.width / 2 - width / 2
                    y: clockFace.height / 2 - height + 4
                    width: 4
                    height: clockFace.height * 0.35
                    radius: 2
                    color: Theme.onSurface
                    antialiasing: true
                    transformOrigin: Item.Bottom
                    rotation: (minutes + seconds / 60) * 6
                }

                // Second hand
                Rectangle {
                    id: secondHand
                    visible: root.showSeconds
                    property int seconds: systemClock.date?.getSeconds() ?? 0

                    x: clockFace.width / 2 - width / 2
                    y: clockFace.height / 2 - height + 4
                    width: 2
                    height: clockFace.height * 0.4
                    radius: 1
                    color: Theme.error
                    antialiasing: true
                    transformOrigin: Item.Bottom
                    rotation: seconds * 6
                }

                // Center dot
                Rectangle {
                    anchors.centerIn: parent
                    width: 10
                    height: 10
                    radius: 5
                    color: Theme.primary
                }
            }

            Text {
                visible: root.showDate
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.bottom: parent.bottom
                anchors.bottomMargin: Theme.spacingXS
                text: systemClock.date?.toLocaleDateString(Qt.locale(), "ddd, MMM d") ?? ""
                font.pixelSize: Theme.fontSizeSmall
                font.weight: Font.Medium
                color: Theme.surfaceText
            }
        }
    }

    Component {
        id: digitalClock

        Item {
            id: digitalRoot

            property real timeFontSize: Math.min(width * 0.16, height * (root.showDate ? 0.4 : 0.5))
            property real dateFontSize: Math.max(Theme.fontSizeSmall, timeFontSize * 0.35)

            Text {
                id: timeText
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.verticalCenter: parent.verticalCenter
                anchors.verticalCenterOffset: root.showDate ? -digitalRoot.dateFontSize * 0.8 : 0
                text: systemClock.date?.toLocaleTimeString(Qt.locale(), root.showSeconds ? "hh:mm:ss" : "hh:mm") ?? ""
                font.pixelSize: digitalRoot.timeFontSize
                font.weight: Font.Bold
                font.family: "monospace"
                color: Theme.primary
            }

            Text {
                id: dateText
                visible: root.showDate
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.top: timeText.bottom
                anchors.topMargin: Theme.spacingXS
                text: systemClock.date?.toLocaleDateString(Qt.locale(), "ddd, MMM d") ?? ""
                font.pixelSize: digitalRoot.dateFontSize
                color: Theme.surfaceText
            }
        }
    }
}
```

```qml
// DesktopClockSettings.qml
import QtQuick
import qs.Common
import qs.Modules.Plugins

PluginSettings {
    id: root
    pluginId: "exampleDesktopClock"

    SelectionSetting {
        settingKey: "clockStyle"
        label: I18n.tr("Clock Style")
        options: [
            { label: I18n.tr("Analog"), value: "analog" },
            { label: I18n.tr("Digital"), value: "digital" }
        ]
        defaultValue: "analog"
    }

    ToggleSetting {
        settingKey: "showSeconds"
        label: I18n.tr("Show Seconds")
        defaultValue: true
    }

    ToggleSetting {
        settingKey: "showDate"
        label: I18n.tr("Show Date")
        defaultValue: true
    }

    SliderSetting {
        settingKey: "backgroundOpacity"
        label: I18n.tr("Background Opacity")
        defaultValue: 50
        minimum: 0
        maximum: 100
        unit: "%"
    }
}
```

### Desktop Plugin Best Practices

1. **Use Theme singleton** - Never hardcode colors, spacing, or font sizes
2. **Set appropriate minWidth/minHeight** - Prevent unusable widget sizes
3. **Handle null data** - Use `??` operator for all `pluginData` access
4. **Optimize Canvas redraws** - Use `renderStrategy: Canvas.Cooperative`
5. **Responsive layouts** - Adapt to widget dimensions dynamically
6. **Transparency** - Provide opacity controls so wallpaper shows through

## Launcher Plugins

Launcher plugins integrate with DankLauncher to provide searchable results. They use `QtObject` as their root (not `Item` or `PluginComponent`) since they don't render any UI directly.

### Basic Structure

```qml
import QtQuick
import Quickshell
import qs.Common
import qs.Services

QtObject {
    id: root

    property var pluginService: null
    property string pluginId: "myPlugin"
    property string trigger: ""

    signal itemsChanged

    // Required: Return search results
    function getItems(query) {
        return [{
            name: "Item Name",
            icon: "material:icon_name",
            comment: "Description shown below name",
            action: "custom:data",
            categories: ["My Plugin"],
            imageUrl: "https://...",  // Optional: tile image
            animated: false,          // Optional: for GIFs
            attribution: "/path/to/attribution.svg"  // Optional
        }];
    }

    // Required: Handle item selection
    function executeItem(item) {
        if (!item?.action) return;
        const data = item.action.substring(7); // Remove "custom:" prefix
        // Do something with data
    }
}
```

### Plugin Manifest

```json
{
  "id": "myPlugin",
  "name": "My Plugin",
  "description": "Plugin description",
  "version": "1.0.0",
  "author": "Your Name",
  "icon": "extension",
  "type": "launcher",
  "trigger": "!mp",
  "viewMode": "list",
  "viewModeEnforced": false,
  "component": "./MyPlugin.qml",
  "settings": "./MyPluginSettings.qml",
  "permissions": ["settings_read", "settings_write"]
}
```

| Field | Description |
|-------|-------------|
| `trigger` | Prefix that activates the plugin (e.g., `gif`, `:s`, `!calc`) |
| `viewMode` | Default view: `"list"`, `"grid"`, or `"tile"` |
| `viewModeEnforced` | If `true`, user cannot change the view mode |

### Item Properties

| Property | Type | Description |
|----------|------|-------------|
| `name` | string | Display name (required) |
| `icon` | string | `"material:icon_name"` or `"unicode:🚀"` |
| `comment` | string | Secondary text/description |
| `action` | string | Action identifier (e.g., `"copy:text"`, `"custom:data"`) |
| `categories` | array | Category strings for filtering |
| `keywords` | array | Additional search terms |
| `imageUrl` | string | URL for tile/grid image |
| `animated` | bool | Set `true` for GIFs to enable animation |
| `attribution` | string | Path to attribution image (e.g., for API branding) |

### Context Menus

Add right-click/Tab actions by implementing `getContextMenuActions(item)`:

```qml
function getContextMenuActions(item) {
    if (!item) return [];

    return [
        {
            icon: "content_copy",
            text: I18n.tr("Copy URL"),
            action: () => {
                Quickshell.execDetached(["dms", "cl", "copy", item.url]);
                ToastService.showInfo(I18n.tr("Copied to clipboard"));
            }
        },
        {
            icon: "open_in_new",
            text: I18n.tr("Open in Browser"),
            action: () => Qt.openUrlExternally(item.url)
        }
    ];
}
```

Each action object:

| Field | Type | Description |
|-------|------|-------------|
| `icon` | string | Material icon name |
| `text` | string | Display label |
| `action` | function | Callback executed when selected |
| `closeLauncher` | bool | If `true`, closes the launcher after action executes (default: `false`) |

Use `closeLauncher: true` for actions that need focus to return to the previous application, such as paste operations:

```qml
{
    icon: "content_paste",
    text: I18n.tr("Paste"),
    closeLauncher: true,
    action: () => {
        Quickshell.execDetached(["dms", "cl", "paste"]);
    }
}
```

### Categories

Allow users to filter results by category. Categories appear as a dropdown when the plugin is active.

```qml
property string currentCategory: ""

function getCategories() {
    return [
        { id: "", name: I18n.tr("All"), searchTerm: "" },
        { id: "happy", name: "Happy", searchTerm: "happy" },
        { id: "sad", name: "Sad", searchTerm: "sad" }
    ];
}

function setCategory(categoryId) {
    if (currentCategory === categoryId) return;
    currentCategory = categoryId;
    searchDebounce.restart();
}
```

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Unique identifier (empty string for "All") |
| `name` | string | Display name in dropdown |
| `searchTerm` | string | Optional: search term to use for this category |

For dynamic categories fetched from an API, emit `itemsChanged` or call `pluginService.requestLauncherUpdate(pluginId)` when categories are ready.

### Paste Support (Shift+Enter)

Launcher plugins can support Shift+Enter to paste content directly. Two optional functions control this:

**`getPasteText(item)`** - Returns text to paste:
```qml
function getPasteText(item) {
    if (!item?.action?.startsWith("copy:")) return null;
    return item.action.substring(5);  // "copy:hello" -> "hello"
}
```

**`getPasteArgs(item)`** - Returns a command array for custom clipboard operations:
```qml
function getPasteArgs(item) {
    const text = getPasteText(item);
    if (!text) return null;
    // Download content to clipboard before pasting
    return ["dms", "cl", "copy", "--download", text];
}
```

**Resolution order:**
1. If `getPasteArgs` exists, use the returned command array
2. Else if `getPasteText` exists, use `["dms", "cl", "copy", text]`
3. Else paste is not supported for the item

**Example - Image paste with URL fallback:**
```qml
property bool pasteUrlOnly: pluginData.pasteUrlOnly ?? false

function getPasteText(item) {
    return item.imageUrl || null;
}

function getPasteArgs(item) {
    const url = getPasteText(item);
    if (!url) return null;
    if (pasteUrlOnly)
        return ["dms", "cl", "copy", url];
    return ["dms", "cl", "copy", "--download", url];
}
```

### Requesting Updates

Notify the launcher to refresh results after async data loads:

```qml
property Connections serviceConn: Connections {
    target: MyService

    function onResultsReady() {
        if (pluginService)
            pluginService.requestLauncherUpdate(pluginId);
    }
}
```

### Persisting Settings

```qml
Component.onCompleted: {
    if (!pluginService) return;
    trigger = pluginService.loadPluginData(pluginId, "trigger", "!default");
}

function saveSetting(key, value) {
    if (pluginService)
        pluginService.savePluginData(pluginId, key, value);
}
```

### Example: Calculator Plugin

```qml
import QtQuick
import Quickshell
import qs.Services
import "calculator.js" as Calculator

QtObject {
    id: root

    property var pluginService: null
    property string trigger: ""

    signal itemsChanged

    Component.onCompleted: {
        if (pluginService)
            trigger = pluginService.loadPluginData("calculator", "trigger", "=");
    }

    function getItems(query) {
        if (!query || query.trim().length === 0)
            return [];

        const trimmedQuery = query.trim();
        if (!Calculator.isMathExpression(trimmedQuery))
            return [];

        const result = Calculator.evaluate(trimmedQuery);
        if (!result.success)
            return [];

        return [{
            name: result.result.toString(),
            icon: "material:equal",
            comment: trimmedQuery + " = " + result.result,
            action: "copy:" + result.result,
            categories: ["Calculator"]
        }];
    }

    function executeItem(item) {
        if (!item?.action) return;

        const actionParts = item.action.split(":");
        const actionType = actionParts[0];
        const actionData = actionParts.slice(1).join(":");

        if (actionType === "copy") {
            Quickshell.execDetached(["sh", "-c", "echo -n '" + actionData + "' | wl-copy"]);
            ToastService.showInfo("Calculator", "Copied to clipboard: " + actionData);
        }
    }
}
```

### Launcher Settings

Launcher plugins use `PluginSettings` just like widget plugins:

```qml
import QtQuick
import qs.Common
import qs.Widgets
import qs.Modules.Plugins

PluginSettings {
    id: root
    pluginId: "calculator"

    StyledText {
        width: parent.width
        text: "Calculator Plugin"
        font.pixelSize: Theme.fontSizeLarge
        font.weight: Font.Bold
        color: Theme.surfaceText
    }

    ToggleSetting {
        id: noTriggerToggle
        settingKey: "noTrigger"
        label: "Always Active"
        description: value ? "Type expressions directly" : "Use trigger prefix"
        defaultValue: false
        onValueChanged: {
            if (value)
                root.saveValue("trigger", "");
            else
                root.saveValue("trigger", triggerSetting.value || "=");
        }
    }

    StringSetting {
        id: triggerSetting
        visible: !noTriggerToggle.value
        settingKey: "trigger"
        label: "Trigger"
        description: "Prefix to activate calculator (e.g., =, calc)"
        placeholder: "="
        defaultValue: "="
    }
}
```

## Plugin Settings

Use `PluginSettings` as the base and drop in setting components. They handle all the loading and saving automatically.

```qml
import QtQuick
import qs.Common
import qs.Modules.Plugins
import qs.Widgets

PluginSettings {
    id: root
    pluginId: "colorDemo"

    StyledText {
        width: parent.width
        text: "Color Demo Settings"
        font.pixelSize: Theme.fontSizeLarge
        font.weight: Font.Bold
        color: Theme.surfaceText
    }

    StyledText {
        width: parent.width
        text: "Pick colors for your widget"
        font.pixelSize: Theme.fontSizeSmall
        color: Theme.surfaceVariantText
        wrapMode: Text.WordWrap
    }

    ColorSetting {
        settingKey: "customColor"
        label: "Widget Color"
        description: "Color shown in the bar"
        defaultValue: Theme.primary
    }

    SliderSetting {
        settingKey: "updateInterval"
        label: "Update Speed"
        description: "How often to refresh"
        defaultValue: 60
        minimum: 10
        maximum: 300
        unit: "sec"
    }

    ToggleSetting {
        settingKey: "showInBar"
        label: "Show in Bar"
        description: "Display widget in DankBar"
        defaultValue: true
    }

    StringSetting {
        settingKey: "apiKey"
        label: "API Key"
        description: "Your service API key"
        placeholder: "Enter key"
        defaultValue: ""
    }

    SelectionSetting {
        settingKey: "theme"
        label: "Theme"
        description: "Widget appearance"
        options: [
            {label: "Light", value: "light"},
            {label: "Dark", value: "dark"},
            {label: "Auto", value: "auto"}
        ]
        defaultValue: "dark"
    }
}
```

The setting components available:
- `ColorSetting` - Opens color picker modal
- `SliderSetting` - Numeric slider
- `ToggleSetting` - Boolean switch
- `StringSetting` - Text input
- `SelectionSetting` - Dropdown menu

Access settings in your widget via `pluginData`:

```qml
property color customColor: pluginData.customColor || Theme.primary
property int updateInterval: pluginData.updateInterval || 60
property bool showInBar: pluginData.showInBar !== undefined ? pluginData.showInBar : true
property string apiKey: pluginData.apiKey || ""
property string theme: pluginData.theme || "dark"
```

## Plugin State

Settings are great for user preferences, but sometimes you need to persist runtime data — command history, recent items, counters, cached results. That's what the state API is for.

State is stored per-plugin at `~/.local/state/DankMaterialShell/plugins/{pluginId}_state.json`, completely separate from the shared `plugin_settings.json`. No permissions required.

### State vs Settings

| Use Settings (`savePluginData`) | Use State (`savePluginState`) |
|---|---|
| User-configured preferences | Runtime/transient data |
| Trigger character, themes, toggles | Command history, recent items |
| Stored in shared `plugin_settings.json` | Stored in `{pluginId}_state.json` |
| Shown/edited in settings UI | Accumulated during usage |

### API

```qml
// Save a value
pluginService.savePluginState(pluginId, key, value)

// Load a value (synchronous, returns defaultValue if key doesn't exist)
pluginService.loadPluginState(pluginId, key, defaultValue)

// Remove a key
pluginService.removePluginStateKey(pluginId, key)

// Wipe all state for a plugin
pluginService.clearPluginState(pluginId)

// Get the filesystem path to the state file
pluginService.getPluginStatePath(pluginId)
```

A `pluginStateChanged(pluginId)` signal fires whenever any state key changes.

### Usage

Load state alongside settings on startup, then save as things change:

```qml
Component.onCompleted: {
    // Settings: user preferences (plugin_settings.json)
    trigger = pluginService.loadPluginData("myPlugin", "trigger", "!");

    // State: runtime data (myPlugin_state.json)
    history = pluginService.loadPluginState("myPlugin", "history", []);
}

function addToHistory(entry) {
    history.unshift(entry);
    if (history.length > 50)
        history = history.slice(0, 50);
    pluginService.savePluginState("myPlugin", "history", history);
}
```

### State in Settings Components

`PluginSettings` provides convenience wrappers so you don't have to touch `pluginService` directly:

```qml
PluginSettings {
    id: settings
    pluginId: "myPlugin"

    // Settings helpers (plugin_settings.json)
    // settings.saveValue(key, value)
    // settings.loadValue(key, defaultValue)

    // State helpers (myPlugin_state.json)
    // settings.saveState(key, value)
    // settings.loadState(key, defaultValue)
    // settings.clearState()
}
```

### How It Works Under the Hood

- **Reads are synchronous** — `loadPluginState()` returns the value immediately (backed by `FileView` with `blockLoading`)
- **Writes are debounced** — rapid `savePluginState()` calls batch into a single disk write (150ms)
- **Writes are atomic** — uses `FileView` with `atomicWrites` to prevent corruption
- **Cleanup** — `FileView` instances are destroyed when a plugin is unloaded
- **No permissions needed** — state operates on its own file, independent of `settings_write`

See `PLUGINS/QuickNotesExample/` in the DMS repo for a complete launcher plugin using the state API.

## Common Patterns

### Auto-injected Properties

`PluginComponent` automatically provides these properties - don't declare them yourself:

- `pluginData` - Reactive settings object
- `pluginService` - Service for manual data operations
- `pluginId` - Your plugin's ID
- `axis` - Bar axis info
- `section` - "left", "center", or "right"
- `parentScreen` - Screen reference
- `widgetThickness` - Widget height/width
- `barThickness` - Bar height/width
- `iconSize` - Recommended icon size for the current bar context
- `variants` - Variant instances

Use `iconSize` for consistent icon sizing that adapts to bar orientation and user preferences:

```qml
DankIcon {
    name: "settings"
    size: root.iconSize
}
```

### Saving Data Manually

Most of the time `pluginData` handles everything, but if you need to save manually:

```qml
if (pluginService) {
    pluginService.savePluginData(pluginId, "key", value)
}
```

### Showing Notifications

```qml
ToastService.showInfo("Title", "Message")
ToastService.showError("Title", "Error message")
```

### Copying to Clipboard

```qml
Quickshell.execDetached(["sh", "-c", "echo -n 'text' | wl-copy"])
```

### Timers

```qml
PluginComponent {
    Timer {
        interval: 1000
        running: true
        repeat: true
        onTriggered: {
            // Do something every second
        }
    }
}
```

## Plugin Manifest Reference

### Required Fields

```json
{
  "id": "pluginId",
  "name": "Plugin Name",
  "description": "What it does",
  "version": "1.0.0",
  "author": "Your Name",
  "type": "widget",
  "component": "./Widget.qml"
}
```

### Optional Fields

```json
{
  "icon": "material_icon",
  "settings": "./Settings.qml",
  "trigger": "#",
  "permissions": ["settings_read", "settings_write"],
  "requires_dms": ">=0.1.18",
  "requires": ["tool1", "tool2"]
}
```

### Plugin Types

- `"widget"` - DankBar or Control Center widget
- `"daemon"` - Background service
- `"launcher"` - Spotlight extension
- `"desktop"` - Desktop layer widget

### Permissions

- `"settings_read"` - Read plugin settings
- `"settings_write"` - Write plugin settings
- `"process"` - Execute system commands
- `"network"` - Network access

## Testing

1. Enable plugin: Settings → Plugins → Scan → Toggle on
2. Add to bar: Settings → DankBar → Add widget
3. Check console: Look for errors in shell output
4. Hot-reload your plugin: `dms ipc call plugins reload myPlugin`
5. Check settings file: `~/.config/DankMaterialShell/settings.json`

### Hot Reloading

During development you can reload plugins without restarting the shell:

```bash
# Reload your plugin after making changes
dms ipc call plugins reload myPlugin

# Check if it's running
dms ipc call plugins status myPlugin

# List all plugins and their state
dms ipc call plugins list
```

This is way faster than `dms restart` when you're iterating on your code.

## Publishing

1. Create GitHub repo
2. Include `plugin.json`, README, screenshots
3. Tag releases: `git tag v1.0.0 && git push --tags`
4. Submit to registry: [dms-plugin-registry](https://github.com/AvengeMedia/dms-plugin-registry)

## Examples

Check the `PLUGINS/` directory in the DMS repo for example plugins:

- **ColorDemoPlugin** - Color picker integration
- **ExampleEmojiPlugin** - Popout with grid view
- **ControlCenterExample** - Control Center toggle
- **LauncherExample** - Spotlight extension
- **WallpaperWatcherDaemon** - Background event watcher

**First-party plugins** (good references for real-world patterns):

- [DankGifSearch](https://github.com/AvengeMedia/dms-plugins/tree/main/DankGifSearch) - Launcher with tile view and API integration
- [DankStickerSearch](https://github.com/AvengeMedia/dms-plugins/tree/main/DankStickerSearch) - Launcher with dynamic categories

**Desktop widgets:**

- **DesktopClockWidget** - Digital/analog clock with date display and style options
- **SystemMonitorWidget** - CPU, memory, network, disk, GPU tiles with real-time graphs

Clone them and experiment.



================================================
FILE: docs/dankmaterialshell/plugins-overview.mdx
================================================
[Binary file]


================================================
FILE: docs/danksearch/configuration.mdx
================================================
[Binary file]


================================================
FILE: docs/danksearch/index.mdx
================================================
---
title: DankSearch
description: Native file system search with fuzzy search capabilities
sidebar_position: 1
image: img/dsearch.png
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗ ███████╗███████╗ █████╗ ██████╗  ██████╗██╗  ██╗
██╔══██╗██╔════╝██╔════╝██╔══██╗██╔══██╗██╔════╝██║  ██║
██║  ██║███████╗█████╗  ███████║██████╔╝██║     ███████║
██║  ██║╚════██║██╔══╝  ██╔══██║██╔══██╗██║     ██╔══██║
██████╔╝███████║███████╗██║  ██║██║  ██║╚██████╗██║  ██║
╚═════╝ ╚══════╝╚══════╝╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝
                                                        `}
/>

# DankSearch

`dsearch` is a native file system search tool with configurable indexes and a CLI + REST API for searching files with various parameters.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DankSearch"
    sources={{
      light: useBaseUrl('/img/dsearchlight.png'),
      dark: useBaseUrl('/img/dsearch.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>DankSearch file search interface</figcaption>
</figure>

## Overview

DankSearch integrates seamlessly with DankMaterialShell's Spotlight launcher, offering:

- **Instant Search**: Blazingly fast filesystem search
- **Fuzzy Matching**: Intelligent search that finds files even with typos
= **Content Searching**: Search for files by content instead of just filename.
- **Efficient**: Indexes are loaded into memory on-demand, not held there indefinitely.
- **Fast**: Extremely fast, for tens of thousands of files.
- **Zero Dependency**: Zero dependencies, compiles to a single portable binary.

## Documentation

- [Installation](installation) - Detailed setup instructions and requirements
- [Configuration](configuration) - Configuration options
- [Usage](usage) - Learn CLI commands and API endpoints

## Contributing

`dsearch` is open source and welcomes contributions:

- **Source Code**: [GitHub Repository](https://github.com/AvengeMedia/danksearch)
- **Issues**: Report bugs and request features on GitHub
- **Documentation**: Help improve the documentation
- **Testing**: Test on different Linux distributions and hardware

## License

`dsearch` is released under the MIT License. See the [LICENSE](https://github.com/AvengeMedia/danksearch/blob/master/LICENSE) file for details.



================================================
FILE: docs/danksearch/installation.mdx
================================================
[Binary file]


================================================
FILE: docs/danksearch/nixos-flake.mdx
================================================
[Binary file]


================================================
FILE: docs/danksearch/nixos.mdx
================================================
[Binary file]


================================================
FILE: docs/danksearch/usage.mdx
================================================
[Binary file]


================================================
FILE: docs/dgop/configuration.mdx
================================================
---
title: Configuration
description: Configure DGOP appearance and commands
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP Configuration

## API

For the API, you can set the following environment variable to override the port of the http server:
- `API_PORT` (defaults to `63484`)

## Colors

dgop will ready colors from `~/.config/dgop/colors.json`:

Example:

```json
{
  "ui": {
    "border_primary": "#ccbeff",
    "border_secondary": "#cac3dc",
    "header_background": "#ccbeff",
    "header_text": "#33275e",
    "footer_background": "#141318",
    "footer_text": "#cac4cf",
    "text_primary": "#e6e1e9",
    "text_secondary": "#cac4cf",
    "text_accent": "#ccbeff",
    "selection_background": "#ccbeff",
    "selection_text": "#33275e"
  },
  "charts": {
    "network_download": "#ccbeff",
    "network_upload": "#4a3e76",
    "network_line": "#cac3dc",
    "cpu_core_low": "#4a3e76",
    "cpu_core_medium": "#ccbeff",
    "cpu_core_high": "#eeb8ca",
    "disk_read": "#ccbeff",
    "disk_write": "#4a3e76"
  },
  "progress_bars": {
    "memory_low": "#4a3e76",
    "memory_medium": "#ccbeff",
    "memory_high": "#eeb8ca",
    "disk_low": "#4a3e76",
    "disk_medium": "#ccbeff",
    "disk_high": "#eeb8ca",
    "cpu_low": "#4a3e76",
    "cpu_medium": "#ccbeff",
    "cpu_high": "#eeb8ca",
    "progress_background": "#201f24"
  },
  "temperature": {
    "cold": "#4a3e76",
    "warm": "#ccbeff",
    "hot": "#eeb8ca",
    "danger": "#ffb4ab"
  },
  "status": {
    "success": "#22C55E",
    "warning": "#F59E0B",
    "error": "#ffb4ab",
    "info": "#ccbeff"
  }
}
```

### matugen template

Below is a template that can be used with matugen:

```json
{
  "ui": {
    "border_primary": "{{colors.primary.default.hex}}",
    "border_secondary": "{{colors.secondary.default.hex}}",
    "header_background": "{{colors.primary.default.hex}}",
    "header_text": "{{colors.on_primary.default.hex}}",
    "footer_background": "{{colors.surface_container.default.hex}}",
    "footer_text": "{{colors.on_surface_variant.default.hex}}",
    "text_primary": "{{colors.on_surface.default.hex}}",
    "text_secondary": "{{colors.on_surface_variant.default.hex}}",
    "text_accent": "{{colors.primary.default.hex}}",
    "selection_background": "{{colors.primary.default.hex}}",
    "selection_text": "{{colors.on_primary.default.hex}}"
  },
  "charts": {
    "network_download": "{{colors.primary.default.hex}}",
    "network_upload": "{{colors.primary_container.default.hex}}",
    "network_line": "{{colors.secondary.default.hex}}",
    "cpu_core_low": "{{colors.primary_container.default.hex}}",
    "cpu_core_medium": "{{colors.primary.default.hex}}",
    "cpu_core_high": "{{colors.tertiary.default.hex}}",
    "disk_read": "{{colors.primary.default.hex}}",
    "disk_write": "{{colors.primary_container.default.hex}}"
  },
  "progress_bars": {
    "memory_low": "{{colors.primary_container.default.hex}}",
    "memory_medium": "{{colors.primary.default.hex}}",
    "memory_high": "{{colors.tertiary.default.hex}}",
    "disk_low": "{{colors.primary_container.default.hex}}",
    "disk_medium": "{{colors.primary.default.hex}}",
    "disk_high": "{{colors.tertiary.default.hex}}",
    "cpu_low": "{{colors.primary_container.default.hex}}",
    "cpu_medium": "{{colors.primary.default.hex}}",
    "cpu_high": "{{colors.tertiary.default.hex}}",
  "progress_background": "{{colors.surface_container_high.default.hex}}"
  },
  "temperature": {
    "cold": "{{colors.primary_container.default.hex}}",
    "warm": "{{colors.primary.default.hex}}",
    "hot": "{{colors.tertiary.default.hex}}",
    "danger": "{{colors.error.default.hex}}"
  },
  "status": {
    "success": "#22C55E",
    "warning": "#F59E0B",
    "error": "{{colors.error.default.hex}}",
    "info": "{{colors.primary.default.hex}}"
  }
}
```

## Troubleshooting

### Common Issues

**API not starting:**
- Check port availability: `netstat -tlnp | grep :63484`
- Check logs

## Next Steps

- [Usage](usage) - Learn CLI commands and API usage



================================================
FILE: docs/dgop/index.mdx
================================================
---
title: DGOP
description: Graphical power management tool for Wayland
sidebar_position: 1
image: img/dgop.png
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP

`dgop` (Dank GO Process Status) is a stateless system and process monitoring tool that provides a top-like tui, CLI, and REST API. It allows sampling numerous metrics related to the system.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DGOP Preview"
    sources={{
      light: useBaseUrl('/img/dgoplight.png'),
      dark: useBaseUrl('/img/dgop.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>dgop tui interface</figcaption>
</figure>

## Features

- top-like TUI
- CPU, GPU, Memory, Process, Network, Disk, and other various metrics
- Cursor-based stateless method to sample data over any arbitrary time period.
- Fully documented with OpenAPI 3.1, REST API
- cli to query any metric, in human-readable or machine-readable formats
- mix and match different metrics under a single `meta` call

## Documentation

- [Installation](installation) - Detailed setup instructions and requirements
- [Configuration](configuration) - Configuration options
- [Usage](usage) - Learn CLI commands and API endpoints

## Contributing

`dgop` is open source and welcomes contributions:

- **Source Code**: [GitHub Repository](https://github.com/AvengeMedia/dgop)
- **Issues**: Report bugs and request features on GitHub
- **Documentation**: Help improve the documentation
- **Testing**: Test on different Linux distributions and hardware

## License

`dgop` is released under the MIT License. See the [LICENSE](https://github.com/AvengeMedia/dgop/blob/master/LICENSE) file for details.



================================================
FILE: docs/dgop/installation.mdx
================================================
---
title: Installation
description: Install DGOP power menu
sidebar_position: 2
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP Installation

:::note

`dgop` has zero dependencies and compiles to a single static binary.

:::

### Distribution Packages

#### Arch Linux
```bash
sudo pacman -S dgop
```

#### Fedora
```bash
sudo dnf copr enable avengemedia/danklinux
sudo dnf install dgop
```

### Pre-built Binaries

Download the latest release for your architecture:

```bash
# Download and install
wget https://github.com/AvengeMedia/dgop/releases/latest/download/dgop-linux-amd64.gz
gunzip dgop-linux-amd64.gz
chmod +x dgop-linux-amd64
sudo mv dgop-linux-amd64 /usr/local/bin/dgop
```

### From Source

Requirements: Go 1.24+

```bash
git clone https://github.com/AvengeMedia/dgop
cd dgop
make
sudo make install
```

## Verification

Test the installation:

```bash
# Check version
dgop version

# Get system metrics
dgop system

# Run API server
dgop server

# See available commands
dgop --help
```

## System Requirements

- **Operating System**: Linux (uses `/proc` and `/sys` filesystems)
- **Go Version**: 1.24+ (for building from source)

### Optional Dependencies

For enhanced functionality:

- `nvidia-smi` - NVIDIA GPU monitoring

## Integration with DMS

:::tip

DankMaterialShell users gain access to system widgets (CPU, RAM, GPU, Disk, Network) and process monitoring when dgop is installed.

:::

## Next Steps

- [Configuration](configuration) - Configure dgop
- [Usage](usage) - Learn CLI commands and API usage



================================================
FILE: docs/dgop/usage.mdx
================================================
---
title: Usage
description: Launch DGOP and manage system power
sidebar_position: 4
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP Usage

## API Usage

The `dgop` API provides a documentation endpoint, with a full openapi 3.1 specification available at `http://localhost:63484/docs`

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DGOP API Documentation"
    sources={{
      light: useBaseUrl('/img/dgopdoclight.png'),
      dark: useBaseUrl('/img/dgopdoc.png'),
    }}
    style={{ maxWidth: '800px', width: '100%' }}
  />
  <figcaption>Interactive OpenAPI documentation interface</figcaption>
</figure>

It is guaranteed to be up to date so it's the best way to reference API usage.

## CLI Usage

DGOP provides a comprehensive command-line interface for querying system metrics. All commands support JSON output via the `--json` flag for easy integration with scripts and applications.

### Basic Commands

Get quick system information using individual commands:

```bash
# View CPU usage and information
dgop cpu

# Check memory usage
dgop memory

# Monitor network interfaces
dgop network

# View disk information
dgop disk

# List running processes
dgop processes

# Get general system information
dgop system
```

### Advanced Commands

For more specialized monitoring:

```bash
# Monitor disk I/O rates in real-time
dgop disk-rate

# Track network transfer rates
dgop net-rate

# View GPU information
dgop gpu

# Get GPU temperature readings
dgop gpu-temp

# Display hardware details (motherboard, BIOS)
dgop hardware

# Get all metrics at once
dgop all
```

### Process Management

The `processes` command provides detailed process information with sorting and filtering options:

```bash
# List top processes by CPU usage
dgop processes --sort cpu --limit 20

# List processes by memory usage
dgop processes --sort memory --limit 10

# Disable CPU calculation for faster listing
dgop processes --no-cpu
```

### Meta Command

The `meta` command is designed for efficient polling by requesting multiple modules in a single call:

```bash
# Query multiple metrics at once
dgop meta --modules cpu,memory,network

# Get all metrics with specific GPU monitoring
dgop meta --modules all --gpu-pci-ids 0000:01:00.0

# Efficient CPU monitoring with cursor-based sampling
dgop meta --modules cpu --cpu-cursor <previous-cursor>

# Process monitoring with cursor for accurate percentages
dgop meta --modules processes --proc-cursor <previous-cursor> --limit 100
```

#### Cursor-Based Sampling

For accurate CPU and process metrics over time, DGOP supports cursor-based sampling. The meta command returns cursor values that should be passed back on subsequent calls:

```bash
# First call - no cursor needed
dgop meta --modules cpu,processes --json

# Subsequent calls - use returned cursors for accurate deltas
dgop meta --modules cpu,processes --cpu-cursor abc123 --proc-cursor def456 --json
```

This ensures CPU percentages reflect actual usage between samples rather than system-wide averages.

### Interactive Monitor

Launch a real-time, interactive system monitor, similar to top, htop:

```bash
dgop
```

### API Server

Start the HTTP API server for programmatic access:

```bash
# Start server on default port (63484)
dgop server

# Access OpenAPI documentation at http://localhost:63484/docs
```

### Output Formats

All commands support JSON output for integration with other tools:

```bash
# Get CPU info in JSON format
dgop cpu --json

# Pipe to jq for parsing
dgop memory --json | jq '.usage'
```

### Common Flags

- `--json` - Output results in JSON format
- `--no-cpu` - Disable CPU calculation in process listing for better performance
- `--help` - Show help for any command

### List Available Modules

See which metric modules are available:

```bash
dgop modules
```


================================================
FILE: k8s/dankinstall-ingress.yaml
================================================
---
apiVersion: v1
kind: Service
metadata:
  name: github-raw
  namespace: danklinux
spec:
  type: ExternalName
  externalName: raw.githubusercontent.com
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: install-danklinux-proxy
  namespace: danklinux
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
    nginx.ingress.kubernetes.io/proxy-ssl-server-name: "true"
    nginx.ingress.kubernetes.io/proxy-ssl-name: "raw.githubusercontent.com"
    nginx.ingress.kubernetes.io/upstream-vhost: "raw.githubusercontent.com"
    nginx.ingress.kubernetes.io/rewrite-target: /AvengeMedia/DankMaterialShell/master/core/install.sh
    nginx.ingress.kubernetes.io/proxy-read-timeout: "30"
spec:
  ingressClassName: nginx
  tls:
    - hosts: [install.danklinux.com]
      secretName: install-danklinux-tls
  rules:
    - host: install.danklinux.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: github-raw
                port:
                  number: 443



================================================
FILE: k8s/deployment.yaml
================================================
apiVersion: apps/v1
kind: Deployment
metadata:
  name: dlx-docs
  namespace: danklinux
spec:
  replicas: 1
  selector:
    matchLabels:
      app: dlx-docs
  template:
    metadata:
      labels:
        app: dlx-docs
    spec:
      containers:
      - name: dlx-docs
        image: replaceme
        ports:
        - containerPort: 3000
          name: http



================================================
FILE: k8s/generate-kubeconfig.sh
================================================
#!/bin/bash
set -e

NAMESPACE="danklinux"
SERVICE_ACCOUNT="dlx-docs-deployer"
OUTPUT_FILE="${1:-dlx-docs-kubeconfig.yaml}"

# Check if RBAC resources exist
if ! kubectl get serviceaccount "$SERVICE_ACCOUNT" -n "$NAMESPACE" &>/dev/null; then
    echo "ServiceAccount not found. Creating RBAC resources..."
    kubectl apply -f "$(dirname "$0")/rbac.yaml"
fi

# Get cluster info from current config
CLUSTER_NAME=$(kubectl config view --minify -o jsonpath='{.clusters[0].name}')
CLUSTER_SERVER=$(kubectl config view --minify -o jsonpath='{.clusters[0].cluster.server}')
CLUSTER_CA=$(kubectl config view --minify --raw -o jsonpath='{.clusters[0].cluster.certificate-authority-data}')

# Create a long-lived token (1 year)
echo "Creating token..."
TOKEN=$(kubectl create token "$SERVICE_ACCOUNT" -n "$NAMESPACE" --duration=8760h)

# Generate kubeconfig
cat > "$OUTPUT_FILE" <<EOF
apiVersion: v1
kind: Config
clusters:
- name: ${CLUSTER_NAME}
  cluster:
    certificate-authority-data: ${CLUSTER_CA}
    server: ${CLUSTER_SERVER}
contexts:
- name: ${SERVICE_ACCOUNT}
  context:
    cluster: ${CLUSTER_NAME}
    namespace: ${NAMESPACE}
    user: ${SERVICE_ACCOUNT}
current-context: ${SERVICE_ACCOUNT}
users:
- name: ${SERVICE_ACCOUNT}
  user:
    token: ${TOKEN}
EOF

echo "Kubeconfig written to: $OUTPUT_FILE"



================================================
FILE: k8s/ingress.yaml
================================================
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: dlx-docs-ingress
  namespace: danklinux
  annotations:
    kubernetes.io/ingress.class: "nginx"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/configuration-snippet: |
      rewrite ^/blog/v1\.2-release(/.*)?$ /blog/v1-2-release$1 permanent;
spec:
  tls:
  - hosts:
    - danklinux.com
    secretName: dlx-docs-tls-secret
  rules:
  - host: danklinux.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: dlx-docs
            port:
              number: 3000
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: dlx-docs-plugins-redirect
  namespace: danklinux
  annotations:
    kubernetes.io/ingress.class: "nginx"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/permanent-redirect: "https://danklinux.com/plugins"
spec:
  tls:
  - hosts:
    - plugins.danklinux.com
    secretName: dlx-docs-plugins-tls-secret
  rules:
  - host: plugins.danklinux.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: dlx-docs
            port:
              number: 3000



================================================
FILE: k8s/kustomization.yaml
================================================
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: danklinux
resources:
- deployment.yaml
- svc.yaml
- ingress.yaml
- server-deployment.yaml
- server-svc.yaml
- server-ingress.yaml
- dankinstall-ingress.yaml



================================================
FILE: k8s/rbac.yaml
================================================
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: dlx-docs-deployer
  namespace: danklinux
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: dlx-docs-deployer
  namespace: danklinux
rules:
- apiGroups: [""]
  resources: ["services", "secrets", "configmaps", "pods", "pods/log"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["apps"]
  resources: ["deployments", "replicasets"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["networking.k8s.io"]
  resources: ["ingresses"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: dlx-docs-deployer
  namespace: danklinux
subjects:
- kind: ServiceAccount
  name: dlx-docs-deployer
  namespace: danklinux
roleRef:
  kind: Role
  name: dlx-docs-deployer
  apiGroup: rbac.authorization.k8s.io



================================================
FILE: k8s/server-deployment.yaml
================================================
kind: Deployment
apiVersion: apps/v1
metadata:
  name: dlx-docs-server-deployment
  namespace: danklinux
  labels:
    app: dlx-docs-server
spec:
  replicas: 1
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0
      maxSurge: 1
  selector:
    matchLabels:
      app: dlx-docs-server
  template:
    metadata:
      labels:
        app: dlx-docs-server
    spec:
      containers:
        - name: dlx-docs-server
          image: replaceme-server
          resources:
            requests:
              cpu: 100m
              memory: 200Mi
            limits:
              memory: 1Gi
              cpu: 500m
          ports:
            - containerPort: 8337
          imagePullPolicy: "Always"
          livenessProbe:
            httpGet:
              path: /health
              port: 8337
            initialDelaySeconds: 5
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /ready
              port: 8337
            initialDelaySeconds: 2
            periodSeconds: 5
          env:
            - name: PORT
              value: "8337"
            - name: ENVIRONMENT
              value: "production"
            - name: GITHUB_TOKEN
              valueFrom:
                secretKeyRef:
                  name: github-token
                  key: token
            - name: KLIPY_API_KEY
              valueFrom:
                secretKeyRef:
                  name: klipy-api-key
                  key: key



================================================
FILE: k8s/server-ingress.yaml
================================================
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: dlx-docs-server-ingress
  namespace: danklinux
  annotations:
    kubernetes.io/ingress.class: "nginx"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/configuration-snippet: |
      real_ip_header CF-Connecting-IP;
      add_header Cache-Control "public, max-age=600";
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "1800"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "1800"
    nginx.ingress.kubernetes.io/proxy-body-size: 10m
spec:
  tls:
    - hosts:
        - api.danklinux.com
      secretName: api-danklinux-com-tls
  rules:
    - host: api.danklinux.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: dlx-docs-server
                port:
                  number: 8337



================================================
FILE: k8s/server-svc.yaml
================================================
kind: Service
apiVersion: v1
metadata:
  name: dlx-docs-server
  namespace: danklinux
spec:
  selector:
    app: dlx-docs-server
  type: ClusterIP
  ports:
    - port: 8337
      targetPort: 8337



================================================
FILE: k8s/svc.yaml
================================================
apiVersion: v1
kind: Service
metadata:
  name: dlx-docs
  namespace: danklinux
spec:
  type: ClusterIP
  ports:
  - port: 3000
    targetPort: 3000
    name: http
  selector:
    app: dlx-docs



================================================
FILE: server/Dockerfile
================================================
FROM stablecog/ubuntu:22.04

COPY ./server/cmd/api/api /app/api

EXPOSE 8337

CMD ["/app/api"]


================================================
FILE: server/go.mod
================================================
module github.com/AvengeMedia/DankLinux-Docs/server

go 1.25.3

require (
	github.com/charmbracelet/lipgloss v1.1.0
	github.com/charmbracelet/log v0.4.2
	github.com/danielgtaylor/huma/v2 v2.34.1
	github.com/go-chi/chi/v5 v5.2.3
	github.com/go-chi/cors v1.2.2
	github.com/go-co-op/gocron/v2 v2.18.0
	github.com/joho/godotenv v1.5.1
)

require (
	github.com/aymanbagabas/go-osc52/v2 v2.0.1 // indirect
	github.com/charmbracelet/colorprofile v0.2.3-0.20250311203215-f60798e515dc // indirect
	github.com/charmbracelet/x/ansi v0.8.0 // indirect
	github.com/charmbracelet/x/cellbuf v0.0.13-0.20250311204145-2c3ea96c31dd // indirect
	github.com/charmbracelet/x/term v0.2.1 // indirect
	github.com/go-logfmt/logfmt v0.6.0 // indirect
	github.com/google/uuid v1.6.0 // indirect
	github.com/jonboulle/clockwork v0.5.0 // indirect
	github.com/lucasb-eyer/go-colorful v1.2.0 // indirect
	github.com/mattn/go-isatty v0.0.20 // indirect
	github.com/mattn/go-runewidth v0.0.16 // indirect
	github.com/muesli/termenv v0.16.0 // indirect
	github.com/rivo/uniseg v0.4.7 // indirect
	github.com/robfig/cron/v3 v3.0.1 // indirect
	github.com/xo/terminfo v0.0.0-20220910002029-abceb7e1c41e // indirect
	golang.org/x/exp v0.0.0-20231006140011-7918f672742d // indirect
	golang.org/x/sys v0.33.0 // indirect
)



================================================
FILE: server/go.sum
================================================
github.com/aymanbagabas/go-osc52/v2 v2.0.1 h1:HwpRHbFMcZLEVr42D4p7XBqjyuxQH5SMiErDT4WkJ2k=
github.com/aymanbagabas/go-osc52/v2 v2.0.1/go.mod h1:uYgXzlJ7ZpABp8OJ+exZzJJhRNQ2ASbcXHWsFqH8hp8=
github.com/charmbracelet/colorprofile v0.2.3-0.20250311203215-f60798e515dc h1:4pZI35227imm7yK2bGPcfpFEmuY1gc2YSTShr4iJBfs=
github.com/charmbracelet/colorprofile v0.2.3-0.20250311203215-f60798e515dc/go.mod h1:X4/0JoqgTIPSFcRA/P6INZzIuyqdFY5rm8tb41s9okk=
github.com/charmbracelet/lipgloss v1.1.0 h1:vYXsiLHVkK7fp74RkV7b2kq9+zDLoEU4MZoFqR/noCY=
github.com/charmbracelet/lipgloss v1.1.0/go.mod h1:/6Q8FR2o+kj8rz4Dq0zQc3vYf7X+B0binUUBwA0aL30=
github.com/charmbracelet/log v0.4.2 h1:hYt8Qj6a8yLnvR+h7MwsJv/XvmBJXiueUcI3cIxsyig=
github.com/charmbracelet/log v0.4.2/go.mod h1:qifHGX/tc7eluv2R6pWIpyHDDrrb/AG71Pf2ysQu5nw=
github.com/charmbracelet/x/ansi v0.8.0 h1:9GTq3xq9caJW8ZrBTe0LIe2fvfLR/bYXKTx2llXn7xE=
github.com/charmbracelet/x/ansi v0.8.0/go.mod h1:wdYl/ONOLHLIVmQaxbIYEC/cRKOQyjTkowiI4blgS9Q=
github.com/charmbracelet/x/cellbuf v0.0.13-0.20250311204145-2c3ea96c31dd h1:vy0GVL4jeHEwG5YOXDmi86oYw2yuYUGqz6a8sLwg0X8=
github.com/charmbracelet/x/cellbuf v0.0.13-0.20250311204145-2c3ea96c31dd/go.mod h1:xe0nKWGd3eJgtqZRaN9RjMtK7xUYchjzPr7q6kcvCCs=
github.com/charmbracelet/x/term v0.2.1 h1:AQeHeLZ1OqSXhrAWpYUtZyX1T3zVxfpZuEQMIQaGIAQ=
github.com/charmbracelet/x/term v0.2.1/go.mod h1:oQ4enTYFV7QN4m0i9mzHrViD7TQKvNEEkHUMCmsxdUg=
github.com/danielgtaylor/huma/v2 v2.34.1 h1:EmOJAbzEGfy0wAq/QMQ1YKfEMBEfE94xdBRLPBP0gwQ=
github.com/danielgtaylor/huma/v2 v2.34.1/go.mod h1:ynwJgLk8iGVgoaipi5tgwIQ5yoFNmiu+QdhU7CEEmhk=
github.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c=
github.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=
github.com/go-chi/chi/v5 v5.2.3 h1:WQIt9uxdsAbgIYgid+BpYc+liqQZGMHRaUwp0JUcvdE=
github.com/go-chi/chi/v5 v5.2.3/go.mod h1:L2yAIGWB3H+phAw1NxKwWM+7eUH/lU8pOMm5hHcoops=
github.com/go-chi/cors v1.2.2 h1:Jmey33TE+b+rB7fT8MUy1u0I4L+NARQlK6LhzKPSyQE=
github.com/go-chi/cors v1.2.2/go.mod h1:sSbTewc+6wYHBBCW7ytsFSn836hqM7JxpglAy2Vzc58=
github.com/go-co-op/gocron/v2 v2.18.0 h1:DS3Uhru66q1jy/5f9V0itmi3cLXcn2b7N+duGfgT7gU=
github.com/go-co-op/gocron/v2 v2.18.0/go.mod h1:Zii6he+Zfgy5W9B+JKk/KwejFOW0kZTFvHtwIpR4aBI=
github.com/go-logfmt/logfmt v0.6.0 h1:wGYYu3uicYdqXVgoYbvnkrPVXkuLM1p1ifugDMEdRi4=
github.com/go-logfmt/logfmt v0.6.0/go.mod h1:WYhtIu8zTZfxdn5+rREduYbwxfcBr/Vr6KEVveWlfTs=
github.com/google/uuid v1.6.0 h1:NIvaJDMOsjHA8n1jAhLSgzrAzy1Hgr+hNrb57e+94F0=
github.com/google/uuid v1.6.0/go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw/LqOeaOT+nhxU+yHo=
github.com/joho/godotenv v1.5.1 h1:7eLL/+HRGLY0ldzfGMeQkb7vMd0as4CfYvUVzLqw0N0=
github.com/joho/godotenv v1.5.1/go.mod h1:f4LDr5Voq0i2e/R5DDNOoa2zzDfwtkZa6DnEwAbqwq4=
github.com/jonboulle/clockwork v0.5.0 h1:Hyh9A8u51kptdkR+cqRpT1EebBwTn1oK9YfGYbdFz6I=
github.com/jonboulle/clockwork v0.5.0/go.mod h1:3mZlmanh0g2NDKO5TWZVJAfofYk64M7XN3SzBPjZF60=
github.com/lucasb-eyer/go-colorful v1.2.0 h1:1nnpGOrhyZZuNyfu1QjKiUICQ74+3FNCN69Aj6K7nkY=
github.com/lucasb-eyer/go-colorful v1.2.0/go.mod h1:R4dSotOR9KMtayYi1e77YzuveK+i7ruzyGqttikkLy0=
github.com/mattn/go-isatty v0.0.20 h1:xfD0iDuEKnDkl03q4limB+vH+GxLEtL/jb4xVJSWWEY=
github.com/mattn/go-isatty v0.0.20/go.mod h1:W+V8PltTTMOvKvAeJH7IuucS94S2C6jfK/D7dTCTo3Y=
github.com/mattn/go-runewidth v0.0.16 h1:E5ScNMtiwvlvB5paMFdw9p4kSQzbXFikJ5SQO6TULQc=
github.com/mattn/go-runewidth v0.0.16/go.mod h1:Jdepj2loyihRzMpdS35Xk/zdY8IAYHsh153qUoGf23w=
github.com/muesli/termenv v0.16.0 h1:S5AlUN9dENB57rsbnkPyfdGuWIlkmzJjbFf0Tf5FWUc=
github.com/muesli/termenv v0.16.0/go.mod h1:ZRfOIKPFDYQoDFF4Olj7/QJbW60Ol/kL1pU3VfY/Cnk=
github.com/pmezard/go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk/f1lZbAQM=
github.com/pmezard/go-difflib v1.0.0/go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ/4=
github.com/rivo/uniseg v0.2.0/go.mod h1:J6wj4VEh+S6ZtnVlnTBMWIodfgj8LQOQFoIToxlJtxc=
github.com/rivo/uniseg v0.4.7 h1:WUdvkW8uEhrYfLC4ZzdpI2ztxP1I582+49Oc5Mq64VQ=
github.com/rivo/uniseg v0.4.7/go.mod h1:FN3SvrM+Zdj16jyLfmOkMNblXMcoc8DfTHruCPUcx88=
github.com/robfig/cron/v3 v3.0.1 h1:WdRxkvbJztn8LMz/QEvLN5sBU+xKpSqwwUO1Pjr4qDs=
github.com/robfig/cron/v3 v3.0.1/go.mod h1:eQICP3HwyT7UooqI/z+Ov+PtYAWygg1TEWWzGIFLtro=
github.com/stretchr/testify v1.11.1 h1:7s2iGBzp5EwR7/aIZr8ao5+dra3wiQyKjjFuvgVKu7U=
github.com/stretchr/testify v1.11.1/go.mod h1:wZwfW3scLgRK+23gO65QZefKpKQRnfz6sD981Nm4B6U=
github.com/xo/terminfo v0.0.0-20220910002029-abceb7e1c41e h1:JVG44RsyaB9T2KIHavMF/ppJZNG9ZpyihvCd0w101no=
github.com/xo/terminfo v0.0.0-20220910002029-abceb7e1c41e/go.mod h1:RbqR21r5mrJuqunuUZ/Dhy/avygyECGrLceyNeo4LiM=
go.uber.org/goleak v1.3.0 h1:2K3zAYmnTNqV73imy9J1T3WC+gmCePx2hEGkimedGto=
go.uber.org/goleak v1.3.0/go.mod h1:CoHD4mav9JJNrW/WLlf7HGZPjdw8EucARQHekz1X6bE=
golang.org/x/exp v0.0.0-20231006140011-7918f672742d h1:jtJma62tbqLibJ5sFQz8bKtEM8rJBtfilJ2qTU199MI=
golang.org/x/exp v0.0.0-20231006140011-7918f672742d/go.mod h1:ldy0pHrwJyGW56pPQzzkH36rKxoZW1tw7ZJpeKx+hdo=
golang.org/x/sys v0.6.0/go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
golang.org/x/sys v0.33.0 h1:q3i8TbbEz+JRD9ywIRlyRAQbM0qF7hu24q3teo2hbuw=
golang.org/x/sys v0.33.0/go.mod h1:BJP2sWEmIv4KK5OTEluFJCKSidICx8ciO85XgH3Ak8k=
gopkg.in/yaml.v3 v3.0.1 h1:fxVm/GzAzEWqLHuvctI91KS9hhNmmWOoWu0XTYJS7CA=
gopkg.in/yaml.v3 v3.0.1/go.mod h1:K4uyk7z7BCEPqu6E+C64Yfv1cQ7kz7rIZviUmN+EgEM=



================================================
FILE: server/.env.example
================================================
PORT=8337
ENVIRONMENT=development
GITHUB_TOKEN=



================================================
FILE: server/cmd/api/main.go
================================================
package main

import (
	"context"
	"log/slog"
	"net/http"
	"os"
	"os/signal"
	"syscall"
	"time"

	"github.com/AvengeMedia/DankLinux-Docs/server/config"
	gifs_handler "github.com/AvengeMedia/DankLinux-Docs/server/internal/api/handlers/gifs"
	plugins_handler "github.com/AvengeMedia/DankLinux-Docs/server/internal/api/handlers/plugins"
	stickers_handler "github.com/AvengeMedia/DankLinux-Docs/server/internal/api/handlers/stickers"
	themes_handler "github.com/AvengeMedia/DankLinux-Docs/server/internal/api/handlers/themes"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/api/middleware"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/api/server"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/log"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/services/registry"
	"github.com/danielgtaylor/huma/v2"
	"github.com/danielgtaylor/huma/v2/adapters/humachi"
	"github.com/go-chi/chi/v5"
	"github.com/go-chi/cors"
	"github.com/go-co-op/gocron/v2"
	"github.com/joho/godotenv"
)

var Version = "development"

func NewHumaConfig(title, version string) huma.Config {
	schemaPrefix := "#/components/schemas/"
	schemasPath := "/schemas"

	registry := huma.NewMapRegistry(schemaPrefix, huma.DefaultSchemaNamer)

	cfg := huma.Config{
		OpenAPI: &huma.OpenAPI{
			OpenAPI: "3.1.0",
			Info: &huma.Info{
				Title:   title,
				Version: version,
			},
			Components: &huma.Components{
				Schemas: registry,
			},
		},
		OpenAPIPath:   "/openapi",
		DocsPath:      "/docs",
		SchemasPath:   schemasPath,
		Formats:       huma.DefaultFormats,
		DefaultFormat: "application/json",
	}

	return cfg
}

func startAPI(cfg *config.Config) {
	ctx, cancel := context.WithCancel(context.Background())
	defer cancel()

	signalCh := make(chan os.Signal, 1)
	signal.Notify(signalCh, syscall.SIGINT, syscall.SIGTERM)
	go func() {
		sig := <-signalCh
		slog.Info("Received shutdown signal", "signal", sig)
		cancel()
	}()

	pluginCache := registry.NewCache(cfg.GithubToken)
	themeCache := registry.NewThemeCache(cfg.GithubToken)

	srvImpl := &server.Server{
		PluginCache: pluginCache,
		ThemeCache:  themeCache,
	}

	go func() {
		log.Info("Initializing plugin cache...")
		if err := pluginCache.Initialize(ctx); err != nil {
			log.Error("Failed to initialize plugin cache", "err", err)
		}
	}()

	go func() {
		log.Info("Initializing theme cache...")
		if err := themeCache.Initialize(ctx); err != nil {
			log.Error("Failed to initialize theme cache", "err", err)
		}
	}()

	var klipyClient *klipy.Client
	if cfg.KlipyAPIKey != "" {
		klipyClient = klipy.NewClient(cfg.KlipyAPIKey)
		log.Info("Klipy client initialized")
	}

	gifRateLimiter := middleware.NewRateLimiter(100.0/60.0, 100)

	r := chi.NewRouter()

	var allowedOrigins []string
	if cfg.Environment == "development" {
		allowedOrigins = []string{
			"http://localhost:3000",
			"https://danklinux.com",
		}
	} else {
		allowedOrigins = []string{
			"https://danklinux.com",
		}
	}

	r.Use(cors.Handler(cors.Options{
		AllowedOrigins:   allowedOrigins,
		AllowedMethods:   []string{"GET", "POST", "PUT", "DELETE", "OPTIONS"},
		AllowedHeaders:   []string{"*"},
		ExposedHeaders:   []string{"Link"},
		AllowCredentials: true,
		MaxAge:           300,
	}))

	r.Get("/version", func(w http.ResponseWriter, r *http.Request) {
		w.WriteHeader(http.StatusOK)
		w.Header().Set("Content-Type", "application/json")
		w.Write([]byte(`{"version": "` + Version + `"}`))
	})

	r.Get("/health", func(w http.ResponseWriter, r *http.Request) {
		w.WriteHeader(http.StatusOK)
		w.Write([]byte("OK"))
	})

	r.Get("/ready", func(w http.ResponseWriter, r *http.Request) {
		switch {
		case !pluginCache.IsReady():
			w.WriteHeader(http.StatusServiceUnavailable)
			w.Write([]byte("plugin cache warming up"))
		case !themeCache.IsReady():
			w.WriteHeader(http.StatusServiceUnavailable)
			w.Write([]byte("theme cache warming up"))
		default:
			w.WriteHeader(http.StatusOK)
			w.Write([]byte("OK"))
		}
	})

	r.Group(func(r chi.Router) {
		r.Use(middleware.RealIP)
		r.Use(middleware.Logger)
		r.Use(middleware.RequestID)

		humaConfig := NewHumaConfig("DankLinux Docs API", "1.0.0")
		humaConfig.DocsPath = ""
		api := humachi.New(r, humaConfig)

		r.Get("/docs", func(w http.ResponseWriter, r *http.Request) {
			w.Header().Set("Content-Type", "text/html")
			w.Write([]byte(`<!doctype html>
<html>
	<head>
		<title>API Reference</title>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1" />
	</head>
	<body>
		<script
			id="api-reference"
			data-url="/openapi.json"></script>
		<script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference@latest"></script>
	</body>
</html>`))
		})

		pluginsGroup := huma.NewGroup(api, "/plugins")
		pluginsGroup.UseModifier(func(op *huma.Operation, next func(*huma.Operation)) {
			op.Tags = []string{"Plugins"}
			next(op)
		})
		plugins_handler.RegisterHandlers(srvImpl, pluginsGroup)

		themesGroup := huma.NewGroup(api, "/themes")
		themesGroup.UseModifier(func(op *huma.Operation, next func(*huma.Operation)) {
			op.Tags = []string{"Themes"}
			next(op)
		})
		themes_handler.RegisterHandlers(srvImpl, themesGroup)

		gifsGroup := huma.NewGroup(api, "/gifs")
		gifsGroup.UseSimpleModifier(func(op *huma.Operation) {
			op.Tags = []string{"GIFs"}
		})
		gifsGroup.UseMiddleware(gifRateLimiter.HumaMiddleware)
		gifs_handler.RegisterHandlers(srvImpl, klipyClient, gifsGroup)

		stickersGroup := huma.NewGroup(api, "/stickers")
		stickersGroup.UseSimpleModifier(func(op *huma.Operation) {
			op.Tags = []string{"Stickers"}
		})
		stickersGroup.UseMiddleware(gifRateLimiter.HumaMiddleware)
		stickers_handler.RegisterHandlers(srvImpl, klipyClient, stickersGroup)
	})

	addr := ":" + cfg.Port
	log.Infof("Starting server on %s", addr)

	httpServer := &http.Server{
		Addr:    addr,
		Handler: r,
	}

	scheduler, err := gocron.NewScheduler(gocron.WithLocation(time.UTC))
	if err != nil {
		log.Fatal("Failed to create scheduler", "err", err)
	}

	_, err = scheduler.NewJob(
		gocron.DurationJob(10*time.Minute),
		gocron.NewTask(
			func(ctx context.Context) {
				log.Info("Running scheduled cache refresh")
				if err := pluginCache.Refresh(ctx); err != nil {
					log.Error("Failed to refresh plugin cache", "err", err)
				}
				if err := themeCache.Refresh(ctx); err != nil {
					log.Error("Failed to refresh theme cache", "err", err)
				}
			},
			ctx,
		),
	)
	if err != nil {
		log.Fatal("Failed to create cache refresh job", "err", err)
	}

	scheduler.Start()
	defer func() {
		if err := scheduler.Shutdown(); err != nil {
			log.Error("Scheduler shutdown error", "err", err)
		} else {
			log.Info("Scheduler gracefully stopped")
		}
	}()

	go func() {
		if err := httpServer.ListenAndServe(); err != nil && err != http.ErrServerClosed {
			log.Fatalf("Server error: %v", err)
		}
	}()

	<-ctx.Done()
	log.Info("Shutting down server...")

	shutdownCtx, shutdownCancel := context.WithTimeout(context.Background(), 10*time.Second)
	defer shutdownCancel()

	if err := httpServer.Shutdown(shutdownCtx); err != nil {
		log.Fatalf("Server shutdown error: %v", err)
	}

	log.Info("Server gracefully stopped")
}

func main() {
	log.Infof("Starting DankLinux Docs API version %s", Version)

	err := godotenv.Load()
	if err != nil {
		log.Warn("Error loading .env file:", err)
	}

	cfg := config.NewConfig()
	startAPI(cfg)
}



================================================
FILE: server/config/config.go
================================================
package config

import (
	"os"
)

type Config struct {
	Port        string
	Environment string
	GithubToken string
	KlipyAPIKey string
}

func NewConfig() *Config {
	port := os.Getenv("PORT")
	if port == "" {
		port = "8337"
	}

	env := os.Getenv("ENVIRONMENT")
	if env == "" {
		env = "development"
	}

	githubToken := os.Getenv("GITHUB_TOKEN")
	klipyAPIKey := os.Getenv("KLIPY_API_KEY")

	return &Config{
		Port:        port,
		Environment: env,
		GithubToken: githubToken,
		KlipyAPIKey: klipyAPIKey,
	}
}



================================================
FILE: server/internal/api/handlers/gifs/categories.go
================================================
package gifs_handler

import (
	"context"
	"encoding/json"
)

type CategoriesInput struct {
	Locale string `query:"locale" doc:"Language in xx_YY format (ISO 639-1 + ISO 3166-1)"`
}

type CategoriesOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetCategories(ctx context.Context, input *CategoriesInput) (*CategoriesOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.GetCategories(ctx, input.Locale)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &CategoriesOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/gifs/errors.go
================================================
package gifs_handler

import (
	"net/http"

	"github.com/danielgtaylor/huma/v2"
)

var ErrClientNotConfigured = huma.Error503ServiceUnavailable("klipy client not configured")

var ErrUpstreamRequest = huma.NewError(http.StatusBadGateway, "upstream request failed")



================================================
FILE: server/internal/api/handlers/gifs/gifs.go
================================================
package gifs_handler

import (
	"net/http"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/api/server"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
	"github.com/danielgtaylor/huma/v2"
)

type HandlerGroup struct {
	srv    *server.Server
	client *klipy.Client
}

func RegisterHandlers(srv *server.Server, client *klipy.Client, grp *huma.Group) {
	h := &HandlerGroup{
		srv:    srv,
		client: client,
	}

	huma.Register(grp, huma.Operation{
		OperationID: "get-trending-gifs",
		Summary:     "Get Trending GIFs",
		Description: "Fetch the most popular and viral GIFs",
		Path:        "/trending",
		Method:      http.MethodGet,
	}, h.GetTrending)

	huma.Register(grp, huma.Operation{
		OperationID: "search-gifs",
		Summary:     "Search GIFs",
		Description: "Search GIFs by keyword or phrase",
		Path:        "/search",
		Method:      http.MethodGet,
	}, h.Search)

	huma.Register(grp, huma.Operation{
		OperationID: "get-gif-categories",
		Summary:     "Get GIF Categories",
		Description: "Retrieve curated categories for GIFs",
		Path:        "/categories",
		Method:      http.MethodGet,
	}, h.GetCategories)

	huma.Register(grp, huma.Operation{
		OperationID: "get-recent-gifs",
		Summary:     "Get Recent GIFs",
		Description: "Retrieve recently used GIFs for a user",
		Path:        "/recent/{customer_id}",
		Method:      http.MethodGet,
	}, h.GetRecent)

	huma.Register(grp, huma.Operation{
		OperationID: "get-gif-items",
		Summary:     "Get GIF Items",
		Description: "Retrieve specific GIFs by IDs or slugs",
		Path:        "/items",
		Method:      http.MethodGet,
	}, h.GetItems)

	huma.Register(grp, huma.Operation{
		OperationID: "delete-recent-gif",
		Summary:     "Hide GIF from Recent",
		Description: "Remove a GIF from a user's recent list",
		Path:        "/recent/{customer_id}",
		Method:      http.MethodDelete,
	}, h.DeleteRecent)

	huma.Register(grp, huma.Operation{
		OperationID: "share-gif",
		Summary:     "Share GIF",
		Description: "Log when a user shares a GIF",
		Path:        "/share/{slug}",
		Method:      http.MethodPost,
	}, h.Share)

	huma.Register(grp, huma.Operation{
		OperationID: "report-gif",
		Summary:     "Report GIF",
		Description: "Report a GIF for inappropriate content",
		Path:        "/report/{slug}",
		Method:      http.MethodPost,
	}, h.Report)
}



================================================
FILE: server/internal/api/handlers/gifs/items.go
================================================
package gifs_handler

import (
	"context"
	"encoding/json"
)

type ItemsInput struct {
	IDs   string `query:"ids" doc:"Comma-separated list of GIF IDs"`
	Slugs string `query:"slugs" doc:"Comma-separated list of GIF slugs"`
}

type ItemsOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetItems(ctx context.Context, input *ItemsInput) (*ItemsOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.GetItems(ctx, input.IDs, input.Slugs)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &ItemsOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/gifs/recent.go
================================================
package gifs_handler

import (
	"context"
	"encoding/json"
)

type RecentInput struct {
	CustomerID string `path:"customer_id" required:"true" doc:"Unique user identifier"`
	Page       int    `query:"page" minimum:"1" default:"1" doc:"Page number"`
	PerPage    int    `query:"per_page" minimum:"1" maximum:"32" default:"10" doc:"Items per page"`
}

type RecentOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetRecent(ctx context.Context, input *RecentInput) (*RecentOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.GetRecent(ctx, input.CustomerID, input.Page, input.PerPage)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &RecentOutput{Body: resp}, nil
}

type DeleteRecentInput struct {
	CustomerID string `path:"customer_id" required:"true" doc:"Unique user identifier"`
	Slug       string `query:"slug" required:"true" doc:"GIF slug or ID to remove"`
}

type DeleteRecentOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) DeleteRecent(ctx context.Context, input *DeleteRecentInput) (*DeleteRecentOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.DeleteRecent(ctx, input.CustomerID, input.Slug)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &DeleteRecentOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/gifs/report.go
================================================
package gifs_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type ReportInput struct {
	Slug       string `path:"slug" required:"true" doc:"GIF slug or ID"`
	CustomerID string `json:"customer_id" required:"true" doc:"Unique user identifier"`
	Reason     string `json:"reason" required:"true" enum:"nudity,violence,hate_speech,harassment,spam,misinformation,copyright,offensive,illegal,broken,low_quality,not_relevant,impersonation,other" doc:"Reason for reporting"`
}

type ReportOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) Report(ctx context.Context, input *ReportInput) (*ReportOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.ReportParams{
		CustomerID: input.CustomerID,
		Reason:     input.Reason,
	}

	resp, err := h.client.Report(ctx, input.Slug, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &ReportOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/gifs/search.go
================================================
package gifs_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type SearchInput struct {
	Page          int    `query:"page" minimum:"1" default:"1" doc:"Page number"`
	PerPage       int    `query:"per_page" minimum:"8" maximum:"50" default:"24" doc:"Items per page"`
	Query         string `query:"q" required:"true" doc:"Search keyword"`
	CustomerID    string `query:"customer_id" required:"true" doc:"Unique user identifier"`
	Locale        string `query:"locale" doc:"Country code (ISO 3166 Alpha-2)"`
	ContentFilter string `query:"content_filter" enum:"off,low,medium,high" doc:"Content safety filter level"`
	FormatFilter  string `query:"format_filter" doc:"Comma-separated formats: gif, webp, jpg, mp4, webm"`
}

type SearchOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) Search(ctx context.Context, input *SearchInput) (*SearchOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.SearchParams{
		Page:          input.Page,
		PerPage:       input.PerPage,
		Query:         input.Query,
		CustomerID:    input.CustomerID,
		Locale:        input.Locale,
		ContentFilter: input.ContentFilter,
		FormatFilter:  input.FormatFilter,
	}

	resp, err := h.client.Search(ctx, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &SearchOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/gifs/share.go
================================================
package gifs_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type ShareInput struct {
	Slug       string `path:"slug" required:"true" doc:"GIF slug or ID"`
	CustomerID string `json:"customer_id" required:"true" doc:"Unique user identifier"`
	Query      string `json:"q" required:"true" doc:"Search string that led to this share"`
}

type ShareOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) Share(ctx context.Context, input *ShareInput) (*ShareOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.ShareParams{
		CustomerID: input.CustomerID,
		Query:      input.Query,
	}

	resp, err := h.client.Share(ctx, input.Slug, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &ShareOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/gifs/trending.go
================================================
package gifs_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type TrendingInput struct {
	Page         int    `query:"page" minimum:"1" default:"1" doc:"Page number"`
	PerPage      int    `query:"per_page" minimum:"1" maximum:"50" default:"24" doc:"Items per page"`
	CustomerID   string `query:"customer_id" required:"true" doc:"Unique user identifier"`
	Locale       string `query:"locale" doc:"Country code (ISO 3166 Alpha-2)"`
	FormatFilter string `query:"format_filter" doc:"Comma-separated formats: gif, webp, jpg, mp4, webm"`
}

type TrendingOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetTrending(ctx context.Context, input *TrendingInput) (*TrendingOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.TrendingParams{
		Page:         input.Page,
		PerPage:      input.PerPage,
		CustomerID:   input.CustomerID,
		Locale:       input.Locale,
		FormatFilter: input.FormatFilter,
	}

	resp, err := h.client.GetTrending(ctx, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &TrendingOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/plugins/errors.go
================================================
package plugins_handler

import "github.com/danielgtaylor/huma/v2"

var ErrCacheNotReady = huma.Error503ServiceUnavailable("plugin cache is warming up")



================================================
FILE: server/internal/api/handlers/plugins/list.go
================================================
package plugins_handler

import (
	"context"
	"math/rand"
	"reflect"
	"sort"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/models"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/services/registry"
	"github.com/danielgtaylor/huma/v2"
)

type PluginSortBy string

const (
	SortByUpdatedAt PluginSortBy = "updated_at"
	SortByName      PluginSortBy = "name"
	SortByRandom    PluginSortBy = "random"
)

func (u PluginSortBy) Schema(r huma.Registry) *huma.Schema {
	if r.Map()["PluginSortBy"] == nil {
		schemaRef := r.Schema(reflect.TypeOf(""), true, "PluginSortBy")
		schemaRef.Title = "PluginSortBy"
		schemaRef.Enum = append(schemaRef.Enum, []any{
			string(SortByUpdatedAt),
			string(SortByName),
			string(SortByRandom),
		}...)
		r.Map()["PluginSortBy"] = schemaRef
	}
	return &huma.Schema{Ref: "#/components/schemas/PluginSortBy"}
}

type ListPluginsInput struct {
	Category   string       `query:"category" doc:"Filter by category"`
	Compositor string       `query:"compositor" doc:"Filter by compositor (niri, hyprland, any)"`
	FirstParty bool         `query:"firstParty" doc:"Only show first-party plugins"`
	Capability string       `query:"capability" doc:"Filter by capability"`
	SortBy     PluginSortBy `query:"sortBy" doc:"Sort plugins by field"`
}

type ListPluginsResponse struct {
	Body struct {
		Plugins []models.Plugin `json:"plugins"`
		Count   int             `json:"count"`
	}
}

func (self *HandlerGroup) GetPlugins(ctx context.Context, input *ListPluginsInput) (*ListPluginsResponse, error) {
	if self.srv.PluginCache == nil || !self.srv.PluginCache.IsReady() {
		return nil, ErrCacheNotReady
	}

	filterOpts := registry.FilterOptions{
		Category:   input.Category,
		Compositor: input.Compositor,
		FirstParty: input.FirstParty,
		Capability: input.Capability,
	}

	plugins := self.srv.PluginCache.FilterPlugins(filterOpts)

	sortBy := input.SortBy
	if sortBy == "" {
		sortBy = SortByUpdatedAt
	}

	switch sortBy {
	case SortByUpdatedAt:
		sort.Slice(plugins, func(i, j int) bool {
			return plugins[i].UpdatedAt.After(plugins[j].UpdatedAt)
		})
	case SortByName:
		sort.Slice(plugins, func(i, j int) bool {
			return plugins[i].Name < plugins[j].Name
		})
	case SortByRandom:
		rand.Shuffle(len(plugins), func(i, j int) {
			plugins[i], plugins[j] = plugins[j], plugins[i]
		})
	}

	resp := &ListPluginsResponse{}
	resp.Body.Plugins = plugins
	resp.Body.Count = len(plugins)

	return resp, nil
}



================================================
FILE: server/internal/api/handlers/plugins/plugins.go
================================================
package plugins_handler

// Handles initial bootstrapping requirements

import (
	"net/http"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/api/server"
	"github.com/danielgtaylor/huma/v2"
)

type HandlerGroup struct {
	srv       *server.Server
	setupDone bool
}

func RegisterHandlers(server *server.Server, grp *huma.Group) {
	handlers := &HandlerGroup{
		srv: server,
	}

	huma.Register(
		grp,
		huma.Operation{
			OperationID: "get-plugins",
			Summary:     "Get All Plugins",
			Description: "Get All Plugins from the Dank Linux Registry",
			Path:        "",
			Method:      http.MethodGet,
		},
		handlers.GetPlugins,
	)
}



================================================
FILE: server/internal/api/handlers/stickers/categories.go
================================================
package stickers_handler

import (
	"context"
	"encoding/json"
)

type CategoriesInput struct {
	Locale string `query:"locale" doc:"Language in xx_YY format (ISO 639-1 + ISO 3166-1)"`
}

type CategoriesOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetCategories(ctx context.Context, input *CategoriesInput) (*CategoriesOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.GetStickersCategories(ctx, input.Locale)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &CategoriesOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/stickers/errors.go
================================================
package stickers_handler

import (
	"net/http"

	"github.com/danielgtaylor/huma/v2"
)

var ErrClientNotConfigured = huma.Error503ServiceUnavailable("klipy client not configured")

var ErrUpstreamRequest = huma.NewError(http.StatusBadGateway, "upstream request failed")



================================================
FILE: server/internal/api/handlers/stickers/items.go
================================================
package stickers_handler

import (
	"context"
	"encoding/json"
)

type ItemsInput struct {
	IDs   string `query:"ids" doc:"Comma-separated list of sticker IDs"`
	Slugs string `query:"slugs" doc:"Comma-separated list of sticker slugs"`
}

type ItemsOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetItems(ctx context.Context, input *ItemsInput) (*ItemsOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.GetStickersItems(ctx, input.IDs, input.Slugs)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &ItemsOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/stickers/recent.go
================================================
package stickers_handler

import (
	"context"
	"encoding/json"
)

type RecentInput struct {
	CustomerID string `path:"customer_id" required:"true" doc:"Unique user identifier"`
	Page       int    `query:"page" minimum:"1" default:"1" doc:"Page number"`
	PerPage    int    `query:"per_page" minimum:"1" maximum:"32" default:"10" doc:"Items per page"`
}

type RecentOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetRecent(ctx context.Context, input *RecentInput) (*RecentOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.GetStickersRecent(ctx, input.CustomerID, input.Page, input.PerPage)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &RecentOutput{Body: resp}, nil
}

type DeleteRecentInput struct {
	CustomerID string `path:"customer_id" required:"true" doc:"Unique user identifier"`
	Slug       string `query:"slug" required:"true" doc:"Sticker slug or ID to remove"`
}

type DeleteRecentOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) DeleteRecent(ctx context.Context, input *DeleteRecentInput) (*DeleteRecentOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	resp, err := h.client.DeleteStickersRecent(ctx, input.CustomerID, input.Slug)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &DeleteRecentOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/stickers/report.go
================================================
package stickers_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type ReportInput struct {
	Slug       string `path:"slug" required:"true" doc:"Sticker slug or ID"`
	CustomerID string `json:"customer_id" required:"true" doc:"Unique user identifier"`
	Reason     string `json:"reason" required:"true" enum:"nudity,violence,hate_speech,harassment,spam,misinformation,copyright,offensive,illegal,broken,low_quality,not_relevant,impersonation,other" doc:"Reason for reporting"`
}

type ReportOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) Report(ctx context.Context, input *ReportInput) (*ReportOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.ReportParams{
		CustomerID: input.CustomerID,
		Reason:     input.Reason,
	}

	resp, err := h.client.ReportSticker(ctx, input.Slug, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &ReportOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/stickers/search.go
================================================
package stickers_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type SearchInput struct {
	Page          int    `query:"page" minimum:"1" default:"1" doc:"Page number"`
	PerPage       int    `query:"per_page" minimum:"8" maximum:"50" default:"24" doc:"Items per page"`
	Query         string `query:"q" required:"true" doc:"Search keyword"`
	CustomerID    string `query:"customer_id" required:"true" doc:"Unique user identifier"`
	Locale        string `query:"locale" doc:"Country code (ISO 3166 Alpha-2)"`
	ContentFilter string `query:"content_filter" enum:"off,low,medium,high" doc:"Content safety filter level"`
	FormatFilter  string `query:"format_filter" doc:"Comma-separated formats: gif, webp, jpg, mp4, webm"`
}

type SearchOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) Search(ctx context.Context, input *SearchInput) (*SearchOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.SearchParams{
		Page:          input.Page,
		PerPage:       input.PerPage,
		Query:         input.Query,
		CustomerID:    input.CustomerID,
		Locale:        input.Locale,
		ContentFilter: input.ContentFilter,
		FormatFilter:  input.FormatFilter,
	}

	resp, err := h.client.SearchStickers(ctx, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &SearchOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/stickers/share.go
================================================
package stickers_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type ShareInput struct {
	Slug       string `path:"slug" required:"true" doc:"Sticker slug or ID"`
	CustomerID string `json:"customer_id" required:"true" doc:"Unique user identifier"`
	Query      string `json:"q" required:"true" doc:"Search string that led to this share"`
}

type ShareOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) Share(ctx context.Context, input *ShareInput) (*ShareOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.ShareParams{
		CustomerID: input.CustomerID,
		Query:      input.Query,
	}

	resp, err := h.client.ShareSticker(ctx, input.Slug, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &ShareOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/stickers/stickers.go
================================================
package stickers_handler

import (
	"net/http"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/api/server"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
	"github.com/danielgtaylor/huma/v2"
)

type HandlerGroup struct {
	srv    *server.Server
	client *klipy.Client
}

func RegisterHandlers(srv *server.Server, client *klipy.Client, grp *huma.Group) {
	h := &HandlerGroup{
		srv:    srv,
		client: client,
	}

	huma.Register(grp, huma.Operation{
		OperationID: "get-trending-stickers",
		Summary:     "Get Trending Stickers",
		Description: "Fetch the most popular stickers",
		Path:        "/trending",
		Method:      http.MethodGet,
	}, h.GetTrending)

	huma.Register(grp, huma.Operation{
		OperationID: "search-stickers",
		Summary:     "Search Stickers",
		Description: "Search stickers by keyword or phrase",
		Path:        "/search",
		Method:      http.MethodGet,
	}, h.Search)

	huma.Register(grp, huma.Operation{
		OperationID: "get-sticker-categories",
		Summary:     "Get Sticker Categories",
		Description: "Retrieve curated categories for stickers",
		Path:        "/categories",
		Method:      http.MethodGet,
	}, h.GetCategories)

	huma.Register(grp, huma.Operation{
		OperationID: "get-recent-stickers",
		Summary:     "Get Recent Stickers",
		Description: "Retrieve recently used stickers for a user",
		Path:        "/recent/{customer_id}",
		Method:      http.MethodGet,
	}, h.GetRecent)

	huma.Register(grp, huma.Operation{
		OperationID: "get-sticker-items",
		Summary:     "Get Sticker Items",
		Description: "Retrieve specific stickers by IDs or slugs",
		Path:        "/items",
		Method:      http.MethodGet,
	}, h.GetItems)

	huma.Register(grp, huma.Operation{
		OperationID: "delete-recent-sticker",
		Summary:     "Hide Sticker from Recent",
		Description: "Remove a sticker from a user's recent list",
		Path:        "/recent/{customer_id}",
		Method:      http.MethodDelete,
	}, h.DeleteRecent)

	huma.Register(grp, huma.Operation{
		OperationID: "share-sticker",
		Summary:     "Share Sticker",
		Description: "Log when a user shares a sticker",
		Path:        "/share/{slug}",
		Method:      http.MethodPost,
	}, h.Share)

	huma.Register(grp, huma.Operation{
		OperationID: "report-sticker",
		Summary:     "Report Sticker",
		Description: "Report a sticker for inappropriate content",
		Path:        "/report/{slug}",
		Method:      http.MethodPost,
	}, h.Report)
}



================================================
FILE: server/internal/api/handlers/stickers/trending.go
================================================
package stickers_handler

import (
	"context"
	"encoding/json"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/klipy"
)

type TrendingInput struct {
	Page         int    `query:"page" minimum:"1" default:"1" doc:"Page number"`
	PerPage      int    `query:"per_page" minimum:"1" maximum:"50" default:"24" doc:"Items per page"`
	CustomerID   string `query:"customer_id" required:"true" doc:"Unique user identifier"`
	Locale       string `query:"locale" doc:"Country code (ISO 3166 Alpha-2)"`
	FormatFilter string `query:"format_filter" doc:"Comma-separated formats: gif, webp, jpg, mp4, webm"`
}

type TrendingOutput struct {
	Body json.RawMessage
}

func (h *HandlerGroup) GetTrending(ctx context.Context, input *TrendingInput) (*TrendingOutput, error) {
	if h.client == nil {
		return nil, ErrClientNotConfigured
	}

	params := klipy.TrendingParams{
		Page:         input.Page,
		PerPage:      input.PerPage,
		CustomerID:   input.CustomerID,
		Locale:       input.Locale,
		FormatFilter: input.FormatFilter,
	}

	resp, err := h.client.GetStickersTrending(ctx, params)
	if err != nil {
		return nil, ErrUpstreamRequest
	}

	return &TrendingOutput{Body: resp}, nil
}



================================================
FILE: server/internal/api/handlers/themes/errors.go
================================================
package themes_handler

import "github.com/danielgtaylor/huma/v2"

var ErrCacheNotReady = huma.Error503ServiceUnavailable("theme cache is warming up")



================================================
FILE: server/internal/api/handlers/themes/list.go
================================================
package themes_handler

import (
	"context"
	"math/rand"
	"reflect"
	"sort"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/models"
	"github.com/danielgtaylor/huma/v2"
)

type ThemeSortBy string

const (
	SortByUpdatedAt ThemeSortBy = "updated_at"
	SortByName      ThemeSortBy = "name"
	SortByRandom    ThemeSortBy = "random"
)

func (u ThemeSortBy) Schema(r huma.Registry) *huma.Schema {
	if r.Map()["ThemeSortBy"] != nil {
		return &huma.Schema{Ref: "#/components/schemas/ThemeSortBy"}
	}

	schemaRef := r.Schema(reflect.TypeOf(""), true, "ThemeSortBy")
	schemaRef.Title = "ThemeSortBy"
	schemaRef.Enum = append(schemaRef.Enum, []any{
		string(SortByUpdatedAt),
		string(SortByName),
		string(SortByRandom),
	}...)
	r.Map()["ThemeSortBy"] = schemaRef
	return &huma.Schema{Ref: "#/components/schemas/ThemeSortBy"}
}

type ListThemesInput struct {
	SortBy ThemeSortBy `query:"sortBy" doc:"Sort themes by field"`
}

type ListThemesResponse struct {
	Body struct {
		Themes []models.Theme `json:"themes"`
		Count  int            `json:"count"`
	}
}

func (h *HandlerGroup) GetThemes(ctx context.Context, input *ListThemesInput) (*ListThemesResponse, error) {
	if h.srv.ThemeCache == nil || !h.srv.ThemeCache.IsReady() {
		return nil, ErrCacheNotReady
	}

	themes := h.srv.ThemeCache.GetThemes()

	sortBy := input.SortBy
	if sortBy == "" {
		sortBy = SortByUpdatedAt
	}

	switch sortBy {
	case SortByName:
		sort.Slice(themes, func(i, j int) bool {
			return themes[i].Name < themes[j].Name
		})
	case SortByRandom:
		rand.Shuffle(len(themes), func(i, j int) {
			themes[i], themes[j] = themes[j], themes[i]
		})
	default:
		sort.Slice(themes, func(i, j int) bool {
			return themes[i].UpdatedAt.After(themes[j].UpdatedAt)
		})
	}

	resp := &ListThemesResponse{}
	resp.Body.Themes = themes
	resp.Body.Count = len(themes)

	return resp, nil
}



================================================
FILE: server/internal/api/handlers/themes/themes.go
================================================
package themes_handler

import (
	"net/http"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/api/server"
	"github.com/danielgtaylor/huma/v2"
)

type HandlerGroup struct {
	srv *server.Server
}

func RegisterHandlers(server *server.Server, grp *huma.Group) {
	handlers := &HandlerGroup{
		srv: server,
	}

	huma.Register(
		grp,
		huma.Operation{
			OperationID: "get-themes",
			Summary:     "Get All Themes",
			Description: "Get All Themes from the Dank Linux Registry",
			Path:        "",
			Method:      http.MethodGet,
		},
		handlers.GetThemes,
	)
}



================================================
FILE: server/internal/api/middleware/logger.go
================================================
package middleware

// Log middleware from go-chi
// https://github.com/go-chi/chi/blob/d32a83448b5f43e42bc96487c6b0b3667a92a2e4/middleware/logger.go
// Modified for our custom logger

import (
	"bytes"
	"context"
	"net/http"
	"runtime"
	"time"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/log"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/utils"
)

// for defining context keys was copied from Go 1.7's new use of context in net/http.
type contextKey struct {
	name string
}

var (
	// LogEntryCtxKey is the context.Context key to store the request log entry.
	LogEntryCtxKey = &contextKey{"LogEntry"}

	// DefaultLogger is called by the Logger middleware handler to log each request.
	// Its made a package-level variable so that it can be reconfigured for custom
	// logging configurations.
	DefaultLogger func(next http.Handler) http.Handler
)

// Logger is a middleware that logs the start and end of each request, along
// with some useful data about what was requested, what the response status was,
// and how long it took to return. When standard output is a TTY, Logger will
// print in color, otherwise it will print in black and white. Logger prints a
// request ID if one is provided.
//
// Alternatively, look at https://github.com/goware/httplog for a more in-depth
// http logger with structured logging support.
//
// IMPORTANT NOTE: Logger should go before any other middleware that may change
// the response, such as middleware.Recoverer. Example:
//
//	r := chi.NewRouter()
//	r.Use(middleware.Logger)        // <--<< Logger should come before Recoverer
//	r.Use(middleware.Recoverer)
//	r.Get("/", handler)
func Logger(next http.Handler) http.Handler {
	return DefaultLogger(next)
}

// RequestLogger returns a logger handler using a custom LogFormatter.
func RequestLogger(f LogFormatter) func(next http.Handler) http.Handler {
	return func(next http.Handler) http.Handler {
		fn := func(w http.ResponseWriter, r *http.Request) {
			entry := f.NewLogEntry(r)
			ww := NewWrapResponseWriter(w, r.ProtoMajor)

			t1 := time.Now()
			defer func() {
				entry.Write(ww.Status(), ww.BytesWritten(), ww.Header(), time.Since(t1), nil)
			}()

			next.ServeHTTP(ww, WithLogEntry(r, entry))
		}
		return http.HandlerFunc(fn)
	}
}

// LogFormatter initiates the beginning of a new LogEntry per request.
// See DefaultLogFormatter for an example implementation.
type LogFormatter interface {
	NewLogEntry(r *http.Request) LogEntry
}

// LogEntry records the final log when a request completes.
// See defaultLogEntry for an example implementation.
type LogEntry interface {
	Write(status, bytes int, header http.Header, elapsed time.Duration, extra interface{})
}

// GetLogEntry returns the in-context LogEntry for a request.
func GetLogEntry(r *http.Request) LogEntry {
	entry, _ := r.Context().Value(LogEntryCtxKey).(LogEntry)
	return entry
}

// WithLogEntry sets the in-context LogEntry for a request.
func WithLogEntry(r *http.Request, entry LogEntry) *http.Request {
	r = r.WithContext(context.WithValue(r.Context(), LogEntryCtxKey, entry))
	return r
}

// DefaultLogFormatter is a simple logger that implements a LogFormatter.
type DefaultLogFormatter struct {
	NoColor bool
}

// NewLogEntry creates a new LogEntry for the request.
func (l *DefaultLogFormatter) NewLogEntry(r *http.Request) LogEntry {
	useColor := !l.NoColor
	entry := &defaultLogEntry{
		DefaultLogFormatter: l,
		request:             r,
		buf:                 &bytes.Buffer{},
		useColor:            useColor,
	}

	reqID := GetReqID(r.Context())
	if reqID != "" {
		cW(entry.buf, useColor, nYellow, "[%s] ", reqID)
	}
	cW(entry.buf, useColor, nCyan, "\"")
	cW(entry.buf, useColor, bMagenta, "%s ", r.Method)

	scheme := "http"
	if r.TLS != nil {
		scheme = "https"
	}
	cW(entry.buf, useColor, nCyan, "%s://%s%s %s\" ", scheme, r.Host, r.RequestURI, r.Proto)

	entry.buf.WriteString("from ")
	entry.buf.WriteString(utils.GetIPAddress(r))
	entry.buf.WriteString(" - ")

	return entry
}

type defaultLogEntry struct {
	*DefaultLogFormatter
	request  *http.Request
	buf      *bytes.Buffer
	useColor bool
}

func (l *defaultLogEntry) Write(status, bytes int, header http.Header, elapsed time.Duration, extra interface{}) {
	switch {
	case status < 200:
		cW(l.buf, l.useColor, bBlue, "%03d", status)
	case status < 300:
		cW(l.buf, l.useColor, bGreen, "%03d", status)
	case status < 400:
		cW(l.buf, l.useColor, bCyan, "%03d", status)
	case status < 500:
		cW(l.buf, l.useColor, bYellow, "%03d", status)
	default:
		cW(l.buf, l.useColor, bRed, "%03d", status)
	}

	cW(l.buf, l.useColor, bBlue, " %dB", bytes)

	l.buf.WriteString(" in ")

	elapsedMillis := elapsed.Truncate(time.Millisecond)

	if elapsed < 500*time.Millisecond {
		cW(l.buf, l.useColor, nGreen, "%s", elapsedMillis)
	} else if elapsed < 5*time.Second {
		cW(l.buf, l.useColor, nYellow, "%s", elapsedMillis)
	} else {
		cW(l.buf, l.useColor, nRed, "%s", elapsedMillis)
	}

	log.Infof("%s", l.buf.String())
}

func init() {
	color := true
	if runtime.GOOS == "windows" {
		color = false
	}
	DefaultLogger = RequestLogger(&DefaultLogFormatter{NoColor: !color})
}



================================================
FILE: server/internal/api/middleware/ratelimit.go
================================================
package middleware

import (
	"net/http"
	"sync"
	"time"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/utils"
	"github.com/danielgtaylor/huma/v2"
)

type rateLimitEntry struct {
	tokens    float64
	lastCheck time.Time
}

type RateLimiter struct {
	mu         sync.RWMutex
	entries    map[string]*rateLimitEntry
	rate       float64
	burst      float64
	cleanupInt time.Duration
}

func NewRateLimiter(requestsPerSecond float64, burst int) *RateLimiter {
	rl := &RateLimiter{
		entries:    make(map[string]*rateLimitEntry),
		rate:       requestsPerSecond,
		burst:      float64(burst),
		cleanupInt: 5 * time.Minute,
	}
	go rl.cleanup()
	return rl
}

func (rl *RateLimiter) cleanup() {
	ticker := time.NewTicker(rl.cleanupInt)
	for range ticker.C {
		rl.mu.Lock()
		cutoff := time.Now().Add(-rl.cleanupInt)
		for ip, entry := range rl.entries {
			if entry.lastCheck.Before(cutoff) {
				delete(rl.entries, ip)
			}
		}
		rl.mu.Unlock()
	}
}

func (rl *RateLimiter) Allow(ip string) bool {
	rl.mu.Lock()
	defer rl.mu.Unlock()

	now := time.Now()
	entry, exists := rl.entries[ip]

	if !exists {
		rl.entries[ip] = &rateLimitEntry{
			tokens:    rl.burst - 1,
			lastCheck: now,
		}
		return true
	}

	elapsed := now.Sub(entry.lastCheck).Seconds()
	entry.tokens += elapsed * rl.rate
	if entry.tokens > rl.burst {
		entry.tokens = rl.burst
	}
	entry.lastCheck = now

	if entry.tokens < 1 {
		return false
	}

	entry.tokens--
	return true
}

func (rl *RateLimiter) Middleware(next http.Handler) http.Handler {
	return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		ip := utils.GetIPAddress(r)

		if !rl.Allow(ip) {
			w.Header().Set("Content-Type", "application/json")
			w.Header().Set("Retry-After", "1")
			w.WriteHeader(http.StatusTooManyRequests)
			w.Write([]byte(`{"error":"rate limit exceeded","retry_after":1}`))
			return
		}

		next.ServeHTTP(w, r)
	})
}

func (rl *RateLimiter) HumaMiddleware(ctx huma.Context, next func(huma.Context)) {
	ip := utils.GetIPAddressFromHeaders(ctx)

	if !rl.Allow(ip) {
		ctx.SetHeader("Content-Type", "application/json")
		ctx.SetHeader("Retry-After", "1")
		ctx.SetStatus(http.StatusTooManyRequests)
		ctx.BodyWriter().Write([]byte(`{"error":"rate limit exceeded","retry_after":1}`))
		return
	}

	next(ctx)
}



================================================
FILE: server/internal/api/middleware/realip.go
================================================
package middleware

import (
	"net"
	"net/http"
	"strings"
)

var cloudflareIP = http.CanonicalHeaderKey("Cf-Connecting-IP")
var trueClientIP = http.CanonicalHeaderKey("True-Client-IP")
var xForwardedFor = http.CanonicalHeaderKey("X-Forwarded-For")
var xRealIP = http.CanonicalHeaderKey("X-Real-IP")

// RealIP is a middleware that sets a http.Request's RemoteAddr to the results
// of parsing either the True-Client-IP, X-Real-IP or the X-Forwarded-For headers
// (in that order).
//
// This middleware should be inserted fairly early in the middleware stack to
// ensure that subsequent layers (e.g., request loggers) which examine the
// RemoteAddr will see the intended value.
//
// You should only use this middleware if you can trust the headers passed to
// you (in particular, the three headers this middleware uses), for example
// because you have placed a reverse proxy like HAProxy or nginx in front of
// chi. If your reverse proxies are configured to pass along arbitrary header
// values from the client, or if you use this middleware without a reverse
// proxy, malicious clients will be able to make you very sad (or, depending on
// how you're using RemoteAddr, vulnerable to an attack of some sort).
func RealIP(h http.Handler) http.Handler {
	fn := func(w http.ResponseWriter, r *http.Request) {
		if rip := realIP(r); rip != "" {
			r.RemoteAddr = rip
		}
		h.ServeHTTP(w, r)
	}

	return http.HandlerFunc(fn)
}

func realIP(r *http.Request) string {
	var ip string

	if cip := r.Header.Get(cloudflareIP); cip != "" {
		ip = cip
	} else if tcip := r.Header.Get(trueClientIP); tcip != "" {
		ip = tcip
	} else if xrip := r.Header.Get(xRealIP); xrip != "" {
		ip = xrip
	} else if xff := r.Header.Get(xForwardedFor); xff != "" {
		i := strings.Index(xff, ",")
		if i == -1 {
			i = len(xff)
		}
		ip = xff[:i]
	}
	if ip == "" || net.ParseIP(ip) == nil {
		return ""
	}
	return ip
}



================================================
FILE: server/internal/api/middleware/request_id.go
================================================
// From go-chi
// https://github.com/go-chi/chi/blob/d32a83448b5f43e42bc96487c6b0b3667a92a2e4/middleware/request_id.go
package middleware

// Ported from Goji's middleware, source:
// https://github.com/zenazn/goji/tree/master/web/middleware

import (
	"context"
	"crypto/rand"
	"encoding/base64"
	"fmt"
	"net/http"
	"os"
	"strings"
	"sync/atomic"
)

// Key to use when setting the request ID.
type ctxKeyRequestID int

// RequestIDKey is the key that holds the unique request ID in a request context.
const RequestIDKey ctxKeyRequestID = 0

// RequestIDHeader is the name of the HTTP Header which contains the request id.
// Exported so that it can be changed by developers
var RequestIDHeader = "X-Request-Id"

var prefix string
var reqid uint64

// A quick note on the statistics here: we're trying to calculate the chance that
// two randomly generated base62 prefixes will collide. We use the formula from
// http://en.wikipedia.org/wiki/Birthday_problem
//
// P[m, n] \approx 1 - e^{-m^2/2n}
//
// We ballpark an upper bound for $m$ by imagining (for whatever reason) a server
// that restarts every second over 10 years, for $m = 86400 * 365 * 10 = 315360000$
//
// For a $k$ character base-62 identifier, we have $n(k) = 62^k$
//
// Plugging this in, we find $P[m, n(10)] \approx 5.75%$, which is good enough for
// our purposes, and is surely more than anyone would ever need in practice -- a
// process that is rebooted a handful of times a day for a hundred years has less
// than a millionth of a percent chance of generating two colliding IDs.

func init() {
	hostname, err := os.Hostname()
	if hostname == "" || err != nil {
		hostname = "localhost"
	}
	var buf [12]byte
	var b64 string
	for len(b64) < 10 {
		rand.Read(buf[:])
		b64 = base64.StdEncoding.EncodeToString(buf[:])
		b64 = strings.NewReplacer("+", "", "/", "").Replace(b64)
	}

	prefix = fmt.Sprintf("%s/%s", hostname, b64[0:10])
}

// RequestID is a middleware that injects a request ID into the context of each
// request. A request ID is a string of the form "host.example.com/random-0001",
// where "random" is a base62 random string that uniquely identifies this go
// process, and where the last number is an atomically incremented request
// counter.
func RequestID(next http.Handler) http.Handler {
	fn := func(w http.ResponseWriter, r *http.Request) {
		ctx := r.Context()
		requestID := r.Header.Get(RequestIDHeader)
		if requestID == "" {
			myid := atomic.AddUint64(&reqid, 1)
			requestID = fmt.Sprintf("%s-%06d", prefix, myid)
		}
		ctx = context.WithValue(ctx, RequestIDKey, requestID)
		next.ServeHTTP(w, r.WithContext(ctx))
	}
	return http.HandlerFunc(fn)
}

// GetReqID returns a request ID from the given context if one is present.
// Returns the empty string if a request ID cannot be found.
func GetReqID(ctx context.Context) string {
	if ctx == nil {
		return ""
	}
	if reqID, ok := ctx.Value(RequestIDKey).(string); ok {
		return reqID
	}
	return ""
}

// NextRequestID generates the next request ID in the sequence.
func NextRequestID() uint64 {
	return atomic.AddUint64(&reqid, 1)
}



================================================
FILE: server/internal/api/middleware/terminal.go
================================================
// From go-chi
// https://github.com/go-chi/chi/blob/d32a83448b5f43e42bc96487c6b0b3667a92a2e4/middleware/terminal.go

package middleware

// Ported from Goji's middleware, source:
// https://github.com/zenazn/goji/tree/master/web/middleware

import (
	"fmt"
	"io"
	"os"
)

var (
	// Normal colors
	nRed    = []byte{'\033', '[', '3', '1', 'm'}
	nGreen  = []byte{'\033', '[', '3', '2', 'm'}
	nYellow = []byte{'\033', '[', '3', '3', 'm'}
	nCyan   = []byte{'\033', '[', '3', '6', 'm'}
	// Bright colors
	bRed     = []byte{'\033', '[', '3', '1', ';', '1', 'm'}
	bGreen   = []byte{'\033', '[', '3', '2', ';', '1', 'm'}
	bYellow  = []byte{'\033', '[', '3', '3', ';', '1', 'm'}
	bBlue    = []byte{'\033', '[', '3', '4', ';', '1', 'm'}
	bMagenta = []byte{'\033', '[', '3', '5', ';', '1', 'm'}
	bCyan    = []byte{'\033', '[', '3', '6', ';', '1', 'm'}

	reset = []byte{'\033', '[', '0', 'm'}
)

var IsTTY bool

func init() {
	// This is sort of cheating: if stdout is a character device, we assume
	// that means it's a TTY. Unfortunately, there are many non-TTY
	// character devices, but fortunately stdout is rarely set to any of
	// them.
	//
	// We could solve this properly by pulling in a dependency on
	// code.google.com/p/go.crypto/ssh/terminal, for instance, but as a
	// heuristic for whether to print in color or in black-and-white, I'd
	// really rather not.
	fi, err := os.Stdout.Stat()
	if err == nil {
		m := os.ModeDevice | os.ModeCharDevice
		IsTTY = fi.Mode()&m == m
	}
}

// colorWrite
func cW(w io.Writer, useColor bool, color []byte, s string, args ...interface{}) {
	if IsTTY && useColor {
		w.Write(color)
	}
	fmt.Fprintf(w, s, args...)
	if IsTTY && useColor {
		w.Write(reset)
	}
}



================================================
FILE: server/internal/api/middleware/wrap_writer.go
================================================
// WrapWriter from go-chi
// https://github.com/go-chi/chi/blob/d32a83448b5f43e42bc96487c6b0b3667a92a2e4/middleware/wrap_writer.go
package middleware

// The original work was derived from Goji's middleware, source:
// https://github.com/zenazn/goji/tree/master/web/middleware

import (
	"bufio"
	"io"
	"net"
	"net/http"
)

// NewWrapResponseWriter wraps an http.ResponseWriter, returning a proxy that allows you to
// hook into various parts of the response process.
func NewWrapResponseWriter(w http.ResponseWriter, protoMajor int) WrapResponseWriter {
	_, fl := w.(http.Flusher)

	bw := basicWriter{ResponseWriter: w}

	if protoMajor == 2 {
		_, ps := w.(http.Pusher)
		if fl && ps {
			return &http2FancyWriter{bw}
		}
	} else {
		_, hj := w.(http.Hijacker)
		_, rf := w.(io.ReaderFrom)
		if fl && hj && rf {
			return &httpFancyWriter{bw}
		}
		if fl && hj {
			return &flushHijackWriter{bw}
		}
		if hj {
			return &hijackWriter{bw}
		}
	}

	if fl {
		return &flushWriter{bw}
	}

	return &bw
}

// WrapResponseWriter is a proxy around an http.ResponseWriter that allows you to hook
// into various parts of the response process.
type WrapResponseWriter interface {
	http.ResponseWriter
	// Status returns the HTTP status of the request, or 0 if one has not
	// yet been sent.
	Status() int
	// BytesWritten returns the total number of bytes sent to the client.
	BytesWritten() int
	// Tee causes the response body to be written to the given io.Writer in
	// addition to proxying the writes through. Only one io.Writer can be
	// tee'd to at once: setting a second one will overwrite the first.
	// Writes will be sent to the proxy before being written to this
	// io.Writer. It is illegal for the tee'd writer to be modified
	// concurrently with writes.
	Tee(io.Writer)
	// Unwrap returns the original proxied target.
	Unwrap() http.ResponseWriter
}

// basicWriter wraps a http.ResponseWriter that implements the minimal
// http.ResponseWriter interface.
type basicWriter struct {
	http.ResponseWriter
	wroteHeader bool
	code        int
	bytes       int
	tee         io.Writer
}

func (b *basicWriter) WriteHeader(code int) {
	if !b.wroteHeader {
		b.code = code
		b.wroteHeader = true
		b.ResponseWriter.WriteHeader(code)
	}
}

func (b *basicWriter) Write(buf []byte) (int, error) {
	b.maybeWriteHeader()
	n, err := b.ResponseWriter.Write(buf)
	if b.tee != nil {
		_, err2 := b.tee.Write(buf[:n])
		// Prefer errors generated by the proxied writer.
		if err == nil {
			err = err2
		}
	}
	b.bytes += n
	return n, err
}

func (b *basicWriter) maybeWriteHeader() {
	if !b.wroteHeader {
		b.WriteHeader(http.StatusOK)
	}
}

func (b *basicWriter) Status() int {
	return b.code
}

func (b *basicWriter) BytesWritten() int {
	return b.bytes
}

func (b *basicWriter) Tee(w io.Writer) {
	b.tee = w
}

func (b *basicWriter) Unwrap() http.ResponseWriter {
	return b.ResponseWriter
}

// flushWriter ...
type flushWriter struct {
	basicWriter
}

func (f *flushWriter) Flush() {
	f.wroteHeader = true
	fl := f.basicWriter.ResponseWriter.(http.Flusher)
	fl.Flush()
}

var _ http.Flusher = &flushWriter{}

// hijackWriter ...
type hijackWriter struct {
	basicWriter
}

func (f *hijackWriter) Hijack() (net.Conn, *bufio.ReadWriter, error) {
	hj := f.basicWriter.ResponseWriter.(http.Hijacker)
	return hj.Hijack()
}

var _ http.Hijacker = &hijackWriter{}

// flushHijackWriter ...
type flushHijackWriter struct {
	basicWriter
}

func (f *flushHijackWriter) Flush() {
	f.wroteHeader = true
	fl := f.basicWriter.ResponseWriter.(http.Flusher)
	fl.Flush()
}

func (f *flushHijackWriter) Hijack() (net.Conn, *bufio.ReadWriter, error) {
	hj := f.basicWriter.ResponseWriter.(http.Hijacker)
	return hj.Hijack()
}

var _ http.Flusher = &flushHijackWriter{}
var _ http.Hijacker = &flushHijackWriter{}

// httpFancyWriter is a HTTP writer that additionally satisfies
// http.Flusher, http.Hijacker, and io.ReaderFrom. It exists for the common case
// of wrapping the http.ResponseWriter that package http gives you, in order to
// make the proxied object support the full method set of the proxied object.
type httpFancyWriter struct {
	basicWriter
}

func (f *httpFancyWriter) Flush() {
	f.wroteHeader = true
	fl := f.basicWriter.ResponseWriter.(http.Flusher)
	fl.Flush()
}

func (f *httpFancyWriter) Hijack() (net.Conn, *bufio.ReadWriter, error) {
	hj := f.basicWriter.ResponseWriter.(http.Hijacker)
	return hj.Hijack()
}

func (f *http2FancyWriter) Push(target string, opts *http.PushOptions) error {
	return f.basicWriter.ResponseWriter.(http.Pusher).Push(target, opts)
}

func (f *httpFancyWriter) ReadFrom(r io.Reader) (int64, error) {
	if f.basicWriter.tee != nil {
		n, err := io.Copy(&f.basicWriter, r)
		f.basicWriter.bytes += int(n)
		return n, err
	}
	rf := f.basicWriter.ResponseWriter.(io.ReaderFrom)
	f.basicWriter.maybeWriteHeader()
	n, err := rf.ReadFrom(r)
	f.basicWriter.bytes += int(n)
	return n, err
}

var _ http.Flusher = &httpFancyWriter{}
var _ http.Hijacker = &httpFancyWriter{}
var _ http.Pusher = &http2FancyWriter{}
var _ io.ReaderFrom = &httpFancyWriter{}

// http2FancyWriter is a HTTP2 writer that additionally satisfies
// http.Flusher, and io.ReaderFrom. It exists for the common case
// of wrapping the http.ResponseWriter that package http gives you, in order to
// make the proxied object support the full method set of the proxied object.
type http2FancyWriter struct {
	basicWriter
}

func (f *http2FancyWriter) Flush() {
	f.wroteHeader = true
	fl := f.basicWriter.ResponseWriter.(http.Flusher)
	fl.Flush()
}

var _ http.Flusher = &http2FancyWriter{}



================================================
FILE: server/internal/api/server/server.go
================================================
package server

import (
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/services/registry"
)

type EmptyInput struct{}

type Server struct {
	PluginCache *registry.Cache
	ThemeCache  *registry.ThemeCache
}



================================================
FILE: server/internal/integrations/github/client.go
================================================
package github

import (
	"context"
	"encoding/json"
	"fmt"
	"io"
	"net/http"
	"time"
)

type Client struct {
	baseURL    string
	httpClient *http.Client
	token      string
}

func NewClient(token string) *Client {
	return NewClientWithBaseURL("https://api.github.com", token)
}

func NewClientWithBaseURL(baseURL, token string) *Client {
	return &Client{
		baseURL: baseURL,
		httpClient: &http.Client{
			Timeout: 30 * time.Second,
		},
		token: token,
	}
}

func (c *Client) do(ctx context.Context, method, path string) ([]byte, error) {
	req, err := http.NewRequestWithContext(ctx, method, c.baseURL+path, nil)
	if err != nil {
		return nil, fmt.Errorf("failed to create request: %w", err)
	}

	req.Header.Set("Accept", "application/vnd.github.v3+json")
	if c.token != "" {
		req.Header.Set("Authorization", "Bearer "+c.token)
	}

	resp, err := c.httpClient.Do(req)
	if err != nil {
		return nil, fmt.Errorf("request failed: %w", err)
	}
	defer resp.Body.Close()

	if resp.StatusCode != http.StatusOK {
		return nil, fmt.Errorf("unexpected status code: %d", resp.StatusCode)
	}

	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return nil, fmt.Errorf("failed to read response body: %w", err)
	}

	return body, nil
}

type RepoContent struct {
	Name        string `json:"name"`
	Path        string `json:"path"`
	Type        string `json:"type"`
	DownloadURL string `json:"download_url"`
	URL         string `json:"url"`
}

func (c *Client) GetRepoContents(ctx context.Context, owner, repo, path string) ([]RepoContent, error) {
	apiPath := fmt.Sprintf("/repos/%s/%s/contents/%s", owner, repo, path)

	body, err := c.do(ctx, http.MethodGet, apiPath)
	if err != nil {
		return nil, err
	}

	var contents []RepoContent
	if err := json.Unmarshal(body, &contents); err != nil {
		var singleContent RepoContent
		if err := json.Unmarshal(body, &singleContent); err != nil {
			return nil, fmt.Errorf("failed to unmarshal response: %w", err)
		}
		return []RepoContent{singleContent}, nil
	}

	return contents, nil
}

func (c *Client) GetFileContents(ctx context.Context, url string) ([]byte, error) {
	req, err := http.NewRequestWithContext(ctx, http.MethodGet, url, nil)
	if err != nil {
		return nil, fmt.Errorf("failed to create request: %w", err)
	}

	if c.token != "" {
		req.Header.Set("Authorization", "Bearer "+c.token)
	}

	resp, err := c.httpClient.Do(req)
	if err != nil {
		return nil, fmt.Errorf("request failed: %w", err)
	}
	defer resp.Body.Close()

	if resp.StatusCode != http.StatusOK {
		return nil, fmt.Errorf("unexpected status code: %d", resp.StatusCode)
	}

	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return nil, fmt.Errorf("failed to read response body: %w", err)
	}

	return body, nil
}

type Commit struct {
	Commit struct {
		Committer struct {
			Date time.Time `json:"date"`
		} `json:"committer"`
	} `json:"commit"`
}

func (c *Client) GetLastCommit(ctx context.Context, owner, repo, path string) (*Commit, error) {
	apiPath := fmt.Sprintf("/repos/%s/%s/commits?per_page=1", owner, repo)
	if path != "" {
		apiPath += fmt.Sprintf("&path=%s", path)
	}

	body, err := c.do(ctx, http.MethodGet, apiPath)
	if err != nil {
		return nil, err
	}

	var commits []Commit
	if err := json.Unmarshal(body, &commits); err != nil {
		return nil, fmt.Errorf("failed to unmarshal commits: %w", err)
	}

	if len(commits) == 0 {
		return nil, fmt.Errorf("no commits found")
	}

	return &commits[0], nil
}



================================================
FILE: server/internal/integrations/klipy/client.go
================================================
package klipy

import (
	"context"
	"encoding/json"
	"fmt"
	"io"
	"net/http"
	"net/url"
	"strings"
	"time"
)

const baseURL = "https://api.klipy.com/api/v1"

type Client struct {
	apiKey     string
	httpClient *http.Client
}

func NewClient(apiKey string) *Client {
	return &Client{
		apiKey: apiKey,
		httpClient: &http.Client{
			Timeout: 30 * time.Second,
		},
	}
}

func (c *Client) doRequest(ctx context.Context, method, path string, query url.Values, body io.Reader) (json.RawMessage, error) {
	fullURL := fmt.Sprintf("%s/%s%s", baseURL, c.apiKey, path)
	if len(query) > 0 {
		fullURL += "?" + query.Encode()
	}

	req, err := http.NewRequestWithContext(ctx, method, fullURL, body)
	if err != nil {
		return nil, fmt.Errorf("failed to create request: %w", err)
	}

	if body != nil {
		req.Header.Set("Content-Type", "application/json")
	}

	resp, err := c.httpClient.Do(req)
	if err != nil {
		return nil, fmt.Errorf("request failed: %w", err)
	}
	defer resp.Body.Close()

	respBody, err := io.ReadAll(resp.Body)
	if err != nil {
		return nil, fmt.Errorf("failed to read response: %w", err)
	}

	if resp.StatusCode >= 400 {
		return nil, fmt.Errorf("API error (status %d): %s", resp.StatusCode, string(respBody))
	}

	return respBody, nil
}

func (c *Client) GetTrending(ctx context.Context, params TrendingParams) (json.RawMessage, error) {
	query := url.Values{}
	if params.Page > 0 {
		query.Set("page", fmt.Sprintf("%d", params.Page))
	}
	if params.PerPage > 0 {
		query.Set("per_page", fmt.Sprintf("%d", params.PerPage))
	}
	query.Set("customer_id", params.CustomerID)
	if params.Locale != "" {
		query.Set("locale", params.Locale)
	}
	if params.FormatFilter != "" {
		query.Set("format_filter", params.FormatFilter)
	}

	return c.doRequest(ctx, http.MethodGet, "/gifs/trending", query, nil)
}

func (c *Client) Search(ctx context.Context, params SearchParams) (json.RawMessage, error) {
	query := url.Values{}
	if params.Page > 0 {
		query.Set("page", fmt.Sprintf("%d", params.Page))
	}
	if params.PerPage > 0 {
		query.Set("per_page", fmt.Sprintf("%d", params.PerPage))
	}
	query.Set("q", params.Query)
	query.Set("customer_id", params.CustomerID)
	if params.Locale != "" {
		query.Set("locale", params.Locale)
	}
	if params.ContentFilter != "" {
		query.Set("content_filter", params.ContentFilter)
	}
	if params.FormatFilter != "" {
		query.Set("format_filter", params.FormatFilter)
	}

	return c.doRequest(ctx, http.MethodGet, "/gifs/search", query, nil)
}

func (c *Client) GetCategories(ctx context.Context, locale string) (json.RawMessage, error) {
	query := url.Values{}
	if locale != "" {
		query.Set("locale", locale)
	}

	return c.doRequest(ctx, http.MethodGet, "/gifs/categories", query, nil)
}

func (c *Client) GetRecent(ctx context.Context, customerID string, page, perPage int) (json.RawMessage, error) {
	query := url.Values{}
	if page > 0 {
		query.Set("page", fmt.Sprintf("%d", page))
	}
	if perPage > 0 {
		query.Set("per_page", fmt.Sprintf("%d", perPage))
	}

	path := fmt.Sprintf("/gifs/recent/%s", url.PathEscape(customerID))
	return c.doRequest(ctx, http.MethodGet, path, query, nil)
}

func (c *Client) GetItems(ctx context.Context, ids, slugs string) (json.RawMessage, error) {
	query := url.Values{}
	if ids != "" {
		query.Set("ids", ids)
	}
	if slugs != "" {
		query.Set("slugs", slugs)
	}

	return c.doRequest(ctx, http.MethodGet, "/gifs/items", query, nil)
}

func (c *Client) DeleteRecent(ctx context.Context, customerID, slug string) (json.RawMessage, error) {
	query := url.Values{}
	query.Set("slug", slug)

	path := fmt.Sprintf("/gifs/recent/%s", url.PathEscape(customerID))
	return c.doRequest(ctx, http.MethodDelete, path, query, nil)
}

func (c *Client) Share(ctx context.Context, slug string, params ShareParams) (json.RawMessage, error) {
	body := fmt.Sprintf(`{"customer_id":%q,"q":%q}`, params.CustomerID, params.Query)

	path := fmt.Sprintf("/gifs/share/%s", url.PathEscape(slug))
	return c.doRequest(ctx, http.MethodPost, path, nil, strings.NewReader(body))
}

func (c *Client) Report(ctx context.Context, slug string, params ReportParams) (json.RawMessage, error) {
	body := fmt.Sprintf(`{"customer_id":%q,"reason":%q}`, params.CustomerID, params.Reason)

	path := fmt.Sprintf("/gifs/report/%s", url.PathEscape(slug))
	return c.doRequest(ctx, http.MethodPost, path, nil, strings.NewReader(body))
}

type TrendingParams struct {
	Page         int
	PerPage      int
	CustomerID   string
	Locale       string
	FormatFilter string
}

type SearchParams struct {
	Page          int
	PerPage       int
	Query         string
	CustomerID    string
	Locale        string
	ContentFilter string
	FormatFilter  string
}

type ShareParams struct {
	CustomerID string
	Query      string
}

type ReportParams struct {
	CustomerID string
	Reason     string
}

func (c *Client) GetStickersTrending(ctx context.Context, params TrendingParams) (json.RawMessage, error) {
	query := url.Values{}
	if params.Page > 0 {
		query.Set("page", fmt.Sprintf("%d", params.Page))
	}
	if params.PerPage > 0 {
		query.Set("per_page", fmt.Sprintf("%d", params.PerPage))
	}
	query.Set("customer_id", params.CustomerID)
	if params.Locale != "" {
		query.Set("locale", params.Locale)
	}
	if params.FormatFilter != "" {
		query.Set("format_filter", params.FormatFilter)
	}

	return c.doRequest(ctx, http.MethodGet, "/stickers/trending", query, nil)
}

func (c *Client) SearchStickers(ctx context.Context, params SearchParams) (json.RawMessage, error) {
	query := url.Values{}
	if params.Page > 0 {
		query.Set("page", fmt.Sprintf("%d", params.Page))
	}
	if params.PerPage > 0 {
		query.Set("per_page", fmt.Sprintf("%d", params.PerPage))
	}
	query.Set("q", params.Query)
	query.Set("customer_id", params.CustomerID)
	if params.Locale != "" {
		query.Set("locale", params.Locale)
	}
	if params.ContentFilter != "" {
		query.Set("content_filter", params.ContentFilter)
	}
	if params.FormatFilter != "" {
		query.Set("format_filter", params.FormatFilter)
	}

	return c.doRequest(ctx, http.MethodGet, "/stickers/search", query, nil)
}

func (c *Client) GetStickersCategories(ctx context.Context, locale string) (json.RawMessage, error) {
	query := url.Values{}
	if locale != "" {
		query.Set("locale", locale)
	}

	return c.doRequest(ctx, http.MethodGet, "/stickers/categories", query, nil)
}

func (c *Client) GetStickersRecent(ctx context.Context, customerID string, page, perPage int) (json.RawMessage, error) {
	query := url.Values{}
	if page > 0 {
		query.Set("page", fmt.Sprintf("%d", page))
	}
	if perPage > 0 {
		query.Set("per_page", fmt.Sprintf("%d", perPage))
	}

	path := fmt.Sprintf("/stickers/recent/%s", url.PathEscape(customerID))
	return c.doRequest(ctx, http.MethodGet, path, query, nil)
}

func (c *Client) GetStickersItems(ctx context.Context, ids, slugs string) (json.RawMessage, error) {
	query := url.Values{}
	if ids != "" {
		query.Set("ids", ids)
	}
	if slugs != "" {
		query.Set("slugs", slugs)
	}

	return c.doRequest(ctx, http.MethodGet, "/stickers/items", query, nil)
}

func (c *Client) DeleteStickersRecent(ctx context.Context, customerID, slug string) (json.RawMessage, error) {
	query := url.Values{}
	query.Set("slug", slug)

	path := fmt.Sprintf("/stickers/recent/%s", url.PathEscape(customerID))
	return c.doRequest(ctx, http.MethodDelete, path, query, nil)
}

func (c *Client) ShareSticker(ctx context.Context, slug string, params ShareParams) (json.RawMessage, error) {
	body := fmt.Sprintf(`{"customer_id":%q,"q":%q}`, params.CustomerID, params.Query)

	path := fmt.Sprintf("/stickers/share/%s", url.PathEscape(slug))
	return c.doRequest(ctx, http.MethodPost, path, nil, strings.NewReader(body))
}

func (c *Client) ReportSticker(ctx context.Context, slug string, params ReportParams) (json.RawMessage, error) {
	body := fmt.Sprintf(`{"customer_id":%q,"reason":%q}`, params.CustomerID, params.Reason)

	path := fmt.Sprintf("/stickers/report/%s", url.PathEscape(slug))
	return c.doRequest(ctx, http.MethodPost, path, nil, strings.NewReader(body))
}



================================================
FILE: server/internal/log/log.go
================================================
package log

import (
	"os"
	"strings"
	"sync"

	"github.com/charmbracelet/lipgloss"
	cblog "github.com/charmbracelet/log"
)

// Logger embeds the Charm Logger and adds Printf/Fatalf
type Logger struct{ *cblog.Logger }

// Printf routes goose/info-style logs through Infof.
func (l *Logger) Printf(format string, v ...interface{}) { l.Infof(format, v...) }

// Fatalf keeps goose’s contract of exiting the program.
func (l *Logger) Fatalf(format string, v ...interface{}) { l.Logger.Fatalf(format, v...) }

var (
	logger     *Logger
	initLogger sync.Once
)

func parseLogLevel(level string) cblog.Level {
	switch strings.ToLower(level) {
	case "debug":
		return cblog.DebugLevel
	case "info":
		return cblog.InfoLevel
	case "warn", "warning":
		return cblog.WarnLevel
	case "error":
		return cblog.ErrorLevel
	case "fatal":
		return cblog.FatalLevel
	default:
		return cblog.InfoLevel
	}
}

func GetQtLoggingRules() string {
	level := os.Getenv("DMS_LOG_LEVEL")
	if level == "" {
		level = "info"
	}

	var rules []string
	switch strings.ToLower(level) {
	case "fatal":
		rules = []string{"*.debug=false", "*.info=false", "*.warning=false", "*.critical=false"}
	case "error":
		rules = []string{"*.debug=false", "*.info=false", "*.warning=false"}
	case "warn", "warning":
		rules = []string{"*.debug=false", "*.info=false"}
	case "info":
		rules = []string{"*.debug=false"}
	case "debug":
		return ""
	default:
		rules = []string{"*.debug=false"}
	}

	return strings.Join(rules, ";")
}

// GetLogger returns a logger instance
func GetLogger() *Logger {
	initLogger.Do(func() {
		styles := cblog.DefaultStyles()
		// Attempt to match the colors used by qml/quickshell logs
		styles.Levels[cblog.FatalLevel] = lipgloss.NewStyle().
			SetString(" FATAL").
			Foreground(lipgloss.Color("1"))
		styles.Levels[cblog.ErrorLevel] = lipgloss.NewStyle().
			SetString(" ERROR").
			Foreground(lipgloss.Color("9"))
		styles.Levels[cblog.WarnLevel] = lipgloss.NewStyle().
			SetString("  WARN").
			Foreground(lipgloss.Color("3"))
		styles.Levels[cblog.InfoLevel] = lipgloss.NewStyle().
			SetString("  INFO").
			Foreground(lipgloss.Color("2"))
		styles.Levels[cblog.DebugLevel] = lipgloss.NewStyle().
			SetString(" DEBUG").
			Foreground(lipgloss.Color("4"))

		base := cblog.New(os.Stderr)
		base.SetStyles(styles)
		base.SetReportTimestamp(false)

		level := cblog.InfoLevel
		if envLevel := os.Getenv("DMS_LOG_LEVEL"); envLevel != "" {
			level = parseLogLevel(envLevel)
		}
		base.SetLevel(level)
		base.SetPrefix(" go")

		logger = &Logger{base}
	})
	return logger
}

// * Convenience wrappers

func Debug(msg interface{}, keyvals ...interface{}) { GetLogger().Logger.Debug(msg, keyvals...) }
func Debugf(format string, v ...interface{})        { GetLogger().Logger.Debugf(format, v...) }
func Info(msg interface{}, keyvals ...interface{})  { GetLogger().Logger.Info(msg, keyvals...) }
func Infof(format string, v ...interface{})         { GetLogger().Logger.Infof(format, v...) }
func Warn(msg interface{}, keyvals ...interface{})  { GetLogger().Logger.Warn(msg, keyvals...) }
func Warnf(format string, v ...interface{})         { GetLogger().Logger.Warnf(format, v...) }
func Error(msg interface{}, keyvals ...interface{}) { GetLogger().Logger.Error(msg, keyvals...) }
func Errorf(format string, v ...interface{})        { GetLogger().Logger.Errorf(format, v...) }
func Fatal(msg interface{}, keyvals ...interface{}) { GetLogger().Logger.Fatal(msg, keyvals...) }
func Fatalf(format string, v ...interface{})        { GetLogger().Logger.Fatalf(format, v...) }



================================================
FILE: server/internal/models/plugin.go
================================================
package models

import "time"

type RegistryPlugin struct {
	ID           string   `json:"id"`
	Name         string   `json:"name"`
	Capabilities []string `json:"capabilities"`
	Category     string   `json:"category"`
	Repo         string   `json:"repo"`
	Path         string   `json:"path,omitempty"`
	Author       string   `json:"author"`
	FirstParty   bool     `json:"firstParty,omitempty"`
	Featured     bool     `json:"featured,omitempty"`
	Description  string   `json:"description"`
	Dependencies []string `json:"dependencies"`
	Compositors  []string `json:"compositors"`
	Distro       []string `json:"distro"`
	Screenshot   string   `json:"screenshot,omitempty"`
	RequiresDMS  string   `json:"requires_dms,omitempty"`
}

type PluginMetadata struct {
	ID          string   `json:"id"`
	Name        string   `json:"name"`
	Description string   `json:"description"`
	Version     string   `json:"version"`
	Author      string   `json:"author"`
	Icon        string   `json:"icon"`
	FirstParty  bool     `json:"firstParty"`
	Component   string   `json:"component"`
	Settings    string   `json:"settings,omitempty"`
	Permissions []string `json:"permissions"`
}

type Plugin struct {
	ID           string    `json:"id"`
	Name         string    `json:"name"`
	Capabilities []string  `json:"capabilities"`
	Category     string    `json:"category"`
	Repo         string    `json:"repo"`
	Author       string    `json:"author"`
	FirstParty   bool      `json:"firstParty"`
	Featured     bool      `json:"featured"`
	Description  string    `json:"description"`
	Dependencies []string  `json:"dependencies"`
	Compositors  []string  `json:"compositors"`
	Distro       []string  `json:"distro"`
	Screenshot   string    `json:"screenshot"`
	RequiresDMS  string    `json:"requires_dms,omitempty"`
	Version      string    `json:"version"`
	Icon         string    `json:"icon,omitempty"`
	Permissions  []string  `json:"permissions,omitempty"`
	UpdatedAt    time.Time `json:"updated_at"`
}

type ThemeVariantOption struct {
	ID    string                 `json:"id"`
	Name  string                 `json:"name"`
	Dark  map[string]interface{} `json:"dark,omitempty"`
	Light map[string]interface{} `json:"light,omitempty"`
}

type ThemeFlavor struct {
	ID    string                 `json:"id"`
	Name  string                 `json:"name"`
	Dark  map[string]interface{} `json:"dark,omitempty"`
	Light map[string]interface{} `json:"light,omitempty"`
}

type ThemeAccent struct {
	ID     string                            `json:"id"`
	Name   string                            `json:"name"`
	Colors map[string]map[string]interface{} `json:"-"`
}

type ThemeModeDefaults struct {
	Flavor string `json:"flavor"`
	Accent string `json:"accent"`
}

type ThemeVariants struct {
	Type     string                        `json:"type,omitempty"`
	Default  string                        `json:"default,omitempty"`
	Options  []ThemeVariantOption          `json:"options,omitempty"`
	Defaults map[string]*ThemeModeDefaults `json:"defaults,omitempty"`
	Flavors  []ThemeFlavor                 `json:"flavors,omitempty"`
	Accents  []map[string]interface{}      `json:"accents,omitempty"`
}

type Theme struct {
	ID          string                 `json:"id"`
	Name        string                 `json:"name"`
	Author      string                 `json:"author"`
	Description string                 `json:"description"`
	Version     string                 `json:"version"`
	Dark        map[string]interface{} `json:"dark"`
	Light       map[string]interface{} `json:"light"`
	Variants    *ThemeVariants         `json:"variants,omitempty"`
	PreviewURL  string                 `json:"previewUrl"`
	UpdatedAt   time.Time              `json:"updated_at"`
}



================================================
FILE: server/internal/services/registry/cache.go
================================================
package registry

import (
	"context"
	"sync"
	"time"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/log"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/models"
)

type Cache struct {
	mu         sync.RWMutex
	plugins    []models.Plugin
	parser     *Parser
	lastUpdate time.Time
	ready      bool
}

func NewCache(githubToken string) *Cache {
	return &Cache{
		plugins: []models.Plugin{},
		parser:  NewParser(githubToken),
	}
}

func (c *Cache) Initialize(ctx context.Context) error {
	return c.Refresh(ctx)
}

func (c *Cache) Refresh(ctx context.Context) error {
	log.Info("Refreshing plugin cache...")

	plugins, err := c.parser.FetchPlugins(ctx)
	if err != nil {
		return err
	}

	c.mu.Lock()
	c.plugins = plugins
	c.lastUpdate = time.Now()
	c.ready = true
	c.mu.Unlock()

	log.Infof("Plugin cache refreshed with %d plugins", len(plugins))
	return nil
}

func (c *Cache) IsReady() bool {
	c.mu.RLock()
	defer c.mu.RUnlock()
	return c.ready
}

func (c *Cache) GetPlugins() []models.Plugin {
	c.mu.RLock()
	defer c.mu.RUnlock()

	pluginsCopy := make([]models.Plugin, len(c.plugins))
	copy(pluginsCopy, c.plugins)
	return pluginsCopy
}

func (c *Cache) GetLastUpdate() time.Time {
	c.mu.RLock()
	defer c.mu.RUnlock()
	return c.lastUpdate
}

type FilterOptions struct {
	Category   string
	Compositor string
	FirstParty bool
	Capability string
}

func (c *Cache) FilterPlugins(opts FilterOptions) []models.Plugin {
	plugins := c.GetPlugins()

	var filtered []models.Plugin
	for _, plugin := range plugins {
		if !matchesFilter(plugin, opts) {
			continue
		}
		filtered = append(filtered, plugin)
	}

	return filtered
}

func matchesFilter(plugin models.Plugin, opts FilterOptions) bool {
	if opts.Category != "" && plugin.Category != opts.Category {
		return false
	}

	if opts.FirstParty && !plugin.FirstParty {
		return false
	}

	if opts.Compositor != "" {
		found := false
		for _, comp := range plugin.Compositors {
			if comp == opts.Compositor || comp == "any" {
				found = true
				break
			}
		}
		if !found {
			return false
		}
	}

	if opts.Capability != "" {
		found := false
		for _, cap := range plugin.Capabilities {
			if cap == opts.Capability {
				found = true
				break
			}
		}
		if !found {
			return false
		}
	}

	return true
}



================================================
FILE: server/internal/services/registry/parser.go
================================================
package registry

import (
	"context"
	"encoding/json"
	"fmt"
	"net/url"
	"strings"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/integrations/github"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/log"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/models"
)

type Parser struct {
	token   string
	clients map[string]*github.Client
}

func NewParser(token string) *Parser {
	return &Parser{
		token:   token,
		clients: make(map[string]*github.Client),
	}
}

func (p *Parser) getClient(host string) (*github.Client, error) {
	if client, ok := p.clients[host]; ok {
		return client, nil
	}

	baseURL, err := getAPIBaseURL(host)
	if err != nil {
		return nil, err
	}

	token := ""
	if host == "github.com" {
		token = p.token
	}

	client := github.NewClientWithBaseURL(baseURL, token)
	p.clients[host] = client
	return client, nil
}

func (p *Parser) FetchPlugins(ctx context.Context) ([]models.Plugin, error) {
	registryPlugins, err := p.fetchRegistryPlugins(ctx)
	if err != nil {
		return nil, fmt.Errorf("failed to fetch registry plugins: %w", err)
	}

	var plugins []models.Plugin
	for _, regPlugin := range registryPlugins {
		plugin, err := p.enrichPlugin(ctx, regPlugin)
		if err != nil {
			log.Warnf("Skipping plugin %s: %v", regPlugin.ID, err)
			continue
		}

		plugins = append(plugins, plugin)
	}

	return plugins, nil
}

func (p *Parser) fetchRegistryPlugins(ctx context.Context) ([]models.RegistryPlugin, error) {
	client, err := p.getClient("github.com")
	if err != nil {
		return nil, err
	}

	contents, err := client.GetRepoContents(ctx, "AvengeMedia", "dms-plugin-registry", "plugins")
	if err != nil {
		return nil, fmt.Errorf("failed to get plugins directory: %w", err)
	}

	var plugins []models.RegistryPlugin
	for _, content := range contents {
		if content.Type != "file" {
			continue
		}

		if !strings.HasSuffix(content.Name, ".json") {
			continue
		}

		fileData, err := client.GetFileContents(ctx, content.DownloadURL)
		if err != nil {
			log.Warnf("Failed to fetch %s: %v", content.Name, err)
			continue
		}

		var plugin models.RegistryPlugin
		if err := json.Unmarshal(fileData, &plugin); err != nil {
			log.Warnf("Failed to parse %s: %v", content.Name, err)
			continue
		}

		plugins = append(plugins, plugin)
	}

	return plugins, nil
}

func (p *Parser) enrichPlugin(ctx context.Context, regPlugin models.RegistryPlugin) (models.Plugin, error) {
	host, owner, repo, err := parseRepoURL(regPlugin.Repo)
	if err != nil {
		return models.Plugin{}, fmt.Errorf("invalid repo URL: %w", err)
	}

	client, err := p.getClient(host)
	if err != nil {
		return models.Plugin{}, err
	}

	metadataPath := "plugin.json"
	if regPlugin.Path != "" {
		metadataPath = regPlugin.Path + "/plugin.json"
	}

	contents, err := client.GetRepoContents(ctx, owner, repo, metadataPath)
	if err != nil {
		return models.Plugin{}, fmt.Errorf("plugin.json not found or inaccessible: %w", err)
	}

	if len(contents) == 0 {
		return models.Plugin{}, fmt.Errorf("plugin.json not found")
	}

	fileData, err := client.GetFileContents(ctx, contents[0].DownloadURL)
	if err != nil {
		return models.Plugin{}, fmt.Errorf("failed to fetch plugin.json: %w", err)
	}

	var metadata models.PluginMetadata
	if err := json.Unmarshal(fileData, &metadata); err != nil {
		return models.Plugin{}, fmt.Errorf("invalid plugin.json: %w", err)
	}

	if metadata.Version == "" {
		return models.Plugin{}, fmt.Errorf("plugin.json missing version")
	}

	lastCommit, err := client.GetLastCommit(ctx, owner, repo, regPlugin.Path)
	if err != nil {
		return models.Plugin{}, fmt.Errorf("failed to fetch last commit: %w", err)
	}

	plugin := models.Plugin{
		ID:           regPlugin.ID,
		Name:         regPlugin.Name,
		Capabilities: regPlugin.Capabilities,
		Category:     regPlugin.Category,
		Repo:         regPlugin.Repo,
		Author:       regPlugin.Author,
		FirstParty:   regPlugin.FirstParty,
		Featured:     regPlugin.Featured,
		Description:  regPlugin.Description,
		Dependencies: regPlugin.Dependencies,
		Compositors:  regPlugin.Compositors,
		Distro:       regPlugin.Distro,
		Screenshot:   regPlugin.Screenshot,
		RequiresDMS:  regPlugin.RequiresDMS,
		Version:      metadata.Version,
		Icon:         metadata.Icon,
		Permissions:  metadata.Permissions,
		UpdatedAt:    lastCommit.Commit.Committer.Date,
	}

	if metadata.Author != "" {
		plugin.Author = metadata.Author
	}

	return plugin, nil
}

func parseRepoURL(repoURL string) (host, owner, repo string, err error) {
	parsedURL, err := url.Parse(repoURL)
	if err != nil {
		return "", "", "", err
	}

	parts := strings.Split(strings.Trim(parsedURL.Path, "/"), "/")
	if len(parts) < 2 {
		return "", "", "", fmt.Errorf("invalid repo URL format")
	}

	return parsedURL.Host, parts[0], parts[1], nil
}

func getAPIBaseURL(host string) (string, error) {
	switch host {
	case "github.com":
		return "https://api.github.com", nil
	case "codeberg.org":
		return "https://codeberg.org/api/v1", nil
	default:
		return "", fmt.Errorf("unsupported git host: %s", host)
	}
}



================================================
FILE: server/internal/services/registry/theme_cache.go
================================================
package registry

import (
	"context"
	"sync"
	"time"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/log"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/models"
)

type ThemeCache struct {
	mu         sync.RWMutex
	themes     []models.Theme
	parser     *Parser
	lastUpdate time.Time
	ready      bool
}

func NewThemeCache(githubToken string) *ThemeCache {
	return &ThemeCache{
		themes: []models.Theme{},
		parser: NewParser(githubToken),
	}
}

func (c *ThemeCache) Initialize(ctx context.Context) error {
	return c.Refresh(ctx)
}

func (c *ThemeCache) Refresh(ctx context.Context) error {
	log.Info("Refreshing theme cache...")

	themes, err := c.parser.FetchThemes(ctx)
	if err != nil {
		return err
	}

	c.mu.Lock()
	c.themes = themes
	c.lastUpdate = time.Now()
	c.ready = true
	c.mu.Unlock()

	log.Infof("Theme cache refreshed with %d themes", len(themes))
	return nil
}

func (c *ThemeCache) IsReady() bool {
	c.mu.RLock()
	defer c.mu.RUnlock()
	return c.ready
}

func (c *ThemeCache) GetThemes() []models.Theme {
	c.mu.RLock()
	defer c.mu.RUnlock()

	themesCopy := make([]models.Theme, len(c.themes))
	copy(themesCopy, c.themes)
	return themesCopy
}

func (c *ThemeCache) GetLastUpdate() time.Time {
	c.mu.RLock()
	defer c.mu.RUnlock()
	return c.lastUpdate
}



================================================
FILE: server/internal/services/registry/theme_parser.go
================================================
package registry

import (
	"context"
	"encoding/json"
	"fmt"

	"github.com/AvengeMedia/DankLinux-Docs/server/internal/log"
	"github.com/AvengeMedia/DankLinux-Docs/server/internal/models"
)

func (p *Parser) FetchThemes(ctx context.Context) ([]models.Theme, error) {
	client, err := p.getClient("github.com")
	if err != nil {
		return nil, err
	}

	contents, err := client.GetRepoContents(ctx, "AvengeMedia", "dms-plugin-registry", "themes")
	if err != nil {
		return nil, fmt.Errorf("failed to get themes directory: %w", err)
	}

	var themes []models.Theme
	for _, content := range contents {
		if content.Type != "dir" {
			continue
		}

		theme, err := p.fetchTheme(ctx, content.Name)
		if err != nil {
			log.Warnf("Skipping theme %s: %v", content.Name, err)
			continue
		}

		themes = append(themes, theme)
	}

	return themes, nil
}

func (p *Parser) fetchTheme(ctx context.Context, themeName string) (models.Theme, error) {
	client, err := p.getClient("github.com")
	if err != nil {
		return models.Theme{}, err
	}

	themeJSONPath := fmt.Sprintf("themes/%s/theme.json", themeName)

	contents, err := client.GetRepoContents(ctx, "AvengeMedia", "dms-plugin-registry", themeJSONPath)
	if err != nil {
		return models.Theme{}, fmt.Errorf("theme.json not found: %w", err)
	}

	if len(contents) == 0 {
		return models.Theme{}, fmt.Errorf("theme.json not found")
	}

	fileData, err := client.GetFileContents(ctx, contents[0].DownloadURL)
	if err != nil {
		return models.Theme{}, fmt.Errorf("failed to fetch theme.json: %w", err)
	}

	var theme models.Theme
	if err := json.Unmarshal(fileData, &theme); err != nil {
		return models.Theme{}, fmt.Errorf("invalid theme.json: %w", err)
	}

	if theme.ID == "" {
		return models.Theme{}, fmt.Errorf("theme.json missing id")
	}

	lastCommit, err := client.GetLastCommit(ctx, "AvengeMedia", "dms-plugin-registry", fmt.Sprintf("themes/%s", themeName))
	if err != nil {
		return models.Theme{}, fmt.Errorf("failed to fetch last commit: %w", err)
	}

	theme.PreviewURL = fmt.Sprintf("https://raw.githubusercontent.com/AvengeMedia/dms-plugin-registry/main/themes/%s/preview.svg", themeName)
	theme.UpdatedAt = lastCommit.Commit.Committer.Date

	return theme, nil
}



================================================
FILE: server/internal/utils/net.go
================================================
package utils

import "net/http"

func GetIPAddress(r *http.Request) string {
	if ip := r.Header.Get("CF-Connecting-IP"); ip != "" {
		return ip
	}
	if ip := r.Header.Get("X-Real-Ip"); ip != "" {
		return ip
	}
	if ip := r.Header.Get("X-Forwarded-For"); ip != "" {
		return ip
	}
	return r.RemoteAddr
}

type HeaderGetter interface {
	Header(name string) string
	RemoteAddr() string
}

func GetIPAddressFromHeaders(h HeaderGetter) string {
	if ip := h.Header("CF-Connecting-IP"); ip != "" {
		return ip
	}
	if ip := h.Header("X-Real-Ip"); ip != "" {
		return ip
	}
	if ip := h.Header("X-Forwarded-For"); ip != "" {
		return ip
	}
	return h.RemoteAddr()
}



================================================
FILE: src/ImageRenderers.tsx
================================================
import type { ImageRenderer, DocsPageData, BlogPageData } from '@acid-info/docusaurus-og'
import { readFileSync } from 'fs'
import { join } from 'path'
import React from 'react'

interface PagesPageData {
  route?: string
  metadata?: {
    permalink?: string
    title?: string
  }
}

const BASE_WIDTH = 1200
const BASE_HEIGHT = 630

const fonts = [
  {
    name: 'Adwaita Sans',
    data: readFileSync(
      join(__dirname, '../static/fonts/AdwaitaSans-Regular.ttf'),
    ),
    weight: 400 as const,
    style: 'normal' as const,
  },
  {
    name: 'Adwaita Sans',
    data: readFileSync(
      join(__dirname, '../static/fonts/AdwaitaSans-Medium.ttf'),
    ),
    weight: 500 as const,
    style: 'normal' as const,
  },
  {
    name: 'Adwaita Sans',
    data: readFileSync(
      join(__dirname, '../static/fonts/AdwaitaSans-SemiBold.ttf'),
    ),
    weight: 600 as const,
    style: 'normal' as const,
  },
  {
    name: 'Adwaita Sans',
    data: readFileSync(
      join(__dirname, '../static/fonts/AdwaitaSans-Bold.ttf'),
    ),
    weight: 700 as const,
    style: 'normal' as const,
  },
  {
    name: 'Adwaita Sans',
    data: readFileSync(
      join(__dirname, '../static/fonts/AdwaitaSans-ExtraBold.ttf'),
    ),
    weight: 800 as const,
    style: 'normal' as const,
  },
  {
    name: 'FiraCode Nerd Font Mono',
    data: readFileSync(
      join(__dirname, '../static/fonts/FiraCodeNerdFontMono-Regular.ttf'),
    ),
    weight: 400 as const,
    style: 'normal' as const,
  },
  {
    name: 'FiraCode Nerd Font Mono',
    data: readFileSync(
      join(__dirname, '../static/fonts/FiraCodeNerdFontMono-Bold.ttf'),
    ),
    weight: 700 as const,
    style: 'normal' as const,
  },
]

const logoPng = readFileSync(
  join(__dirname, '../static/img/path32.png')
)

const logoDataUrl = `data:image/png;base64,${logoPng.toString('base64')}`

export const docs: ImageRenderer<DocsPageData> = (data) => {
  const getCategoryFromPath = (permalink: string): string => {
    const segments = permalink.split('/').filter(Boolean)
    if (segments.length > 1 && segments[0] === 'docs') {
      const categorySlug = segments[1]
      const categoryMap: Record<string, string> = {
        'dankmaterialshell': 'DMS',
        'dankgreeter': 'DMS Greeter',
        'dgop': 'dgop',
        'danksearch': 'dsearch',
      }
      return categoryMap[categorySlug] || 'Dank Linux'
    }
    return 'Dank Linux'
  }

  const category = getCategoryFromPath(data.metadata.permalink)
  const title = data.metadata.title

  return [
    <div
      style={{
        display: 'flex',
        width: BASE_WIDTH,
        height: BASE_HEIGHT,
        background: 'linear-gradient(135deg, #1a1318 0%, #2d1b3d 100%)',
        position: 'relative',
        overflow: 'hidden',
        fontSmooth: 'always',
        WebkitFontSmoothing: 'antialiased',
        MozOsxFontSmoothing: 'grayscale',
      }}
    >
      <div
        style={{
          position: 'absolute',
          width: '100%',
          height: '100%',
          background: 'radial-gradient(circle at 20% 50%, rgba(128, 90, 213, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(208, 188, 255, 0.12) 0%, transparent 50%)',
        }}
      />

      <div
        style={{
          display: 'flex',
          flexDirection: 'column',
          width: '100%',
          height: '100%',
          padding: '60px',
          position: 'relative',
          zIndex: 1,
        }}
      >
        <img
          src={logoDataUrl}
          style={{
            position: 'absolute',
            top: '50px',
            right: '50px',
            opacity: 0.6,
            width: '120px',
            height: '120px',
          }}
        />

        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            flex: 1,
            justifyContent: 'center',
          }}
        >
          <div
            style={{
              fontSize: '54px',
              color: '#B794F4',
              fontFamily: 'Adwaita Sans',
              fontWeight: 500,
              marginLeft: '4px',
              marginBottom: '18px',
              letterSpacing: '0.5px',
            }}
          >
            {category}
          </div>

          <div
            style={{
              fontSize: '96px',
              color: '#ffffff',
              fontFamily: 'Adwaita Sans',
              fontWeight: 700,
              lineHeight: 1.15,
              maxWidth: '1000px',
            }}
          >
            {title}
          </div>
        </div>

        {/* <div
          style={{
            display: 'flex',
            alignItems: 'center',
            gap: '20px',
            borderTop: '2px solid rgba(208, 188, 255, 0.2)',
            paddingTop: '30px',
          }}
        >
          <div
            style={{
              fontSize: '36px',
              color: '#ffffff',
              fontFamily: 'Adwaita Sans',
              fontWeight: 500,
            }}
          >
            Dank Linux
          </div>
        </div> */}
      </div>
    </div>,
    {
      width: BASE_WIDTH,
      height: BASE_HEIGHT,
      fonts,
    },
  ]
}

export const pages: ImageRenderer<PagesPageData> = (data) => {
  const route = data.route || data.metadata?.permalink || '/'
  const isHomePage = route === '/'
  const isPluginsPage = route === '/plugins' || route === '/plugins/'

  if (isPluginsPage) {
    return [
      <div
        style={{
          display: 'flex',
          width: BASE_WIDTH,
          height: BASE_HEIGHT,
          background: '#000000',
          position: 'relative',
          overflow: 'hidden',
          fontSmooth: 'always',
          WebkitFontSmoothing: 'antialiased',
          MozOsxFontSmoothing: 'grayscale',
        }}
      >
        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            background: 'radial-gradient(circle at 10% 20%, rgba(128, 90, 213, 0.3) 0%, transparent 40%), radial-gradient(circle at 90% 90%, rgba(208, 188, 255, 0.05) 0%, transparent 40%), radial-gradient(circle at 50% 50%, rgba(107, 70, 193, 0.2) 0%, transparent 35%)',
          }}
        />

        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            backgroundImage: 'linear-gradient(to bottom, rgba(208, 188, 255, 0.03) 1px, transparent 1px), linear-gradient(to right, rgba(208, 188, 255, 0.03) 1px, transparent 1px)',
            backgroundSize: '50px 50px',
          }}
        />

        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            width: '100%',
            height: '100%',
            padding: '60px',
            position: 'relative',
            zIndex: 1,
            justifyContent: 'center',
            alignItems: 'center',
          }}
        >
          <div
            style={{
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              gap: '24px',
              marginBottom: '40px',
            }}
          >
            <img
              src={logoDataUrl}
              style={{
                width: '80px',
                height: '80px',
              }}
            />
            <div
              style={{
                fontSize: '48px',
                fontFamily: 'Adwaita Sans',
                fontWeight: 800,
                color: '#fffffff2',
                letterSpacing: '0.08em',
                textRendering: 'optimizeLegibility',
                fontSmooth: 'always',
                WebkitFontSmoothing: 'antialiased',
                MozOsxFontSmoothing: 'grayscale',
                lineHeight: 1,
              }}
            >
              DANK LINUX
            </div>
          </div>

          <div
            style={{
              fontSize: '96px',
              fontWeight: 800,
              letterSpacing: '-2px',
              background: 'linear-gradient(135deg, #D0BCFF 0%, #805AD5 50%, #6B46C1 100%)',
              backgroundClip: 'text',
              WebkitBackgroundClip: 'text',
              WebkitTextFillColor: 'transparent',
              color: 'transparent',
              textRendering: 'optimizeLegibility',
              fontSmooth: 'always',
              WebkitFontSmoothing: 'antialiased',
              MozOsxFontSmoothing: 'grayscale',
              textAlign: 'center',
            }}
          >
            Plugin Registry
          </div>
        </div>
      </div>,
      {
        width: BASE_WIDTH,
        height: BASE_HEIGHT,
        fonts,
      },
    ]
  }

  return [
    <div
      style={{
        display: 'flex',
        width: BASE_WIDTH,
        height: BASE_HEIGHT,
        background: '#000000',
        position: 'relative',
        overflow: 'hidden',
        fontSmooth: 'always',
        WebkitFontSmoothing: 'antialiased',
        MozOsxFontSmoothing: 'grayscale',
      }}
    >
      <div
        style={{
          position: 'absolute',
          width: '100%',
          height: '100%',
          background: 'radial-gradient(circle at 10% 20%, rgba(128, 90, 213, 0.3) 0%, transparent 40%), radial-gradient(circle at 90% 90%, rgba(208, 188, 255, 0.05) 0%, transparent 40%), radial-gradient(circle at 50% 50%, rgba(107, 70, 193, 0.2) 0%, transparent 35%)',
        }}
      />

      <div
        style={{
          position: 'absolute',
          width: '100%',
          height: '100%',
          backgroundImage: 'linear-gradient(to bottom, rgba(208, 188, 255, 0.03) 1px, transparent 1px), linear-gradient(to right, rgba(208, 188, 255, 0.03) 1px, transparent 1px)',
          backgroundSize: '50px 50px',
        }}
      />

      <div
        style={{
          display: 'flex',
          flexDirection: 'column',
          width: '100%',
          height: '100%',
          padding: '60px',
          position: 'relative',
          zIndex: 1,
          justifyContent: 'space-between',
          alignItems: 'center',
        }}
      >
        <div
          style={{
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            gap: '24px',
            paddingTop: '20px',
            width: '100%',
          }}
        >
          <img
            src={logoDataUrl}
            style={{
              width: '80px',
              height: '80px',
            }}
          />
          <div
            style={{
              fontSize: '48px',
              fontFamily: 'Adwaita Sans',
              fontWeight: 800,
              color: '#fffffff2',
              letterSpacing: '0.08em',
              textRendering: 'optimizeLegibility',
              fontSmooth: 'always',
              WebkitFontSmoothing: 'antialiased',
              MozOsxFontSmoothing: 'grayscale',
              lineHeight: 1,
            }}
          >
            DANK LINUX
          </div>
        </div>

        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            gap: '8px',
            fontFamily: 'Adwaita Sans',
            lineHeight: 1.1,
            textAlign: 'center',
            width: '100%',
          }}
        >
          <div
            style={{
              fontSize: '96px',
              fontWeight: 800,
              letterSpacing: '-2px',
              color: '#ffffff',
              textRendering: 'optimizeLegibility',
              fontSmooth: 'always',
              WebkitFontSmoothing: 'antialiased',
              MozOsxFontSmoothing: 'grayscale',
            }}
          >
            Modern Desktop
          </div>

          <div
            style={{
              fontSize: '80px',
              fontWeight: 800,
              letterSpacing: '-2px',
              color: '#ffffff',
              textRendering: 'optimizeLegibility',
              fontSmooth: 'always',
              WebkitFontSmoothing: 'antialiased',
              MozOsxFontSmoothing: 'grayscale',
            }}
          >
            for
          </div>

          <div
            style={{
              fontSize: '96px',
              fontWeight: 800,
              letterSpacing: '-2px',
              background: 'linear-gradient(135deg, #D0BCFF 0%, #805AD5 50%, #6B46C1 100%)',
              backgroundClip: 'text',
              WebkitBackgroundClip: 'text',
              WebkitTextFillColor: 'transparent',
              color: 'transparent',
              textRendering: 'optimizeLegibility',
              fontSmooth: 'always',
              WebkitFontSmoothing: 'antialiased',
              MozOsxFontSmoothing: 'grayscale',
            }}
          >
            Wayland
          </div>
        </div>

        <div style={{ height: '40px' }} />
      </div>
    </div>,
    {
      width: BASE_WIDTH,
      height: BASE_HEIGHT,
      fonts,
    },
  ]
}

export const blog: ImageRenderer<BlogPageData> = (data) => {
  // Handle different blog page types
  let title = 'Blog'
  let isV1Release = false
  let isV12Release = false

  if (data.pageType === 'post' && data.data) {
    const postData = data.data as Record<string, unknown>
    const metadata = postData.metadata as Record<string, unknown> | undefined
    title = String(metadata?.title || postData.title || 'Blog')
    // Check for v1 release post
    const id = String(postData.id || '')
    const permalink = String(metadata?.permalink || '')
    isV1Release = id === 'v1-release' || permalink.includes('v1-release') || title.includes('1.0')
    isV12Release = id === 'v1-2-release' || permalink.includes('v1-2-release') || title.includes('1.2')
  } else if (data.pageType === 'tag' && 'label' in data.data) {
    title = `Tag: ${String(data.data.label)}`
  } else if (data.pageType === 'archive') {
    title = 'Blog Archive'
  } else if (data.pageType === 'tags') {
    title = 'Blog Tags'
  }

  // Special OG image for v1 release - matches blog hero with bats and confetti
  if (isV1Release) {
    const BatSvg = ({ color, size, opacity }: { color: string; size: number; opacity: number }) => (
      <svg
        width={size}
        height={size * 0.5}
        viewBox="0 0 100 50"
        style={{ display: 'flex' }}
      >
        <path
          d="M45 12.5 L50 17.5 L55 12.5 L60 17.5 L70 12.5 L85 7.5 L100 15 L85 25 L75 20 L65 27.5 L58 22.5 L50 32.5 L42 22.5 L35 27.5 L25 20 L15 25 L0 15 L15 7.5 L30 12.5 L40 17.5 Z"
          fill={color}
          opacity={opacity}
        />
      </svg>
    )

    return [
      <div
        style={{
          display: 'flex',
          width: BASE_WIDTH,
          height: BASE_HEIGHT,
          backgroundColor: '#0d0d0d',
          position: 'relative',
          overflow: 'hidden',
          fontSmooth: 'always',
          WebkitFontSmoothing: 'antialiased',
          MozOsxFontSmoothing: 'grayscale',
        }}
      >
        {/* Gradient overlay */}
        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            background: 'radial-gradient(ellipse 80% 50% at 50% -20%, rgba(208, 188, 255, 0.2) 0%, transparent 60%)',
          }}
        />
        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            background: 'linear-gradient(180deg, rgba(128, 90, 213, 0.06) 0%, transparent 100%)',
          }}
        />

        {/* Sparkle confetti layer */}
        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            backgroundImage: `
              radial-gradient(circle at 10% 20%, #D0BCFF 2px, transparent 2px),
              radial-gradient(circle at 40% 70%, #805AD5 2px, transparent 2px),
              radial-gradient(circle at 70% 25%, #B794F4 1.5px, transparent 1.5px),
              radial-gradient(circle at 90% 60%, #9F7AEA 2px, transparent 2px),
              radial-gradient(circle at 25% 85%, #D0BCFF 1.5px, transparent 1.5px),
              radial-gradient(circle at 60% 45%, #805AD5 2px, transparent 2px),
              radial-gradient(circle at 85% 80%, #B794F4 1.5px, transparent 1.5px),
              radial-gradient(circle at 15% 50%, #9F7AEA 1.5px, transparent 1.5px),
              radial-gradient(circle at 22% 32%, #D0BCFF 2px, transparent 2px),
              radial-gradient(circle at 78% 55%, #805AD5 1.5px, transparent 1.5px),
              radial-gradient(circle at 52% 18%, #B794F4 2px, transparent 2px),
              radial-gradient(circle at 8% 75%, #9F7AEA 1.5px, transparent 1.5px),
              radial-gradient(circle at 88% 28%, #D0BCFF 1.5px, transparent 1.5px),
              radial-gradient(circle at 33% 58%, #805AD5 2px, transparent 2px),
              radial-gradient(circle at 67% 82%, #B794F4 1.5px, transparent 1.5px),
              radial-gradient(circle at 45% 12%, #9F7AEA 2px, transparent 2px)
            `,
            opacity: 0.5,
          }}
        />

        {/* Bat silhouettes - left side */}
        <div style={{ display: 'flex', position: 'absolute', top: '20%', left: '3%', transform: 'rotate(-15deg)' }}>
          <BatSvg color="#805AD5" size={70} opacity={0.55} />
        </div>
        <div style={{ display: 'flex', position: 'absolute', top: '44%', left: '4%', transform: 'rotate(-8deg)' }}>
          <BatSvg color="#9F7AEA" size={55} opacity={0.5} />
        </div>
        <div style={{ display: 'flex', position: 'absolute', top: '68%', left: '5%', transform: 'rotate(-20deg)' }}>
          <BatSvg color="#B794F4" size={50} opacity={0.45} />
        </div>

        {/* Bat silhouettes - right side */}
        <div style={{ display: 'flex', position: 'absolute', top: '22%', left: '88%', transform: 'rotate(12deg)' }}>
          <BatSvg color="#B794F4" size={60} opacity={0.5} />
        </div>
        <div style={{ display: 'flex', position: 'absolute', top: '46%', left: '86%', transform: 'rotate(18deg)' }}>
          <BatSvg color="#805AD5" size={75} opacity={0.55} />
        </div>
        <div style={{ display: 'flex', position: 'absolute', top: '70%', left: '89%', transform: 'rotate(8deg)' }}>
          <BatSvg color="#9F7AEA" size={55} opacity={0.5} />
        </div>

        {/* Main content */}
        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            width: '100%',
            height: '100%',
            position: 'relative',
            zIndex: 1,
            justifyContent: 'center',
            alignItems: 'center',
          }}
        >
          <div
            style={{
              display: 'flex',
              alignItems: 'baseline',
              gap: '24px',
              fontFamily: 'Adwaita Sans',
            }}
          >
            <div
              style={{
                fontSize: '180px',
                fontWeight: 800,
                color: '#ffffff',
                letterSpacing: '-4px',
              }}
            >
              DMS
            </div>
            <div
              style={{
                fontSize: '180px',
                fontWeight: 800,
                letterSpacing: '-4px',
                background: 'linear-gradient(135deg, #D0BCFF 0%, #805AD5 100%)',
                backgroundClip: 'text',
                WebkitBackgroundClip: 'text',
                WebkitTextFillColor: 'transparent',
                color: 'transparent',
              }}
            >
              1.0
            </div>
          </div>

          <div
            style={{
              fontSize: '32px',
              fontWeight: 600,
              color: 'rgba(208, 188, 255, 0.4)',
              fontFamily: 'Adwaita Sans',
              marginTop: '16px',
              letterSpacing: '0.25em',
              textTransform: 'uppercase',
            }}
          >
            The Dark Knight
          </div>
        </div>
      </div>,
      {
        width: BASE_WIDTH,
        height: BASE_HEIGHT,
        fonts,
      },
    ]
  }

  // Special OG image for v1.2 release - Spicy Miso
  if (isV12Release) {
    return [
      <div
        style={{
          display: 'flex',
          width: BASE_WIDTH,
          height: BASE_HEIGHT,
          background: '#000000',
          position: 'relative',
          overflow: 'hidden',
          fontSmooth: 'always',
          WebkitFontSmoothing: 'antialiased',
          MozOsxFontSmoothing: 'grayscale',
        }}
      >
        {/* Radial gradient overlays - warm red/orange tones */}
        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            background: 'radial-gradient(circle at 10% 20%, rgba(239, 68, 68, 0.3) 0%, transparent 40%), radial-gradient(circle at 90% 90%, rgba(251, 146, 60, 0.08) 0%, transparent 40%), radial-gradient(circle at 50% 50%, rgba(220, 38, 38, 0.2) 0%, transparent 35%)',
          }}
        />

        {/* Grid pattern */}
        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            backgroundImage: 'linear-gradient(to bottom, rgba(251, 146, 60, 0.03) 1px, transparent 1px), linear-gradient(to right, rgba(251, 146, 60, 0.03) 1px, transparent 1px)',
            backgroundSize: '50px 50px',
          }}
        />

        {/* Confetti sparkles - red/orange tones */}
        <div
          style={{
            position: 'absolute',
            width: '100%',
            height: '100%',
            backgroundImage: `
              radial-gradient(circle at 8% 15%, #ef4444 2.5px, transparent 2.5px),
              radial-gradient(circle at 15% 75%, #dc2626 2px, transparent 2px),
              radial-gradient(circle at 25% 35%, #f97316 2px, transparent 2px),
              radial-gradient(circle at 35% 85%, #fb923c 2.5px, transparent 2.5px),
              radial-gradient(circle at 45% 20%, #ef4444 2px, transparent 2px),
              radial-gradient(circle at 55% 70%, #dc2626 2.5px, transparent 2.5px),
              radial-gradient(circle at 65% 25%, #f97316 2px, transparent 2px),
              radial-gradient(circle at 75% 80%, #fb923c 2px, transparent 2px),
              radial-gradient(circle at 85% 40%, #ef4444 2.5px, transparent 2.5px),
              radial-gradient(circle at 92% 65%, #dc2626 2px, transparent 2px),
              radial-gradient(circle at 12% 45%, #f97316 2px, transparent 2px),
              radial-gradient(circle at 88% 18%, #fb923c 2px, transparent 2px),
              radial-gradient(circle at 42% 90%, #ef4444 2px, transparent 2px),
              radial-gradient(circle at 72% 12%, #dc2626 2.5px, transparent 2.5px),
              radial-gradient(circle at 5% 55%, #f97316 2.5px, transparent 2.5px),
              radial-gradient(circle at 95% 85%, #fb923c 2.5px, transparent 2.5px)
            `,
            opacity: 0.6,
          }}
        />

        {/* Main content */}
        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            width: '100%',
            height: '100%',
            position: 'relative',
            zIndex: 1,
            justifyContent: 'center',
            alignItems: 'center',
          }}
        >
          <div
            style={{
              display: 'flex',
              alignItems: 'baseline',
              gap: '24px',
              fontFamily: 'Adwaita Sans',
            }}
          >
            <div
              style={{
                fontSize: '180px',
                fontWeight: 800,
                color: '#ffffff',
                letterSpacing: '-4px',
              }}
            >
              DMS
            </div>
            <div
              style={{
                fontSize: '180px',
                fontWeight: 800,
                letterSpacing: '-4px',
                background: 'linear-gradient(135deg, #fca5a5 0%, #ef4444 50%, #dc2626 100%)',
                backgroundClip: 'text',
                WebkitBackgroundClip: 'text',
                WebkitTextFillColor: 'transparent',
                color: 'transparent',
              }}
            >
              1.2
            </div>
          </div>

          <div
            style={{
              fontSize: '32px',
              fontWeight: 600,
              color: 'rgba(252, 165, 165, 0.4)',
              fontFamily: 'Adwaita Sans',
              marginTop: '16px',
              letterSpacing: '0.25em',
              textTransform: 'uppercase',
            }}
          >
            Spicy Miso
          </div>
        </div>
      </div>,
      {
        width: BASE_WIDTH,
        height: BASE_HEIGHT,
        fonts,
      },
    ]
  }

  return [
    <div
      style={{
        display: 'flex',
        width: BASE_WIDTH,
        height: BASE_HEIGHT,
        background: 'linear-gradient(135deg, #1a1318 0%, #2d1b3d 100%)',
        position: 'relative',
        overflow: 'hidden',
        fontSmooth: 'always',
        WebkitFontSmoothing: 'antialiased',
        MozOsxFontSmoothing: 'grayscale',
      }}
    >
      <div
        style={{
          position: 'absolute',
          width: '100%',
          height: '100%',
          background: 'radial-gradient(circle at 20% 50%, rgba(128, 90, 213, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(208, 188, 255, 0.12) 0%, transparent 50%)',
        }}
      />

      <div
        style={{
          display: 'flex',
          flexDirection: 'column',
          width: '100%',
          height: '100%',
          padding: '60px',
          position: 'relative',
          zIndex: 1,
        }}
      >
        <img
          src={logoDataUrl}
          style={{
            position: 'absolute',
            top: '50px',
            right: '50px',
            opacity: 0.6,
            width: '120px',
            height: '120px',
          }}
        />

        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            flex: 1,
            justifyContent: 'center',
          }}
        >
          <div
            style={{
              fontSize: '54px',
              color: '#B794F4',
              fontFamily: 'Adwaita Sans',
              fontWeight: 500,
              marginLeft: '4px',
              marginBottom: '18px',
              letterSpacing: '0.5px',
            }}
          >
            Blog
          </div>

          <div
            style={{
              fontSize: '96px',
              color: '#ffffff',
              fontFamily: 'Adwaita Sans',
              fontWeight: 700,
              lineHeight: 1.15,
              maxWidth: '1000px',
            }}
          >
            {title}
          </div>
        </div>
      </div>
    </div>,
    {
      width: BASE_WIDTH,
      height: BASE_HEIGHT,
      fonts,
    },
  ]
}



================================================
FILE: src/components/Hero/index.tsx
================================================
import type {ReactNode} from 'react';
import {useEffect} from 'react';
import styles from './styles.module.css';

interface HeroProps {
  asciiArt: string;
  hideTitle?: boolean;
}

export default function Hero({asciiArt, hideTitle = true}: HeroProps): ReactNode {
  useEffect(() => {
    if (hideTitle) {
      // Find and hide the page title header
      const header = document.querySelector('.theme-doc-markdown > header');
      if (header) {
        (header as HTMLElement).style.display = 'none';
      }
    }
  }, [hideTitle]);

  return (
    <div className={styles.hero}>
      <div className={styles.heroContent}>
        <pre className={styles.heroAscii}>{asciiArt}</pre>
      </div>
    </div>
  );
}



================================================
FILE: src/components/Hero/styles.module.css
================================================
.hero {
  position: relative;
  width: 100%;
  padding: 4rem 2rem;
  margin-bottom: 1rem;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  background-color: var(--ifm-background-color);
  background-image:
    radial-gradient(circle at 20% 50%, rgba(128, 90, 213, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(128, 90, 213, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(208, 188, 255, 0.08) 0%, transparent 40%),
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(128, 90, 213, 0.03) 2px,
      rgba(128, 90, 213, 0.03) 4px
    ),
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 2px,
      rgba(128, 90, 213, 0.03) 2px,
      rgba(128, 90, 213, 0.03) 4px
    );
}

[data-theme='dark'] .hero {
  background-image:
    radial-gradient(circle at 20% 50%, rgba(208, 188, 255, 0.12) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(128, 90, 213, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(208, 188, 255, 0.1) 0%, transparent 40%),
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(208, 188, 255, 0.05) 2px,
      rgba(208, 188, 255, 0.05) 4px
    ),
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 2px,
      rgba(208, 188, 255, 0.05) 2px,
      rgba(208, 188, 255, 0.05) 4px
    );
}

.heroContent {
  position: relative;
  z-index: 1;
  text-align: center;
  max-width: 1200px;
  width: 100%;
  overflow: hidden;
}

.heroAscii {
  margin: 0 auto;
  padding: 0;
  font-size: 0.75rem;
  line-height: 1;
  font-family: var(--ifm-font-family-monospace);
  text-align: left;
  display: inline-block;
  background: none;
  border: none;
  color: var(--dank-purple-dark);
  white-space: pre;
  overflow: visible;
  max-width: 100%;
  font-variant-ligatures: none;
  font-feature-settings: normal;
}

[data-theme='dark'] .heroAscii {
  color: var(--dank-purple-dark);
}

@media screen and (max-width: 1400px) {
  .heroAscii {
    font-size: 0.68rem;
  }
}

@media screen and (max-width: 1200px) {
  .heroAscii {
    font-size: 0.6rem;
  }
}

@media screen and (max-width: 996px) {
  .hero {
    padding: 3rem 1.5rem;
  }

  .heroAscii {
    font-size: 0.5rem;
  }
}

@media screen and (max-width: 768px) {
  .hero {
    padding: 2rem 1rem;
  }

  .heroAscii {
    font-size: 0.4rem;
  }
}

@media screen and (max-width: 600px) {
  .heroAscii {
    font-size: 0.32rem;
  }
}

@media screen and (max-width: 480px) {
  .heroAscii {
    font-size: 0.26rem;
  }
}

@media screen and (max-width: 380px) {
  .heroAscii {
    font-size: 0.22rem;
  }
}



================================================
FILE: src/css/custom.css
================================================
/**
 * Custom CSS - Theme Specific Styles
 *
 * Import order:
 * 1. Global overrides (our Docusaurus defaults)
 * 2. Theme-specific customizations (this file)
 */

/* Global Docusaurus overrides - our base styles */
@import url('./global.css');

/* ========================================
   DOCUSAURUS ANNOUNCEMENT BAR STYLING
   ======================================== */

/* Style the built-in announcement bar - reset all borders */
div[class*='announcementBar'] {
  background: linear-gradient(135deg, #805AD5, #6B46C1) !important;
  border: none !important;
  color: #fff !important;
  font-size: 0.875rem;
  font-weight: 500;
  position: relative;
  z-index: 100;
}

/* Remove any inner borders/dividers */
div[class*='announcementBar'] > div,
div[class*='announcementBar'] [class*='content'] {
  border: none !important;
}

div[class*='announcementBar'] a {
  color: #fff !important;
  text-decoration: underline;
  text-underline-offset: 2px;
}

div[class*='announcementBar'] a:hover {
  opacity: 0.9;
}

/* Badge inside announcement bar */
.announcement-badge {
  background: rgba(255, 255, 255, 0.2);
  font-size: 0.7rem;
  font-weight: 600;
  padding: 0.15rem 0.5rem;
  border-radius: 9999px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-right: 0.5rem;
}

/* Close button styling - remove all borders */
button[class*='closeButton'],
div[class*='announcementBar'] button {
  border: none !important;
  border-left: none !important;
  color: rgba(255, 255, 255, 0.8) !important;
  background: transparent !important;
}

button[class*='closeButton']:hover,
div[class*='announcementBar'] button:hover {
  background: rgba(255, 255, 255, 0.15) !important;
  color: #fff !important;
}

@media (max-width: 768px) {
  div[class*='announcementBar'] {
    font-size: 0.8rem;
  }
}


/* ========================================
   PAGE-SPECIFIC NAVBAR THEMES
   ======================================== */

/* Override Docusaurus's navbar theme classes that set solid backgrounds */
.navbar--dark,
.navbar--primary {
  --ifm-navbar-background-color: transparent;
}

/* Navbar - same style everywhere */
.navbar {
  background: rgba(0, 0, 0, 0.8) !important;
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid rgba(208, 188, 255, 0.1);
  --ifm-navbar-shadow: none;
}

/* Light mode navbar */
html[data-theme='light'] .navbar {
  background: rgba(255, 255, 255, 0.65) !important;
  border-bottom-color: rgba(128, 90, 213, 0.12);
}

html[data-theme='light'] .navbar__link {
  color: rgba(0, 0, 0, 0.7);
}

html[data-theme='light'] .navbar__link:hover {
  color: var(--dank-purple-dark);
}

/* Light mode sidebar - full screen overlay */
html[data-theme='light'] .navbar-sidebar {
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
}

html[data-theme='light'] .navbar-sidebar__brand {
  border-bottom-color: rgba(128, 90, 213, 0.12);
}

html[data-theme='light'] .navbar-sidebar__items .menu__link {
  color: rgba(0, 0, 0, 0.85) !important;
}

html[data-theme='light'] .navbar-sidebar__items .menu__link:hover {
  background: rgba(128, 90, 213, 0.1) !important;
  color: var(--dank-purple-dark) !important;
}

html[data-theme='light'] .navbar-sidebar__items .menu__link--active {
  background: rgba(128, 90, 213, 0.15) !important;
  color: var(--dank-purple-dark) !important;
  border-left-color: var(--dank-purple-dark) !important;
}

html[data-theme='light'] .navbar-sidebar__items .header-github-link,
html[data-theme='light'] .navbar-sidebar__items .navbar-discord-link,
html[data-theme='light'] .navbar-sidebar__items .navbar-kofi-link {
  color: rgba(0, 0, 0, 0.85) !important;
}

html[data-theme='light'] .navbar-sidebar__items .header-github-link:hover,
html[data-theme='light'] .navbar-sidebar__items .navbar-discord-link:hover,
html[data-theme='light'] .navbar-sidebar__items .navbar-kofi-link:hover {
  background: rgba(128, 90, 213, 0.1) !important;
  color: var(--dank-purple-dark) !important;
}

html[data-theme='light'] .navbar-sidebar .navbar-sidebar__close {
  color: var(--dank-purple-dark);
}

html[data-theme='light'] .navbar-sidebar .navbar-sidebar__close:hover {
  background: rgba(128, 90, 213, 0.1);
}

html[data-theme='light'] .header-github-link,
html[data-theme='light'] .navbar-discord-link,
html[data-theme='light'] .navbar-kofi-link {
  color: rgba(26, 22, 37, 0.75);
}

/* Brand hover effect */
.navbar__brand:hover {
  color: var(--dank-purple-light);
}

/* Make navbar taller */
:root {
  --ifm-navbar-height: 5rem;
}

@media (max-width: 996px) {
  :root {
    --ifm-navbar-height: 4rem;
  }
}

@media (max-width: 480px) {
  :root {
    --ifm-navbar-height: 3.5rem;
  }
}

/* Make logo properly sized - desktop */
.navbar__logo {
  height: 4.5rem !important;
  width: auto !important;
  max-width: none !important;
}

/* Mobile responsive logo sizing */
@media (max-width: 996px) {
  .navbar__logo {
    height: 3rem !important;
  }
}

@media (max-width: 480px) {
  .navbar__logo {
    height: 2.25rem !important;
  }
}

/* Dark mode toggle button */
[data-theme='dark'] .clean-btn[title*='dark'],
[data-theme='light'] .clean-btn[title*='light'] {
  color: var(--dank-purple-light);
}

.clean-btn:hover {
  background: rgba(208, 188, 255, 0.1);
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Material Design 3 Purple Palette for Dank Linux */
:root {
  --ifm-color-primary: #805AD5;
  --ifm-color-primary-dark: #6B46C1;
  --ifm-color-primary-darker: #553C9A;
  --ifm-color-primary-darkest: #44337A;
  --ifm-color-primary-light: #9F7AEA;
  --ifm-color-primary-lighter: #B794F4;
  --ifm-color-primary-lightest: #D0BCFF;
  --ifm-code-font-size: 95%;
  --docusaurus-highlighted-code-line-bg: rgba(208, 188, 255, 0.1);
  --ifm-background-color: #f8f7fb;
  --dank-docs-background: #f8f7fb;

  /* Additional purple shades */
  --purple-50: #F5F0FF;
  --purple-100: #E9DFFF;
  --purple-200: #D0BCFF;
  --purple-300: #B794F4;
  --purple-400: #9F7AEA;
  --purple-500: #805AD5;
  --purple-600: #6B46C1;
  --purple-700: #553C9A;
  --purple-800: #44337A;
  --purple-900: #322659;
}

/* Dark mode - use lighter purples for better readability */
[data-theme='dark'] {
  --ifm-color-primary: #D0BCFF;
  --ifm-color-primary-dark: #B794F4;
  --ifm-color-primary-darker: #9F7AEA;
  --ifm-color-primary-darkest: #805AD5;
  --ifm-color-primary-light: #E9DFFF;
  --ifm-color-primary-lighter: #F5F0FF;
  --ifm-color-primary-lightest: #FFFFFF;
  --docusaurus-highlighted-code-line-bg: rgba(208, 188, 255, 0.2);
  --ifm-background-color: #111111;
  --dank-docs-background: #111111;
  --ifm-background-surface-color: #242428;
}

/* Additional Dank Linux custom variables matching Nextra */
:root {
  --dank-purple-primary: #805AD5;
  --dank-purple-light: #D0BCFF;
  --dank-purple-lighter: #E9D5FF;
  --dank-purple-dark: #6B46C1;
  --dank-purple-darker: #553C9A;
  --dank-purple-hover: #B794F4;
  --dank-gradient: linear-gradient(135deg, #805AD5, #D0BCFF);
}

/* Documentation background styling aligned with Nextra */
body.docs-page {
  background: var(--dank-docs-background) !important;
  transition: background 0.4s ease;
}

body.docs-page #__docusaurus,
body.docs-page .main-wrapper,
body.docs-page .docs-wrapper {
  background: transparent !important;
}

/* body.docs-page[data-theme='dark'],
[data-theme='dark'] body.docs-page {
  background: radial-gradient(140% 160% at 0% 0%, rgba(128, 90, 213, 0.08), transparent), var(--dank-docs-background) !important;
  background-attachment: fixed;
} */

/* Ensure landing page uses full black background everywhere */
html:has(body.landing-page) {
  background-color: #000000 !important;
}

body.landing-page {
  background: #000000 !important;
  background-color: #000000 !important;
  min-height: 100vh !important;
}

body.landing-page,
body.landing-page * {
  --ifm-background-color: #000000 !important;
}

/* Light mode landing page background */
[data-theme='light'] html:has(body.landing-page) {
  background-color: #f8f7fb !important;
}

[data-theme='light'] body.landing-page {
  background: #f8f7fb !important;
  background-color: #f8f7fb !important;
}

[data-theme='light'] body.landing-page,
[data-theme='light'] body.landing-page * {
  --ifm-background-color: #f8f7fb !important;
}

body.landing-page #__docusaurus,
body.landing-page .main-wrapper,
body.landing-page main,
body.landing-page > div {
  background: transparent !important;
  background-color: transparent !important;
}

/* Navbar should NOT be transparent - it has its own glassmorphic background */
body.landing-page header,
body.landing-page nav:not(.navbar) {
  background: transparent !important;
  background-color: transparent !important;
}

/* Remove any padding/margin that creates gaps */
body.landing-page #__docusaurus {
  min-height: 100vh !important;
}

/* Scroll snap for landing page sections */
html {
  scroll-behavior: smooth;
}

body.landing-page {
  scroll-snap-type: y proximity;
  overflow-y: scroll;
}


/* Sidebar link styling matching Nextra */
.theme-doc-sidebar-item-link {
  color: inherit !important;
}

.theme-doc-sidebar-item-link:hover {
  color: var(--dank-purple-hover) !important;
}

[data-theme='dark'] .theme-doc-sidebar-item-link:hover {
  color: var(--dank-purple-lighter) !important;
}

/* Active sidebar item */
.theme-doc-sidebar-item-link-level-1.menu__link--active,
.theme-doc-sidebar-item-link-level-2.menu__link--active,
.theme-doc-sidebar-item-link-level-3.menu__link--active {
  color: var(--dank-purple-light) !important;
  border-left-color: var(--dank-purple-light) !important;
}

/* Search bar styling */
.DocSearch-Button {
  background: rgba(208, 188, 255, 0.1) !important;
  border: 1px solid rgba(208, 188, 255, 0.2) !important;
}

.DocSearch-Button:hover {
  background: rgba(208, 188, 255, 0.15) !important;
  border-color: rgba(208, 188, 255, 0.3) !important;
}

/* Navbar search input icon - light version for dark mode */
[data-theme='dark'] .navbar__search-input {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23ffffff' d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E") !important;
}

/* Light mode keeps default dark icon - match with placeholder color */
[data-theme='light'] .navbar__search-input {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23667666' d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E") !important;
  color: rgba(0, 0, 0, 0.7) !important;
}

[data-theme='light'] .navbar__search-input::placeholder {
  color: rgba(0, 0, 0, 0.5) !important;
  opacity: 1 !important;
}

/* Code blocks with purple accent and proper styling */
pre[class*='language-'] {
  border-left: 3px solid var(--dank-purple-primary);
  border-radius: 0.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* Inline code styling */
:not(pre) > code {
  background-color: rgba(208, 188, 255, 0.1);
  border: 1px solid rgba(208, 188, 255, 0.2);
  color: var(--dank-purple-dark);
  padding: 0.2em 0.4em;
  border-radius: 0.25rem;
  font-size: 0.9em;
}

[data-theme='dark'] :not(pre) > code {
  background-color: rgba(208, 188, 255, 0.15);
  border-color: rgba(208, 188, 255, 0.25);
  color: var(--dank-purple-light);
}

/* Tables */
table thead tr {
  border-bottom: 2px solid var(--dank-purple-primary);
}

/* Admonitions (callouts) */
.alert--info {
  --ifm-alert-background-color: rgba(128, 90, 213, 0.1);
  --ifm-alert-background-color-highlight: rgba(128, 90, 213, 0.15);
  --ifm-alert-foreground-color: var(--dank-purple-light);
  --ifm-alert-border-color: var(--dank-purple-primary);
  border-left-color: var(--dank-purple-primary);
}

.alert--info .admonitionHeading_Gvgb {
  color: var(--dank-purple-light);
}

[data-theme='light'] .alert--info {
  --ifm-alert-background-color: rgba(128, 90, 213, 0.08);
  --ifm-alert-background-color-highlight: rgba(128, 90, 213, 0.12);
  --ifm-alert-foreground-color: var(--dank-purple-dark);
}

[data-theme='light'] .alert--info .admonitionHeading_Gvgb {
  color: var(--dank-purple-dark);
}

/* Buttons and CTAs */
.button--primary {
  background: var(--dank-gradient);
  border: none;
}

.button--primary:hover {
  background: linear-gradient(135deg, #6B46C1, #B794F4);
}

/* Pagination */
.pagination-nav__link:hover {
  border-color: var(--dank-purple-primary);
}

.pagination-nav__label::before {
  color: var(--dank-purple-light);
}

/* TOC (table of contents) active item */
.table-of-contents__link--active {
  color: var(--dank-purple-light);
  border-left-color: var(--dank-purple-light);
}

.table-of-contents__link:hover {
  color: var(--dank-purple-hover);
}

/* Breadcrumbs */
.breadcrumbs__link:hover {
  background: rgba(208, 188, 255, 0.1);
  color: var(--dank-purple-light);
}

/* Footer container */
.footer {
  position: relative;
  background: transparent !important;
  border-top: none !important;
}

/* Landing page footer */
body.landing-page .footer {
  background: transparent !important;
  border-top: 1px solid rgba(208, 188, 255, 0.1) !important;
  padding: 2rem 0;
}

/* Landing page footer - light mode needs proper background */
[data-theme='light'] body.landing-page .footer {
  background: rgba(248, 247, 251, 0.95) !important;
  border-top: 1px solid rgba(128, 90, 213, 0.2) !important;
}

/* Docs page footer */
body.docs-page .footer {
  background: transparent !important;
  border-top: 1px solid rgba(208, 188, 255, 0.1) !important;
  padding: 2rem 0;
}

/* Light mode footer */
[data-theme='light'] .footer {
  background: transparent !important;
  border-top: 1px solid rgba(128, 90, 213, 0.1) !important;
}

/* Footer layout - horizontal single row */
.footer__links {
  margin-bottom: 1rem;
}

.footer__items {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: 0;
  margin: 0;
}

.footer__item {
  display: inline-block;
  margin: 0;
  padding: 0;
}

.footer__link-item {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.9rem;
  padding: 0.5rem 1.25rem;
  transition: color 0.2s ease;
}

.footer__link-item:hover {
  color: var(--dank-purple-light) !important;
  text-decoration: none;
}

/* Copyright text */
.footer__copyright {
  text-align: center;
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.875rem;
  margin-top: 0.5rem;
}

/* Light mode adjustments */
[data-theme='light'] .footer__link-item {
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .footer__copyright {
  color: rgba(0, 0, 0, 0.5);
}

.footer-icon-links {
  position: absolute;
  top: 2rem;
  right: 2rem;
  display: flex;
  gap: 0.75rem;
  align-items: center;
}

.footer-github-link,
.footer-discord-link,
.footer-kofi-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 50%;
  color: rgba(255, 255, 255, 0.7);
  transition: background 0.2s ease, color 0.2s ease;
  padding: 0;
  overflow: visible;
}

.footer-github-link::before,
.footer-discord-link::before,
.footer-kofi-link::before {
  content: '';
  width: 1.25rem;
  height: 1.25rem;
  display: block;
  background: currentColor;
  mask-repeat: no-repeat;
  mask-size: contain;
  mask-position: center;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-size: contain;
  -webkit-mask-position: center;
}

.footer-github-link::before {
  mask-image: url('/img/github.svg');
  -webkit-mask-image: url('/img/github.svg');
}

.footer-discord-link::before {
  mask-image: url('/img/discord.svg');
  -webkit-mask-image: url('/img/discord.svg');
}

.footer-kofi-link::before {
  mask-image: url('/img/kofi.svg');
  -webkit-mask-image: url('/img/kofi.svg');
}

.footer-github-link:hover,
.footer-discord-link:hover,
.footer-kofi-link:hover {
  background: rgba(208, 188, 255, 0.15);
  color: var(--dank-purple-light);
}

/* Light mode icon colors */
[data-theme='light'] .footer-github-link,
[data-theme='light'] .footer-discord-link,
[data-theme='light'] .footer-kofi-link {
  color: rgba(0, 0, 0, 0.7);
}

[data-theme='light'] .footer-github-link:hover,
[data-theme='light'] .footer-discord-link:hover,
[data-theme='light'] .footer-kofi-link:hover {
  color: var(--dank-purple-dark);
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  /* Tighten footer padding on mobile */
  .footer {
    padding: 1rem 0 0.75rem !important;
  }

  .footer__links {
    margin-bottom: 0.5rem !important;
  }

  .footer__link-item {
    padding: 0.375rem 0.875rem !important;
    font-size: 0.875rem !important;
  }

  .footer__copyright {
    margin-top: 0.25rem !important;
    font-size: 0.8125rem !important;
  }

  .footer-icon-links {
    position: static;
    justify-content: center;
    margin-top: 0.75rem !important;
    gap: 0.5rem !important;
  }

  .footer-github-link,
  .footer-discord-link,
  .footer-kofi-link {
    width: 2rem !important;
    height: 2rem !important;
  }

  .footer-github-link::before,
  .footer-discord-link::before,
  .footer-kofi-link::before {
    width: 1.125rem !important;
    height: 1.125rem !important;
  }
}

body.blog-page {
  background: var(--dank-docs-background);
}

body.blog-page #__docusaurus,
body.blog-page .main-wrapper {
  background: transparent;
}

body.blog-page main {
  padding-top: 0;
}

/* Markdown headers with purple accent */
.markdown h1,
.markdown h2 {
  border-bottom-color: rgba(208, 188, 255, 0.2);
}

/* Links in markdown content */
.markdown a {
  color: var(--dank-purple-light);
}

.markdown a:hover {
  color: var(--dank-purple-hover);
  text-decoration-color: var(--dank-purple-hover);
}

/* Hero button on docs page */
.button.button--secondary.button--lg {
  border-color: var(--dank-purple-primary);
  color: var(--dank-purple-light);
}

.button.button--secondary.button--lg:hover {
  background: rgba(208, 188, 255, 0.1);
  border-color: var(--dank-purple-light);
}

/* ASCII Art Styling */
pre.ascii-art {
  background: none !important;
  border: none !important;
  border-radius: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: visible !important;
  position: static !important;
  color: var(--dank-purple-dark) !important;
  box-shadow: none !important;
  display: inline-block !important;
  font-size: 0.65rem !important;
  line-height: 1.1 !important;
  white-space: pre !important;
}

/* Page title visibility is now controlled by Hero component */

.landing-page main {
  padding-top: 4rem;
}

/* Dark mode toggle button styling */
html[data-theme='dark'] .clean-btn[title*='dark'],
html[data-theme='light'] .clean-btn[title*='light'] {
  color: var(--dank-purple-light) !important;
}

.clean-btn:hover {
  background: rgba(208, 188, 255, 0.1) !important;
}

/* Hide search bar by default */
.navbar__items--right .navbar__search,
.navbar__items--right .navbarSearchContainer_Bca1 {
  display: none !important;
}

/* Show search bar ONLY on docs pages */
body.docs-page .navbar__items--right .navbar__search,
body.docs-page .navbar__items--right .navbarSearchContainer_Bca1 {
  display: block !important;
}

/* Search container styling - ensure it's in flex flow */
.navbar__search,
.navbarSearchContainer_Bca1 {
  position: relative !important;
  max-width: 220px;
  min-width: 180px;
  flex-shrink: 1;
  margin-left: 0 !important;
  margin-right: 1.5rem !important;
}

/* Search input should not expand beyond container */
.navbar__search-input {
  width: 100% !important;
  max-width: 100% !important;
  font-size: 0.9rem !important;
}

/* When search is focused/active, it can expand a bit more but still constrained */
.navbar__search.focused_OWtg {
  max-width: 280px !important;
  transition: max-width 0.2s ease !important;
}

/* Ensure dropdown doesn't cause overflow */
.navbar__search .dropdownMenu_qbY6 {
  position: absolute !important;
  z-index: 1000 !important;
  left: auto !important;
  right: 0 !important;
  top: 100% !important;
  min-width: 280px !important;
}

/* Mobile responsive search handling */
@media (max-width: 996px) {
  body.docs-page .navbar__items--right .navbar__search {
    display: flex !important;
    position: relative !important;
    max-width: 140px !important;
    min-width: 136px !important;
    flex-shrink: 1 !important;
    margin-left: auto !important;
    margin-right: 0.5rem !important;
  }

  body.docs-page .navbar__items--right .navbarSearchContainer_Bca1 {
    display: flex !important;
    position: relative !important;
    max-width: 140px !important;
    min-width: 136px !important;
    flex-shrink: 1 !important;
    margin-left: auto !important;
    margin-right: 0.5rem !important;
  }

  .navbar__search-input {
    font-size: 0.8rem !important;
    padding: 0.375rem 0.5rem 0.375rem 2.25rem !important;
  }

  /* When focused, allow even more width */
  .navbar__search.focused_OWtg {
    max-width: 150px !important;
  }

  /* Mobile dropdown positioning */
  .navbar__search .dropdownMenu_qbY6 {
    position: fixed !important;
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) !important;
    top: auto !important;
    min-width: calc(100vw - 1rem) !important;
    max-width: calc(100vw - 1rem) !important;
    max-height: 60vh !important;
    overflow-y: auto !important;
    z-index: 1000 !important;
  }

  /* Only show search in mobile sidebar on docs pages */
  body.docs-page .navbar-sidebar__items .navbar__search {
    display: block !important;
    padding: 0.875rem 1.5rem !important;
    margin: 0 !important;
    width: 100% !important;
    border-bottom: 1px solid rgba(208, 188, 255, 0.12) !important;
    order: -1 !important;
  }

  /* Hide search in mobile sidebar on landing page */
  body.landing-page .navbar-sidebar__items .navbar__search {
    display: none !important;
  }

  /* Make primary menu a flex container so search can be ordered first */
  .navbar-sidebar__items > .navbar-sidebar__item:first-child .menu {
    display: flex !important;
    flex-direction: column !important;
  }

  /* Style search input in mobile sidebar */
  .navbar-sidebar__items .navbar__search-input {
    width: 100% !important;
    background: rgba(208, 188, 255, 0.1) !important;
    border: 1px solid rgba(208, 188, 255, 0.2) !important;
    border-radius: 0.375rem !important;
    color: rgba(255, 255, 255, 0.85) !important;
    padding: 0.625rem 1rem 0.625rem 2.5rem !important;
    font-size: 0.9375rem !important;
  }

  html[data-theme='light'] .navbar-sidebar__items .navbar__search {
    border-top-color: rgba(128, 90, 213, 0.12) !important;
    border-bottom-color: rgba(128, 90, 213, 0.12) !important;
  }

  html[data-theme='light'] .navbar-sidebar__items .navbar__search-input {
    background: rgba(128, 90, 213, 0.1) !important;
    border: 1px solid rgba(128, 90, 213, 0.2) !important;
    color: rgba(0, 0, 0, 0.85) !important;
  }
}

/* Additional mobile navbar adjustments for all pages */
@media (max-width: 996px) {
  /* Ensure backdrop filters work on mobile navbar */
  body.landing-page .navbar,
  body.docs-page .navbar {
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }
}

/* Very small screens - brand spacing */
@media (max-width: 480px) {
  .navbar__brand {
    margin-right: 0.5rem;
  }

  /* Hide brand text on very small screens */
  .brandText_eqio {
    display: none !important;
  }
}

/* Docs page needs larger threshold due to search bar */
@media (max-width: 768px) {
  body.docs-page .brandText_eqio {
    display: none !important;
  }
}

/* ========================================
   CODE BLOCK ENHANCEMENTS
   ======================================== */

/* Line highlighting in code blocks */
.docusaurus-highlight-code-line {
  background-color: var(--docusaurus-highlighted-code-line-bg);
  display: block;
  margin: 0 calc(-1 * var(--ifm-pre-padding));
  padding: 0 var(--ifm-pre-padding);
  border-left: 3px solid var(--dank-purple-light);
}

/* Copy button styling */
.clean-btn[class*='copyButton'] {
  background: rgba(208, 188, 255, 0.1);
  border: 1px solid rgba(208, 188, 255, 0.2);
  color: var(--dank-purple-light);
  transition: all 0.2s ease;
}

.clean-btn[class*='copyButton']:hover {
  background: rgba(208, 188, 255, 0.2);
  border-color: var(--dank-purple-light);
}

/* ========================================
   FIGURE CAPTION STYLING
   ======================================== */

figcaption {
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.6);
  margin-top: 0.5rem;
}

[data-theme='light'] figcaption {
  color: rgba(0, 0, 0, 0.6);
}

/* ========================================
   IMAGE ZOOM (FULLSCREEN OVERLAY)
   ======================================== */

.markdown img {
  cursor: zoom-in;
  max-width: 100%;
  height: auto;
  transition: transform 0.2s ease;
}

[data-theme='dark'] .medium-zoom-overlay {
  background: rgba(17, 17, 17, 0.95) !important;
}

[data-theme='light'] .medium-zoom-overlay {
  background: rgba(248, 247, 251, 0.95) !important;
}

.medium-zoom-overlay,
.medium-zoom-image {
  transition: opacity 0.3s ease, transform 0.3s ease !important;
}

.medium-zoom-overlay {
  z-index: 999 !important;
}

.medium-zoom-image--opened {
  z-index: 1000 !important;
  cursor: zoom-out;
  max-width: 45vw !important;
  max-height: 45vh !important;
  object-fit: contain !important;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2) !important;
}

/* ========================================
   PANZOOM CONTROLS (for SVG/Mermaid diagrams)
   ======================================== */

/* Make Mermaid diagrams zoomable with cursor indicator */
.mermaid svg {
  cursor: grab;
  transition: transform 0.1s ease;
}

.mermaid svg:active {
  cursor: grabbing;
}

/* ========================================
   DETAILS/COLLAPSIBLE COMPONENT STYLING
   ======================================== */

/* Base details element */
details {
  border: 1px solid rgba(208, 188, 255, 0.25) !important;
  border-radius: 0.5rem !important;
  padding: 0 !important;
  margin: 1.5rem 0 !important;
  background: rgba(128, 90, 213, 0.06) !important;
  backdrop-filter: blur(8px);
  overflow: hidden;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

details:hover {
  border-color: rgba(208, 188, 255, 0.4) !important;
}

details[open] {
  box-shadow: 0 4px 12px rgba(128, 90, 213, 0.1);
}

/* Summary (clickable header) */
details > summary {
  cursor: pointer;
  font-weight: 600;
  font-size: 1rem;
  padding: 1rem 1.25rem !important;
  margin: 0 !important;
  user-select: none;
  list-style: none !important;
  background: rgba(128, 90, 213, 0.08);
  color: var(--dank-purple-light);
  transition: background 0.2s ease, color 0.2s ease;
  border-radius: 0.5rem 0.5rem 0 0;
}

/* Hide all default markers/arrows */
details > summary::-webkit-details-marker {
  display: none !important;
}

details > summary::marker {
  display: none !important;
  content: '' !important;
}

/* Hide Docusaurus's built-in toggle arrow */
details > summary::before {
  display: none !important;
}

/* Arrow indicator */
details > summary::after {
  content: '▸';
  display: inline-block;
  margin-left: auto;
  font-size: 0.875rem;
  transition: transform 0.2s ease;
  color: var(--dank-purple-light);
}

details[open] > summary::after {
  transform: rotate(90deg);
}

details > summary:hover {
  background: rgba(128, 90, 213, 0.12);
  color: var(--dank-purple-lighter);
}

/* Content area */
details > summary ~ * {
  padding: 0 1.25rem;
}

details > summary + div,
details > .collapsibleContent_i85q {
  padding: 1rem 1.25rem !important;
  border-top: 1px solid rgba(208, 188, 255, 0.15);
}

/* Reset alert styling that Docusaurus applies */
details.alert {
  --ifm-alert-background-color: transparent;
  --ifm-alert-border-color: transparent;
  border-left: none !important;
}

details.alert--info {
  border-left: none !important;
}

/* Light mode adjustments */
[data-theme='light'] details {
  border-color: rgba(128, 90, 213, 0.2) !important;
  background: rgba(128, 90, 213, 0.04) !important;
}

[data-theme='light'] details:hover {
  border-color: rgba(128, 90, 213, 0.35) !important;
}

[data-theme='light'] details[open] {
  box-shadow: 0 4px 12px rgba(128, 90, 213, 0.08);
}

[data-theme='light'] details > summary {
  background: rgba(128, 90, 213, 0.06);
  color: var(--dank-purple-dark);
}

[data-theme='light'] details > summary:hover {
  background: rgba(128, 90, 213, 0.1);
  color: var(--dank-purple-darker);
}

[data-theme='light'] details > summary::after {
  color: var(--dank-purple-dark);
}

[data-theme='light'] details > summary + div,
[data-theme='light'] details > .collapsibleContent_i85q {
  border-top-color: rgba(128, 90, 213, 0.12);
}

/* Nested list styling within details */
details ul,
details ol {
  margin: 0.5rem 0;
  padding-left: 1.5rem;
}

details li {
  margin: 0.25rem 0;
}

details p {
  margin: 0.75rem 0;
}

details p:first-child {
  margin-top: 0;
}

details p:last-child {
  margin-bottom: 0;
}

/* Panzoom wrapper styling - only for Mermaid diagrams */
.mermaid[style*="overflow"],
.docusaurus-mermaid-container > div[style*="overflow: hidden"] {
  border-radius: 0.5rem;
  border: 1px solid rgba(208, 188, 255, 0.2);
  background: rgba(0, 0, 0, 0.2);
  position: relative;
  margin: 1rem 0;
}

[data-theme='light'] .mermaid[style*="overflow"],
[data-theme='light'] .docusaurus-mermaid-container > div[style*="overflow: hidden"] {
  border-color: rgba(128, 90, 213, 0.2);
  background: rgba(248, 247, 251, 0.5);
}

/* Hint text for panzoom interaction on Mermaid only */
.docusaurus-mermaid-container > div[style*="overflow: hidden"]::before {
  content: "Scroll to zoom • Drag to pan • Double-click to reset";
  position: absolute;
  bottom: 0.5rem;
  right: 0.5rem;
  font-size: 0.75rem;
  color: rgba(208, 188, 255, 0.6);
  background: rgba(17, 17, 17, 0.8);
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 10;
}

.docusaurus-mermaid-container > div[style*="overflow: hidden"]:hover::before {
  opacity: 1;
}

[data-theme='light'] .docusaurus-mermaid-container > div[style*="overflow: hidden"]::before {
  color: rgba(128, 90, 213, 0.8);
  background: rgba(248, 247, 251, 0.9);
  border: 1px solid rgba(128, 90, 213, 0.2);
}

/* ========================================
   DOCS-ONLY NAVBAR ITEMS
   ======================================== */

/* Hide Install link on docs pages */
body.docs-page .navbar-install-link {
  display: none !important;
}

/* Hide version dropdown by default, show only on docs pages */
.navbar-version-dropdown {
  display: none !important;
}

body.docs-page .navbar-version-dropdown {
  display: flex !important;
}

/* Version dropdown trigger styling */
a.navbar-version-dropdown.navbar__link {
  border-bottom: none !important;
  padding-left: 0.5rem !important;
  padding-right: 0.5rem !important;
  color: var(--ifm-color-primary) !important;
}

a.navbar-version-dropdown.navbar__link::after {
  display: none !important;
}

/* Search results hover fix - use dark text on highlighted results */
[data-theme='dark'] {
  --search-local-hit-active-color: #1a1a1a;
}




================================================
FILE: src/css/global.css
================================================
/* ========================================
   ADWAITA SANS FONT
   ======================================== */

@font-face {
  font-family: 'Adwaita Sans';
  src: url('/fonts/AdwaitaSans-Regular.woff2') format('woff2');
  font-weight: 100 950;
  font-style: normal;
  font-display: swap;
}

/* ========================================
   FIRA CODE NERD FONT MONO
   ======================================== */

@font-face {
  font-family: 'FiraCode Nerd Font Mono';
  src: url('/fonts/FiraCodeNerdFontMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'FiraCode Nerd Font Mono';
  src: url('/fonts/FiraCodeNerdFontMono-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/**
 * Global CSS - Docusaurus Base Overrides
 * This file sets our defaults for Docusaurus components
 * No !important needed - we're setting the base values
 */

/* ========================================
   ROOT VARIABLES - Our Defaults
   ======================================== */

:root {
  /* Font family - Adwaita Sans as primary with system font fallbacks */
  --ifm-font-family-base: 'Adwaita Sans', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;

  /* Monospace font family - FiraCode Nerd Font Mono for consistent monospace rendering */
  --ifm-font-family-monospace: 'FiraCode Nerd Font Mono', 'Courier New', monospace;

  /* Navbar dimensions */
  --ifm-navbar-height: 4.5rem;
  --ifm-navbar-padding-horizontal: 2rem;
  --ifm-navbar-padding-vertical: 0;
  --ifm-navbar-item-padding-horizontal: 1rem;
  --ifm-navbar-item-padding-vertical: 0.5rem;

  /* Navbar appearance - overridden by page-specific styles in custom.css */
  --ifm-navbar-shadow: none;
}

/* ========================================
   NAVBAR BASE STRUCTURE
   ======================================== */

.navbar {
  height: var(--ifm-navbar-height);
  padding: var(--ifm-navbar-padding-vertical) 0;
  box-shadow: var(--ifm-navbar-shadow);
  background: var(--ifm-navbar-background-color);
  /* Let Docusaurus handle positioning for proper announcement bar integration */
}

.navbar__inner {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--ifm-navbar-padding-horizontal);
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  overflow: visible;
}

.navbar__items {
  height: 100%;
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
  gap: 0.5rem;
}

/* Ensure right items are properly aligned */
.navbar__items--right {
  flex: 1;
  justify-content: flex-end;
  align-items: center;
  gap: 0.5rem;
  min-width: 0; /* Allow flex items to shrink if needed */
  display: flex;
  flex-wrap: nowrap;
}

/* Prevent navbar items from shrinking on narrow screens - except search */
.navbar__items--right > .navbar__item {
  flex-shrink: 0;
  position: relative;
}

/* Search can shrink if needed but has min/max width and stays in flow */
.navbar__items--right > .navbarSearchContainer_Bca1,
.navbar__items--right .navbar__search {
  flex-shrink: 1;
  flex-grow: 0;
  position: relative !important;
  display: flex;
  align-items: center;
}

.navbar__item {
  padding: 0;
  display: flex;
  align-items: center;
}

.navbar__logo {
  height: 2rem;
  margin-right: 0.5rem;
}

.navbar__title {
  font-weight: 600;
  font-size: 1.125rem;
  display: flex;
  align-items: center;
}

.navbar__brand {
  display: flex;
  align-items: center;
  height: 100%;
}

/* ========================================
   NAVBAR LINKS
   ======================================== */

.navbar__link {
  color: rgba(255, 255, 255, 0.75);
  font-size: 0.9375rem;
  font-weight: 500;
  padding: var(--ifm-navbar-item-padding-vertical) var(--ifm-navbar-item-padding-horizontal);
  border-radius: 0.375rem;
  transition: color 0.2s ease;
  position: relative;
  display: flex;
  align-items: center;
  height: auto;
}

/* Smooth underline animation on hover */
.navbar__link::after {
  content: '';
  position: absolute;
  bottom: 0.25rem;
  left: var(--ifm-navbar-item-padding-horizontal);
  right: var(--ifm-navbar-item-padding-horizontal);
  height: 2px;
  background: linear-gradient(90deg, #D0BCFF, #805AD5);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.25s ease;
}

.navbar__link:hover {
  color: #ffffff;
  background: transparent;
}

.navbar__link:hover::after {
  transform: scaleX(1);
}

.navbar__link--active {
  color: var(--dank-purple-light);
  background: transparent;
}

/* ========================================
   NAVBAR TOGGLE (Mobile)
   ======================================== */

.navbar__toggle {
  color: var(--dank-purple-light);
  width: 2.5rem;
  height: 2.5rem;
  padding: 0.25rem;
  border-radius: 0.375rem;
  display: none; /* Hidden by default, shown on mobile */
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;
}

.navbar__toggle:hover {
  background: rgba(208, 188, 255, 0.1);
}

/* Show toggle on mobile */
@media (max-width: 996px) {
  .navbar__toggle {
    display: flex !important;
  }
}

/* ========================================
   NAVBAR SIDEBAR (Mobile Menu)
   ======================================== */

/* Prevent body scroll when mobile menu is open */
html:has(.navbar-sidebar--show) {
  overflow: hidden !important;
}

body:has(.navbar-sidebar--show) {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
}

/* Mobile sidebar - full screen overlay */
.navbar-sidebar {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  max-width: 100vw !important;
  height: 100vh !important;
  height: 100dvh !important; /* Dynamic viewport height for mobile browsers */
  background: rgba(0, 0, 0, 0.95) !important;
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  z-index: 9999 !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch !important;
  display: block !important;
  transform: none !important;
}

/* Sidebar backdrop */
.navbar-sidebar__backdrop {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background: rgba(0, 0, 0, 0.5) !important;
  z-index: calc(var(--ifm-z-index-fixed)) !important;
}

/* Sidebar brand area */
.navbar-sidebar__brand {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 0.75rem !important;
  padding: 1rem 1.5rem !important;
  border-bottom: 1px solid rgba(208, 188, 255, 0.12) !important;
  height: 3.5rem !important;
  width: 100% !important;
}

/* Brand logo in sidebar */
.navbar-sidebar__brand .navbar__brand {
  margin: 0 !important;
  padding: 0 !important;
  margin-right: auto !important;
}

.navbar-sidebar__brand .navbar__logo {
  height: 2rem !important;
  margin-right: 0.5rem !important;
}

.navbar-sidebar__brand .navbar__title {
  font-size: 1.125rem !important;
}

/* Dark mode toggle in sidebar brand */
.navbar-sidebar__brand .toggle_vylO {
  margin: 0 !important;
}

/* Sidebar close button */
.navbar-sidebar__close {
  color: var(--dank-purple-light) !important;
  width: 2rem !important;
  height: 2rem !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  border-radius: 0.375rem !important;
  transition: background 0.2s ease !important;
  padding: 0 !important;
  margin: 0 !important;
}

.navbar-sidebar__close:hover {
  background: rgba(208, 188, 255, 0.1) !important;
}

/* Sidebar items container */
.navbar-sidebar__items {
  overflow-y: visible !important;
  -webkit-overflow-scrolling: touch !important;
  padding: 0 !important;
  width: 100% !important;
  display: flex !important;
  flex-direction: row !important;
  flex-wrap: nowrap !important;
  transition: transform 0.3s ease !important;
  transform: translateX(0) !important;
}

/* When showing secondary panel (docs sidebar), slide to show it */
.navbar-sidebar__items--show-secondary {
  transform: translateX(-100%) !important;
}

/* Individual panels within the sidebar */
.navbar-sidebar__items > .navbar-sidebar__item {
  flex-shrink: 0 !important;
  width: 100% !important;
  min-width: 100vw !important;
}

/* Menu list inside sidebar */
.navbar-sidebar__items .menu {
  padding: 0 !important;
  width: 100% !important;
  display: block !important;
}

.navbar-sidebar__items .menu__list {
  padding: 0 !important;
  margin: 0 !important;
  list-style: none !important;
  width: 100% !important;
}

/* Docs sidebar specific styles */
.theme-doc-sidebar-menu {
  padding: 0 !important;
}

/* Sidebar panels - Docusaurus uses a two-panel system on docs pages */
.navbar-sidebar__item.menu {
  width: 100% !important;
}

/* Always hide back button - never show it */
.navbar-sidebar__back {
  display: none !important;
}

/* Individual sidebar items */
.navbar-sidebar__item {
  padding: 0 !important;
  margin: 0 !important;
  width: 100% !important;
  list-style: none !important;
}

/* Menu items in sidebar */
.navbar-sidebar__items .menu__list-item {
  padding: 0 !important;
  margin: 0 !important;
  width: 100% !important;
  list-style: none !important;
}

.navbar-sidebar__items .menu__link {
  color: rgba(255, 255, 255, 0.85) !important;
  border-radius: 0 !important;
  transition: all 0.2s ease !important;
  padding: 0.875rem 1.5rem !important;
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  text-align: left !important;
  width: 100% !important;
  font-size: 1rem !important;
  font-weight: 500 !important;
  text-decoration: none !important;
}

.navbar-sidebar__items .menu__link:hover {
  background: rgba(208, 188, 255, 0.1) !important;
  color: var(--dank-purple-light) !important;
}

.navbar-sidebar__items .menu__link--active {
  background: rgba(208, 188, 255, 0.15) !important;
  color: var(--dank-purple-light) !important;
  border-left: 3px solid var(--dank-purple-light) !important;
}

/* Ensure icon links in sidebar are properly displayed */
.navbar-sidebar__items .header-github-link,
.navbar-sidebar__items .navbar-discord-link,
.navbar-sidebar__items .navbar-kofi-link {
  width: 100% !important;
  height: auto !important;
  padding: 0.875rem 1.5rem !important;
  margin: 0 !important;
  border-radius: 0 !important;
  display: flex !important;
  align-items: center !important;
  font-size: 1rem !important;
  font-weight: 500 !important;
  justify-content: flex-start !important;
  text-align: left !important;
  color: rgba(255, 255, 255, 0.85) !important;
  transition: all 0.2s ease !important;
  text-decoration: none !important;
}

.navbar-sidebar__items .header-github-link:hover,
.navbar-sidebar__items .navbar-discord-link:hover,
.navbar-sidebar__items .navbar-kofi-link:hover {
  background: rgba(208, 188, 255, 0.1) !important;
  color: var(--dank-purple-light) !important;
}

.navbar-sidebar__items .header-github-link::before,
.navbar-sidebar__items .navbar-discord-link::before,
.navbar-sidebar__items .navbar-kofi-link::before {
  margin-right: 0.875rem !important;
  flex-shrink: 0 !important;
  width: 1.25rem !important;
  height: 1.25rem !important;
}

.navbar-sidebar__items .header-github-link::after {
  content: 'GitHub' !important;
  font-size: 1rem !important;
}

.navbar-sidebar__items .navbar-discord-link::after {
  content: 'Discord' !important;
  font-size: 1rem !important;
}

.navbar-sidebar__items .navbar-kofi-link::after {
  content: 'Support' !important;
  font-size: 1rem !important;
}

/* ========================================
   NAVBAR ICON LINKS (GitHub, Discord, etc.)
   ======================================== */

.header-github-link,
.navbar-discord-link,
.navbar-kofi-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2.75rem;
  height: 2.75rem;
  border-radius: 50%;
  color: rgba(255, 255, 255, 0.75);
  transition: background 0.2s ease, color 0.2s ease;
  padding: 0;
  overflow: visible;
  flex-shrink: 0;
}

.header-github-link::before,
.navbar-discord-link::before,
.navbar-kofi-link::before {
  content: '';
  width: 1.5rem;
  height: 1.5rem;
  display: block;
  background: currentColor;
  mask-repeat: no-repeat;
  mask-size: contain;
  mask-position: center;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-size: contain;
  -webkit-mask-position: center;
}

.header-github-link::before {
  mask-image: url('/img/github.svg');
  -webkit-mask-image: url('/img/github.svg');
}

.navbar-discord-link::before {
  mask-image: url('/img/discord.svg');
  -webkit-mask-image: url('/img/discord.svg');
}

.navbar-kofi-link::before {
  mask-image: url('/img/kofi.svg');
  -webkit-mask-image: url('/img/kofi.svg');
}

.header-github-link:hover,
.navbar-discord-link:hover,
.navbar-kofi-link:hover {
  background: rgba(208, 188, 255, 0.15);
  color: var(--dank-purple-light);
}

/* Hide text in icon-only links */
.header-github-link,
.navbar-discord-link,
.navbar-kofi-link {
  font-size: 0;
}

/* ========================================
   MOBILE RESPONSIVE NAVBAR
   ======================================== */

/* Docusaurus mobile breakpoint */
@media (max-width: 996px) {
  /* Adjust navbar padding on mobile */
  :root {
    --ifm-navbar-padding-horizontal: 1rem;
    --ifm-navbar-height: 3.5rem;
  }

  /* Prevent navbar inner from overflowing */
  .navbar__inner {
    width: 100%;
    overflow: visible;
  }

  /* Ensure items don't cause overflow */
  .navbar__items {
    gap: 0.25rem;
    overflow: visible;
  }

  /* Right items should not overflow but allow search to shrink */
  .navbar__items--right {
    flex-shrink: 0;
    overflow: visible;
    gap: 0.25rem !important;
  }

  /* Reduce logo size on mobile */
  .navbar__logo {
    height: 1.75rem;
  }

  /* Adjust title size on mobile */
  .navbar__title {
    font-size: 1rem;
  }

  /* Reduce icon link sizes on mobile */
  .header-github-link,
  .navbar-discord-link,
  .navbar-kofi-link {
    width: 2.25rem;
    height: 2.25rem;
    flex-shrink: 0;
  }

  .header-github-link::before,
  .navbar-discord-link::before,
  .navbar-kofi-link::before {
    width: 1.25rem;
    height: 1.25rem;
  }

  /* Ensure proper spacing between navbar items on mobile */
  .navbar__item {
    padding: 0;
    flex-shrink: 0;
  }

  /* Hide search box on mobile - it appears in mobile menu instead */
  .navbar__search {
    display: none;
  }

  /* Ensure mobile menu toggle is visible */
  .navbar__toggle {
    display: flex !important;
    flex-shrink: 0;
  }

  /* Hide text links on mobile - they appear in hamburger menu */
  .navbar__items--right > .navbar__item.navbar__link {
    display: none;
  }

  /* Reduce icon sizes slightly on mobile to make room */
  .header-github-link,
  .navbar-discord-link,
  .navbar-kofi-link {
    width: 2rem;
    height: 2rem;
  }

  .header-github-link::before,
  .navbar-discord-link::before,
  .navbar-kofi-link::before {
    width: 1.125rem;
    height: 1.125rem;
  }

  /* Keep icon links visible */
  .navbar__items--right .header-github-link,
  .navbar__items--right .navbar-discord-link,
  .navbar__items--right .navbar-kofi-link {
    display: flex !important;
  }
}

/* Very small mobile devices */
@media (max-width: 480px) {
  :root {
    --ifm-navbar-padding-horizontal: 0.75rem;
  }

  /* Further reduce icon sizes on very small screens */
  .header-github-link,
  .navbar-discord-link,
  .navbar-kofi-link {
    width: 2rem;
    height: 2rem;
  }

  .header-github-link::before,
  .navbar-discord-link::before,
  .navbar-kofi-link::before {
    width: 1.125rem;
    height: 1.125rem;
  }

  /* Reduce spacing between items */
  .navbar__item {
    padding: 0;
  }

  /* Reduce logo size further */
  .navbar__logo {
    height: 1.5rem;
  }

  /* Smaller title */
  .navbar__title {
    font-size: 0.9rem;
  }

  /* Reduce gap between items */
  .navbar__items {
    gap: 0.125rem;
  }

  .navbar__items--right {
    gap: 0.125rem;
  }
}



================================================
FILE: src/pages/index.module.css
================================================
/* ===== CONTAINER & BASE ===== */
.container {
  min-height: 100vh;
  background: #000000;
  color: #ffffff;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
  overflow-x: hidden;
  position: relative;
  scroll-behavior: smooth;
}

[data-theme='light'] .container {
  background: #f8f7fb;
  color: #1a1625;
}

/* ===== ANIMATED GRADIENT BACKGROUND ===== */
.gradientBackground {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
}

.gradientOrb1,
.gradientOrb2,
.gradientOrb3 {
  position: absolute;
  border-radius: 50%;
  filter: blur(100px);
  opacity: 0.3;
  animation: float 20s ease-in-out infinite;
}

.gradientOrb1 {
  width: 600px;
  height: 600px;
  background: radial-gradient(circle, #805AD5 0%, #D0BCFF 50%, transparent 70%);
  top: -200px;
  left: -200px;
  animation-delay: 0s;
}

.gradientOrb2 {
  width: 500px;
  height: 500px;
  background: radial-gradient(circle, #D0BCFF 0%, #B794F4 50%, transparent 70%);
  bottom: -150px;
  right: -150px;
  animation-delay: 7s;
}

.gradientOrb3 {
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, #6B46C1 0%, #9F7AEA 50%, transparent 70%);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  animation-delay: 14s;
}

[data-theme='light'] .gradientOrb1 {
  background: radial-gradient(circle, #B794F4 0%, #E9DFFF 50%, transparent 70%);
  opacity: 0.5;
}

[data-theme='light'] .gradientOrb2 {
  background: radial-gradient(circle, #E9DFFF 0%, #D0BCFF 50%, transparent 70%);
  opacity: 0.5;
}

[data-theme='light'] .gradientOrb3 {
  background: radial-gradient(circle, #9F7AEA 0%, #D0BCFF 50%, transparent 70%);
  opacity: 0.5;
}

@keyframes float {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  33% {
    transform: translate(50px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-30px, 30px) scale(0.9);
  }
}

/* ===== BACKGROUND PATTERN OVERLAY ===== */
.backgroundPattern {
  position: fixed;
  inset: 0;
  z-index: 1;
  background: rgba(0, 0, 0, 0.1);
  pointer-events: none;
}

[data-theme='light'] .backgroundPattern {
  background: rgba(255, 255, 255, 0.3);
}


/* ===== GRID OVERLAY ===== */
.gridOverlay {
  position: fixed;
  inset: 0;
  z-index: 1;
  background-image:
    linear-gradient(rgba(208, 188, 255, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(208, 188, 255, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
}

[data-theme='light'] .gridOverlay {
  background-image:
    linear-gradient(rgba(128, 90, 213, 0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(128, 90, 213, 0.08) 1px, transparent 1px);
}

.gridOverlay::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(208, 188, 255, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(208, 188, 255, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;

  mask-image: radial-gradient(
    circle 500px at var(--mouse-x) var(--mouse-y),
    black 0%,
    transparent 100%
  );
  -webkit-mask-image: radial-gradient(
    circle 500px at var(--mouse-x) var(--mouse-y),
    black 0%,
    transparent 100%
  );
}

[data-theme='light'] .gridOverlay::before {
  background-image:
    linear-gradient(rgba(128, 90, 213, 0.2) 1px, transparent 1px),
    linear-gradient(90deg, rgba(128, 90, 213, 0.2) 1px, transparent 1px);
}

/* .gridOverlay::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle 223px at var(--mouse-x) var(--mouse-y),
    rgba(208, 188, 255, 0.008) 0%,
    transparent 36%
  );
  pointer-events: none;
  mix-blend-mode: screen;
} */

/* ===== CONTENT WRAPPER ===== */
.content {
  position: relative;
  z-index: 10;
}

/* ===== HERO SECTION ===== */
.hero {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8rem 2rem 4rem;
  position: relative;
  transition: background 0.3s ease;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

.heroContent {
  max-width: 1200px;
  width: 100%;
  text-align: center;
}

.heroTitle {
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 800;
  line-height: 1.1;
  margin-bottom: 0.5rem;
  letter-spacing: -0.03em;
}

.heroLine {
  display: block;
  animation: fadeInUp 0.8s ease-out backwards;
}

.heroLine:nth-child(1) {
  animation-delay: 0.1s;
}

.heroLine:nth-child(2) {
  animation-delay: 0.2s;
}

.heroLine:nth-child(3) {
  animation-delay: 0.3s;
}

.heroGradient {
  background: linear-gradient(135deg, #D0BCFF 0%, #805AD5 50%, #6B46C1 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  background-size: 200% 200%;
  animation: gradientShift 8s ease infinite, fadeInUp 0.8s ease-out 0.3s backwards;
}

@keyframes gradientShift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

/* ===== COMPOSITOR ROTATOR ===== */
.compositorRotatorWrapper {
  display: inline-block;
  position: relative;
  vertical-align: middle;
}

.compositorRotator {
  position: relative;
  display: inline-block;
  height: 1.4em;
  min-width: 400px;
  white-space: nowrap;
}

.compositorSlide {
  position: absolute;
  left: 50%;
  transform: translateX(-50%) scale(0.8) translateY(20px);
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  opacity: 0;
  filter: blur(10px);
  transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  white-space: nowrap;
}

.compositorActive {
  opacity: 1;
  transform: translateX(-50%) scale(1) translateY(0);
  filter: blur(0);
}

.compositorLogo {
  height: 0.7em;
  width: auto;
  max-width: 0.85em;
  object-fit: contain;
  filter: brightness(0) invert(1) drop-shadow(0 0 20px rgba(208, 188, 255, 0.8));
  flex-shrink: 0;
}

[data-theme='light'] .compositorLogo {
  filter: brightness(0) drop-shadow(0 0 20px rgba(128, 90, 213, 0.8));
}

.compositorLogo[src$=".png"] {
  filter: brightness(0) invert(1) grayscale(1) drop-shadow(0 0 20px rgba(208, 188, 255, 0.8));
}

[data-theme='light'] .compositorLogo[src$=".png"] {
  filter: brightness(0) grayscale(1) drop-shadow(0 0 20px rgba(128, 90, 213, 0.8));
}

/* Sway logo is ugly, make it smaller in main rotation too */
.compositorLogo[src="/img/sway.svg"] {
  height: 0.55em;
  max-width: 0.7em;
}

.compositorName {
  background: linear-gradient(135deg, #D0BCFF 0%, #805AD5 50%, #6B46C1 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  background-size: 200% 200%;
  font-weight: 800;
  letter-spacing: -0.02em;
}

[data-theme='light'] .compositorName {
  background: linear-gradient(135deg, #805AD5 0%, #6B46C1 50%, #553C9A 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}


.heroSubtitle {
  font-size: clamp(1.125rem, 2vw, 1.375rem);
  color: rgba(255, 255, 255, 0.7);
  max-width: 700px;
  margin: 0 auto 0;
  line-height: 1.6;
  animation: fadeInUp 0.8s ease-out 0.4s backwards;
  padding-top: 0.25rem;
  padding-bottom: 0;
}

[data-theme='light'] .heroSubtitle {
  color: rgba(26, 22, 37, 0.7);
}

/* ===== CTA BUTTONS ===== */
.heroCTA {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 0;
  margin-bottom: 2rem;
  animation: fadeInUp 0.8s ease-out 0.5s backwards;
}

.primaryCTA {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 2rem;
  background: linear-gradient(135deg, #805AD5, #D0BCFF);
  color: #ffffff !important;
  text-decoration: none;
  font-weight: 600;
  font-size: 1.0625rem;
  border-radius: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 10px 40px rgba(128, 90, 213, 0.3);
  position: relative;
  overflow: hidden;
}

.primaryCTA::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.primaryCTA:hover {
  transform: translateY(-2px);
  box-shadow: 0 15px 50px rgba(128, 90, 213, 0.4);
  color: #ffffff !important;
  text-decoration: none;
}

.primaryCTA:hover::before {
  opacity: 1;
}

[data-theme='light'] .primaryCTA {
  color: #1a1625 !important;
}

[data-theme='light'] .primaryCTA:hover {
  color: #1a1625 !important;
}

.ctaArrow {
  transition: transform 0.3s ease;
}

.primaryCTA:hover .ctaArrow {
  transform: translateX(4px);
}

.secondaryCTA {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 2rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.3);
  color: #ffffff !important;
  text-decoration: none;
  font-weight: 600;
  font-size: 1.0625rem;
  border-radius: 12px;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.secondaryCTA:hover {
  background: rgba(208, 188, 255, 0.1);
  border-color: rgba(208, 188, 255, 0.5);
  transform: translateY(-2px);
  color: #ffffff !important;
  text-decoration: none;
}

[data-theme='light'] .secondaryCTA {
  color: #1a1625 !important;
  background: rgba(128, 90, 213, 0.08);
  border-color: rgba(128, 90, 213, 0.3);
}

[data-theme='light'] .secondaryCTA:hover {
  color: #1a1625 !important;
  background: rgba(128, 90, 213, 0.15);
  border-color: rgba(128, 90, 213, 0.5);
}

/* ===== TERMINAL WINDOW ===== */
.terminalFloat {
  animation: fadeInUp 0.8s ease-out 0.6s backwards;
  margin-top: 3.5rem;
}

.terminalWindow {
  max-width: 700px;
  margin: 0 auto;
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 16px;
  overflow: hidden;
  backdrop-filter: blur(20px);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  cursor: pointer;
  position: relative;
  transition: all 0.3s ease;
}

[data-theme='light'] .terminalWindow {
  background: rgba(255, 255, 255, 0.7);
  border-color: rgba(128, 90, 213, 0.3);
  box-shadow: 0 20px 60px rgba(128, 90, 213, 0.15);
}

.terminalWindow:hover {
  border-color: rgba(208, 188, 255, 0.4);
  box-shadow: 0 20px 60px rgba(128, 90, 213, 0.3);
}

[data-theme='light'] .terminalWindow:hover {
  border-color: rgba(128, 90, 213, 0.5);
  box-shadow: 0 20px 60px rgba(128, 90, 213, 0.25);
}

.copiedIndicator {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(128, 90, 213, 0.95);
  color: #ffffff;
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  font-weight: 600;
  font-size: 1rem;
  display: flex;
  align-items: center;
  z-index: 100;
  box-shadow: 0 10px 40px rgba(128, 90, 213, 0.5);
  animation: popIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes popIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.terminalHeader {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem 1.5rem;
  background: rgba(255, 255, 255, 0.03);
  border-bottom: 1px solid rgba(208, 188, 255, 0.1);
}

[data-theme='light'] .terminalHeader {
  background: rgba(128, 90, 213, 0.05);
  border-bottom-color: rgba(128, 90, 213, 0.15);
}

.terminalLogos {
  display: flex;
  gap: 0.75rem;
  align-items: center;
  justify-content: center;
}

.terminalLogoLink {
  display: inline-block;
  cursor: pointer;
  transition: all 0.2s ease;
  text-decoration: none;
  line-height: 0;
}

.terminalLogoLink:hover {
  transform: scale(1.15);
}

.terminalLogo {
  height: 20px;
  width: auto;
  object-fit: contain;
  filter: brightness(0) invert(1) drop-shadow(0 0 4px rgba(208, 188, 255, 0.3));
  transition: filter 0.2s ease;
}

[data-theme='light'] .terminalLogo {
  filter: brightness(0) drop-shadow(0 0 4px rgba(128, 90, 213, 0.3));
}

.terminalLogo[src$=".png"] {
  filter: brightness(0) invert(1) grayscale(1) drop-shadow(0 0 4px rgba(208, 188, 255, 0.3));
}

[data-theme='light'] .terminalLogo[src$=".png"] {
  filter: brightness(0) grayscale(1) drop-shadow(0 0 4px rgba(128, 90, 213, 0.3));
}

.terminalLogoLink:hover .terminalLogo {
  filter: brightness(0) invert(1) drop-shadow(0 0 8px rgba(208, 188, 255, 0.8));
}

[data-theme='light'] .terminalLogoLink:hover .terminalLogo {
  filter: brightness(0) drop-shadow(0 0 8px rgba(128, 90, 213, 0.8));
}

.terminalLogoLink:hover .terminalLogo[src$=".png"] {
  filter: brightness(0) invert(1) grayscale(1) drop-shadow(0 0 8px rgba(208, 188, 255, 0.8));
}

[data-theme='light'] .terminalLogoLink:hover .terminalLogo[src$=".png"] {
  filter: brightness(0) grayscale(1) drop-shadow(0 0 8px rgba(128, 90, 213, 0.8));
}

.terminalBody {
  padding: 2rem 1.5rem;
  font-family: var(--ifm-font-family-monospace);
  font-size: 0.9375rem;
}

.terminalLine {
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.prompt {
  color: #D0BCFF;
  font-weight: bold;
}

[data-theme='light'] .prompt {
  color: #6B46C1;
}

.typedCommand {
  color: #ffffff;
}

[data-theme='light'] .typedCommand {
  color: #1a1625;
}

.cmdCommand {
  color: #B794F4;
  font-weight: 600;
}

[data-theme='light'] .cmdCommand {
  color: #6B46C1;
}

.cmdFlag {
  color: #9F7AEA;
}

[data-theme='light'] .cmdFlag {
  color: #805AD5;
}

.cmdUrl {
  color: #D0BCFF;
}

[data-theme='light'] .cmdUrl {
  color: #9F7AEA;
}

.cmdPipe {
  color: rgba(255, 255, 255, 0.6);
}

[data-theme='light'] .cmdPipe {
  color: rgba(26, 22, 37, 0.6);
}

.terminalCursor {
  color: #D0BCFF;
  animation: blink 1s step-end infinite;
}

.terminalCursor.hidden {
  opacity: 0;
}

.hidden {
  opacity: 0;
  pointer-events: none;
}

@keyframes blink {
  0%, 50% {
    opacity: 1;
  }
  51%, 100% {
    opacity: 0;
  }
}

.output {
  color: rgba(255, 255, 255, 0.6);
}

[data-theme='light'] .output {
  color: rgba(26, 22, 37, 0.6);
}

.success {
  color: #D0BCFF;
}

[data-theme='light'] .success {
  color: #6B46C1;
}

.fadeIn {
  opacity: 0;
  animation: fadeIn 0.5s ease-out forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== FEATURES SECTION ===== */
.features {
  padding: 4rem 2rem;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
  position: relative;
  transition: background 0.3s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

.sectionHeader {
  text-align: center;
  margin-bottom: 2rem;
}

.sectionTitle {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 800;
  margin-bottom: 1rem;
  letter-spacing: -0.02em;
}

.gradientText {
  background: linear-gradient(135deg, #D0BCFF, #805AD5);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme='light'] .gradientText {
  background: linear-gradient(135deg, #805AD5, #6B46C1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.sectionDesc {
  font-size: 1.25rem;
  color: rgba(255, 255, 255, 0.6);
}

[data-theme='light'] .sectionDesc {
  color: rgba(26, 22, 37, 0.6);
}

.featuresGrid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 2rem;
  max-width: 1400px;
  margin: 0 auto;
}

@media (min-width: 768px) and (max-width: 1023px) {
  .featuresGrid {
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
  }
}

@media (min-width: 1024px) {
  .featuresGrid {
    grid-template-columns: repeat(3, 1fr);
    gap: 2.5rem;
  }
}

@media (min-width: 1800px) {
  .featuresGrid {
    grid-template-columns: repeat(3, 1fr);
    max-width: 1600px;
    gap: 3rem;
  }
}

.featureCard {
  position: relative;
  padding: 0;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(208, 188, 255, 0.1);
  border-radius: 20px;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  overflow: hidden;
  width: 100%;
  max-width: 100%;
}

[data-theme='light'] .featureCard {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(128, 90, 213, 0.2);
}

.cardGlow {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, rgba(208, 188, 255, 0.15), transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.featureCard:hover {
  transform: translateY(-8px);
  border-color: rgba(208, 188, 255, 0.3);
  box-shadow: 0 20px 60px rgba(208, 188, 255, 0.2);
}

[data-theme='light'] .featureCard:hover {
  border-color: rgba(128, 90, 213, 0.4);
  box-shadow: 0 20px 60px rgba(128, 90, 213, 0.2);
}

.featureCard:hover .cardGlow {
  opacity: 1;
}

.cardImageContainer {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 10;
  overflow: hidden;
  margin-bottom: 0;
  background: linear-gradient(135deg, rgba(208, 188, 255, 0.05), rgba(128, 90, 213, 0.05));
}

.cardImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: zoom-in;
}

.cardImage.topAlign {
  object-position: top center;
}

.featureCard:hover .cardImage {
  transform: scale(1.05);
}

.cardIcon {
  font-size: 3rem;
  margin-bottom: 1.5rem;
}

.cardTitle {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.75rem;
  color: #ffffff;
  padding: 0 2rem;
  padding-top: 1.5rem;
}

[data-theme='light'] .cardTitle {
  color: #1a1625;
}

.cardDesc {
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.6;
  font-size: 1.0625rem;
  padding: 0 2rem 2rem;
}

[data-theme='light'] .cardDesc {
  color: rgba(26, 22, 37, 0.7);
}

/* ===== SCREENSHOT GALLERY ===== */
.screenshotGallery {
  padding: 4rem 2rem;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
  position: relative;
  transition: background 0.3s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

.screenshotsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2rem;
  margin-top: 1rem;
}

@media (min-width: 768px) and (max-width: 1023px) {
  .screenshotsGrid {
    grid-template-columns: repeat(2, 1fr);
  }

  .screenshotsGrid > .large {
    grid-column: 1 / -1;
  }
}

@media (min-width: 1024px) {
  .screenshotsGrid {
    grid-template-columns: repeat(3, 1fr);
    gap: 2.5rem;
  }

  .screenshotsGrid > .large {
    grid-column: 1 / -1;
  }
}

@media (min-width: 1600px) {
  .screenshotsGrid {
    grid-template-columns: repeat(3, 1fr);
    gap: 3rem;
    max-width: 1600px;
    margin-left: auto;
    margin-right: auto;
  }
}

.screenshotCard {
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(208, 188, 255, 0.1);
  border-radius: 24px;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

[data-theme='light'] .screenshotCard {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(128, 90, 213, 0.2);
}

.screenshotCard::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, rgba(208, 188, 255, 0.1), transparent 60%);
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
}

.screenshotCard:hover {
  transform: translateY(-8px);
  border-color: rgba(208, 188, 255, 0.3);
  box-shadow: 0 20px 60px rgba(208, 188, 255, 0.2);
}

[data-theme='light'] .screenshotCard:hover {
  border-color: rgba(128, 90, 213, 0.4);
  box-shadow: 0 20px 60px rgba(128, 90, 213, 0.2);
}

.screenshotCard:hover::before {
  opacity: 1;
}

.screenshotFrame {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 10;
  background: linear-gradient(135deg, rgba(208, 188, 255, 0.05), rgba(128, 90, 213, 0.05));
  overflow: hidden;
}

.screenshotFrame img {
  position: absolute;
  top: 0;
  left: 0;
}

.large .screenshotFrame {
  aspect-ratio: 16 / 9;
  max-height: none;
}

@media (min-width: 1024px) {
  .large .screenshotFrame {
    max-height: none; 
  }
}

@media (min-width: 1600px) {
  .large .screenshotFrame {
    max-height: none; 
  }
}

.screenshotVideo {
  width: 100%;
  height: 100%;
  object-fit: contain; 
  border-radius: 0;
  background: #000; 
}

.screenshotImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: zoom-in;
}

.screenshotImage.topAlign {
  object-position: top center;
}

.screenshotCard:hover .screenshotImage {
  transform: scale(1.03);
}

.lightOnly {
  display: none;
}

[data-theme='light'] .lightOnly {
  display: block;
}

[data-theme='light'] .darkOnly {
  display: none;
}

.screenshotLabel {
  padding: 1.5rem 2rem;
  background: rgba(0, 0, 0, 0.3);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

[data-theme='light'] .screenshotLabel {
  background: rgba(255, 255, 255, 0.5);
}

.screenshotLabel h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, #D0BCFF, #B794F4);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme='light'] .screenshotLabel h3 {
  background: linear-gradient(135deg, #805AD5, #6B46C1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.screenshotLabel p {
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.9375rem;
}

[data-theme='light'] .screenshotLabel p {
  color: rgba(26, 22, 37, 0.6);
}

/* ===== SHOWCASE SECTION ===== */
.showcase {
  padding: 4rem 2rem;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
  position: relative;
  transition: background 0.3s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

.showcaseGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 4rem;
  align-items: center;
}

.showcaseTitle {
  font-size: clamp(2.5rem, 4vw, 3.5rem);
  font-weight: 800;
  margin-bottom: 1.5rem;
  letter-spacing: -0.02em;
}

.showcaseDesc {
  font-size: 1.125rem;
  color: rgba(255, 255, 255, 0.7);
  line-height: 1.7;
  margin-bottom: 2rem;
}

[data-theme='light'] .showcaseDesc {
  color: rgba(26, 22, 37, 0.7);
}

.showcaseFeatures {
  list-style: none;
  padding: 0;
  margin: 0;
}

.showcaseFeatures li {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
  color: rgba(255, 255, 255, 0.8);
  font-size: 1.0625rem;
}

[data-theme='light'] .showcaseFeatures li {
  color: rgba(26, 22, 37, 0.8);
}

.showcaseFeatures svg {
  flex-shrink: 0;
  stroke: #D0BCFF;
}

[data-theme='light'] .showcaseFeatures svg {
  stroke: #6B46C1;
}

.colorGrid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

.colorBlock {
  aspect-ratio: 1;
  border-radius: 20px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  animation: float 6s ease-in-out infinite;
}

.colorBlock:nth-child(1) {
  animation-delay: 0s;
}

.colorBlock:nth-child(2) {
  animation-delay: 1.5s;
}

.colorBlock:nth-child(3) {
  animation-delay: 3s;
}

.colorBlock:nth-child(4) {
  animation-delay: 4.5s;
}

/* ===== PRE-CONFIGURED FLAVORS ===== */
.preconfiguredRow {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.75rem;
  margin-top: 2rem;
  animation: fadeInUp 0.8s ease-out 1.2s backwards;
}

.preconfiguredLabel {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.35);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  font-weight: 500;
}

[data-theme='light'] .preconfiguredLabel {
  color: rgba(26, 22, 37, 0.35);
}

.preconfiguredCard {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.625rem 1rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(208, 188, 255, 0.15);
  border-radius: 10px;
  text-decoration: none;
  transition: all 0.25s ease;
  backdrop-filter: blur(8px);
}

[data-theme='light'] .preconfiguredCard {
  background: rgba(128, 90, 213, 0.05);
  border-color: rgba(128, 90, 213, 0.2);
}

.preconfiguredCard:hover {
  background: rgba(208, 188, 255, 0.08);
  border-color: rgba(208, 188, 255, 0.3);
  transform: translateY(-2px);
  text-decoration: none;
}

[data-theme='light'] .preconfiguredCard:hover {
  background: rgba(128, 90, 213, 0.1);
  border-color: rgba(128, 90, 213, 0.4);
}

.preconfiguredLogo {
  width: 24px;
  height: 24px;
  object-fit: contain;
  filter: brightness(0) invert(1);
}

[data-theme='light'] .preconfiguredLogo {
  filter: brightness(0) invert(0.2);
}

.preconfiguredInfo {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.0625rem;
}

.preconfiguredName {
  font-size: 0.875rem;
  font-weight: 600;
  color: #ffffff;
}

[data-theme='light'] .preconfiguredName {
  color: #1a1625;
}

.preconfiguredDesc {
  font-size: 0.6875rem;
  color: rgba(255, 255, 255, 0.5);
}

[data-theme='light'] .preconfiguredDesc {
  color: rgba(26, 22, 37, 0.5);
}

.preconfiguredArrow {
  stroke: rgba(255, 255, 255, 0.4);
  transition: all 0.25s ease;
  margin-left: 0.125rem;
}

[data-theme='light'] .preconfiguredArrow {
  stroke: rgba(26, 22, 37, 0.4);
}

.preconfiguredCard:hover .preconfiguredArrow {
  stroke: rgba(208, 188, 255, 0.8);
  transform: translateX(3px);
}

[data-theme='light'] .preconfiguredCard:hover .preconfiguredArrow {
  stroke: rgba(128, 90, 213, 0.8);
}

/* ===== ANIMATIONS ===== */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .heroTitle {
    font-size: 2.5rem;
  }

  .heroCTA {
    flex-direction: column;
    align-items: stretch;
  }

  .showcaseGrid {
    grid-template-columns: 1fr;
  }

  /* Adjust section min-height on mobile for better fit */
  .screenshotGallery,
  .features,
  .showcase {
    min-height: auto;
    padding: 3rem 1.5rem;
  }

  /* Compositor rotator mobile adjustments */
  .compositorRotator {
    min-width: 250px;
  }

  .compositorSlide {
    gap: 0.5rem;
  }

  .compositorLogo {
    height: 0.6em;
  }

  /* Terminal logos mobile adjustments */
  .terminalLogo {
    height: 16px;
  }

  .terminalBody {
    padding: 1.5rem 0.75rem;
    font-size: 0.625rem;
  }

  .terminalLine {
    gap: 0.25rem;
    flex-wrap: nowrap;
  }

  .terminalWindow {
    overflow-x: auto;
  }

  /* Disable mouse effects on mobile */
  .gridOverlay::before {
    display: none;
  }
}

/* Disable mouse effects on touch devices */
@media (hover: none) and (pointer: coarse) {
  .gridOverlay::before {
    display: none;
  }
}


================================================
FILE: src/pages/index.tsx
================================================
import React, { useState, useEffect } from 'react';
import Link from '@docusaurus/Link';
import Layout from '@theme/Layout';
import Head from '@docusaurus/Head';
import styles from './index.module.css';

// Declare medium-zoom and playerjs types
declare global {
  interface Window {
    mediumZoom?: (target: string | HTMLElement | NodeListOf<HTMLElement>, options?: any) => any;
    playerjs?: any;
  }
}

const compositors = [
  { name: 'niri', logo: '/img/niri.svg', duration: 600 },
  { name: 'Hyprland', logo: '/img/hyprland.svg', duration: 600 },
  { name: 'MangoWC', logo: '/img/mango.png', duration: 600 },
  { name: 'Sway', logo: '/img/sway.svg', duration: 600 },
  { name: 'labwc', logo: '/img/labwc.png', duration: 600 },
  { name: 'Wayland', logo: null, duration: 0 }, // End state - stays forever
];

const compositorLinks: Record<string, string> = {
  'niri': 'https://github.com/niri-wm/niri',
  'Hyprland': 'https://hyprland.org/',
  'MangoWC': 'https://github.com/DreamMaoMao/mangowc',
  'Sway': 'https://swaywm.org/',
  'labwc': 'https://labwc.github.io/',
};

export default function Home() {
  const [typed, setTyped] = useState('');
  const [showCursor, setShowCursor] = useState(true);
  const [currentCompositor, setCurrentCompositor] = useState(-1);
  const [copied, setCopied] = useState(false);
  const fullText = 'curl -fsSL https://install.danklinux.com | sh';
  const videoRef = React.useRef<HTMLIFrameElement>(null);

  const handleCopyCommand = async () => {
    try {
      await navigator.clipboard.writeText(fullText);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error('Failed to copy text: ', err);
    }
  };

  useEffect(() => {
    const handleMouseMove = (e: MouseEvent) => {
      document.documentElement.style.setProperty('--mouse-x', `${e.clientX}px`);
      document.documentElement.style.setProperty('--mouse-y', `${e.clientY}px`);
    };

    document.addEventListener('mousemove', handleMouseMove);
    return () => document.removeEventListener('mousemove', handleMouseMove);
  }, []);

  useEffect(() => {
    if (typed.length < fullText.length) {
      const timeout = setTimeout(() => {
        setTyped(fullText.slice(0, typed.length + 1));
      }, 50);
      return () => clearTimeout(timeout);
    }
  }, [typed, fullText]);

  useEffect(() => {
    const interval = setInterval(() => {
      setShowCursor(prev => !prev);
    }, 500);
    return () => clearInterval(interval);
  }, []);

  // Initialize image zoom for screenshots and feature cards
  useEffect(() => {
    if (typeof window === 'undefined') return;

    const initZoom = async () => {
      try {
        await new Promise(resolve => setTimeout(resolve, 800));

        let mediumZoom: any;

        if (window.mediumZoom) {
          mediumZoom = window.mediumZoom;
        } else {
          try {
            const zoomModule = await import('medium-zoom');
            mediumZoom = zoomModule.default || zoomModule;
          } catch (e) {
            return;
          }
        }

        if (!mediumZoom) return;

        const isLight = document.documentElement.getAttribute('data-theme') === 'light';
        const background = isLight 
          ? 'rgba(248, 247, 251, 0.95)' 
          : 'rgba(17, 17, 17, 0.95)';

        let zoomableImages = document.querySelectorAll('img[data-zoom]');
        
        if (zoomableImages.length < 10) {
          await new Promise(resolve => setTimeout(resolve, 500));
          zoomableImages = document.querySelectorAll('img[data-zoom]');
        }
        
        if (zoomableImages.length > 0) {
          mediumZoom(zoomableImages, {
            background,
            margin: 24,
          });
        }
      } catch (err) {
        console.warn('Could not initialize image zoom:', err);
      }
    };

    initZoom();

    const observer = new MutationObserver(() => {
      initZoom();
    });

    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['data-theme']
    });

    return () => observer.disconnect();
  }, []);

  useEffect(() => {
    const timeouts: NodeJS.Timeout[] = [];

    // Show niri sooner - right after "for" starts animating
    const showFirstTimeout = setTimeout(() => {
      setCurrentCompositor(0);
    }, 800);
    timeouts.push(showFirstTimeout);

    // Start rotation sequence - use a fixed rhythm for all
    let cumulativeDelay = 800;
    compositors.forEach((compositor, index) => {
      if (index < compositors.length - 1) {
        cumulativeDelay += compositor.duration;
        const timeout = setTimeout(() => {
          setCurrentCompositor(index + 1);
        }, cumulativeDelay);
        timeouts.push(timeout);
      }
    });

    return () => {
      timeouts.forEach(t => clearTimeout(t));
    };
  }, []);

  // Autoplay video when scrolled into view
  useEffect(() => {
    if (!videoRef.current || typeof window === 'undefined') return;

    let player: any = null;

    // Load player.js library
    const script = document.createElement('script');
    script.src = '//assets.mediadelivery.net/playerjs/playerjs-latest.min.js';
    script.async = true;

    script.onload = () => {
      // @ts-ignore - playerjs is loaded from external script
      if (window.playerjs && videoRef.current) {
        // @ts-ignore
        player = new window.playerjs.Player(videoRef.current);

        player.on('ready', () => {
          // Set up intersection observer after player is ready
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting && player) {
                  player.play();
                } else if (player) {
                  player.pause();
                }
              });
            },
            { threshold: 0.5 }
          );

          if (videoRef.current) {
            observer.observe(videoRef.current);
          }
        });
      }
    };

    document.head.appendChild(script);

    return () => {
      if (script.parentNode) {
        script.parentNode.removeChild(script);
      }
    };
  }, []);


  return (
    <Layout
      title="Modern Desktop Suite"
      description="A modern Linux desktop suite with beautiful widgets and powerful monitoring - optimized for niri, Hyprland, MangoWC, dwl, and Sway.">
      <Head>
        <meta property="og:image" content="https://danklinux.com/img/homepage/danklinux-preview.png" />
        <meta property="og:image:width" content="2145" />
        <meta property="og:image:height" content="1365" />
        <meta name="twitter:image" content="https://danklinux.com/img/homepage/danklinux-preview.png" />
      </Head>
      <div className={styles.container}>
        {/* Background pattern overlay */}
        <div className={styles.backgroundPattern}></div>

        {/* Animated gradient background orbs */}
        <div className={styles.gradientBackground}>
          <div className={styles.gradientOrb1}></div>
          <div className={styles.gradientOrb2}></div>
          <div className={styles.gradientOrb3}></div>
        </div>

        {/* Animated grid overlay with basic mouse tracking */}
        <div className={styles.gridOverlay}></div>

        {/* Main Content */}
        <div className={styles.content}>
          {/* Hero Section with massive gradient title */}
          <section className={styles.hero}>
            <div className={styles.heroContent}>
              <h1 className={styles.heroTitle}>
                <span className={styles.heroLine}>Modern Desktop</span>
                <span className={styles.heroLine}>for</span>
                <span className={styles.compositorRotatorWrapper}>
                  <span className={styles.compositorRotator}>
                    {compositors.map((compositor, index) => (
                      <span
                        key={compositor.name}
                        className={`${styles.compositorSlide} ${
                          index === currentCompositor ? styles.compositorActive : ''
                        }`}
                      >
                        {compositor.logo && (
                          <img
                            src={compositor.logo}
                            alt={compositor.name}
                            className={styles.compositorLogo}
                          />
                        )}
                        <span className={styles.compositorName}>{compositor.name}</span>
                      </span>
                    ))}
                  </span>
                </span>
              </h1>

              {/* Call to action buttons */}
              <div className={styles.heroCTA}>
                <Link to="/docs/getting-started" className={styles.primaryCTA}>
                  <span>Get Started</span>
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" className={styles.ctaArrow}>
                    <path d="M7 4L13 10L7 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                  </svg>
                </Link>
                <Link to="/docs/" className={styles.secondaryCTA}>
                  Documentation
                </Link>
              </div>

              {/* Floating terminal window */}
              <div className={styles.terminalFloat}>
                <div className={styles.terminalWindow} onClick={handleCopyCommand}>
                  {copied && (
                    <div className={styles.copiedIndicator}>
                      <svg width="16" height="16" viewBox="0 0 20 20" fill="none" style={{ marginRight: '0.5rem' }}>
                        <path d="M4 10L8 14L16 6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      </svg>
                      Copied!
                    </div>
                  )}
                  <div className={styles.terminalHeader}>
                    <div className={styles.terminalLogos}>
                      {compositors.slice(0, 5).map((compositor) => (
                        <a
                          key={compositor.name}
                          href={compositorLinks[compositor.name]}
                          target="_blank"
                          rel="noopener noreferrer"
                          title={compositor.name}
                          className={styles.terminalLogoLink}
                          onClick={(e) => e.stopPropagation()}
                        >
                          <img
                            src={compositor.logo}
                            alt={compositor.name}
                            className={styles.terminalLogo}
                          />
                        </a>
                      ))}
                    </div>
                  </div>
                  <div className={styles.terminalBody}>
                    <div className={styles.terminalLine}>
                      <span className={styles.prompt}>❯</span>
                      <span className={styles.typedCommand}>
                        {typed.length > 0 && (
                          <>
                            <span className={styles.cmdCommand}>{typed.slice(0, Math.min(4, typed.length))}</span>
                            {typed.length > 4 && (
                              <span className={styles.cmdFlag}>{typed.slice(4, Math.min(10, typed.length))}</span>
                            )}
                            {typed.length > 10 && (
                              <span className={styles.cmdUrl}>{typed.slice(10, Math.min(42, typed.length))}</span>
                            )}
                            {typed.length > 42 && (
                              <span className={styles.cmdPipe}>{typed.slice(42, Math.min(45, typed.length))}</span>
                            )}
                            {typed.length > 45 && (
                              <span className={styles.cmdCommand}>{typed.slice(45)}</span>
                            )}
                          </>
                        )}
                      </span>
                      <span className={`${styles.terminalCursor} ${!showCursor ? styles.hidden : ''}`}>█</span>
                    </div>
                    <div className={`${styles.terminalLine} ${typed.length >= fullText.length ? styles.fadeIn : styles.hidden}`}>
                      <span className={styles.output}>→ Detecting distribution...</span>
                    </div>
                    <div className={`${styles.terminalLine} ${typed.length >= fullText.length ? styles.fadeIn : styles.hidden}`} style={{ animationDelay: '0.3s' }}>
                      <span className={styles.success}>✓ Installing dependencies</span>
                    </div>
                    <div className={`${styles.terminalLine} ${typed.length >= fullText.length ? styles.fadeIn : styles.hidden}`} style={{ animationDelay: '0.6s' }}>
                      <span className={styles.success}>✓ Configuring DankMaterialShell</span>
                    </div>
                    <div className={`${styles.terminalLine} ${typed.length >= fullText.length ? styles.fadeIn : styles.hidden}`} style={{ animationDelay: '0.9s' }}>
                      <span className={styles.success}>✓ Ready to rock!</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* Pre-configured flavors */}
              <div className={styles.preconfiguredRow}>
                <span className={styles.preconfiguredLabel}>Pre-configured flavors</span>
                <a
                  href="https://github.com/zirconium-dev/zirconium/"
                  target="_blank"
                  rel="noopener noreferrer"
                  className={styles.preconfiguredCard}
                >
                  <img src="/img/z.svg" alt="Zirconium" className={styles.preconfiguredLogo} />
                  <div className={styles.preconfiguredInfo}>
                    <span className={styles.preconfiguredName}>Zirconium</span>
                    <span className={styles.preconfiguredDesc}>Fedora-based immutable OS with niri + DMS</span>
                  </div>
                  <svg width="16" height="16" viewBox="0 0 20 20" fill="none" className={styles.preconfiguredArrow}>
                    <path d="M7 4L13 10L7 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                  </svg>
                </a>
              </div>
            </div>
          </section>

                    {/* Screenshot Gallery */}
                    <section className={styles.screenshotGallery}>
            <div className={styles.sectionHeader}>
              <h2 className={styles.sectionTitle}>
                See it <span className={styles.gradientText}>in action</span>
              </h2>
              <p className={styles.sectionDesc}>
                Beautiful, functional, and ready to use
              </p>
            </div>

            <div className={styles.screenshotsGrid}>
              {/* Featured Video - DankMaterialShell Overview */}
              <div className={`${styles.screenshotCard} ${styles.large}`}>
                <div className={styles.screenshotFrame}>
                  <iframe
                    ref={videoRef}
                    className={styles.screenshotVideo}
                    src="https://player.mediadelivery.net/embed/526968/71d12652-a792-4a3a-b0c2-5c5db461cc86?muted=true&loop=true"
                    loading="lazy"
                    style={{ border: 0, width: '100%', height: '100%' }}
                    allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;"
                    allowFullScreen={true}
                  />
                </div>
                <div className={styles.screenshotLabel}>
                  <h3>DankMaterialShell in Action</h3>
                  <p>Experience the fluid interface and beautiful animations</p>
                </div>
              </div>

              <div className={styles.screenshotCard}>
                <div className={styles.screenshotFrame}>
                  <img
                    src="/img/homepage/dankdash_dark.png"
                    alt="DankDash - Overview Dashboard"
                    className={`${styles.screenshotImage} ${styles.darkOnly}`}
                    data-zoom
                  />
                  <img
                    src="/img/homepage/dankdash_light.png"
                    alt="DankDash - Overview Dashboard"
                    className={`${styles.screenshotImage} ${styles.lightOnly}`}
                    data-zoom
                  />
                </div>
                <div className={styles.screenshotLabel}>
                  <h3>Dank Dash</h3>
                  <p>Media controls, weather, calendar, and system info at a glance</p>
                </div>
              </div>

              <div className={styles.screenshotCard}>
                <div className={styles.screenshotFrame}>
                  <img
                    src="/img/homepage/launcher_dark.png"
                    alt="Spotlight Launcher"
                    className={`${styles.screenshotImage} ${styles.darkOnly} ${styles.topAlign}`}
                    data-zoom
                  />
                  <img
                    src="/img/homepage/launcher_light.png"
                    alt="Spotlight Launcher"
                    className={`${styles.screenshotImage} ${styles.lightOnly} ${styles.topAlign}`}
                    data-zoom
                  />
                </div>
                <div className={styles.screenshotLabel}>
                  <h3>Launcher</h3>
                  <p>Launch applications, filesystem searches, and more with the launcher & plugins.</p>
                </div>
              </div>

              <div className={styles.screenshotCard}>
                <div className={styles.screenshotFrame}>
                  <img
                    src="/img/homepage/controlcenter_dark.png"
                    alt="Control Center"
                    className={`${styles.screenshotImage} ${styles.darkOnly}`}
                    data-zoom
                  />
                  <img
                    src="/img/homepage/controlcenter_light.png"
                    alt="Control Center"
                    className={`${styles.screenshotImage} ${styles.lightOnly}`}
                    data-zoom
                  />
                </div>
                <div className={styles.screenshotLabel}>
                  <h3>Control Center</h3>
                  <p>Fully configurable system settings and quick toggles.</p>
                </div>
              </div>

              <div className={styles.screenshotCard}>
                <div className={styles.screenshotFrame}>
                  <img
                    src="/img/homepage/process_dark.png"
                    alt="System Monitor"
                    className={`${styles.screenshotImage} ${styles.darkOnly}`}
                    data-zoom
                  />
                  <img
                    src="/img/homepage/process_light.png"
                    alt="System Monitor"
                    className={`${styles.screenshotImage} ${styles.lightOnly}`}
                    data-zoom
                  />
                </div>
                <div className={styles.screenshotLabel}>
                  <h3>System Monitor</h3>
                  <p>Real-time system & process metrics</p>
                </div>
              </div>

              <div className={styles.screenshotCard}>
                <div className={styles.screenshotFrame}>
                  <img
                    src="/img/homepage/widget_dark.png"
                    alt="Widget Customization"
                    className={`${styles.screenshotImage} ${styles.darkOnly}`}
                    data-zoom
                  />
                  <img
                    src="/img/homepage/widget_light.png"
                    alt="Widget Customization"
                    className={`${styles.screenshotImage} ${styles.lightOnly}`}
                    data-zoom
                  />
                </div>
                <div className={styles.screenshotLabel}>
                  <h3>Widget Customization</h3>
                  <p>Personalize your desktop experience</p>
                </div>
              </div>

              <div className={styles.screenshotCard}>
                <div className={styles.screenshotFrame}>
                  <img
                    src="/img/homepage/plugins_dark.png"
                    alt="Plugins"
                    className={`${styles.screenshotImage} ${styles.darkOnly}`}
                    data-zoom
                  />
                  <img
                    src="/img/homepage/plugins_light.png"
                    alt="Plugins"
                    className={`${styles.screenshotImage} ${styles.lightOnly}`}
                    data-zoom
                  />
                </div>
                <div className={styles.screenshotLabel}>
                  <h3>Plugins</h3>
                  <p>Extend functionality with new widgets, launcher features, and more.</p>
                </div>
              </div>
            </div>
          </section>

          {/* Features section with cards */}
          <section className={styles.features}>
            <div className={styles.sectionHeader}>
              <h2 className={styles.sectionTitle}>
                Everything <span className={styles.gradientText}>you need</span>
              </h2>
              <p className={styles.sectionDesc}>
                A complete desktop experience, out of the box
              </p>
            </div>

            <div className={styles.featuresGrid}>
              <FeatureCard
                icon=""
                title="DankMaterialShell"
                description="A modern and beautiful desktop shell with dynamic theming and smooth animations."
                imageDark="/img/desktop.png"
                imageLight="/img/desktoplight.png"
              />
              <FeatureCard
                icon=""
                title="Dank Install"
                description="One line installer for an automated quick and easy setup."
                imageDark="/img/dankinstall.png"
                imageLight="/img/dankinstalallight.png"
              />
              <FeatureCard
                icon=""
                title="Dank GOP"
                description="Stateless system and process monitoring for CPU, memory, GPU, disks, and network interfaces."
                imageDark="/img/dgop.png"
                imageLight="/img/dgoplight.png"
              />
              <FeatureCard
                icon=""
                title="Dank Greeter"
                description="An aesthetically pleasing greetd greeter for your desktop."
                imageDark="/img/dgreet.png"
                imageLight="/img/dgreetlight.png"
              />
              <FeatureCard
                icon=""
                title="Dank Search"
                description="Blazingly fast and efficient file system search tool."
                imageDark="/img/dsearch.png"
                imageLight="/img/dsearchlight.png"
                imageAlign="top"
              />
              <FeatureCard
                icon=""
                title="Fully Customizable"
                description="Plugins, widgets, themes, and configs to make it yours"
                imageDark="/img/homepage/plugins_dark.png"
                imageLight="/img/homepage/plugins_light.png"
              />
            </div>
          </section>

          {/* Showcase with gradient visualization */}
          <section className={styles.showcase}>
            <div className={styles.showcaseGrid}>
              <div className={styles.showcaseText}>
                <h2 className={styles.showcaseTitle}>
                  Beautiful by <span className={styles.gradientText}>default</span>
                </h2>
                <p className={styles.showcaseDesc}>
                  Dynamic theming powered by matugen extracts colors from your wallpaper
                  to create a cohesive experience.
                </p>
                <ul className={styles.showcaseFeatures}>
                  <li>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M4 10L8 14L16 6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                    <span>Material Design 3 color schemes</span>
                  </li>
                  <li>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M4 10L8 14L16 6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                    <span>Automatic theming for system applications.</span>
                  </li>
                  <li>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M4 10L8 14L16 6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                    <span>Automatic light/dark mode</span>
                  </li>
                  <li>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M4 10L8 14L16 6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                    <span>Smooth animations throughout</span>
                  </li>
                </ul>
              </div>
              <div className={styles.showcaseVisual}>
                <div className={styles.colorGrid}>
                  <div className={styles.colorBlock} style={{ background: 'linear-gradient(135deg, #805AD5, #6B46C1)' }}></div>
                  <div className={styles.colorBlock} style={{ background: 'linear-gradient(135deg, #D0BCFF, #9F7AEA)' }}></div>
                  <div className={styles.colorBlock} style={{ background: 'linear-gradient(135deg, #B794F4, #805AD5)' }}></div>
                  <div className={styles.colorBlock} style={{ background: 'linear-gradient(135deg, #6B46C1, #553C9A)' }}></div>
                </div>
              </div>
            </div>

          </section>

        </div>
      </div>
    </Layout>
  );
}

function FeatureCard({ icon, title, description, imageDark, imageLight, imageAlign = 'center' }: {
  icon: string;
  title: string;
  description: string;
  imageDark?: string;
  imageLight?: string;
  imageAlign?: 'top' | 'center';
}) {
  return (
    <div className={styles.featureCard}>
      {imageDark && imageLight && (
        <div className={styles.cardImageContainer}>
          <img
            src={imageDark}
            alt={title}
            className={`${styles.cardImage} ${styles.darkOnly} ${imageAlign === 'top' ? styles.topAlign : ''}`}
            data-zoom
          />
          <img
            src={imageLight}
            alt={title}
            className={`${styles.cardImage} ${styles.lightOnly} ${imageAlign === 'top' ? styles.topAlign : ''}`}
            data-zoom
          />
        </div>
      )}
      {!imageDark && !imageLight && icon && (
        <div className={styles.cardIcon}>{icon}</div>
      )}
      <h3 className={styles.cardTitle}>{title}</h3>
      <p className={styles.cardDesc}>{description}</p>
      <div className={styles.cardGlow}></div>
    </div>
  );
}



================================================
FILE: src/pages/plugins.module.css
================================================
.container {
  min-height: 100vh;
  background: #000000;
  color: #ffffff;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
  overflow-x: hidden;
  position: relative;
  padding-top: 4rem;
}

[data-theme='light'] .container {
  background: #f8f7fb;
  color: #1a1625;
}

.gradientBackground {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
}

.gradientOrb1,
.gradientOrb2,
.gradientOrb3 {
  position: absolute;
  border-radius: 50%;
  filter: blur(100px);
  opacity: 0.3;
  animation: float 20s ease-in-out infinite;
}

.gradientOrb1 {
  width: 600px;
  height: 600px;
  background: radial-gradient(circle, #805AD5 0%, #D0BCFF 50%, transparent 70%);
  top: -200px;
  left: -200px;
  animation-delay: 0s;
}

.gradientOrb2 {
  width: 500px;
  height: 500px;
  background: radial-gradient(circle, #D0BCFF 0%, #B794F4 50%, transparent 70%);
  bottom: -150px;
  right: -150px;
  animation-delay: 7s;
}

.gradientOrb3 {
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, #6B46C1 0%, #9F7AEA 50%, transparent 70%);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  animation-delay: 14s;
}

[data-theme='light'] .gradientOrb1 {
  background: radial-gradient(circle, #B794F4 0%, #E9DFFF 50%, transparent 70%);
  opacity: 0.5;
}

[data-theme='light'] .gradientOrb2 {
  background: radial-gradient(circle, #E9DFFF 0%, #D0BCFF 50%, transparent 70%);
  opacity: 0.5;
}

[data-theme='light'] .gradientOrb3 {
  background: radial-gradient(circle, #9F7AEA 0%, #D0BCFF 50%, transparent 70%);
  opacity: 0.5;
}

@keyframes float {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  33% {
    transform: translate(50px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-30px, 30px) scale(0.9);
  }
}

.backgroundPattern {
  position: fixed;
  inset: 0;
  z-index: 1;
  background: rgba(0, 0, 0, 0.1);
  pointer-events: none;
}

[data-theme='light'] .backgroundPattern {
  background: rgba(255, 255, 255, 0.3);
}

.gridOverlay {
  position: fixed;
  inset: 0;
  z-index: 1;
  background-image:
    linear-gradient(rgba(208, 188, 255, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(208, 188, 255, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
}

[data-theme='light'] .gridOverlay {
  background-image:
    linear-gradient(rgba(128, 90, 213, 0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(128, 90, 213, 0.08) 1px, transparent 1px);
}

.gridOverlay::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(208, 188, 255, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(208, 188, 255, 0.1) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
  mask-image: radial-gradient(
    circle 500px at var(--mouse-x) var(--mouse-y),
    black 0%,
    transparent 100%
  );
  -webkit-mask-image: radial-gradient(
    circle 500px at var(--mouse-x) var(--mouse-y),
    black 0%,
    transparent 100%
  );
}

[data-theme='light'] .gridOverlay::before {
  background-image:
    linear-gradient(rgba(128, 90, 213, 0.2) 1px, transparent 1px),
    linear-gradient(90deg, rgba(128, 90, 213, 0.2) 1px, transparent 1px);
}

.content {
  position: relative;
  z-index: 10;
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
}

.header {
  text-align: center;
  margin-bottom: 3rem;
  padding-top: 2rem;
}

.title {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 800;
  margin-bottom: 1rem;
  letter-spacing: -0.02em;
}

.gradientText {
  background: linear-gradient(135deg, #D0BCFF, #805AD5);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme='light'] .gradientText {
  background: linear-gradient(135deg, #805AD5, #6B46C1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.subtitle {
  font-size: 1.25rem;
  color: rgba(255, 255, 255, 0.7);
  max-width: 700px;
  margin: 0 auto;
  min-height: 3.75rem;
}

[data-theme='light'] .subtitle {
  color: rgba(26, 22, 37, 0.7);
}

.tabContainer {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 2rem;
}

.tabButton {
  padding: 0.75rem 2rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 12px;
  color: rgba(255, 255, 255, 0.7);
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

[data-theme='light'] .tabButton {
  background: rgba(128, 90, 213, 0.08);
  border-color: rgba(128, 90, 213, 0.3);
  color: rgba(26, 22, 37, 0.7);
}

.tabButton:hover {
  background: rgba(208, 188, 255, 0.1);
  border-color: rgba(208, 188, 255, 0.4);
  color: #ffffff;
}

[data-theme='light'] .tabButton:hover {
  background: rgba(128, 90, 213, 0.15);
  border-color: rgba(128, 90, 213, 0.5);
  color: #1a1625;
}

.tabButton.activeTab {
  background: linear-gradient(135deg, #6B46C1, #805AD5);
  border-color: transparent;
  color: #ffffff;
}

[data-theme='light'] .tabButton.activeTab {
  background: linear-gradient(135deg, #805AD5, #9F7AEA);
  color: #ffffff;
}

.filters {
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(208, 188, 255, 0.1);
  border-radius: 20px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  backdrop-filter: blur(10px);
}

[data-theme='light'] .filters {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(128, 90, 213, 0.2);
}

.topControls {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  margin-bottom: 1.25rem;
  flex-wrap: wrap;
}

.controlsRight {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sortGroup {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.filterRow {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

.filterGroup {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.filterLabel {
  font-weight: 600;
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.8);
}

[data-theme='light'] .filterLabel {
  color: rgba(26, 22, 37, 0.8);
}

.searchInput {
  flex: 1;
  min-width: 280px;
  padding: 0.75rem 1rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 12px;
  color: #ffffff;
  font-size: 0.9375rem;
  transition: all 0.3s ease;
}

[data-theme='light'] .searchInput {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(128, 90, 213, 0.3);
  color: #1a1625;
}

.searchInput:focus {
  outline: none;
  border-color: rgba(208, 188, 255, 0.5);
  background: rgba(255, 255, 255, 0.08);
}

[data-theme='light'] .searchInput:focus {
  border-color: rgba(128, 90, 213, 0.5);
  background: rgba(255, 255, 255, 1);
}

.searchInput::placeholder {
  color: rgba(255, 255, 255, 0.4);
}

[data-theme='light'] .searchInput::placeholder {
  color: rgba(26, 22, 37, 0.4);
}

.sortSelect {
  padding: 0.5rem 2rem 0.5rem 0.75rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 8px;
  color: #ffffff;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23D0BCFF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 12px;
  min-width: 160px;
}

[data-theme='light'] .sortSelect {
  background-color: rgba(128, 90, 213, 0.08);
  border-color: rgba(128, 90, 213, 0.3);
  color: #1a1625;
  background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23805AD5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}

.sortSelect:hover {
  background-color: rgba(208, 188, 255, 0.1);
  border-color: rgba(208, 188, 255, 0.4);
}

[data-theme='light'] .sortSelect:hover {
  background-color: rgba(128, 90, 213, 0.15);
  border-color: rgba(128, 90, 213, 0.5);
}

.sortSelect:focus {
  outline: none;
  border-color: rgba(208, 188, 255, 0.5);
  background-color: rgba(255, 255, 255, 0.08);
}

[data-theme='light'] .sortSelect:focus {
  border-color: rgba(128, 90, 213, 0.5);
  background-color: rgba(255, 255, 255, 1);
}

.sortSelect option {
  background: #1a1625;
  color: #ffffff;
}

[data-theme='light'] .sortSelect option {
  background: #ffffff;
  color: #1a1625;
}

.filterButtons {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.filterButton {
  padding: 0.4rem 0.875rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.8);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
  font-weight: 500;
}

[data-theme='light'] .filterButton {
  background: rgba(128, 90, 213, 0.08);
  border-color: rgba(128, 90, 213, 0.3);
  color: rgba(26, 22, 37, 0.8);
}

.filterButton:hover {
  background: rgba(208, 188, 255, 0.1);
  border-color: rgba(208, 188, 255, 0.4);
  color: #ffffff;
}

[data-theme='light'] .filterButton:hover {
  background: rgba(128, 90, 213, 0.15);
  border-color: rgba(128, 90, 213, 0.5);
  color: #1a1625;
}

.filterButton.active {
  background: linear-gradient(135deg, #6B46C1, #805AD5);
  border-color: transparent;
  color: #ffffff;
  font-weight: 600;
}

[data-theme='light'] .filterButton.active {
  background: linear-gradient(135deg, #805AD5, #9F7AEA);
  color: #ffffff;
}

.checkboxLabel {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  font-size: 0.9375rem;
  color: rgba(255, 255, 255, 0.8);
}

[data-theme='light'] .checkboxLabel {
  color: rgba(26, 22, 37, 0.8);
}

.checkbox {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: #805AD5;
}

.resultsCount {
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.6);
  margin-top: 0.75rem;
  text-align: right;
}

[data-theme='light'] .resultsCount {
  color: rgba(26, 22, 37, 0.6);
}

.pluginsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.25rem;
  margin-bottom: 4rem;
}

@media (min-width: 768px) {
  .pluginsGrid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }
}

@media (min-width: 1200px) {
  .pluginsGrid {
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.5rem;
  }
}

.pluginsList {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-bottom: 4rem;
}

.viewToggle {
  display: flex;
  gap: 0.25rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(208, 188, 255, 0.15);
  border-radius: 8px;
  padding: 0.25rem;
}

[data-theme='light'] .viewToggle {
  background: rgba(128, 90, 213, 0.05);
  border-color: rgba(128, 90, 213, 0.2);
}

.viewButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition: all 0.2s ease;
}

[data-theme='light'] .viewButton {
  color: rgba(26, 22, 37, 0.5);
}

.viewButton:hover {
  background: rgba(208, 188, 255, 0.1);
  color: rgba(255, 255, 255, 0.8);
}

[data-theme='light'] .viewButton:hover {
  background: rgba(128, 90, 213, 0.1);
  color: rgba(26, 22, 37, 0.8);
}

.viewButton.active {
  background: rgba(208, 188, 255, 0.2);
  color: #D0BCFF;
}

[data-theme='light'] .viewButton.active {
  background: rgba(128, 90, 213, 0.2);
  color: #805AD5;
}

.viewButton .material-symbols-outlined {
  font-size: 1.125rem;
}

.pluginCard {
  position: relative;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(208, 188, 255, 0.1);
  border-radius: 16px;
  overflow: hidden;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
}

[data-theme='light'] .pluginCard {
  background: rgba(255, 255, 255, 0.6);
  border-color: rgba(128, 90, 213, 0.2);
}

.pluginCard:hover {
  transform: translateY(-4px);
  border-color: rgba(208, 188, 255, 0.3);
  box-shadow: 0 12px 40px rgba(208, 188, 255, 0.15);
}

[data-theme='light'] .pluginCard:hover {
  border-color: rgba(128, 90, 213, 0.4);
  box-shadow: 0 12px 40px rgba(128, 90, 213, 0.15);
}

.pluginCard:hover .cardGlow {
  opacity: 1;
}

.pluginCard.featuredCard {
  border-color: rgba(255, 193, 7, 0.3);
  background: linear-gradient(135deg, rgba(255, 193, 7, 0.03) 0%, rgba(255, 255, 255, 0.02) 100%);
}

[data-theme='light'] .pluginCard.featuredCard {
  border-color: rgba(255, 152, 0, 0.4);
  background: linear-gradient(135deg, rgba(255, 193, 7, 0.08) 0%, rgba(255, 255, 255, 0.6) 100%);
}

.pluginCard.featuredCard:hover {
  border-color: rgba(255, 193, 7, 0.5);
  box-shadow: 0 12px 40px rgba(255, 193, 7, 0.15);
}

[data-theme='light'] .pluginCard.featuredCard:hover {
  border-color: rgba(255, 152, 0, 0.6);
  box-shadow: 0 12px 40px rgba(255, 152, 0, 0.2);
}

.pluginCard.listCard {
  border-radius: 10px;
}

.pluginCard.listCard:hover {
  transform: translateY(-2px);
}

.pluginCard.listCard .pluginContent {
  display: grid;
  grid-template-columns: minmax(180px, 220px) 1fr auto auto;
  grid-template-rows: auto;
  align-items: center;
  gap: 1rem;
  padding: 0.875rem 1rem;
}

.pluginCard.listCard .pluginHeader {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  min-width: 0;
}

.pluginCard.listCard .pluginTitleGroup {
  min-width: 0;
}

.pluginCard.listCard .pluginName {
  font-size: 0.9375rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}

.pluginCard.listCard .pluginAuthor {
  font-size: 0.75rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.pluginCard.listCard .pluginIconMaterial {
  font-size: 1.5rem;
}

.pluginCard.listCard .pluginDescription {
  min-height: unset;
  -webkit-line-clamp: 1;
  font-size: 0.8125rem;
  min-width: 0;
}

.pluginCard.listCard .pluginMeta {
  flex-direction: row;
  align-items: center;
  gap: 0.5rem;
}

.pluginCard.listCard .pluginTags {
  flex-wrap: nowrap;
  gap: 0.375rem;
}

.pluginCard.listCard .pluginCapabilities {
  display: none;
}

.pluginCard.listCard .tag {
  padding: 0.1875rem 0.375rem;
  font-size: 0.6875rem;
}

.pluginCard.listCard .pluginActions {
  margin-top: 0;
  padding-top: 0;
  gap: 0.375rem;
}

.pluginCard.listCard .installButton,
.pluginCard.listCard .repoButton {
  padding: 0.375rem 0.75rem;
  font-size: 0.75rem;
  flex: none;
}

.pluginCard.listCard .repoButton span,
.pluginCard.listCard .repoButton svg + span {
  display: none;
}

.pluginCard.listCard .officialBadge {
  display: none;
}

.featuredRibbon {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.75rem;
  background: linear-gradient(135deg, #FFC107, #FF9800);
  color: #000;
  font-size: 0.75rem;
  font-weight: 700;
  border-radius: 6px;
  z-index: 10;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 8px rgba(255, 193, 7, 0.4);
}

.featuredRibbon .material-symbols-outlined {
  font-size: 0.875rem;
}

.pluginCard.listCard .featuredRibbon {
  position: static;
  padding: 0.25rem 0.5rem;
  font-size: 0.625rem;
  gap: 0.25rem;
}

.pluginCard.listCard .featuredRibbon .material-symbols-outlined {
  font-size: 0.75rem;
}

.cardGlow {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, rgba(208, 188, 255, 0.15), transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.pluginImage {
  width: 100%;
  aspect-ratio: 16 / 9;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(208, 188, 255, 0.05), rgba(128, 90, 213, 0.05));
}

.pluginImage img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.4s ease;
}

.pluginCard:hover .pluginImage img {
  transform: scale(1.05);
}

.pluginContent {
  padding: 1rem 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  flex: 1;
}

.pluginHeader {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
}

.pluginIconMaterial {
  font-size: 2rem;
  color: #D0BCFF;
  flex-shrink: 0;
}

[data-theme='light'] .pluginIconMaterial {
  color: #805AD5;
}

.pluginTitleGroup {
  flex: 1;
}

.pluginName {
  font-size: 1.125rem;
  font-weight: 700;
  margin: 0 0 0.125rem 0;
  color: #ffffff;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

[data-theme='light'] .pluginName {
  color: #1a1625;
}

.officialBadge {
  display: inline-block;
  padding: 0.25rem 0.625rem;
  background: linear-gradient(135deg, #6B46C1, #805AD5);
  color: #ffffff;
  font-size: 0.75rem;
  font-weight: 600;
  border-radius: 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

[data-theme='light'] .officialBadge {
  background: linear-gradient(135deg, #805AD5, #9F7AEA);
  color: #ffffff;
}

.pluginAuthor {
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.6);
  margin: 0;
}

[data-theme='light'] .pluginAuthor {
  color: rgba(26, 22, 37, 0.6);
}

.pluginDescription {
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.5;
  font-size: 0.875rem;
  margin: 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-height: 2.625em;
}

[data-theme='light'] .pluginDescription {
  color: rgba(26, 22, 37, 0.8);
}

.pluginMeta {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.pluginTags {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.tag {
  padding: 0.25rem 0.5rem;
  background: rgba(208, 188, 255, 0.1);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 4px;
  font-size: 0.75rem;
  color: #D0BCFF;
  font-weight: 500;
  text-transform: capitalize;
}

[data-theme='light'] .tag {
  background: rgba(128, 90, 213, 0.1);
  border-color: rgba(128, 90, 213, 0.3);
  color: #6B46C1;
}

.pluginCapabilities {
  display: flex;
  gap: 0.375rem;
  flex-wrap: wrap;
}

.capability {
  padding: 0.25rem 0.625rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  font-family: var(--ifm-font-family-monospace);
}

[data-theme='light'] .capability {
  background: rgba(128, 90, 213, 0.08);
  color: rgba(26, 22, 37, 0.7);
}

.pluginCompositors {
  display: flex;
  gap: 0.375rem;
  flex-wrap: wrap;
}

.compositor {
  padding: 0.25rem 0.625rem;
  background: rgba(159, 122, 234, 0.15);
  border-radius: 4px;
  font-size: 0.75rem;
  color: #B794F4;
  font-weight: 500;
  text-transform: capitalize;
}

[data-theme='light'] .compositor {
  background: rgba(128, 90, 213, 0.15);
  color: #6B46C1;
}

.pluginDeps {
  font-size: 0.8125rem;
  color: rgba(255, 255, 255, 0.6);
  padding-top: 0.25rem;
}

[data-theme='light'] .pluginDeps {
  color: rgba(26, 22, 37, 0.6);
}

.pluginDeps strong {
  color: rgba(255, 255, 255, 0.8);
}

[data-theme='light'] .pluginDeps strong {
  color: rgba(26, 22, 37, 0.8);
}

.pluginRequires {
  font-size: 0.8125rem;
  color: rgba(255, 255, 255, 0.6);
  padding-top: 0.25rem;
}

[data-theme='light'] .pluginRequires {
  color: rgba(26, 22, 37, 0.6);
}

.pluginRequires strong {
  color: rgba(255, 255, 255, 0.8);
}

[data-theme='light'] .pluginRequires strong {
  color: rgba(26, 22, 37, 0.8);
}

.pluginActions {
  margin-top: auto;
  padding-top: 0.5rem;
  display: flex;
  gap: 0.5rem;
}

.installButton {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 1rem;
  background: linear-gradient(135deg, #6B46C1, #805AD5);
  border: none;
  border-radius: 8px;
  color: #ffffff;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.8125rem;
  transition: all 0.3s ease;
  flex: 1;
  justify-content: center;
}

.installButton .material-symbols-outlined {
  font-size: 1.125rem;
}

[data-theme='light'] .installButton {
  background: linear-gradient(135deg, #805AD5, #9F7AEA);
}

.installButton:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(128, 90, 213, 0.4);
  text-decoration: none;
  color: #ffffff;
}

.repoButton {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 8px;
  color: #ffffff;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.8125rem;
  transition: all 0.3s ease;
  flex: 1;
  justify-content: center;
}

[data-theme='light'] .repoButton {
  background: rgba(128, 90, 213, 0.08);
  border-color: rgba(128, 90, 213, 0.3);
  color: #1a1625;
}

.repoButton:hover {
  background: rgba(208, 188, 255, 0.15);
  border-color: rgba(208, 188, 255, 0.4);
  color: #ffffff;
  text-decoration: none;
  transform: translateY(-2px);
}

[data-theme='light'] .repoButton:hover {
  background: rgba(128, 90, 213, 0.2);
  border-color: rgba(128, 90, 213, 0.5);
  color: #1a1625;
}

.loadingContainer,
.errorContainer,
.emptyState {
  text-align: center;
  padding: 4rem 2rem;
  color: rgba(255, 255, 255, 0.7);
}

[data-theme='light'] .loadingContainer,
[data-theme='light'] .errorContainer,
[data-theme='light'] .emptyState {
  color: rgba(26, 22, 37, 0.7);
}

.spinner {
  width: 48px;
  height: 48px;
  border: 4px solid rgba(208, 188, 255, 0.2);
  border-top-color: #D0BCFF;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 1rem;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.retryButton,
.resetButton {
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #805AD5, #D0BCFF);
  color: #ffffff;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 1rem;
}

[data-theme='light'] .retryButton,
[data-theme='light'] .resetButton {
  color: #1a1625;
}

.retryButton:hover,
.resetButton:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(128, 90, 213, 0.3);
}

@media (max-width: 768px) {
  .content {
    padding: 1rem;
  }

  .header {
    margin-bottom: 2rem;
  }

  .title {
    font-size: 2rem;
  }

  .subtitle {
    font-size: 1rem;
  }

  .filters {
    padding: 1.25rem;
  }

  .topControls {
    flex-direction: column;
    gap: 0.75rem;
  }

  .searchInput {
    width: 100%;
    min-width: unset;
  }

  .controlsRight {
    width: 100%;
    justify-content: space-between;
  }

  .sortGroup {
    flex-direction: row;
  }

  .sortSelect {
    min-width: 140px;
  }

  .pluginsGrid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .pluginCard.listCard .pluginContent {
    grid-template-columns: 1fr auto;
    grid-template-rows: auto auto;
    gap: 0.5rem 0.75rem;
  }

  .pluginCard.listCard .pluginHeader {
    grid-column: 1;
    grid-row: 1;
  }

  .pluginCard.listCard .pluginDescription {
    grid-column: 1 / -1;
    grid-row: 2;
    -webkit-line-clamp: 2;
  }

  .pluginCard.listCard .pluginMeta {
    display: none;
  }

  .pluginCard.listCard .pluginActions {
    grid-column: 2;
    grid-row: 1;
  }

  .gridOverlay::before {
    display: none;
  }
}

@media (hover: none) and (pointer: coarse) {
  .gridOverlay::before {
    display: none;
  }
}

.themePreview {
  width: 100%;
  aspect-ratio: 16 / 10;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(208, 188, 255, 0.05), rgba(128, 90, 213, 0.05));
  display: flex;
  align-items: center;
  justify-content: center;
}

.themePreview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.4s ease;
}

.pluginCard:hover .themePreview img {
  transform: scale(1.05);
}

.themeColors {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 0.5rem;
}

.colorScheme {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.schemeLabel {
  font-size: 0.75rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  min-width: 40px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

[data-theme='light'] .schemeLabel {
  color: rgba(26, 22, 37, 0.6);
}

.colorSwatches {
  display: flex;
  gap: 0.375rem;
}

.colorSwatch {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

[data-theme='light'] .colorSwatch {
  border-color: rgba(0, 0, 0, 0.1);
}

.colorSwatch:hover {
  transform: scale(1.15);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.variantSelector {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.variantLabel {
  font-size: 0.75rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

[data-theme='light'] .variantLabel {
  color: rgba(26, 22, 37, 0.6);
}

.variantButtons {
  display: flex;
  gap: 0.375rem;
  flex-wrap: wrap;
}

.variantButton {
  padding: 0.3rem 0.625rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(208, 188, 255, 0.2);
  border-radius: 6px;
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

[data-theme='light'] .variantButton {
  background: rgba(128, 90, 213, 0.08);
  border-color: rgba(128, 90, 213, 0.3);
  color: rgba(26, 22, 37, 0.7);
}

.variantButton:hover {
  background: rgba(208, 188, 255, 0.1);
  border-color: rgba(208, 188, 255, 0.4);
  color: #ffffff;
}

[data-theme='light'] .variantButton:hover {
  background: rgba(128, 90, 213, 0.15);
  border-color: rgba(128, 90, 213, 0.5);
  color: #1a1625;
}

.variantButton.active {
  background: linear-gradient(135deg, #6B46C1, #805AD5);
  border-color: transparent;
  color: #ffffff;
}

[data-theme='light'] .variantButton.active {
  background: linear-gradient(135deg, #805AD5, #9F7AEA);
  color: #ffffff;
}



================================================
FILE: src/pages/plugins.tsx
================================================
import React, { useState, useEffect } from 'react';
import Layout from '@theme/Layout';
import Head from '@docusaurus/Head';
import { useLocation, useHistory } from '@docusaurus/router';
import styles from './plugins.module.css';

interface Plugin {
  id: string;
  name: string;
  capabilities: string[];
  category: string;
  repo: string;
  author: string;
  firstParty: boolean;
  featured: boolean;
  description: string;
  dependencies: string[];
  compositors: string[];
  distro: string[];
  screenshot?: string;
  version?: string;
  icon?: string;
  permissions?: string[];
  requires_dms?: string;
  updated_at: string;
}

interface ThemeVariantOption {
  id: string;
  name: string;
  dark?: Record<string, string>;
  light?: Record<string, string>;
}

interface ThemeFlavor {
  id: string;
  name: string;
  dark?: Record<string, string>;
  light?: Record<string, string>;
}

interface ThemeAccent {
  id: string;
  name: string;
  [flavorId: string]: string | Record<string, string>;
}

interface ThemeModeDefaults {
  flavor: string;
  accent: string;
}

interface ThemeVariants {
  type?: 'multi';
  default?: string;
  options?: ThemeVariantOption[];
  defaults?: { dark?: ThemeModeDefaults; light?: ThemeModeDefaults };
  flavors?: ThemeFlavor[];
  accents?: ThemeAccent[];
}

interface Theme {
  id: string;
  name: string;
  author: string;
  description: string;
  version: string;
  dark: Record<string, string>;
  light: Record<string, string>;
  variants?: ThemeVariants;
  previewUrl: string;
  updated_at: string;
}

interface PluginsResponse {
  plugins: Plugin[];
  count: number;
}

interface ThemesResponse {
  themes: Theme[];
  count: number;
}

type ActiveTab = 'plugins' | 'themes';

const categories = [
  { id: 'all', label: 'All Plugins' },
  { id: 'utilities', label: 'Utilities' },
  { id: 'appearance', label: 'Appearance' },
  { id: 'monitoring', label: 'Monitoring' },
];

const capabilities = [
  { id: 'all', label: 'All Types' },
  { id: 'dankbar-widget', label: 'DankBar Widget' },
  { id: 'desktop-widget', label: 'Desktop Widget' },
  { id: 'launcher', label: 'Launcher' },
  { id: 'control-center', label: 'Control Center' },
  { id: 'watch-events', label: 'Event Watcher' },
  { id: 'set-wallpaper', label: 'Wallpaper' },
];

const compositors = [
  { id: 'all', label: 'All Compositors' },
  { id: 'niri', label: 'Niri' },
  { id: 'hyprland', label: 'Hyprland' },
  { id: 'sway', label: 'Sway' },
  { id: 'any', label: 'Any' },
];

const sortOptions = [
  { id: 'updated_at', label: 'Recently Updated' },
  { id: 'name', label: 'Name' },
  { id: 'random', label: 'Random' },
];

type ViewMode = 'grid' | 'list';

export default function Plugins() {
  const location = useLocation();
  const history = useHistory();

  const getTabFromUrl = (): ActiveTab => {
    const params = new URLSearchParams(location.search);
    const tab = params.get('tab');
    return tab === 'themes' ? 'themes' : 'plugins';
  };

  const [activeTab, setActiveTab] = useState<ActiveTab>(getTabFromUrl);
  const [plugins, setPlugins] = useState<Plugin[]>([]);
  const [filteredPlugins, setFilteredPlugins] = useState<Plugin[]>([]);
  const [themes, setThemes] = useState<Theme[]>([]);
  const [filteredThemes, setFilteredThemes] = useState<Theme[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [selectedCategory, setSelectedCategory] = useState('all');
  const [selectedCapability, setSelectedCapability] = useState('all');
  const [selectedCompositor, setSelectedCompositor] = useState('all');
  const [searchQuery, setSearchQuery] = useState('');
  const [showFirstPartyOnly, setShowFirstPartyOnly] = useState(false);
  const [sortBy, setSortBy] = useState('updated_at');
  const [selectedVariants, setSelectedVariants] = useState<Record<string, string>>({});
  const [selectedFlavors, setSelectedFlavors] = useState<Record<string, string>>({});
  const [selectedAccents, setSelectedAccents] = useState<Record<string, string>>({});
  const [viewMode, setViewMode] = useState<ViewMode>('grid');

  useEffect(() => {
    const params = new URLSearchParams(location.search);
    const currentTab = params.get('tab');
    const expectedTab = activeTab === 'themes' ? 'themes' : null;

    if (currentTab !== expectedTab) {
      if (expectedTab) {
        params.set('tab', expectedTab);
      } else {
        params.delete('tab');
      }
      history.replace({ search: params.toString() });
    }
  }, [activeTab]);

  useEffect(() => {
    setActiveTab(getTabFromUrl());
  }, [location.search]);

  useEffect(() => {
    switch (activeTab) {
      case 'themes':
        fetchThemes();
        break;
      default:
        fetchPlugins();
    }
  }, [sortBy, activeTab]);

  useEffect(() => {
    filterPlugins();
  }, [plugins, selectedCategory, selectedCapability, selectedCompositor, searchQuery, showFirstPartyOnly]);

  useEffect(() => {
    filterThemes();
  }, [themes, searchQuery]);

  const fetchPlugins = async () => {
    try {
      setLoading(true);
      const isDev = process.env.NODE_ENV === 'development';
      const baseUrl = isDev ? 'http://localhost:8337/plugins' : 'https://api.danklinux.com/plugins';
      const apiUrl = `${baseUrl}?sortBy=${sortBy}`;
      const response = await fetch(apiUrl);
      if (!response.ok) {
        throw new Error('Failed to fetch plugins');
      }
      const data: PluginsResponse = await response.json();
      setPlugins(data.plugins);
      setFilteredPlugins(data.plugins);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
    } finally {
      setLoading(false);
    }
  };

  const filterPlugins = () => {
    let filtered = [...plugins];

    if (selectedCategory !== 'all') {
      filtered = filtered.filter(p => p.category === selectedCategory);
    }

    if (selectedCapability !== 'all') {
      filtered = filtered.filter(p => p.capabilities.includes(selectedCapability));
    }

    if (selectedCompositor !== 'all') {
      filtered = filtered.filter(p =>
        p.compositors.includes(selectedCompositor) || p.compositors.includes('any')
      );
    }

    if (showFirstPartyOnly) {
      filtered = filtered.filter(p => p.firstParty);
    }

    if (searchQuery) {
      const query = searchQuery.toLowerCase();
      filtered = filtered.filter(p =>
        p.name.toLowerCase().includes(query) ||
        p.description.toLowerCase().includes(query) ||
        p.author.toLowerCase().includes(query) ||
        p.id.toLowerCase().includes(query)
      );
    }

    filtered.sort((a, b) => {
      if (a.featured && !b.featured) return -1;
      if (!a.featured && b.featured) return 1;
      return 0;
    });

    setFilteredPlugins(filtered);
  };

  const fetchThemes = async () => {
    try {
      setLoading(true);
      const isDev = process.env.NODE_ENV === 'development';
      const baseUrl = isDev ? 'http://localhost:8337/themes' : 'https://api.danklinux.com/themes';
      const apiUrl = `${baseUrl}?sortBy=${sortBy}`;
      const response = await fetch(apiUrl);
      if (!response.ok) {
        throw new Error('Failed to fetch themes');
      }
      const data: ThemesResponse = await response.json();
      setThemes(data.themes);
      setFilteredThemes(data.themes);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
    } finally {
      setLoading(false);
    }
  };

  const filterThemes = () => {
    if (!searchQuery) {
      setFilteredThemes(themes);
      return;
    }

    const query = searchQuery.toLowerCase();
    const filtered = themes.filter(t =>
      t.name.toLowerCase().includes(query) ||
      t.description.toLowerCase().includes(query) ||
      t.author.toLowerCase().includes(query) ||
      t.id.toLowerCase().includes(query)
    );
    setFilteredThemes(filtered);
  };

  const handleMouseMove = (e: React.MouseEvent) => {
    document.documentElement.style.setProperty('--mouse-x', `${e.clientX}px`);
    document.documentElement.style.setProperty('--mouse-y', `${e.clientY}px`);
  };

  useEffect(() => {
    const handleGlobalMouseMove = (e: MouseEvent) => {
      document.documentElement.style.setProperty('--mouse-x', `${e.clientX}px`);
      document.documentElement.style.setProperty('--mouse-y', `${e.clientY}px`);
    };

    document.addEventListener('mousemove', handleGlobalMouseMove);
    return () => document.removeEventListener('mousemove', handleGlobalMouseMove);
  }, []);

  const getPluginIcon = (plugin: Plugin) => {
    if (plugin.icon) {
      return (
        <span className={`material-symbols-outlined ${styles.pluginIconMaterial}`}>
          {plugin.icon}
        </span>
      );
    }
    return null;
  };

  const formatUpdatedAt = (dateString: string) => {
    const date = new Date(dateString);
    const now = new Date();
    const diffInMs = now.getTime() - date.getTime();
    const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24));

    if (diffInDays === 0) {
      return 'Updated today';
    }
    if (diffInDays === 1) {
      return 'Updated yesterday';
    }
    if (diffInDays < 7) {
      return `Updated ${diffInDays} days ago`;
    }
    if (diffInDays < 30) {
      const weeks = Math.floor(diffInDays / 7);
      return `Updated ${weeks} ${weeks === 1 ? 'week' : 'weeks'} ago`;
    }
    if (diffInDays < 365) {
      const months = Math.floor(diffInDays / 30);
      return `Updated ${months} ${months === 1 ? 'month' : 'months'} ago`;
    }
    const years = Math.floor(diffInDays / 365);
    return `Updated ${years} ${years === 1 ? 'year' : 'years'} ago`;
  };

  const getSelectedVariant = (theme: Theme): string => {
    if (!theme.variants || theme.variants.type === 'multi') return '';
    return selectedVariants[theme.id] || theme.variants.default || '';
  };

  const getSelectedFlavor = (theme: Theme): string => {
    if (!theme.variants?.type || theme.variants.type !== 'multi') return '';
    return selectedFlavors[theme.id] || theme.variants.defaults?.dark?.flavor || '';
  };

  const getFlavorMode = (theme: Theme): 'dark' | 'light' => {
    const flavorId = getSelectedFlavor(theme);
    const flavor = theme.variants?.flavors?.find(f => f.id === flavorId);
    return flavor?.light ? 'light' : 'dark';
  };

  const getSelectedAccent = (theme: Theme): string => {
    if (!theme.variants?.type || theme.variants.type !== 'multi') return '';
    return selectedAccents[theme.id] || theme.variants.defaults?.dark?.accent || '';
  };

  const getResolvedColors = (theme: Theme, mode: 'dark' | 'light'): Record<string, string> => {
    const baseColors = theme[mode] || {};
    if (!theme.variants) return baseColors;

    if (theme.variants.type === 'multi') {
      const flavorId = getSelectedFlavor(theme);
      const accentId = getSelectedAccent(theme);
      const flavor = theme.variants.flavors?.find(f => f.id === flavorId);
      const accent = theme.variants.accents?.find(a => a.id === accentId);

      const flavorMode = flavor?.light ? 'light' : 'dark';
      if (flavorMode !== mode) return baseColors;

      const flavorColors = flavor?.[mode] || {};
      const accentColors = (accent?.[flavorId] as Record<string, string>) || {};

      return { ...baseColors, ...flavorColors, ...accentColors };
    }

    const variantId = getSelectedVariant(theme);
    const variant = theme.variants.options?.find(v => v.id === variantId);
    if (!variant) return baseColors;

    return { ...baseColors, ...variant[mode] };
  };

  const getPreviewUrl = (theme: Theme): string => {
    if (!theme.variants) return theme.previewUrl;

    if (theme.variants.type === 'multi') {
      const flavorId = getSelectedFlavor(theme);
      const accentId = getSelectedAccent(theme);
      return theme.previewUrl.replace('preview.svg', `preview-${flavorId}-${accentId}.svg`);
    }

    const variantId = getSelectedVariant(theme);
    return theme.previewUrl.replace('preview.svg', `preview-${variantId}.svg`);
  };

  const getInstallUrl = (theme: Theme): string => {
    const base = `dms://theme/install/${theme.id}`;
    if (!theme.variants) return base;

    if (theme.variants.type === 'multi') {
      const flavor = getSelectedFlavor(theme);
      const accent = getSelectedAccent(theme);
      return `${base}?flavor=${flavor}&accent=${accent}`;
    }

    return `${base}?variant=${getSelectedVariant(theme)}`;
  };

  return (
    <Layout
      title="Plugins & Themes"
      description="Discover and install plugins and themes for DankMaterialShell - extend your desktop with widgets, launchers, and more.">
      <Head>
        <link
          rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        />
      </Head>
      <div className={styles.container} onMouseMove={handleMouseMove}>
        <div className={styles.backgroundPattern}></div>

        <div className={styles.gradientBackground}>
          <div className={styles.gradientOrb1}></div>
          <div className={styles.gradientOrb2}></div>
          <div className={styles.gradientOrb3}></div>
        </div>

        <div className={styles.gridOverlay}></div>

        <div className={styles.content}>
          <section className={styles.header}>
            <h1 className={styles.title}>
              Explore <span className={styles.gradientText}>{activeTab === 'plugins' ? 'Plugins' : 'Themes'}</span>
            </h1>
            <p className={styles.subtitle}>
              {activeTab === 'plugins'
                ? 'Extend DankMaterialShell with powerful plugins for widgets, launchers, and more'
                : 'Customize your desktop with beautiful color schemes'}
            </p>
            <div className={styles.tabContainer}>
              <button
                className={`${styles.tabButton} ${activeTab === 'plugins' ? styles.activeTab : ''}`}
                onClick={() => setActiveTab('plugins')}
              >
                Plugins
              </button>
              <button
                className={`${styles.tabButton} ${activeTab === 'themes' ? styles.activeTab : ''}`}
                onClick={() => setActiveTab('themes')}
              >
                Themes
              </button>
            </div>
          </section>

          <section className={styles.filters}>
            <div className={styles.topControls}>
              <input
                type="text"
                placeholder={activeTab === 'plugins' ? 'Search plugins...' : 'Search themes...'}
                className={styles.searchInput}
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
              />
              <div className={styles.controlsRight}>
                {activeTab === 'plugins' && (
                  <label className={styles.checkboxLabel}>
                    <input
                      type="checkbox"
                      checked={showFirstPartyOnly}
                      onChange={(e) => setShowFirstPartyOnly(e.target.checked)}
                      className={styles.checkbox}
                    />
                    <span>Official only</span>
                  </label>
                )}
                <div className={styles.sortGroup}>
                  <label className={styles.filterLabel} htmlFor="sort-select">Sort by</label>
                  <select
                    id="sort-select"
                    className={styles.sortSelect}
                    value={sortBy}
                    onChange={(e) => setSortBy(e.target.value)}
                  >
                    {sortOptions.map(option => (
                      <option key={option.id} value={option.id}>
                        {option.label}
                      </option>
                    ))}
                  </select>
                </div>
                <div className={styles.viewToggle}>
                  <button
                    className={`${styles.viewButton} ${viewMode === 'grid' ? styles.active : ''}`}
                    onClick={() => setViewMode('grid')}
                    title="Grid view"
                  >
                    <span className="material-symbols-outlined">grid_view</span>
                  </button>
                  <button
                    className={`${styles.viewButton} ${viewMode === 'list' ? styles.active : ''}`}
                    onClick={() => setViewMode('list')}
                    title="List view"
                  >
                    <span className="material-symbols-outlined">view_list</span>
                  </button>
                </div>
              </div>
            </div>

            {activeTab === 'plugins' && (
              <div className={styles.filterRow}>
                <div className={styles.filterGroup}>
                  <label className={styles.filterLabel}>Category</label>
                  <div className={styles.filterButtons}>
                    {categories.map(cat => (
                      <button
                        key={cat.id}
                        className={`${styles.filterButton} ${selectedCategory === cat.id ? styles.active : ''}`}
                        onClick={() => setSelectedCategory(cat.id)}
                      >
                        {cat.label}
                      </button>
                    ))}
                  </div>
                </div>

                <div className={styles.filterGroup}>
                  <label className={styles.filterLabel}>Type</label>
                  <div className={styles.filterButtons}>
                    {capabilities.map(cap => (
                      <button
                        key={cap.id}
                        className={`${styles.filterButton} ${selectedCapability === cap.id ? styles.active : ''}`}
                        onClick={() => setSelectedCapability(cap.id)}
                      >
                        {cap.label}
                      </button>
                    ))}
                  </div>
                </div>

                <div className={styles.filterGroup}>
                  <label className={styles.filterLabel}>Compositor</label>
                  <div className={styles.filterButtons}>
                    {compositors.map(comp => (
                      <button
                        key={comp.id}
                        className={`${styles.filterButton} ${selectedCompositor === comp.id ? styles.active : ''}`}
                        onClick={() => setSelectedCompositor(comp.id)}
                      >
                        {comp.label}
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            )}

            <div className={styles.resultsCount}>
              {activeTab === 'plugins'
                ? `${filteredPlugins.length} ${filteredPlugins.length === 1 ? 'plugin' : 'plugins'} found`
                : `${filteredThemes.length} ${filteredThemes.length === 1 ? 'theme' : 'themes'} found`}
            </div>
          </section>

          {loading && (
            <div className={styles.loadingContainer}>
              <div className={styles.spinner}></div>
              <p>Loading {activeTab}...</p>
            </div>
          )}

          {error && (
            <div className={styles.errorContainer}>
              <p>Error: {error}</p>
              <button
                onClick={activeTab === 'plugins' ? fetchPlugins : fetchThemes}
                className={styles.retryButton}
              >
                Retry
              </button>
            </div>
          )}

          {!loading && !error && activeTab === 'plugins' && (
            <section className={viewMode === 'grid' ? styles.pluginsGrid : styles.pluginsList}>
              {filteredPlugins.map(plugin => (
                <div key={plugin.id} className={`${styles.pluginCard} ${viewMode === 'list' ? styles.listCard : ''} ${plugin.featured ? styles.featuredCard : ''}`}>
                  {plugin.featured && viewMode === 'grid' && (
                    <div className={styles.featuredRibbon}>
                      <span className="material-symbols-outlined">star</span>
                      Featured
                    </div>
                  )}
                  {plugin.screenshot && viewMode === 'grid' && (
                    <div className={styles.pluginImage}>
                      <img src={plugin.screenshot} alt={plugin.name} loading="lazy" />
                    </div>
                  )}
                  <div className={styles.pluginContent}>
                    <div className={styles.pluginHeader}>
                      {getPluginIcon(plugin)}
                      <div className={styles.pluginTitleGroup}>
                        <h3 className={styles.pluginName}>
                          {plugin.name}
                          {plugin.firstParty && (
                            <span className={styles.officialBadge}>Official</span>
                          )}
                        </h3>
                        <p className={styles.pluginAuthor}>by {plugin.author}</p>
                      </div>
                      {plugin.featured && viewMode === 'list' && (
                        <div className={styles.featuredRibbon}>
                          <span className="material-symbols-outlined">star</span>
                        </div>
                      )}
                    </div>

                    <p className={styles.pluginDescription}>{plugin.description}</p>

                    <div className={styles.pluginMeta}>
                      <div className={styles.pluginTags}>
                        <span className={styles.tag}>{plugin.category}</span>
                        {viewMode === 'grid' && plugin.version && (
                          <span className={styles.tag}>v{plugin.version}</span>
                        )}
                        {viewMode === 'grid' && plugin.updated_at && (
                          <span className={styles.tag}>{formatUpdatedAt(plugin.updated_at)}</span>
                        )}
                      </div>

                      <div className={styles.pluginCapabilities}>
                        {plugin.capabilities.slice(0, 2).map(cap => (
                          <span key={cap} className={styles.capability}>
                            {cap}
                          </span>
                        ))}
                        {plugin.capabilities.length > 2 && (
                          <span className={styles.capability}>
                            +{plugin.capabilities.length - 2}
                          </span>
                        )}
                      </div>

                      {viewMode === 'grid' && plugin.compositors.length > 0 && (
                        <div className={styles.pluginCompositors}>
                          {plugin.compositors.map(comp => (
                            <span key={comp} className={styles.compositor}>
                              {comp}
                            </span>
                          ))}
                        </div>
                      )}

                      {viewMode === 'grid' && plugin.dependencies.length > 0 && (
                        <div className={styles.pluginDeps}>
                          <strong>Dependencies:</strong> {plugin.dependencies.join(', ')}
                        </div>
                      )}

                      {viewMode === 'grid' && plugin.requires_dms && (
                        <div className={styles.pluginRequires}>
                          <strong>Requires DMS:</strong> {plugin.requires_dms}+
                        </div>
                      )}
                    </div>

                    <div className={styles.pluginActions}>
                      <a
                        href={`dms://plugin/install/${plugin.id}`}
                        className={styles.installButton}
                      >
                        <span className="material-symbols-outlined">download</span>
                        {viewMode === 'grid' && 'Install'}
                      </a>
                      <a
                        href={plugin.repo}
                        target="_blank"
                        rel="noopener noreferrer"
                        className={styles.repoButton}
                        title="View Repository"
                      >
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                        </svg>
                        {viewMode === 'grid' && <span>Repository</span>}
                      </a>
                    </div>
                  </div>
                  {viewMode === 'grid' && <div className={styles.cardGlow}></div>}
                </div>
              ))}
            </section>
          )}

          {!loading && !error && activeTab === 'themes' && (
            <section className={styles.pluginsGrid}>
              {filteredThemes.map(theme => (
                <div key={theme.id} className={styles.pluginCard}>
                  <div className={styles.themePreview}>
                    <img src={getPreviewUrl(theme)} alt={theme.name} loading="lazy" />
                  </div>
                  <div className={styles.pluginContent}>
                    <div className={styles.pluginHeader}>
                      <div className={styles.pluginTitleGroup}>
                        <h3 className={styles.pluginName}>{theme.name}</h3>
                        <p className={styles.pluginAuthor}>by {theme.author}</p>
                      </div>
                    </div>

                    <p className={styles.pluginDescription}>{theme.description}</p>

                    {theme.variants && theme.variants.type !== 'multi' && theme.variants.options && (
                      <div className={styles.variantSelector}>
                        <label className={styles.variantLabel}>Variant</label>
                        <div className={styles.variantButtons}>
                          {theme.variants.options.map(variant => (
                            <button
                              key={variant.id}
                              className={`${styles.variantButton} ${getSelectedVariant(theme) === variant.id ? styles.active : ''}`}
                              onClick={() => setSelectedVariants(prev => ({ ...prev, [theme.id]: variant.id }))}
                            >
                              {variant.name}
                            </button>
                          ))}
                        </div>
                      </div>
                    )}

                    {theme.variants?.type === 'multi' && (
                      <>
                        <div className={styles.variantSelector}>
                          <label className={styles.variantLabel}>Flavor</label>
                          <div className={styles.variantButtons}>
                            {theme.variants.flavors?.map(flavor => (
                              <button
                                key={flavor.id}
                                className={`${styles.variantButton} ${getSelectedFlavor(theme) === flavor.id ? styles.active : ''}`}
                                onClick={() => setSelectedFlavors(prev => ({ ...prev, [theme.id]: flavor.id }))}
                              >
                                {flavor.name}
                              </button>
                            ))}
                          </div>
                        </div>
                        <div className={styles.variantSelector}>
                          <label className={styles.variantLabel}>Accent</label>
                          <div className={styles.variantButtons}>
                            {theme.variants.accents?.map(accent => (
                              <button
                                key={accent.id}
                                className={`${styles.variantButton} ${getSelectedAccent(theme) === accent.id ? styles.active : ''}`}
                                onClick={() => setSelectedAccents(prev => ({ ...prev, [theme.id]: accent.id }))}
                              >
                                {accent.name}
                              </button>
                            ))}
                          </div>
                        </div>
                      </>
                    )}

                    <div className={styles.themeColors}>
                      {(theme.variants?.type !== 'multi' || getFlavorMode(theme) === 'dark') && (
                        <div className={styles.colorScheme}>
                          <span className={styles.schemeLabel}>{theme.variants?.type === 'multi' ? getSelectedFlavor(theme) : 'Dark'}</span>
                          <div className={styles.colorSwatches}>
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'dark').primary }}
                              title="Primary"
                            />
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'dark').secondary }}
                              title="Secondary"
                            />
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'dark').surface }}
                              title="Surface"
                            />
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'dark').background }}
                              title="Background"
                            />
                          </div>
                        </div>
                      )}
                      {(theme.variants?.type !== 'multi' || getFlavorMode(theme) === 'light') && (
                        <div className={styles.colorScheme}>
                          <span className={styles.schemeLabel}>{theme.variants?.type === 'multi' ? getSelectedFlavor(theme) : 'Light'}</span>
                          <div className={styles.colorSwatches}>
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'light').primary }}
                              title="Primary"
                            />
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'light').secondary }}
                              title="Secondary"
                            />
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'light').surface }}
                              title="Surface"
                            />
                            <div
                              className={styles.colorSwatch}
                              style={{ backgroundColor: getResolvedColors(theme, 'light').background }}
                              title="Background"
                            />
                          </div>
                        </div>
                      )}
                    </div>

                    <div className={styles.pluginTags}>
                      {theme.version && (
                        <span className={styles.tag}>v{theme.version}</span>
                      )}
                      {theme.updated_at && (
                        <span className={styles.tag}>{formatUpdatedAt(theme.updated_at)}</span>
                      )}
                    </div>

                    <div className={styles.pluginActions}>
                      <a
                        href={getInstallUrl(theme)}
                        className={styles.installButton}
                      >
                        <span className="material-symbols-outlined">download</span>
                        Install Theme
                      </a>
                    </div>
                  </div>
                  <div className={styles.cardGlow}></div>
                </div>
              ))}
            </section>
          )}

          {!loading && !error && activeTab === 'plugins' && filteredPlugins.length === 0 && (
            <div className={styles.emptyState}>
              <p>No plugins found matching your criteria.</p>
              <button
                onClick={() => {
                  setSelectedCategory('all');
                  setSelectedCapability('all');
                  setSelectedCompositor('all');
                  setSearchQuery('');
                  setShowFirstPartyOnly(false);
                  setSortBy('updated_at');
                }}
                className={styles.resetButton}
              >
                Reset Filters
              </button>
            </div>
          )}

          {!loading && !error && activeTab === 'themes' && filteredThemes.length === 0 && (
            <div className={styles.emptyState}>
              <p>No themes found matching your criteria.</p>
              <button
                onClick={() => {
                  setSearchQuery('');
                  setSortBy('updated_at');
                }}
                className={styles.resetButton}
              >
                Reset Filters
              </button>
            </div>
          )}
        </div>
      </div>
    </Layout>
  );
}



================================================
FILE: src/theme/prism-dank-purple.ts
================================================
/**
 * Dank Purple - Custom Prism Theme for Dank Linux Documentation
 * Based on the code-colors.png reference with dark purple aesthetic
 */

import type { PrismTheme } from 'prism-react-renderer';

const dankPurple: PrismTheme = {
  plain: {
    color: '#e4e4e7', // Light gray text
    backgroundColor: '#2e2a3d', // Dark purple background
  },
  styles: [
    {
      types: ['comment', 'prolog', 'doctype', 'cdata'],
      style: {
        color: '#7c7c99', // Muted purple-gray
        fontStyle: 'italic',
      },
    },
    {
      types: ['punctuation'],
      style: {
        color: '#c0c0d0', // Light gray-purple
      },
    },
    {
      types: ['namespace'],
      style: {
        opacity: 0.7,
      },
    },
    {
      types: ['property', 'tag', 'constant', 'symbol', 'deleted'],
      style: {
        color: '#f78c6c', // Orange
      },
    },
    {
      types: ['boolean', 'number'],
      style: {
        color: '#f78c6c', // Orange for numbers
      },
    },
    {
      types: ['selector', 'attr-name', 'string', 'char', 'builtin', 'inserted'],
      style: {
        color: '#c3e88d', // Green for strings
      },
    },
    {
      types: ['operator', 'entity', 'url', 'variable'],
      style: {
        color: '#89ddff', // Cyan
      },
    },
    {
      types: ['atrule', 'attr-value', 'keyword'],
      style: {
        color: '#c792ea', // Light purple for keywords
      },
    },
    {
      types: ['function', 'class-name'],
      style: {
        color: '#82aaff', // Bright blue
      },
    },
    {
      types: ['regex', 'important'],
      style: {
        color: '#f07178', // Coral red
      },
    },
    {
      types: ['important', 'bold'],
      style: {
        fontWeight: 'bold',
      },
    },
    {
      types: ['italic'],
      style: {
        fontStyle: 'italic',
      },
    },
    // Bash-specific token styling to match reference image
    {
      types: ['builtin'],
      languages: ['bash', 'shell'],
      style: {
        color: '#c792ea', // Commands like curl, systemctl in light purple
      },
    },
    {
      types: ['parameter'],
      languages: ['bash', 'shell'],
      style: {
        color: '#82aaff', // Flags like --user, --compositor in bright blue
      },
    },
    {
      types: ['string'],
      languages: ['bash', 'shell'],
      style: {
        color: '#c3e88d', // Arguments in green
      },
    },
  ],
};

// Light theme variant with better contrast
const dankPurpleLight: PrismTheme = {
  plain: {
    color: '#2e2a3d', // Dark text on light background
    backgroundColor: '#f8f7fb', // Light purple-tinted background
  },
  styles: [
    {
      types: ['comment', 'prolog', 'doctype', 'cdata'],
      style: {
        color: '#6e7c93',
        fontStyle: 'italic',
      },
    },
    {
      types: ['punctuation'],
      style: {
        color: '#5a5a77',
      },
    },
    {
      types: ['namespace'],
      style: {
        opacity: 0.7,
      },
    },
    {
      types: ['property', 'tag', 'constant', 'symbol', 'deleted'],
      style: {
        color: '#d65d0e', // Darker orange for light mode
      },
    },
    {
      types: ['boolean', 'number'],
      style: {
        color: '#d65d0e',
      },
    },
    {
      types: ['selector', 'attr-name', 'string', 'char', 'builtin', 'inserted'],
      style: {
        color: '#427b58', // Darker green for light mode
      },
    },
    {
      types: ['operator', 'entity', 'url', 'variable'],
      style: {
        color: '#076678', // Darker cyan
      },
    },
    {
      types: ['atrule', 'attr-value', 'keyword'],
      style: {
        color: '#8f3f71', // Darker purple for keywords
      },
    },
    {
      types: ['function', 'class-name'],
      style: {
        color: '#0969da', // Darker blue
      },
    },
    {
      types: ['regex', 'important'],
      style: {
        color: '#cc241d', // Darker red
      },
    },
    {
      types: ['important', 'bold'],
      style: {
        fontWeight: 'bold',
      },
    },
    {
      types: ['italic'],
      style: {
        fontStyle: 'italic',
      },
    },
  ],
};

export { dankPurple, dankPurpleLight };
export default dankPurple;



================================================
FILE: src/theme/Root.tsx
================================================
import React, { useEffect } from 'react';
import { useLocation } from '@docusaurus/router';
import { Prism } from "prism-react-renderer";

// Nix syntax highlighting isn't loaded by default
(typeof global !== "undefined" ? global : window).Prism = Prism;
import("prismjs/components/prism-nix");

export default function Root({ children }: { children: React.ReactNode }) {
  const location = useLocation();

  useEffect(() => {
    if (typeof document === 'undefined') {
      return;
    }

    const { pathname } = location;
    const isDocsPage = pathname.startsWith('/docs');
    const isBlogPage = pathname.startsWith('/blog');
    const isLandingPage = pathname === '/';

    const applyClass = () => {
      document.body.classList.remove('docs-page', 'landing-page', 'blog-page');

      if (isDocsPage) {
        document.body.classList.add('docs-page');
      } else if (isBlogPage) {
        document.body.classList.add('blog-page');
      } else if (isLandingPage) {
        document.body.classList.add('landing-page');
      }

      document.body.setAttribute('data-path', pathname);
    };

    applyClass();

    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.type !== 'attributes' || mutation.attributeName !== 'class') return;

        const body = document.body.classList;
        const needsReapply =
          (isDocsPage && !body.contains('docs-page')) ||
          (isBlogPage && !body.contains('blog-page')) ||
          (isLandingPage && !body.contains('landing-page'));

        if (needsReapply) applyClass();
      });
    });

    observer.observe(document.body, {
      attributes: true,
      attributeFilter: ['class']
    });

    return () => {
      observer.disconnect();
    };
  }, [location]);

  return <>{children}</>;
}



================================================
FILE: src/theme/Footer/index.tsx
================================================
import React from 'react';
import Footer from '@theme-original/Footer';
import type FooterType from '@theme/Footer';
import type {WrapperProps} from '@docusaurus/types';

type Props = WrapperProps<typeof FooterType>;

export default function FooterWrapper(props: Props): JSX.Element {
  return (
    <div style={{position: 'relative'}}>
      <Footer {...props} />
      <div className="footer-icon-links">
        <a
          href="https://github.com/AvengeMedia"
          target="_blank"
          rel="noopener noreferrer"
          className="footer-github-link"
          aria-label="GitHub repository"
        />
        <a
          href="https://discord.gg/ppWTpKmPgT"
          target="_blank"
          rel="noopener noreferrer"
          className="footer-discord-link"
          aria-label="Discord community"
        />
        <a
          href="https://ko-fi.com/danklinux"
          target="_blank"
          rel="noopener noreferrer"
          className="footer-kofi-link"
          aria-label="Support on Ko-fi"
        />
      </div>
    </div>
  );
}



================================================
FILE: src/theme/Navbar/index.tsx
================================================
import React, { type ReactNode } from 'react';
import Navbar from '@theme-original/Navbar';
import type NavbarType from '@theme/Navbar';
import type { WrapperProps } from '@docusaurus/types';

type Props = WrapperProps<typeof NavbarType>;

export default function NavbarWrapper(props: Props): ReactNode {
  return <Navbar {...props} />;
}



================================================
FILE: src/theme/Navbar/Logo/index.tsx
================================================
import React from 'react';
import Link from '@docusaurus/Link';
import useBaseUrl from '@docusaurus/useBaseUrl';
import useDocusaurusContext from '@docusaurus/useDocusaurusContext';
import {useThemeConfig} from '@docusaurus/theme-common';
import ThemedImage from '@theme/ThemedImage';
import type {WrapperProps} from '@docusaurus/types';
import type LogoType from '@theme/Navbar/Logo';
import styles from './styles.module.css';

type Props = WrapperProps<typeof LogoType>;

export default function LogoWrapper(props: Props): JSX.Element {
  const {
    siteConfig: {title},
  } = useDocusaurusContext();
  const {
    navbar: {logo},
  } = useThemeConfig();

  const logoLink = useBaseUrl(logo?.href || '/');
  const logoImageUrl = useBaseUrl(logo?.src || '');
  const logoImageUrlDark = useBaseUrl(logo?.srcDark || logo?.src || '');

  return (
    <Link to={logoLink} className={styles.logoWrapper}>
      <div className="navbar__logo">
        <ThemedImage
          sources={{
            light: logoImageUrl,
            dark: logoImageUrlDark,
          }}
          alt={logo?.alt || title}
          className={styles.logo}
        />
      </div>
      <span className={styles.brandText}>DANK LINUX</span>
    </Link>
  );
}



================================================
FILE: src/theme/Navbar/Logo/styles.module.css
================================================
.logoWrapper {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  color: inherit;
}

.logo {
  opacity: 0.95;
}

.logoWrapper:hover {
  text-decoration: none;
}

.logoWrapper:hover .logo {
  opacity: 1;
}

.logoWrapper:hover .brandText {
  opacity: 1;
}

/* Brand text styling */
.brandText {
  font-family: var(--ifm-font-family-base);
  font-size: 1.4rem;
  font-weight: 800;
  color: rgba(255, 255, 255, 0.95);
  letter-spacing: 0.08em;
  opacity: 0.95;
  transition: opacity 0.2s ease, text-shadow 0.2s ease;
  white-space: nowrap;
  text-transform: uppercase;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  line-height: 1;
  padding-top: 0.15rem;
}

/* Light mode text */
[data-theme='light'] .brandText {
  color: rgba(0, 0, 0, 0.95);
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
}

/* Hide text on very small screens to save space */
@media (max-width: 480px) {
  .brandText {
    display: none;
  }
}



================================================
FILE: static/.nojekyll
================================================
[Empty file]


================================================
FILE: static/fonts/ADWAITA-LICENSE.txt
================================================
Copyright (c) 2016, The Inter Project Authors (https://github.com/rsms/inter)
Copyright (c) 2015-2025, Renzhi Li (aka. Belleve Invis, belleve@typeof.net)
Copyright (c) 2025, Jamie Gravendeel (https://jamie.garden)
Copyright (c) 2025, Florian Müllner

This Font Software is licensed under the SIL Open Font License, Version 1.1.
This license is copied below, and is also available with a FAQ at:
https://openfontlicense.org


-----------------------------------------------------------
SIL OPEN FONT LICENSE Version 1.1 - 26 February 2007
-----------------------------------------------------------

PREAMBLE
The goals of the Open Font License (OFL) are to stimulate worldwide
development of collaborative font projects, to support the font creation
efforts of academic and linguistic communities, and to provide a free and
open framework in which fonts may be shared and improved in partnership
with others.

The OFL allows the licensed fonts to be used, studied, modified and
redistributed freely as long as they are not sold by themselves. The
fonts, including any derivative works, can be bundled, embedded,
redistributed and/or sold with any software provided that any reserved
names are not used by derivative works. The fonts and derivatives,
however, cannot be released under any other type of license. The
requirement for fonts to remain under this license does not apply
to any document created using the fonts or their derivatives.

DEFINITIONS
"Font Software" refers to the set of files released by the Copyright
Holder(s) under this license and clearly marked as such. This may
include source files, build scripts and documentation.

"Reserved Font Name" refers to any names specified as such after the
copyright statement(s).

"Original Version" refers to the collection of Font Software components as
distributed by the Copyright Holder(s).

"Modified Version" refers to any derivative made by adding to, deleting,
or substituting -- in part or in whole -- any of the components of the
Original Version, by changing formats or by porting the Font Software to a
new environment.

"Author" refers to any designer, engineer, programmer, technical
writer or other person who contributed to the Font Software.

PERMISSION & CONDITIONS
Permission is hereby granted, free of charge, to any person obtaining
a copy of the Font Software, to use, study, copy, merge, embed, modify,
redistribute, and sell modified and unmodified copies of the Font
Software, subject to the following conditions:

1) Neither the Font Software nor any of its individual components,
in Original or Modified Versions, may be sold by itself.

2) Original or Modified Versions of the Font Software may be bundled,
redistributed and/or sold with any software, provided that each copy
contains the above copyright notice and this license. These can be
included either as stand-alone text files, human-readable headers or
in the appropriate machine-readable metadata fields within text or
binary files as long as those fields can be easily viewed by the user.

3) No Modified Version of the Font Software may use the Reserved Font
Name(s) unless explicit written permission is granted by the corresponding
Copyright Holder. This restriction only applies to the primary font name as
presented to the users.

4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font
Software shall not be used to promote, endorse or advertise any
Modified Version, except to acknowledge the contribution(s) of the
Copyright Holder(s) and the Author(s) or with their explicit written
permission.

5) The Font Software, modified or unmodified, in part or in whole,
must be distributed entirely under this license, and must not be
distributed under any other license. The requirement for fonts to
remain under this license does not apply to any document created
using the Font Software.

TERMINATION
This license becomes null and void if any of the above conditions are
not met.

DISCLAIMER
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT
OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE
COPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL
DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM
OTHER DEALINGS IN THE FONT SOFTWARE.



================================================
FILE: static/fonts/AdwaitaSans-Bold.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/AdwaitaSans-ExtraBold.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/AdwaitaSans-Medium.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/AdwaitaSans-Regular-Static.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/AdwaitaSans-Regular.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/AdwaitaSans-Regular.woff2
================================================
[Binary file]


================================================
FILE: static/fonts/AdwaitaSans-SemiBold.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/FIRACODE-LICENSE.txt
================================================
Copyright (c) 2014, The Fira Code Project Authors (https://github.com/tonsky/FiraCode)

This Font Software is licensed under the SIL Open Font License, Version 1.1.
This license is copied below, and is also available with a FAQ at:
http://scripts.sil.org/OFL


-----------------------------------------------------------
SIL OPEN FONT LICENSE Version 1.1 - 26 February 2007
-----------------------------------------------------------

PREAMBLE
The goals of the Open Font License (OFL) are to stimulate worldwide
development of collaborative font projects, to support the font creation
efforts of academic and linguistic communities, and to provide a free and
open framework in which fonts may be shared and improved in partnership
with others.

The OFL allows the licensed fonts to be used, studied, modified and
redistributed freely as long as they are not sold by themselves. The
fonts, including any derivative works, can be bundled, embedded,
redistributed and/or sold with any software provided that any reserved
names are not used by derivative works. The fonts and derivatives,
however, cannot be released under any other type of license. The
requirement for fonts to remain under this license does not apply
to any document created using the fonts or their derivatives.

DEFINITIONS
"Font Software" refers to the set of files released by the Copyright
Holder(s) under this license and clearly marked as such. This may
include source files, build scripts and documentation.

"Reserved Font Name" refers to any names specified as such after the
copyright statement(s).

"Original Version" refers to the collection of Font Software components as
distributed by the Copyright Holder(s).

"Modified Version" refers to any derivative made by adding to, deleting,
or substituting -- in part or in whole -- any of the components of the
Original Version, by changing formats or by porting the Font Software to a
new environment.

"Author" refers to any designer, engineer, programmer, technical
writer or other person who contributed to the Font Software.

PERMISSION & CONDITIONS
Permission is hereby granted, free of charge, to any person obtaining
a copy of the Font Software, to use, study, copy, merge, embed, modify,
redistribute, and sell modified and unmodified copies of the Font
Software, subject to the following conditions:

1) Neither the Font Software nor any of its individual components,
in Original or Modified Versions, may be sold by itself.

2) Original or Modified Versions of the Font Software may be bundled,
redistributed and/or sold with any software, provided that each copy
contains the above copyright notice and this license. These can be
included either as stand-alone text files, human-readable headers or
in the appropriate machine-readable metadata fields within text or
binary files as long as those fields can be easily viewed by the user.

3) No Modified Version of the Font Software may use the Reserved Font
Name(s) unless explicit written permission is granted by the corresponding
Copyright Holder. This restriction only applies to the primary font name as
presented to the users.

4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font
Software shall not be used to promote, endorse or advertise any
Modified Version, except to acknowledge the contribution(s) of the
Copyright Holder(s) and the Author(s) or with their explicit written
permission.

5) The Font Software, modified or unmodified, in part or in whole,
must be distributed entirely under this license, and must not be
distributed under any other license. The requirement for fonts to
remain under this license does not apply to any document created
using the Font Software.

TERMINATION
This license becomes null and void if any of the above conditions are
not met.

DISCLAIMER
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT
OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE
COPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL
DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM
OTHER DEALINGS IN THE FONT SOFTWARE.



================================================
FILE: static/fonts/FiraCodeNerdFontMono-Bold.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/FiraCodeNerdFontMono-Bold.woff2
================================================
[Binary file]


================================================
FILE: static/fonts/FiraCodeNerdFontMono-Regular.ttf
================================================
[Binary file]


================================================
FILE: static/fonts/FiraCodeNerdFontMono-Regular.woff2
================================================
[Binary file]


================================================
FILE: static/img/site.webmanifest
================================================
{
  "name": "Dank Linux",
  "short_name": "Dank Linux",
  "description": "A modern Linux desktop suite with beautiful widgets and powerful monitoring - optimized for niri, Hyprland, MangoWC, dwl, and Sway.",
  "icons": [
    {
      "src": "/img/android-chrome-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/img/android-chrome-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ],
  "theme_color": "#805AD5",
  "background_color": "#111111",
  "display": "standalone"
}



================================================
FILE: versioned_docs/version-1.2/contributing-registry.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/contributing.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dankinstall.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/getting-started.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/index.mdx
================================================
---
title: Welcome
description: Welcome to Dank Linux
sidebar_position: 1
image: img/danklinux-docs.png
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗    ██╗     ██╗███╗   ██╗██╗   ██╗██╗  ██╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝    ██║     ██║████╗  ██║██║   ██║╚██╗██╔╝
██║  ██║███████║██╔██╗ ██║█████╔╝     ██║     ██║██╔██╗ ██║██║   ██║ ╚███╔╝
██║  ██║██╔══██║██║╚██╗██║██╔═██╗     ██║     ██║██║╚██╗██║██║   ██║ ██╔██╗
██████╔╝██║  ██║██║ ╚████║██║  ██╗    ███████╗██║██║ ╚████║╚██████╔╝██╔╝ ██╗
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝    ╚══════╝╚═╝╚═╝  ╚═══╝ ╚═════╝ ╚═╝  ╚═╝`}
  hideTitle={true}
/>

## Quick Start

*This will set up Dank Linux on your system, including all dependencies, the DankMaterialShell™, and default compositor and terminal configurations.*

```bash
curl -fsSL https://install.danklinux.com | sh
```

Supports Arch Linux + Derivatives, Fedora + Derivatives, Ubuntu, Debian, openSUSE, and Gentoo.

:::tip

The installer adds the appropriate repository (AUR, COPR, OBS, or PPA) and installs packages through your distro's package manager. Future updates come through normal system updates. If you install DMS directly from packages, run `dms setup` to generate starter compositor and terminal configs (niri/Hyprland only). Other compositors like sway, MangoWC, and labwc are supported—see [manual configuration](dankmaterialshell/installation#post-install).

:::

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DankDash Overview"
    sources={{
      light: useBaseUrl('/img/dankdashlight.png'),
      dark: useBaseUrl('/img/dankdash.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>DankMaterialShell's DankDash with a Suite of DankBar Widgets</figcaption>
</figure>

## The Suite

- **[DankMaterialShell](dankmaterialshell/overview)** - A feature-rich desktop shell built with [Quickshell](https://quickshell.org/) and [Go](https://golang.org/).
- **[dgop](dgop/)** - A stateless, cursor-based system and process monitoring tool with a tui, cli, and REST API.
- **[dsearch](danksearch/)** - Extremely fast, configurable, zero-dependency indexed filesystem search service.
- **[dankinstall](dankinstall/)** - An automated installer and management tool for the entire Dank Linux suite
- **dcal (in development)** - A calendar application that integrates with online and local calendars.

## Batteries Included

The age of assembling your desktop from dozens of separate tools and spending hours trying to make it feel cohesive is over. While traditional Wayland setups require you to hunt down, configure, and maintain a sprawling collection of utilities, Dank Linux delivers everything in one cohesive package with minimal dependencies.

### The Traditional Way: Package Hunting Simulator

A typical Hyprland, niri, Sway, MangoWC, dwl, labwc, or generic Wayland setup forces you to learn about and configure a dozen or more separate tools, such as:

- **Status Bar**: waybar, eww, or custom scripts
- **Notifications**: mako, swaync, or dunst
- **App Launcher**: rofi, wofi, fuzzel, or tofi
- **Screen Locking**: swaylock, hyprlock, or gtklock
- **Idle Management**: swayidle, hypridle
- **System Tools**: htop, btop, nm-applet, blueman, pavucontrol
- **Audio Control**: pavucontrol, pamixer scripts
- **Brightness Control**: brightnessctl with custom bindings
- **Clipboard Manager**: clipman, cliphist, or wl-clipboard scripts
- **Wallpaper Management**: swaybg, swww, hyprpaper, or wpaperd
- **Theming**: manually configuring gtk, qt, various apps, bars, compositor gaps and colors
- **Power Management**: custom scripts or additional daemons
- **Greeter**: gdm, sddm, lightdm, greetd

Each tool has its own configuration format, its own quirks, and its own dependencies. You'll spend hours writing glue scripts, debugging integration issues, and discovering missing functionality at the worst possible moments.

### With preconfigured "dotfiles"

Preconfigured "dotfiles" are often shared so others can replicate a working setup, but they come with their own challenges:
- **Intrusive Configurations**: They often change a lot of various configuration files on your system, making it hard to track and revert changes.
  - **DMS** does not modify *any* user configurations nor require it, everything is self-contained.
- **Compatibility**: Your system may differ in subtle ways that break the setup.
- **Complexity**: Understanding and adapting someone else's configuration can be daunting.
- **Preferences**: They may not align with your personal preferences or workflow needs.

*Note:* The community does an **incredible** job at sharing incredibly unique setups, and we highly encourage exploring those! They can provide incredibly unique things that dms cannot, but they are just often very opinionated and touch a lot of system configurations - while dms doesn't.

### The Dank Way: Completely Integrated

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Control Center"
    sources={{
      light: useBaseUrl('/img/cclight.png'),
      dark: useBaseUrl('/img/cc.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Control Center with system controls and quick settings</figcaption>
</figure>

Dank Linux replaces this fragmented ecosystem with **DankMaterialShell** - a single, integrated solution built with [Quickshell](https://quickshell.org) and [Go](https://go.dev):

- ✅ **Full Desktop Shell** - Complete panels, widgets, and system integrations
- ✅ **Unified Configuration** - One consistent approach, not 15 different syntaxes
- ✅ **Intelligent Search** - `danksearch` for blazingly-fast file indexing & search
- ✅ **System Monitoring** - `dgop` provides comprehensive system insights without additional tools, persistent daemons, or long-running samplers preventing CPU sleep states.
- ✅ **Dynamic Theming** - Automatic color generation with `matugen`, applied everywhere
- ✅ **All Essentials Included** - Notifications, app launcher, system tray, media controls, and more
- ✅ **Comprehensive Plugin System** - Comprehensive plugin system allows limitless possibilities for new widgets and launcher functions.
- ✅ **Smart Defaults** - Works beautifully out of the box, customizable when you want it

No more late-night debugging sessions because you forgot to install a clipboard manager. No more manually syncing color schemes across a dozen config files.

**One install. One shell. Everything works.**

That's Dank Linux - we've already done the integration work so you can focus on using your desktop, not building it.

### Pre-configured Images

Want even less setup? Some distributions ship with DankMaterialShell pre-configured:

- <a href="https://github.com/zirconium-dev/zirconium/" style={{display: 'inline-flex', alignItems: 'center', gap: '0.4rem'}}><img src="/img/z.svg" alt="" style={{width: '1.1em', height: '1.1em', verticalAlign: 'middle'}} /> **Zirconium**</a> - A Fedora-based immutable OS with niri + DMS, optimized for container-focused development

## Beautiful by Default

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Desktop Overview"
    sources={{
      light: useBaseUrl('/img/desktoplight.png'),
      dark: useBaseUrl('/img/desktop.png'),
    }}
    style={{ maxWidth: '800px', width: '100%' }}
  />
  <figcaption>Full desktop view with terminal, launcher, and system monitoring</figcaption>
</figure>

DankMaterialShell provides a stunning desktop experience right out of the box:
- **Dozens of Customizable Widgets**: Extendable launcher, workspace switcher, media player, clock, weather, system tray, notifications, lock screen, greeter, network integration, bluetooth integration, and more.
- **Dynamic Theming**: Automatic color schemes applied across the desktop.
- **Smooth Animations**: Polished transitions and effects throughout the desktop
- **Material Design**: Modern, clean aesthetics inspired by Material Design 3

## Innovating Solutions

Dank Linux is engineering solutions to problems that have never been solved before in the Linux space.

### dgop - first-of-its-kind Stateless System & Process Status Tool 

Before dgop, if you wanted to measure CPU usage - for example, you either had to:
1. Collect samples over a substantial time period, say 1-5 seconds, and then calculate the difference between the samples to get an average CPU usage over that time, or:
2. Use a persistent daemon that continuously samples and stores system metrics on-disk or in-memory, which can consume resources and complicate system design.

Both approaches have significant drawbacks, including delayed responsiveness, increased resource consumption, and added complexity.

With dgop, this problem is solved using a novel, cursor-based sampling technique:
1. Request CPU percentage, receive baseline values with a `cursor`
2. Request CPU percentage again, whenever you want, passing the previous `cursor` and you will receive the CPU, process, and system metrics calculated over the exact time since the last request - instantaneously.

This approach is also used for other time-based metrics, such as disk thoroughput and network usage.

dgop also provides a top-like TUI, advanced CLI, and a fully-documented OpenAPI 3.1 REST API for programmatic access - with "meta" commands that allow you to mix and match any type of metrics you want.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DGOP Preview"
    sources={{
      light: useBaseUrl('/img/dgoplight.png'),
      dark: useBaseUrl('/img/dgop.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>dgop tui interface</figcaption>
</figure>

### danksearch - Blazingly Fast Filesystem Search

Traditional filesystem search tools usually come as part of the [KDE](https://kde.org/) or [GNOME](https://www.gnome.org/) desktop environments. They require many dependencies, are hard to configure, difficult to search in a programmatic way, and often users opt to just disable them.

DankSearch is a zero-dependency, blazingly-fast, fully configurable in 1 file, indexed filesystem search service that works as a standalone tool.

- **Zero Dependencies**: Written in Go, runs anywhere
- **Configurable**: One simple configuration file, populated with sensible defaults.
- **Fast Indexing**: Index tens of thousands of files in minutes.
- **Index Synching**: Automatically keeps the index up to date with filesystem changes.
- **Advanced Search**: Full text search, regex, fuzzy matching, extension filters, metadata searching, etc.
- **Programmatic Access**: Provides a fully documented OpenAPI 3.1 spec REST API for easy integration with other tools and scripts, as well as a CLI for direct use.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DankSearch"
    sources={{
      light: useBaseUrl('/img/dsearchlight.png'),
      dark: useBaseUrl('/img/dsearch.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>DankSearch file search interface</figcaption>
</figure>

## Open Source

Dank Linux and all its components are open source and MIT-licensed.

Source code:
- [DankMaterialShell/dms](https://github.com/AvengeMedia/DankMaterialShell)
- [DankMaterialShell/dms backend (core) + dankinstall](https://github.com/AvengeMedia/DankMaterialShell/core)
- [dms first-party plugins](https://github.com/AvengeMedia/dms-plugins)
- [dgop GitHub](https://github.com/AvengeMedia/dgop)
- [danksearch GitHub](https://github.com/AvengeMedia/danksearch)

## Get Started

Ready to dive in? Head over to the [Getting Started](getting-started) guide to begin your Dank Linux journey!

## Join the Community

- **GitHub**: [github.com/AvengeMedia](https://github.com/AvengeMedia)
- **Discord**: `DankMaterialShell` has a subsection on the niri discord server, keep relevant discussions in the relevant `#dms-*` channels.
  - [niri discord](https://discord.gg/ppWTpKmPgT)
- **Documentation**: You're already here!
- **Support Development**: [Ko-fi](https://ko-fi.com/danklinux) - Tip us if you'd like to support the project!


================================================
FILE: versioned_docs/version-1.2/support.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dankgreeter/configuration.mdx
================================================
---
title: Configuration
description: Configure DankGreeter login screen appearance
sidebar_position: 4
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗ ██████╗ ██████╗ ███████╗███████╗████████╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝██╔════╝ ██╔══██╗██╔════╝██╔════╝╚══██╔══╝
██║  ██║███████║██╔██╗ ██║█████╔╝ ██║  ███╗██████╔╝█████╗  █████╗     ██║
██║  ██║██╔══██║██║╚██╗██║██╔═██╗ ██║   ██║██╔══██╗██╔══╝  ██╔══╝     ██║
██████╔╝██║  ██║██║ ╚████║██║  ██╗╚██████╔╝██║  ██║███████╗███████╗   ██║
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝╚══════╝   ╚═╝
                                                                            `}
/>

# Configuration

## Custom Compositor Configuration

:::tip

Custom compositor configurations allow you to configure displays (resolution, refresh rate, position, etc.) specifically for the greeter.

:::

### niri

1. Create a baseline configuration file at `/etc/greetd/niri.kdl`:
  ```bash
  sudo tee /etc/greetd/niri.kdl > /dev/null << 'EOF'
  hotkey-overlay {
      skip-at-startup
  }

  environment {
      DMS_RUN_GREETER "1"
  }

  gestures {
    hot-corners {
      off
    }
  }

  layout {
    background-color "#000000"
  }
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command niri -C /etc/greetd/niri.kdl"
  #...existing configuration
  ```

3. Edit `/etc/greetd/niri.kdl` however you see fit, the greeter will run under this compositor configuration

### Hyprland

1. Create a baseline configuration file at `/etc/greetd/hypr.conf`:
  ```bash
  sudo tee /etc/greetd/hypr.conf > /dev/null << 'EOF'
  env = DMS_RUN_GREETER,1

  misc {
      disable_hyprland_logo = true
  }
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command hyprland -C /etc/greetd/hypr.conf"
  #...existing configuration
  ```

3. Edit `/etc/greetd/hypr.conf` however you see fit, the greeter will run under this compositor configuration


### Sway

1. Create a baseline configuration file at `/etc/greetd/sway`:
  ```bash
  sudo tee /etc/greetd/sway > /dev/null << 'EOF'
  # Sway greeter configuration
  # The exec command to launch the greeter is automatically appended by dms-greeter
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command sway -C /etc/greetd/sway"
  #...existing configuration
  ```

3. Edit `/etc/greetd/sway` however you see fit, the greeter will run under this compositor configuration

### MangoWC

1. Create a baseline configuration file at `/etc/greetd/mangowc.conf`:
  ```bash
  sudo tee /etc/greetd/mangowc.conf > /dev/null << 'EOF'
  # MangoWC greeter configuration
  EOF
  ```

2. Update the command in `/etc/greetd/config.toml to use this configuration
  ```toml
  #...existing configuration
  command = "dms-greeter --command mangowc -C /etc/greetd/mangowc.conf"
  #...existing configuration
  ```

3. Edit `/etc/greetd/mangowc.conf` however you see fit, the greeter will run under this compositor configuration

## Syncing with DMS

You can automatically sync the system greeter with the logged in user's wallpaper, themes, fonts, etc.

### Automatic Sync

You can use `dms greeter sync` to automatically set up theme syncing. This command is available for:
- dankinstall users
- Arch AUR users
- Fedora COPR users

:::note

**NixOS users:** The `dms greeter sync` command is not available on NixOS. Please follow the manual sync steps below.

:::

```bash
dms greeter sync
```

This will:
- Add your user to the `greeter` group (if needed)
- Set up ACL permissions on parent directories for greeter access
- Configure group permissions on DMS config directories
- Create symlinks to sync settings, wallpapers, and color themes

:::note

After running `dms greeter sync`, you will need to log out and log back in for group membership changes to take effect. After logging back in, your greeter will automatically reflect your current DMS theme, wallpaper, and settings.

:::

### Manual Sync

If you prefer to set up syncing manually:

1. Add your user to the `greeter` group:
  ```bash
  sudo usermod -aG greeter <username>
  ```

2. Set up ACL permissions on parent directories:
  ```bash
  setfacl -m u:greeter:x ~
  setfacl -m u:greeter:x ~/.config
  setfacl -m u:greeter:x ~/.local
  setfacl -m u:greeter:x ~/.cache
  setfacl -m u:greeter:x ~/.local/state
  ```

3. Set group permissions on DMS config directories:
  ```bash
  sudo chgrp -R greeter ~/.config/DankMaterialShell
  sudo chmod -R g+rX ~/.config/DankMaterialShell

  sudo chgrp -R greeter ~/.local/state/DankMaterialShell
  sudo chmod -R g+rX ~/.local/state/DankMaterialShell

  sudo chgrp -R greeter ~/.cache/quickshell
  sudo chmod -R g+rX ~/.cache/quickshell
  ```

4. Create configuration symlinks:
  ```bash
  sudo ln -sf ~/.config/DankMaterialShell/settings.json /var/cache/dms-greeter/settings.json
  sudo ln -sf ~/.local/state/DankMaterialShell/session.json /var/cache/dms-greeter/session.json
  sudo ln -sf ~/.cache/quickshell/dankshell/dms-colors.json /var/cache/dms-greeter/colors.json
  ```

:::note

You will have to logout or reboot for group change to take effect.

:::

## Checking Sync Status

To verify that your greeter is properly configured and syncing with your user settings, run:

```bash
dms greeter status
```

This command is available for all users and will check:
- ✓ Group membership (whether your user is in the `greeter` group)
- ✓ Cache directory existence
- ✓ Configuration symlinks (settings, wallpaper, colors)
- ✓ Whether source files exist and are readable

### Example Output

```
=== DMS Greeter Status ===

Group Membership:
  ✓ User is in greeter group

Greeter Cache Directory:
  ✓ /var/cache/dms-greeter exists

Configuration Symlinks:
  ✓ Settings: synced correctly
  ✓ Session state: synced correctly
  ✓ Color theme: synced correctly

✓ All checks passed! Greeter is properly configured.
```

### Troubleshooting

If `dms greeter status` shows issues:

**User not in greeter group:**
```bash
dms greeter sync
# Then log out and log back in
```

**Symlinks missing or broken:**
```bash
dms greeter sync
```

**ACL permission issues (themes/wallpapers not appearing):**
```bash
# Check if ACLs are set
getfacl ~ ~/.config ~/.local ~/.cache ~/.local/state | grep "user:greeter"

# If not, run sync again
dms greeter sync
```

## Manual Configuration

The greeter uses three main configuration files located in `/var/cache/dms-greeter/` (or your custom `DMS_GREET_CFG_DIR`):

- `settings.json` - Appearance, behavior, and widget settings
- `session.json` - Wallpaper configuration
- `colors.json` - Color scheme configuration

:::note

These files are read-only by the greeter, not written or updated.

:::

### Colors

Colors can be configured in the exact same way described in [DankMaterialShell Custom Themes](/docs/dankmaterialshell/custom-themes)

### Settings

The `settings.json` file controls the greeter's appearance and behavior. Here's a complete reference:

#### Clock & Time

```json
{
  "use24HourClock": true,
  "showSeconds": false,
  "lockDateFormat": ""
}
```

- `use24HourClock`: Use 24-hour format (`true`) or 12-hour format (`false`)
- `showSeconds`: Display seconds in the clock
- `lockDateFormat`: Custom Qt date format string (empty = `Locale.LongFormat`)

#### Weather

```json
{
  "weatherEnabled": true,
  "weatherLocation": "New York, NY",
  "weatherCoordinates": "40.7128,-74.0060",
  "useAutoLocation": false,
  "useFahrenheit": false
}
```

- `weatherEnabled`: Show weather widget in top-right
- `weatherLocation`: Display name for location
- `weatherCoordinates`: `"latitude,longitude"` string
- `useAutoLocation`: Auto-detect location via IP geolocation
- `useFahrenheit`: Use Fahrenheit (`true`) or Celsius (`false`)

#### Appearance

```json
{
  "currentThemeName": "blue",
  "customThemeFile": "",
  "matugenScheme": "scheme-tonal-spot",
  "iconTheme": "System Default",
  "fontFamily": "Inter Variable",
  "fontWeight": 400,
  "fontScale": 1.0,
  "cornerRadius": 12,
  "widgetBackgroundColor": "sch",
  "surfaceBase": "s",
  "animationSpeed": 2
}
```

- `currentThemeName`: Built-in theme name (`"blue"`, `"red"`, `"green"`, etc.)
- `customThemeFile`: Path to custom matugen JSON theme file
- `matugenScheme`: Matugen color scheme variant
- `iconTheme`: Icon theme name for DankIcon fallbacks
- `fontFamily`: Primary font family
- `fontWeight`: Font weight (`400` = normal, `700` = bold)
- `fontScale`: Font size multiplier (`1.0` = default)
- `cornerRadius`: Corner radius in pixels for UI elements
- `widgetBackgroundColor`: Widget background scheme (`"sch"`, `"s"`, `"sv"`)
- `surfaceBase`: Surface base color scheme (`"s"`, `"sv"`, `"sb"`)
- `animationSpeed`: Animation speed (`0` = fastest, `4` = slowest, `2` = default)

#### Complete Example

`/var/cache/dms-greeter/settings.json`:

```json
{
  "use24HourClock": true,
  "showSeconds": false,
  "lockDateFormat": "",
  "lockScreenShowPowerActions": true,
  "useFahrenheit": false,
  "weatherLocation": "New York, NY",
  "weatherCoordinates": "40.7128,-74.0060",
  "useAutoLocation": false,
  "weatherEnabled": true,
  "currentThemeName": "blue",
  "customThemeFile": "",
  "matugenScheme": "scheme-tonal-spot",
  "nightModeEnabled": false,
  "iconTheme": "System Default",
  "fontFamily": "Inter Variable",
  "fontWeight": 400,
  "fontScale": 1.0,
  "cornerRadius": 12,
  "widgetBackgroundColor": "sch",
  "surfaceBase": "s",
  "animationSpeed": 2
}
```

### Wallpapers

The `session.json` file controls wallpaper settings.

#### Basic Configuration

```json
{
  "wallpaperPath": "/path/to/wallpaper.jpg",
  "wallpaperFillMode": "PreserveAspectCrop"
}
```

- `wallpaperPath`: Default wallpaper for all monitors
- `wallpaperFillMode`: Qt fill mode
  - `"PreserveAspectCrop"` - Crop to fill (default)
  - `"PreserveAspectFit"` - Fit within bounds
  - `"Stretch"` - Stretch to fill

#### Per-Monitor Wallpapers

```json
{
  "wallpaperPath": "/path/to/default.jpg",
  "wallpaperFillMode": "PreserveAspectCrop",
  "monitorWallpapers": {
    "DP-1": "/path/to/monitor1-wallpaper.jpg",
    "DP-2": "/path/to/monitor2-wallpaper.jpg",
    "HDMI-A-1": "#1a1a1a"
  }
}
```

- `monitorWallpapers`: Per-monitor wallpaper overrides
  - Key: Monitor name from `niri msg outputs` or `hyprctl monitors`
  - Value formats:
    - File paths: `/path/to/image.jpg`
    - Solid colors: `#RRGGBB` format
    - Wallpaper Engine: `we:workshop_id` format

#### Complete Example

`/var/cache/dms-greeter/session.json`:

```json
{
  "wallpaperPath": "/usr/share/backgrounds/default.jpg",
  "wallpaperFillMode": "PreserveAspectCrop",
  "monitorWallpapers": {
    "DP-1": "/home/user/Pictures/wallpaper-main.png",
    "DP-2": "#2e3440",
    "HDMI-A-1": "/home/user/Pictures/wallpaper-side.jpg"
  }
}
```




================================================
FILE: versioned_docs/version-1.2/dankgreeter/index.mdx
================================================
---
title: DankGreeter
description: Dank greeter for greetd
sidebar_position: 1
image: img/dgreet.png
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗ ██████╗ ██████╗ ███████╗███████╗████████╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝██╔════╝ ██╔══██╗██╔════╝██╔════╝╚══██╔══╝
██║  ██║███████║██╔██╗ ██║█████╔╝ ██║  ███╗██████╔╝█████╗  █████╗     ██║
██║  ██║██╔══██║██║╚██╗██║██╔═██╗ ██║   ██║██╔══██╗██╔══╝  ██╔══╝     ██║
██████╔╝██║  ██║██║ ╚████║██║  ██╗╚██████╔╝██║  ██║███████╗███████╗   ██║
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝╚══════╝   ╚═╝
                                                                            `}
/>

# DankGreeter

`dms-greeter` is a [greetd](https://github.com/kennylevinsen/greetd) greeter using the same aesthetics as the DankMaterialShell lock screen.

## Documentation

- [Installation](installation) - Install & Setup
- [Configuration](configuration) - Configure themes, wallpapers, etc.

## Contributing

DankGreeter is open source and welcomes contributions:

- **Source Code**: [GitHub Repository](https://github.com/AvengeMedia/DankMaterialShell/tree/master/quickshell/Modules/Greetd)
- **Issues**: Report bugs and request features on GitHub
- **Documentation**: Help improve the documentation

## License

DankGreeter is released under the MIT License.



================================================
FILE: versioned_docs/version-1.2/dankgreeter/installation.mdx
================================================
---
title: Installation
description: Install DankGreeter display manager
sidebar_position: 2
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  █████╗ ███╗   ██╗██╗  ██╗ ██████╗ ██████╗ ███████╗███████╗████████╗
██╔══██╗██╔══██╗████╗  ██║██║ ██╔╝██╔════╝ ██╔══██╗██╔════╝██╔════╝╚══██╔══╝
██║  ██║███████║██╔██╗ ██║█████╔╝ ██║  ███╗██████╔╝█████╗  █████╗     ██║
██║  ██║██╔══██║██║╚██╗██║██╔═██╗ ██║   ██║██╔══██╗██╔══╝  ██╔══╝     ██║
██████╔╝██║  ██║██║ ╚████║██║  ██╗╚██████╔╝██║  ██║███████╗███████╗   ██║
╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═══╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝╚══════╝   ╚═╝
                                                                            `}
/>

# Installation

## Installation Methods

Choose the installation method for your distribution:

## Arch Linux

Install from the AUR:

```bash
paru -S greetd-dms-greeter-git
# Or with yay
yay -S greetd-dms-greeter-git
```

After installation, proceed to [Completing Setup](#completing-setup) below.

## Fedora

```bash
sudo dnf copr enable avengemedia/danklinux
sudo dnf install dms-greeter
```

After installation, proceed to [Completing Setup](#completing-setup) below.

## NixOS

:::tip

NixOS has dedicated documentation with two installation methods:
- [Native nixpkgs installation](./nixos) - **Recommended** for NixOS unstable users
- [Flake-based installation](./nixos-flake) - For NixOS stable or quicker updates

:::

## Other distributions

### For dankinstall users

If you installed DMS using [dankinstall](/docs/dankinstall) on a distribution other than Arch or Fedora, use this automated command:

```bash
dms greeter install
```

This command will automatically:
- Install greetd (if not already installed)
- Set up the dms-greeter wrapper
- Configure permissions and ACLs for theme syncing
- Create the greeter cache directory
- Configure greetd to use DMS

Then proceed to [Completing Setup](#completing-setup) below.

### Manual installation

For non-dankinstall users, install `greetd`, `quickshell`, and then the greeter:

```bash
sudo mkdir -p /etc/xdg/quickshell
sudo git clone https://github.com/AvengeMedia/DankMaterialShell.git /etc/xdg/quickshell/dms-greeter
sudo mkdir /var/cache/dms-greeter
sudo chown greeter:greeter /var/cache/dms-greeter
```

:::note

Some distributions may have different user/group names for the greetd user.

:::

#### Prerequisites for Theme Syncing

If you want to sync your user's theme with the greeter, ensure the `acl` package is installed.
ACLs (Access Control Lists) are required to allow the greeter user to traverse your home directory and access configuration files.

## Completing Setup

After installing the greeter package, you can use automated commands to complete setup, or follow manual steps.

### Automated Setup (All users)

After installing the greeter package, you can use these commands to enable and sync the greeter:

#### 1. Enable the Greeter

```bash
dms greeter enable
```

This will:
- Configure `/etc/greetd/config.toml` with the correct compositor command
- Disable conflicting display managers (gdm, lightdm, sddm)
- Enable and start the greetd service

#### 2. Sync with Your User Theme

```bash
dms greeter sync
```

This will:
- Add your user to the `greeter` group (if needed)
- Set up ACL permissions on parent directories for greeter access
- Configure group permissions on DMS config directories
- Create symlinks to sync settings, wallpapers, and color themes

:::note

After running `dms greeter sync`, you will need to log out and log back in for group membership changes to take effect.

:::

:::note

**NixOS users:** The `dms greeter enable` and `dms greeter sync` commands are not available on NixOS. Please follow the manual steps below or see the [NixOS installation guides](./nixos).

:::

### For all users

You can check your greeter configuration at any time:

```bash
dms greeter status
```

This verifies your greeter setup and sync status. See the [Configuration guide](/docs/dankgreeter/configuration#checking-sync-status) for detailed information.

---

### Manual Setup (all distros)

If you prefer to set up the greeter manually, follow these steps:

:::tip

**All users:** You can use `dms greeter enable` to automate this process instead of following the manual steps below.

:::

1. Edit `/etc/greetd/config.toml` and set `command =` to use dms-greeter:
  ```toml
  [terminal]
  vt = 1

  [default_session]
  user = "greeter"
  command = "dms-greeter --command niri"
  ### Uncomment the below line to run the greeter on Hyprland
  # command = "dms-greeter --command Hyprland"
  ### Uncomment to run the greeter on sway
  # command = "dms-greeter --command sway"
  ```

2. Disable any existing conflicting greeters:

:::warning

Disabling a greeter while logged in under that greeter will log you out and bring you to a non-graphical TTY.

:::

  ```bash
  sudo systemctl disable gdm lightdm sddm
  ```

3. Enable and start the greeter:
  ```bash
  sudo systemctl enable greetd
  sudo systemctl start greetd
  ```



================================================
FILE: versioned_docs/version-1.2/dankgreeter/nixos-flake.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dankgreeter/nixos.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/danklinux/index.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/advanced-configuration.mdx
================================================
---
title: Advanced Configuration
description: Advanced settings and customization options
sidebar_position: 9
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell supports several advanced configuration options through environment variables prefixed with `DMS_`.

## Core Configuration

### DMS_RUN_GREETER

Enables greeter/login screen mode instead of regular shell mode. Used for display manager integration with greetd.

```bash
DMS_RUN_GREETER=1 dms run
```

### DMS_GREET_CFG_DIR

Specifies custom configuration directory for greeter mode (defaults to `/etc/greetd/.dms`). Useful for isolating greeter settings from user settings.

```bash
DMS_GREET_CFG_DIR=/custom/path dms run
```

### DMS_SOCKET

Custom Unix socket path for DMS internal services communication. Used by DMSService, NetworkService, SessionService, and PortalService for IPC.

```bash
DMS_SOCKET=/tmp/custom-dms.sock dms run
```

## Display & Rendering

### DMS_DISABLE_MATUGEN

Disables matugen dynamic theming system for troubleshooting or when using static themes. Set to `1` or `true` to disable.

```bash
DMS_DISABLE_MATUGEN=1 dms run
```

### DMS_DISABLE_LAYER

Disables layer effects on popout widgets for performance or compatibility reasons. Set to `true` to disable layer rendering.

```bash
DMS_DISABLE_LAYER=true dms run
```

### DMS_DANKBAR_LAYER

Controls Wayland layer for DankBar panel. Valid values: `bottom`, `overlay`, `background`, or `top` (default). Useful for window stacking issues.

```bash
DMS_DANKBAR_LAYER=overlay dms run
```


### DMS_POPOUT_LAYER

Controls Wayland layer for DankBar popout widgets. Valid values: `bottom`, `overlay`, `background`, or `top` (default). Useful for window stacking issues.

```bash
DMS_POPOUT_LAYER=overlay dms run
```

### DMS_MODAL_LAYER

Controls Wayland layer for modal windows like the launcher, settings panel, and other popups. Valid values: `bottom`, `overlay`, `background`, or `top` (default).

```bash
DMS_MODAL_LAYER=overlay dms run
```

### DMS_NOTIFICATION_LAYER

Controls Wayland layer for notification popups. Valid values: `bottom`, `overlay`, `background`, or `top` (default).

```bash
DMS_NOTIFICATION_LAYER=overlay dms run
```

## System Integration

### DMS_DISABLE_POLKIT

Disable's the native polkit integration, if you prefer to use a different polkit agent.

```bash
DMS_DISABLE_POLKIT=1 dms run
```

### DMS_PREFERRED_BATTERY

Forces specific battery device when multiple batteries detected (e.g., dual-battery laptops). Provide the UPower device name/path.

```bash
DMS_PREFERRED_BATTERY=/org/freedesktop/UPower/devices/battery_BAT0 dms run
```

### DMS_HIDE_TRAYIDS

Comma-separated list of system tray icon IDs to hide from the system tray bar.

```bash
DMS_HIDE_TRAYIDS=discord,spotify,steam dms run
```

```bash
DMS_DWL_TAG_COUNT=5 dms run
```

## Printing Configuration

### DMS_IPP_HOST

Specifies the hostname or IP address of the IPP/CUPS print server. Defaults to `localhost` if not set.

```bash
DMS_IPP_HOST=printserver.local dms run
```

### DMS_IPP_PORT

Specifies the port number for the IPP/CUPS print server. Defaults to `631` (standard IPP port) if not set.

```bash
DMS_IPP_PORT=631 dms run
```

### DMS_IPP_USERNAME

Username for authenticating with the IPP/CUPS print server. Leave unset if authentication is not required.

```bash
DMS_IPP_USERNAME=printuser dms run
```

### DMS_IPP_PASSWORD

Password for authenticating with the IPP/CUPS print server. Leave unset if authentication is not required.

```bash
DMS_IPP_PASSWORD=secret dms run
```

## Setting Environment Variables

:::tip Systemd / DankInstall Users

If you manage DMS with systemd (including dankinstall users), set environment variables in `~/.config/environment.d/90-dms.conf`:

```ini
DMS_DISABLE_MATUGEN=1
DMS_DANKBAR_LAYER=overlay
DMS_HIDE_TRAYIDS=discord,spotify
```

Log out and back in for changes to take effect.

:::

### niri

Add to your niri config:

```kdl
environment {
  DMS_DISABLE_MATUGEN "1"
  DMS_DANKBAR_LAYER "overlay"
  DMS_HIDE_TRAYIDS "discord,spotify"
}
```

### Hyprland

Add to your Hyprland config:

```conf
env = DMS_DISABLE_MATUGEN,1
env = DMS_DANKBAR_LAYER,overlay
env = DMS_HIDE_TRAYIDS,discord,spotify
```

### Sway

Add to your Sway config:

```conf
set $DMS_DISABLE_MATUGEN 1
set $DMS_DANKBAR_LAYER overlay
set $DMS_HIDE_TRAYIDS discord,spotify
```

### Manual Launch

Set variables before launching:

```bash
export DMS_DISABLE_MATUGEN=1
export DMS_DANKBAR_LAYER=overlay
dms run
```

## Use Cases

**Disable dynamic theming:**
```bash
DMS_DISABLE_MATUGEN=1
```
Useful for performance testing or when using only static themes.

**Hide system tray icons:**
```bash
DMS_HIDE_TRAYIDS=discord,slack,teams
```
Clean up system tray by hiding unwanted application icons.

**Fix bar layering issues:**
```bash
DMS_DANKBAR_LAYER=overlay
```
If DankBar appears behind windows or other issues, adjust the Wayland layer.

**Dual battery laptops:**
```bash
DMS_PREFERRED_BATTERY=/org/freedesktop/UPower/devices/battery_BAT0
```
Force DMS to use a specific battery when multiple are detected.

**Performance tuning:**
```bash
DMS_DISABLE_LAYER=true
```
Disable layer effects to improve performance on lower-end hardware.

**Remote print server:**
```bash
DMS_IPP_HOST=printserver.local
DMS_IPP_PORT=631
DMS_IPP_USERNAME=printuser
DMS_IPP_PASSWORD=secret
```
Connect to a remote CUPS/IPP print server with authentication.



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/application-themes.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/calendar-integration.mdx
================================================
---
title: Calendar Integration
description: Sync CalDAV calendars for dashboard integration
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

Sync your CalDAV-compatible calendar (Google Calendar, Office365, etc.) for dashboard integration.

:::warning
Setting up khal and vdirsyncer is very user-unfriendly and convoluted, in a future release this integration will be replaced with DankCalendar.
:::

:::tip
Fore more details, view the [khal](https://khal.readthedocs.io/en/latest/) documentation directly. DMS will automatically pick up khal events once configured.
:::

## Installation

Install the required dependencies for calendar synchronization:

### Arch & Derivatives

```bash
sudo pacman -S vdirsyncer khal python-aiohttp-oauthlib
```

### Fedora & Derivatives

```bash
sudo dnf install python3-vdirsyncer khal python3-aiohttp-oauthlib
```

## Configuration

### 1. Configure vdirsyncer

Create `~/.vdirsyncer/config`:

```ini
[general]
status_path = "~/.calendars/status"

[pair personal_sync]
a = "personal"
b = "personallocal"
collections = ["from a", "from b"]
conflict_resolution = "a wins"
metadata = ["color"]

[storage personal]
type = "google_calendar"
token_file = "~/.vdirsyncer/google_calendar_token"
client_id = "your_client_id"
client_secret = "your_client_secret"

[storage personallocal]
type = "filesystem"
path = "~/.calendars/Personal"
fileext = ".ics"
```

### 2. Initial Sync

Run the initial synchronization and configure khal:

```bash
vdirsyncer sync
khal configure
```

### 3. Auto-sync (Optional)

Set up automatic synchronization every 5 minutes using cron:

```bash
crontab -e
```

Add the following line:

```cron
*/5 * * * * /usr/bin/vdirsyncer sync
```

## Troubleshooting

### Calendar not syncing

Check vdirsyncer credentials and network connectivity:

```bash
vdirsyncer -vdebug sync
```

### Missing calendar events

Verify khal is configured correctly:

```bash
khal list
```

### Authentication issues

For Google Calendar, ensure your OAuth client ID and secret are correct. You may need to re-authenticate:

```bash
rm ~/.vdirsyncer/google_calendar_token
vdirsyncer sync
```


================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-brightness.mdx
================================================
---
title: Brightness Control
description: Control backlight, LED, and DDC/I2C monitor brightness
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ██████╗ ██╗ ██████╗ ██╗  ██╗████████╗███╗   ██╗███████╗███████╗███████╗
██╔══██╗██╔══██╗██║██╔════╝ ██║  ██║╚══██╔══╝████╗  ██║██╔════╝██╔════╝██╔════╝
██████╔╝██████╔╝██║██║  ███╗███████║   ██║   ██╔██╗ ██║█████╗  ███████╗███████╗
██╔══██╗██╔══██╗██║██║   ██║██╔══██║   ██║   ██║╚██╗██║██╔══╝  ╚════██║╚════██║
██████╔╝██║  ██║██║╚██████╔╝██║  ██║   ██║   ██║ ╚████║███████╗███████║███████║
╚═════╝ ╚═╝  ╚═╝╚═╝ ╚═════╝ ╚═╝  ╚═╝   ╚═╝   ╚═╝  ╚═══╝╚══════╝╚══════╝╚══════╝`}
  hideTitle={true}
/>

The `dms brightness` command provides a unified interface for controlling brightness across different device types. It's a replacement for tools like `brightnessctl` and `ddcutil`, supporting backlight devices, LEDs, and DDC/I2C monitors.

## Overview

**Supported Device Types**:
- **Backlight devices**: Laptop screens, integrated displays (e.g., `amdgpu_bl1`, `intel_backlight`, `nvidia_0`)
- **LED devices**: Keyboard backlights, indicator LEDs (e.g., `asus::kbd_backlight`, `phy0-led`)
- **DDC/I2C monitors**: External monitors via DDC/CI protocol (requires `--ddc` flag)

**Key Features**:
- List all brightness devices with current values
- Get and set brightness for specific devices
- Support for exponential brightness scaling for more natural perception
- Fast operation for backlight/LED devices
- Optional DDC/I2C support for external monitors

## Quick Start

List all available brightness devices:

```bash
dms brightness list
```

**Example output**:
```
Device                      Class         Name                   Brightness
────────────────────────────────────────────────────────────────────────────────
leds:phy0-led               leds          phy0-led               100%
backlight:amdgpu_bl1        backlight     amdgpu_bl1              43%
backlight:nvidia_0          backlight     nvidia_0               100%
leds:asus::kbd_backlight    leds          asus::kbd_backlight      0%
```

Set brightness for a specific device:

```bash
# Set laptop backlight to 50%
dms brightness set backlight:amdgpu_bl1 50

# Set keyboard backlight to 25%
dms brightness set leds:asus::kbd_backlight 25
```

Get current brightness for a device:

```bash
dms brightness get backlight:amdgpu_bl1
```

## Device Identification

Devices are identified using the format `<class>:<name>`:

- **Class**: The device class (`backlight`, `leds`, or `ddc`)
- **Name**: The device name as shown in the list output

**Examples**:
- `backlight:amdgpu_bl1` - AMD GPU backlight
- `backlight:intel_backlight` - Intel integrated graphics backlight
- `backlight:nvidia_0` - NVIDIA GPU backlight
- `leds:asus::kbd_backlight` - ASUS keyboard backlight
- `leds:phy0-led` - WiFi/network activity LED

## Commands

### `dms brightness list`

List all available brightness devices with their current brightness values.

```bash
dms brightness list [flags]
```

**Flags**:
- `--ddc`: Include DDC/I2C monitors (slower, requires additional scanning)
- `-h, --help`: Show help

**Examples**:

```bash
# List backlight and LED devices (fast)
dms brightness list

# Include external DDC/I2C monitors (slower)
dms brightness list --ddc
```

**Note**: The `--ddc` flag causes the command to scan for external monitors via DDC/I2C, which takes longer than listing backlight/LED devices.

### `dms brightness get`

Get the current brightness percentage for a specific device.

```bash
dms brightness get <device_id> [flags]
```

**Arguments**:
- `device_id` (required): Device identifier (e.g., `backlight:amdgpu_bl1`)

**Flags**:
- `--ddc`: Enable DDC/I2C device support
- `-h, --help`: Show help

**Examples**:

```bash
# Get laptop backlight brightness
dms brightness get backlight:amdgpu_bl1

# Get external monitor brightness
dms brightness get ddc:monitor-name --ddc
```

### `dms brightness set`

Set the brightness percentage (0-100) for a specific device.

```bash
dms brightness set <device_id> <percent> [flags]
```

**Arguments**:
- `device_id` (required): Device identifier
- `percent` (required): Brightness percentage (0-100)

**Flags**:
- `--ddc`: Enable DDC/I2C device support
- `--exponential`: Use exponential brightness scaling
- `--exponent <value>`: Exponent for exponential scaling (default: 1.2)
- `-h, --help`: Show help

**Examples**:

```bash
# Set brightness to 50%
dms brightness set backlight:amdgpu_bl1 50

# Set brightness with exponential scaling
dms brightness set backlight:amdgpu_bl1 50 --exponential

# Set brightness with custom exponent
dms brightness set backlight:amdgpu_bl1 50 --exponential --exponent 1.5

# Set external monitor brightness
dms brightness set ddc:monitor-name 75 --ddc
```

## Exponential Brightness Scaling

Human perception of brightness is non-linear. A 50% brightness value may appear much brighter than expected. Exponential scaling makes brightness changes feel more natural.

**How it works**:
- Applies an exponential curve to the brightness value before setting it
- Default exponent: 1.2
- Higher exponents create more aggressive curves (darker at mid-range)
- Lower exponents create gentler curves

**Example**:

```bash
# Without exponential scaling: 50% may feel like 70%
dms brightness set backlight:amdgpu_bl1 50

# With exponential scaling: 50% feels more like 50%
dms brightness set backlight:amdgpu_bl1 50 --exponential

# More aggressive curve
dms brightness set backlight:amdgpu_bl1 50 --exponential --exponent 1.5
```

**Tip**: Try exponential scaling if you find yourself rarely using the lower half of your brightness range.

## DDC/I2C Monitor Support

External monitors can be controlled via the DDC/CI protocol over I2C. This requires the `--ddc` flag and may be slower than backlight/LED control.

**Requirements**:
- Monitor must support DDC/CI
- I2C permissions (typically handled by udev rules or user groups)

**Usage**:

```bash
# List all devices including DDC/I2C monitors
dms brightness list --ddc

# Get external monitor brightness
dms brightness get ddc:monitor-name --ddc

# Set external monitor brightness
dms brightness set ddc:monitor-name 60 --ddc
```

**Note**: DDC operations are slower than backlight operations due to the I2C communication protocol. Expect a slight delay when setting brightness on external monitors.

## Integration with DMS

DMS integrates with the shell over IPC via a Unix socket. To show brightness OSDs and use shell-integrated brightness controls, use `dms ipc` commands instead of the direct CLI commands.

The `dms ipc call brightness` target provides additional functionality:
- On-screen display (OSD) when brightness changes
- Increment/decrement brightness by steps
- Per-device exponential mode toggling
- Status queries

See the [Keybinds & IPC](/docs/dankmaterialshell/keybinds-ipc#brightness) documentation for complete details on the brightness IPC target.

**Example keybind integration**:

```conf
# Hyprland example - shows OSD overlay
bind = , XF86MonBrightnessUp, exec, dms ipc call brightness increment 5
bind = , XF86MonBrightnessDown, exec, dms ipc call brightness decrement 5
bind = , XF86MonBrightnessDown+Shift, exec, dms ipc call brightness toggleExponential
```

## Comparison with Other Tools

### vs brightnessctl

- **Same functionality** for backlight and LED devices
- **Simpler device identification** (class:name format)
- **Exponential scaling** built-in
- **DDC/I2C support** in the same tool

### vs ddcutil

- **Same functionality** for DDC/I2C monitors
- **Faster** for simple brightness operations
- **Unified interface** with backlight devices

## Troubleshooting

### Permission Denied

If you get permission errors:

1. Check if your user is in the `video` or `input` group:
   ```bash
   groups
   ```

2. Add yourself to the appropriate group:
   ```bash
   sudo usermod -a -G video $USER
   sudo usermod -a -G input $USER
   ```

3. Log out and log back in for changes to take effect

### Device Not Found

If a device isn't listed:

- For backlights: Check `/sys/class/backlight/`
- For LEDs: Check `/sys/class/leds/`
- For DDC: Make sure to use the `--ddc` flag and verify monitor supports DDC/CI

### DDC/I2C Not Working

If external monitors don't respond:

1. Verify DDC/CI is enabled in your monitor's OSD settings
2. Check I2C kernel module is loaded:
   ```bash
   lsmod | grep i2c
   ```
3. Test with `i2cdetect`:
   ```bash
   sudo i2cdetect -l
   ```

## Command Reference

```bash
dms brightness [command] [flags]
```

**Available Commands**:
- `list`: List all brightness devices
- `get <device_id>`: Get brightness for a device
- `set <device_id> <percent>`: Set brightness for a device

**Global Flags**:
- `-c, --config <path>`: Specify custom DMS config directory
- `-h, --help`: Show help

**Command-Specific Flags**:
- `--ddc`: Include DDC/I2C monitors (available on all commands)
- `--exponential`: Use exponential scaling (set command only)
- `--exponent <value>`: Custom exponent value (set command only, default: 1.2)



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-clipboard.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-color-picker.mdx
================================================
---
title: Color Picker
description: Pick colors from anywhere on your Wayland screen with multiple output formats
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={` ██████╗ ██████╗ ██╗      ██████╗ ██████╗ ███████╗
██╔════╝██╔═══██╗██║     ██╔═══██╗██╔══██╗██╔════╝
██║     ██║   ██║██║     ██║   ██║██████╔╝███████╗
██║     ██║   ██║██║     ██║   ██║██╔══██╗╚════██║
╚██████╗╚██████╔╝███████╗╚██████╔╝██║  ██║███████║
 ╚═════╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚═╝  ╚═╝╚══════╝`}
  hideTitle={true}
/>

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="Color Picker"
    sources={{
      light: useBaseUrl('/img/blog/v1/colorpick_light.png'),
      dark: useBaseUrl('/img/blog/v1/colorpick_dark.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>Pick colors from anywhere on your screen</figcaption>
</figure>

The `dms color pick` command launches an interactive color picker for Wayland. Click any pixel on your screen to capture its color, with support for multiple output formats and custom templates.

## Quick Start

```bash
# Pick a color, output as hex
dms color pick

# Output as RGB
dms color pick --rgb

# Auto-copy to clipboard
dms color pick -a
```

Press **Escape** to cancel the picker at any time.

## Output Formats

Only one format flag can be used at a time. Default is `--hex`.

| Flag | Output | Example |
|------|--------|---------|
| `--hex` | Hexadecimal | `#FF8040` |
| `--rgb` | RGB values | `255 128 64` |
| `--hsl` | HSL values | `24 75% 60%` |
| `--hsv` | HSV values | `24 75% 100%` |
| `--cmyk` | CMYK values | `0% 50% 75% 0%` |
| `--json` | All formats | See below |

### JSON Output

```bash
dms color pick --json
```

Returns all color formats in a single JSON object, useful for scripting.

## Custom Format Templates

The `-o` flag lets you define a custom output format using placeholders `{0}`, `{1}`, `{2}` (and `{3}` for CMYK).

### Placeholder Reference

| Format | {0} | {1} | {2} | {3} |
|--------|-----|-----|-----|-----|
| `--hex` (default) | R (hex, e.g. FF) | G (hex) | B (hex) | - |
| `--rgb` | R (0-255) | G (0-255) | B (0-255) | - |
| `--hsl` | H (0-360) | S (0-100) | L (0-100) | - |
| `--hsv` | H (0-360) | S (0-100) | V (0-100) | - |
| `--cmyk` | C (0-100) | M (0-100) | Y (0-100) | K (0-100) |

### Examples

```bash
# CSS rgb() function
dms color pick --rgb -o "rgb({0}, {1}, {2})"
# Output: rgb(255, 128, 64)

# CSS hsl() function
dms color pick --hsl -o "hsl({0}, {1}%, {2}%)"
# Output: hsl(24, 75%, 60%)

# Hex without hash
dms color pick -o "{0}{1}{2}"
# Output: FF8040

# Custom CMYK format
dms color pick --cmyk -o "C={0} M={1} Y={2} K={3}"
# Output: C=0 M=50 Y=75 K=0
```

## Options

| Flag | Short | Description |
|------|-------|-------------|
| `--hex` | | Output as hexadecimal (#RRGGBB) |
| `--rgb` | | Output as RGB (R G B) |
| `--hsl` | | Output as HSL (H S% L%) |
| `--hsv` | | Output as HSV (H S% V%) |
| `--cmyk` | | Output as CMYK (C% M% Y% K%) |
| `--json` | | Output all formats as JSON |
| `--lowercase` | `-l` | Output hex in lowercase |
| `--autocopy` | `-a` | Copy result to clipboard |
| `--output-format` | `-o` | Custom output format template |
| `--config` | `-c` | Custom DMS config directory path |
| `--help` | `-h` | Show help |

## Use Cases

### Quick Color Reference

Grab any color from your screen for use in design work:

```bash
dms color pick -a
# Picked color is now in your clipboard
```

### CSS Development

Get colors ready for your stylesheets:

```bash
# For CSS custom properties
dms color pick --hsl -o "hsl({0}deg {1}% {2}%)" -a

# For rgba with full opacity
dms color pick --rgb -o "rgba({0}, {1}, {2}, 1)" -a
```

### Color Extraction Scripts

Capture colors programmatically:

```bash
#!/bin/bash
color=$(dms color pick --json)
hex=$(echo "$color" | jq -r '.hex')
echo "Selected: $hex"
```



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-dank16.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-doctor.mdx
================================================
---
title: System Diagnostics (doctor)
description: Diagnose DMS installation, dependencies, and system configuration
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

The `dms doctor` command diagnoses your DMS installation, verifies dependencies, and checks system configuration. Use it to troubleshoot issues or verify your setup is complete.

## Usage

```bash
dms doctor           # Standard output
dms doctor -v        # Verbose output with paths and details
dms doctor -j        # JSON output for scripting
```

## Status Indicators

| Icon | Status | Meaning |
|------|--------|---------|
| 🟢 | OK | Check passed |
| 🟡 | Warning | Non-critical issue, may affect some features |
| 🔴 | Error | Critical issue that needs attention |
| ⚪ | Info | Informational, no action needed |

---

## System Checks

### Operating System

All GNU/Linux distributions are supported - this information is purely informational.

### Architecture

Only amd64/arm64 is officially supported, although other architectures may work with manual compilation.

### Display Server

DMS only supports Wayland, this check verifies you're not using X11.

---

## Version Checks

### DMS CLI

DMS CLI is the backend and command-line interface for DMS. Its version should match the version of the quickshell configuration.

### Quickshell

Quickshell is the framework used by DMS. Older versions of quickshell may result in a reduced feature set within DMS.

### DMS Shell

The version of the shell configuration, which should match the DMS CLI version.

---

## Installation Checks

### DMS Configuration

By default DMS installs its configuration, plugins, and themes in `$XDG_CONFIG_HOME/.config/DankMaterialShell/`. This check verifies that the configuration directory exists. 

### shell.qml

The location of the `shell.qml` is the installed location of the DMS shell configuration.

### Install Type

- `system`: Installed via system package manager (e.g. `apt`, `dnf`, `pacman`)
- `user`: if manually  installed via manual compilation & installation
- `nix`: if installed via Nix package manager

---

## Compositor Checks

All wayland compositors that implement the [layer shell protocol](https://wayland.app/protocols/wlr-layer-shell-unstable-v1) are supported, with varying feature sets.

### Supported Compositors

| Compositor | Detection | Version Parsing |
|------------|-----------|-----------------|
| niri | `niri` | `niri --version` |
| Hyprland | `hyprland`, `Hyprland` | `hyprctl version` |
| mangowc | `mangowc` | `mangowc --version` |
| labwc | `labwc` | `labwc --version` |
| Sway | `sway` | `sway --version` |
| River | `river` | `river -version` |
| Wayfire | `wayfire` | `wayfire --version` |

### Active Compositor

Currently running compositor.

---

## Quickshell Features

These features depend on how Quickshell was built. Using `quickshell-git` provides full feature support, some builds of quickshell can exclude features based on compilation options.

:::note
All of these features currently require `quickshell-git` or `quickshell` from the Dank Linux repositories (Fedora, Debian, Ubuntu, OpenSUSE)
:::

### Polkit

Polkit is used for escalation prompts, items that require root authorization.

### IdleMonitor

Used to automatically lock, power off monitors, suspend, or hibernate.

### IdleInhibitor

Used to prevent the system from idling or sleeping.

### ShortcutInhibitor

Used to manage keyboard shortcuts, specific to the niri compositor.
---

## Optional Features

### accountsservice

Required to persist user profile changes, such as profile picture.

### power-profiles-daemon

Required to manage power profiles. (e.g. performance, balanced, power-saver)

### I2C/DDC

Required for external monitor brightness control, on most distributions requires `i2c-tools` and the user to be in the `i2c` group.

### Terminal

Detected terminals (in priority order): `ghostty`, `kitty`, `alacritty`, `foot`, `wezterm`

### matugen

DMS leverages matugen with custom color enrichment (dank16) to generate themes for itself and various applications, terminals, and IDEs.

### dgop

Required to use system monitoring widgets and applets (CPU, RAM, Disk, Network, Processes). See [dgop documentation](../dgop/) for more information.

### cava

Required for audio visualization in media players.

### khal

Required to enrich calendar with events from local, CalDAV, or other sources supported by khal.

### Network

Detected backends: NetworkManager, iwd, systemd-networkd, iwd+systemd-networkd.

DMS supports different network stacks, NetworkManager is recommended for the vast majority of use cases as its also compatible with Gnome, KDE, etc. This is purely for integration within the shell itself (such as conencting to networks, viewing network status, etc.)

- NetworkManager : all features supported (Wifi, Ethernet, VPN)
- iwd : Wifi only, no Ethernet or VPN support
- systemd-networkd : Ethernet only, no Wifi or VPN support
- iwd+systemd-networkd : Wifi and Ethernet supported, no VPN support

### danksearch

Used for indexed filesystem search in the launcher. Use `/` to initiate a fs search. See [DankSearch documentation](../danksearch/) for more information.

### loginctl

Available on systems using `systemd` or `elogind`. Used for various session management features such as lock integration, lock before suspend, etc.

### fprintd

Adds fingerprint authentication support to the lock screen.

---

## Configuration Files

| File | Location | Purpose |
|------|----------|---------|
| `settings.json` | `~/.config/DankMaterialShell/` | Main settings |
| `clsettings.json` | `~/.config/DankMaterialShell/` | Clipboard settings |
| `plugin_settings.json` | `~/.config/DankMaterialShell/` | Plugin configuration |
| `session.json` | `~/.local/state/DankMaterialShell/` | Session state |
| `dms-colors.json` | `~/.cache/DankMaterialShell/` | Cached color scheme |

---

## Services

### dms.service

If in use, DMS lifecycle will be managed by systemd. This is optional, DMS can also be started manually or via other init systems.

### greetd

Required for the Dank Greeter. (See [DankGreeter documentation](../dankgreeter/) for more information.)

---

## Environment Variables

### QT_QPA_PLATFORMTHEME

Used to set the Qt platform theme - usually one of `gtk3`, `qt6ct`, or `kde`. This will define how QT applications are themed. Including some elements of DMS (such as icon themes)

### QS_ICON_THEME

Optional environment variable to set the icon theme for DMS only. Will not effect other applications.

---

## JSON Output

Use `dms doctor -j` for machine-readable output:

```json
{
  "summary": {
    "errors": 0,
    "warnings": 1,
    "ok": 15,
    "info": 5
  },
  "results": [
    {
      "category": "System",
      "name": "Operating System",
      "status": "ok",
      "message": "Arch Linux",
      "details": "ID: arch, Version: rolling, Arch: amd64"
    }
  ]
}
```

## Welcome Wizard Integration

The doctor checks are also available in the Welcome Wizard's System Check page. Access it via:

```bash
dms ipc call welcome doctor
```

Or through Settings → About → Tools → System Check.



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-keybinds-cheatsheets.mdx
================================================
---
title: Keybinds & Cheatsheets
description: Manage and display keybinds and cheatsheets for various applications
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██╗  ██╗███████╗██╗   ██╗██████╗ ██╗███╗   ██╗██████╗ ███████╗
██║ ██╔╝██╔════╝╚██╗ ██╔╝██╔══██╗██║████╗  ██║██╔══██╗██╔════╝
█████╔╝ █████╗   ╚████╔╝ ██████╔╝██║██╔██╗ ██║██║  ██║███████╗
██╔═██╗ ██╔══╝    ╚██╔╝  ██╔══██╗██║██║╚██╗██║██║  ██║╚════██║
██║  ██╗███████╗   ██║   ██████╔╝██║██║ ╚████║██████╔╝███████║
╚═╝  ╚═╝╚══════╝   ╚═╝   ╚═════╝ ╚═╝╚═╝  ╚═══╝╚═════╝ ╚══════╝`}
  hideTitle={true}
/>

The `dms keybinds` command provides a unified interface for viewing and managing keybinds across different applications. It can parse application-specific configurations (like Hyprland) and display user-defined cheatsheets in a consistent format.

## Overview

The keybinds framework offers:
- **Auto-discovery**: Automatically finds keybinds from application configs
- **Custom cheatsheets**: Create JSON files for any application
- **Multiple providers**: Built-in support for Hyprland, Sway, MangoWC, and labwc, with extensibility for other applications
- **XDG compliance**: Follows XDG Base Directory standards for config locations

## Quick Start

List all available keybind providers:

```bash
dms keybinds list
# Alias options:
dms cheatsheet list
dms chsht list
```

Show keybinds for a specific application:

```bash
dms keybinds show hyprland
dms keybinds show sway
dms keybinds show mangowc
dms keybinds show tmux
dms keybinds show firefox
```

:::tip Display in Shell
You can also display keybinds directly within DMS using IPC:
```bash
dms ipc call keybinds toggle hyprland
dms ipc call keybinds toggle sway
dms ipc call keybinds toggle <provider>
```
This opens a modal overlay showing the keybinds in the shell interface.
:::

<ThemedImage
  alt="DMS Keybinds UI display"
  sources={{
    light: useBaseUrl('/img/keybinds_light.png'),
    dark: useBaseUrl('/img/keybinds.png'),
  }}
  style={{ maxWidth: '800px', width: '100%', marginTop: '1rem', marginBottom: '1rem' }}
/>

## Built-in Providers

### Hyprland

The Hyprland provider automatically parses your Hyprland configuration files and extracts keybinds.

**Features**:
- Parses all `*.conf` files in your Hyprland config directory
- Supports section headers with `##!` (categories) and `###!` (subcategories)
- Auto-generates descriptions for common dispatchers
- Respects `[hidden]` comments to exclude certain binds
- Categorizes binds by type (Window, Workspace, Execute, etc.)

**Usage**:

```bash
# Use default Hyprland config path (~/.config/hypr)
dms keybinds show hyprland

# Specify custom path
dms keybinds show hyprland --path /path/to/hypr/config
```

**Description Priority**:

The provider generates descriptions in this order:
1. Custom comment in your config (e.g., `bind = SUPER, T, exec, kitty # Open terminal`)
2. Auto-generated for known dispatchers (e.g., `killactive` → "Close window")
3. Fallback format showing dispatcher and params (e.g., `togglegroup`)

**Category Logic**:

Binds are automatically categorized based on their dispatcher:
- **Workspace**: workspace navigation and management
- **Monitor**: monitor-related actions
- **Window**: window management (move, resize, focus, kill, etc.)
- **Execute**: launching applications and scripts
- **System**: system actions (exit, dpms, etc.)
- **Other**: miscellaneous dispatchers

**Example Hyprland config**:

```conf
##! Window Management
bind = SUPER, Q, killactive
bind = SUPER, F, fullscreen, 0

###! Movement
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r

##! Workspaces
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2

##! Applications
bind = SUPER, T, exec, kitty # Open terminal
bind = SUPER, E, exec, thunar # File manager
```

### Sway

The Sway provider automatically parses your Sway configuration files and extracts keybinds.

**Features**:
- Parses the Sway config file (typically `~/.config/sway/config`)
- Supports section comments with `##!` (categories) and `###!` (subcategories)
- Auto-generates descriptions for common Sway commands
- Respects `[hidden]` comments to exclude certain binds
- Categorizes binds by type (Window, Workspace, Execute, etc.)

**Usage**:

```bash
# Use default Sway config path (~/.config/sway/config)
dms keybinds show sway

# Specify custom path
dms keybinds show sway --path /path/to/sway/config
```

**Example Sway config**:

```conf
##! Window Management
bindsym $mod+q kill
bindsym $mod+f fullscreen toggle

###! Movement
bindsym $mod+Left focus left
bindsym $mod+Right focus right

##! Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2

##! Applications
bindsym $mod+Return exec kitty # Open terminal
```

### MangoWC

The MangoWC provider automatically parses your MangoWC (dwl) configuration and extracts keybinds.

**Features**:
- Parses MangoWC keybind definitions
- Supports section comments with `##!` (categories) and `###!` (subcategories)
- Auto-generates descriptions for common MangoWC actions
- Respects `[hidden]` comments to exclude certain binds
- Categorizes binds by type

**Usage**:

```bash
# Use default MangoWC config path
dms keybinds show mangowc

# Specify custom path
dms keybinds show mangowc --path /path/to/mangowc/config
```

### Niri

The Niri provider parses KDL-format Niri configuration files and extracts keybinds. Unlike the other providers, Niri is **writable**—you can create and manage keybind overrides through DMS.

**Features**:
- Parses KDL-format config files
- Follows `include` directives to merge all keybind sources
- Supports DMS overrides via `~/.config/niri/dms/binds.kdl`
- Detects conflicts between DMS defaults and your binds
- Validates config before writing using `niri validate`
- Supports bind options: `repeat`, `cooldown-ms`, `allow-when-locked`

**Usage**:

```bash
# Use default Niri config path (~/.config/niri)
dms keybinds show niri

# Specify custom config directory
dms keybinds show niri --path /path/to/niri/config
```

#### Writing Keybinds

Set overrides that get written to `~/.config/niri/dms/binds.kdl`:

```bash
# Basic keybind
dms keybinds set niri "Mod+T" "spawn kitty"

# With description (shown in hotkey overlay)
dms keybinds set niri "Mod+T" "spawn kitty" --desc "Open terminal"

# With options
dms keybinds set niri "Mod+V" "spawn pavucontrol" \
  --desc "Volume control" \
  --allow-when-locked

# Disable key repeat
dms keybinds set niri "Mod+Q" "close-window" --no-repeat

# Set cooldown between activations
dms keybinds set niri "Mod+Print" "screenshot" --cooldown-ms 500

# Replace an existing keybind with a new key
dms keybinds set niri "Mod+Shift+T" "spawn kitty" \
  --desc "Open terminal" \
  --replace-key "Mod+T"
```

Remove a keybind:

```bash
dms keybinds remove niri "Mod+T"
```

#### Niri Config Setup

Include the DMS binds file in your Niri config:

```kdl
// ~/.config/niri/config.kdl

// Include DMS keybind overrides
include "~/.config/niri/dms/binds.kdl"

binds {
    Mod+Q { close-window; }
    Mod+T { spawn "kitty"; }
}
```

:::tip Include Order Matters
- DMS include **before** your binds: Your binds override DMS defaults
- DMS include **after** your binds: DMS binds take priority

The cheatsheet output includes conflict detection showing which binds are overridden.
:::

#### Bind Options

| Option | Flag | Description |
|--------|------|-------------|
| repeat | `--no-repeat` | Disable key repeat (default: enabled) |
| cooldown-ms | `--cooldown-ms <ms>` | Minimum time between activations |
| allow-when-locked | `--allow-when-locked` | Allow bind when screen is locked |
| hotkey-overlay-title | `--desc <text>` | Description shown in Niri's hotkey overlay |

#### Action Formats

```bash
# Simple action
dms keybinds set niri "Mod+F" "fullscreen"

# Action with argument
dms keybinds set niri "Mod+1" "focus-workspace 1"

# Spawn with simple command
dms keybinds set niri "Mod+T" "spawn kitty"

# Spawn with shell command
dms keybinds set niri "Mod+P" "spawn sh -c \"wofi --show drun\""
```

#### Category Logic

Binds are auto-categorized based on their action:

| Category | Actions |
|----------|---------|
| Alt-Tab | `next-window`, `previous-window` |
| Screenshot | Anything containing "screenshot" |
| Overview | `show-hotkey-overlay`, `toggle-overview` |
| System | `quit`, `power-off-monitors`, DPMS actions |
| Execute | `spawn` commands |
| Workspace | Actions containing "workspace" |
| Monitor | `focus-monitor-*`, `move-*-to-monitor-*` |
| Window | Focus, move, swap, resize, column actions |
| Other | Everything else |

## Custom Cheatsheets

You can create custom cheatsheets for any application by adding JSON files to the cheatsheets directory.

### Directory Locations

The framework follows XDG Base Directory standards:

**Default location** (when no XDG vars set):
```
~/.config/DankMaterialShell/cheatsheets/
```

**With XDG_CONFIG_HOME set**:
```
$XDG_CONFIG_HOME/DankMaterialShell/cheatsheets/
```

**With XDG_CONFIG_DIRS set** (NixOS compatibility):
The framework searches in this order:
1. `$XDG_CONFIG_HOME/DankMaterialShell/cheatsheets/`
2. Each directory in `$XDG_CONFIG_DIRS/DankMaterialShell/cheatsheets/`

### JSON Format

Create a file named after your application (e.g., `vim.json`, `tmux.json`):

```json
{
  "title": "Vim Keybinds",
  "provider": "vim",
  "binds": {
    "Mode": [
      {
        "key": "i",
        "desc": "Enter insert mode",
        "subcat": "Insert"
      },
      {
        "key": "Esc",
        "desc": "Exit insert mode",
        "subcat": "Normal"
      }
    ],
    "Editing": [
      {
        "key": "dd",
        "desc": "Delete current line",
        "subcat": "Delete"
      },
      {
        "key": "yy",
        "desc": "Copy current line",
        "subcat": "Yank"
      },
      {
        "key": "p",
        "desc": "Paste after cursor",
        "subcat": "Paste"
      }
    ],
    "Navigation": [
      {
        "key": "gg",
        "desc": "Go to first line"
      },
      {
        "key": "G",
        "desc": "Go to last line"
      }
    ]
  }
}
```

### Field Reference

- **`title`** (required): Display name shown when viewing the cheatsheet
- **`provider`** (optional): Provider identifier used in commands (defaults to filename without extension)
- **`binds`** (required): Object where keys are category names and values are arrays of keybindings
  - **`key`** (required): The key combination (e.g., "Ctrl+Alt+J", "SUPER+T")
  - **`desc`** (required): Description of what the keybind does
  - **`subcat`** (optional): Subcategory for finer organization within a category

### Example: tmux Cheatsheet

File: `~/.config/DankMaterialShell/cheatsheets/tmux.json`

```json
{
  "title": "tmux Keybinds",
  "provider": "tmux",
  "binds": {
    "Sessions": [
      {
        "key": "Ctrl+B, $",
        "desc": "Rename session"
      },
      {
        "key": "Ctrl+B, d",
        "desc": "Detach from session"
      }
    ],
    "Windows": [
      {
        "key": "Ctrl+B, c",
        "desc": "Create new window"
      },
      {
        "key": "Ctrl+B, ,",
        "desc": "Rename window"
      },
      {
        "key": "Ctrl+B, n",
        "desc": "Next window"
      },
      {
        "key": "Ctrl+B, p",
        "desc": "Previous window"
      }
    ],
    "Panes": [
      {
        "key": "Ctrl+B, %",
        "desc": "Split vertically",
        "subcat": "Split"
      },
      {
        "key": "Ctrl+B, \"",
        "desc": "Split horizontally",
        "subcat": "Split"
      },
      {
        "key": "Ctrl+B, x",
        "desc": "Close pane",
        "subcat": "Management"
      }
    ]
  }
}
```

After creating the file, it will automatically be discovered:

```bash
dms keybinds list
# Shows: hyprland, mangowc, sway, firefox, tmux, vim, ...

dms keybinds show tmux
# Displays your custom tmux cheatsheet
```

## Command Reference

### `dms keybinds list`

Lists all available keybind providers (both built-in and custom).

**Aliases**: `dms cheatsheet list`, `dms chsht list`

```bash
dms keybinds list
```

**Example output**:
```
Available providers:
  - hyprland
  - mangowc
  - sway
  - firefox
  - tmux
  - vim
```

### `dms keybinds show <provider>`

Displays keybinds for the specified provider.

**Aliases**: `dms cheatsheet show`, `dms chsht show`

```bash
dms keybinds show <provider> [flags]
```

**Flags**:
- `--path <path>`: Override the default config location for any provider
- `-h, --help`: Show help for the command

**Examples**:

```bash
# Show Hyprland keybinds from default location
dms keybinds show hyprland

# Show Hyprland keybinds from custom location
dms keybinds show hyprland --path /custom/path/to/hypr

# Show Sway keybinds with custom config
dms keybinds show sway --path /etc/sway/config

# Show MangoWC keybinds with custom config
dms keybinds show mangowc --path /custom/mangowc/config

# Show custom cheatsheet
dms keybinds show vim
```

## Tips & Best Practices

### Organizing Hyprland Configs

Use section headers to organize your keybinds:

```conf
##! Window Management
###! Focus
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r

###! Layout
bind = SUPER, F, fullscreen, 0
bind = SUPER, V, togglefloating

##! Applications
bind = SUPER, T, exec, kitty
bind = SUPER, B, exec, firefox
```

### Hiding Internal Binds

Use `[hidden]` to exclude binds from the display:

```conf
# This won't appear in the keybinds list
bind = SUPER, X, exec, secret-script # [hidden]
```

### Descriptive Comments

Add clear comments to override auto-generated descriptions:

```conf
# Auto-generated: "Launch application: kitty"
bind = SUPER, T, exec, kitty

# Custom: "Open terminal"
bind = SUPER, T, exec, kitty # Open terminal
```

### Consistent Naming

When creating custom cheatsheets, use consistent naming:
- Filename: `application.json` (lowercase, no spaces)
- Provider: Match the filename or use a common identifier
- Title: Use the application's proper name




================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-process-management.mdx
================================================
---
title: Process Management
description: Manage DankMaterialShell processes with run, restart, and kill commands
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ██████╗  ██████╗  ██████╗███████╗███████╗███████╗
██╔══██╗██╔══██╗██╔═══██╗██╔════╝██╔════╝██╔════╝██╔════╝
██████╔╝██████╔╝██║   ██║██║     █████╗  ███████╗███████╗
██╔═══╝ ██╔══██╗██║   ██║██║     ██╔══╝  ╚════██║╚════██║
██║     ██║  ██║╚██████╔╝╚██████╗███████╗███████║███████║
╚═╝     ╚═╝  ╚═╝ ╚═════╝  ╚═════╝╚══════╝╚══════╝╚══════╝`}
  hideTitle={true}
/>

The `dms` command provides process management functionality for running, restarting, and killing DankMaterialShell instances. These commands manage the DMS backend server, which in turn spawns and manages the Quickshell UI process as a child, configuring IPC communication between them.

## Overview

DankMaterialShell consists of a Go backend server that spawns and manages a Quickshell UI frontend as a child process. The process management commands orchestrate both components:
- Launching the DMS backend server
- Spawning Quickshell as a child process with DMS configuration
- Configuring IPC communication between backend and frontend
- Restarting both processes to apply configuration changes
- Managing daemon and session modes

## Quick Start

Launch DMS:

```bash
dms run
```

Restart DMS (kills existing instances and relaunches):

```bash
dms restart
```

Kill all running DMS instances:

```bash
dms kill
```

## Commands

### `dms run`

Launch DankMaterialShell by starting the backend server and Quickshell UI process, then establishing IPC communication between them via Unix socket.

```bash
dms run [flags]
```

**Flags**:
- `-d, --daemon`: Run in daemon mode (detached from terminal)
- `--session`: Session managed mode (for use with systemd or other session managers)
- `-h, --help`: Show help

**Examples**:

```bash
# Run DMS normally (attached to terminal)
dms run

# Run DMS in daemon mode (detached)
dms run --daemon

# Run DMS as a session-managed process
dms run --session
```

**When to use each mode**:
- **Normal mode**: For testing, debugging, or manual shell management
- **Daemon mode**: For background operation without terminal attachment
- **Session mode**: When managing DMS via systemd user units or similar session managers

### `dms restart`

Kill the DMS backend server (along with its Quickshell child process) and relaunch them. This is useful when you've made configuration changes and want to reload the shell.

```bash
dms restart [flags]
```

**Flags**:
- `-h, --help`: Show help

**Examples**:

```bash
# Restart DMS
dms restart
```

**What it does**:
1. Terminates the DMS backend server (which also kills its Quickshell child process)
2. Cleans up any orphaned Quickshell processes if needed
3. Relaunches the backend, which spawns a fresh Quickshell instance
4. Re-establishes IPC communication

**Use cases**:
- After modifying DMS configuration files
- After updating themes or plugins
- When the shell becomes unresponsive
- After applying compositor changes that affect DMS

### `dms kill`

Kill the DMS backend server (which automatically terminates its Quickshell child process) without restarting.

```bash
dms kill [flags]
```

**Flags**:
- `-h, --help`: Show help

**Examples**:

```bash
# Kill all DMS instances
dms kill
```

**Use cases**:
- Stopping DMS before logging out
- Cleaning up stuck processes
- Switching to a different desktop environment
- Troubleshooting process issues

## Running DMS at Login

:::tip DankInstall Users

If you used [dankinstall](../dankinstall), DMS is already configured as a systemd service and starts automatically. You don't need to configure anything here.

:::

### Systemd User Service (Recommended)

Systemd provides automatic startup, session integration, and logging via journalctl. This is the default for dankinstall setups.

```bash
# Enable and start
systemctl --user enable --now dms

# Check status
systemctl --user status dms

# View logs
journalctl --user -u dms -f
```

The `dms restart` and `dms kill` commands work regardless of whether you're using systemd or manual startup.

:::warning

If using systemd, don't add `dms run` to your compositor config - you'll end up with two instances.

:::

### Manual Launch

Add to your compositor's autostart configuration:

**Hyprland** (`~/.config/hypr/hyprland.conf`):
```conf
exec-once = dms run
```

**Sway** (`~/.config/sway/config`):
```conf
exec dms run
```

**Niri** (`~/.config/niri/config.kdl`):
```kdl
spawn-at-startup "dms" "run"
```

### Custom Systemd Unit (Advanced)

Package installations and dankinstall ship a systemd unit file. If you need a custom unit (e.g., for a source build without `make install`), create `~/.config/systemd/user/dms.service`:

```ini
[Unit]
Description=Dank Material Shell (DMS)
PartOf=graphical-session.target
After=graphical-session.target
Requisite=graphical-session.target

[Service]
Type=simple
ExecStart=/usr/bin/dms run --session
Restart=always
RestartSec=2
TimeoutStopSec=10

[Install]
WantedBy=graphical-session.target
```

Then reload and enable:

```bash
systemctl --user daemon-reload
systemctl --user enable --now dms
```

## Process Architecture

DMS operates as a multi-process system with IPC communication:

1. **DMS Backend Server** (Go): Handles IPC requests, plugin management, system monitoring, and CLI operations
2. **Quickshell UI Process**: Qt/QML runtime that renders the shell interface (spawned as a child of the backend)
3. **IPC Layer**: Unix socket communication between backend and frontend
4. **Plugins**: Optional processes that extend functionality

**Process hierarchy**:
```
compositor (hyprland/sway/niri/etc)
└── dms backend server
    ├── IPC server (Unix socket)
    ├── Plugin manager
    └── quickshell (child process)
        └── Connects to parent via IPC
```

When you run `dms run`, the backend server starts first, creates the IPC socket, then spawns Quickshell as a child process. Quickshell connects back to its parent via the Unix socket for commands like brightness control, keybind displays, and other system operations.

## Troubleshooting

### DMS Won't Start

Check if Quickshell is installed:
```bash
which qs
```

Check for conflicting processes:
```bash
ps aux | grep quickshell
```

Try running without daemon mode to see errors:
```bash
dms run
```

### Multiple Instances Running

Kill all instances and restart:
```bash
dms kill
sleep 1
dms run --daemon
```

### Configuration Not Reloading

Use `dms restart` instead of manually killing processes:
```bash
dms restart
```

### Systemd Service Fails

Check logs for errors:
```bash
journalctl --user -u dms.service -n 50
```

Verify the service file has correct paths:
```bash
systemctl --user cat dms.service
```

## Integration with Compositor

DMS is designed to work with Wayland compositors. The process management commands ensure DMS runs cleanly within the compositor's session:

- **Hyprland**: Use `exec-once` for autostart
- **Sway**: Use `exec` for autostart
- **Niri**: Use `spawn-at-startup` for autostart
- **MangoWC**: Use compositor-specific autostart mechanism

When the compositor exits, the DMS backend should automatically terminate, which will also kill its Quickshell child process. If processes don't clean up properly, run `dms kill` before logging out.

## Command Reference

```bash
dms [command] [flags]
```

**Process Management Commands**:
- `run [flags]`: Launch Quickshell with DMS configuration
- `restart`: Kill and relaunch DMS
- `kill`: Kill all running DMS instances

**Global Flags**:
- `-c, --config <path>`: Specify custom DMS config directory
- `-h, --help`: Show help

**Run Command Flags**:
- `-d, --daemon`: Run in daemon mode
- `--session`: Session managed mode

## Other CLI Commands

The `dms` command also provides other functionality:

- **IPC**: `dms ipc` - Send commands to running DMS instances (see [Keybinds & IPC](/docs/dankmaterialshell/keybinds-ipc))
- **Keybinds**: `dms keybinds` - Manage keybind cheatsheets (see [Keybinds & Cheatsheets](/docs/dankmaterialshell/cli-keybinds-cheatsheets))
- **Brightness**: `dms brightness` - Control device brightness (see [Brightness Control](/docs/dankmaterialshell/cli-brightness))
- **Dank16**: `dms dank16` - Generate color palettes (see [Dank16](/docs/dankmaterialshell/cli-dank16))
- **Plugins**: `dms plugins` - Manage DMS plugins (see [Plugins Overview](/docs/dankmaterialshell/plugins-overview))
- **Update**: `dms update` - Update DankMaterialShell
- **Version**: `dms version` - Show version information

Run `dms --help` for a complete list of available commands.



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/cli-screenshot.mdx
================================================
---
title: Screenshot
description: Capture screenshots from Wayland displays with multiple modes and formats
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`███████╗ ██████╗██████╗ ███████╗███████╗███╗   ██╗
██╔════╝██╔════╝██╔══██╗██╔════╝██╔════╝████╗  ██║
███████╗██║     ██████╔╝█████╗  █████╗  ██╔██╗ ██║
╚════██║██║     ██╔══██╗██╔══╝  ██╔══╝  ██║╚██╗██║
███████║╚██████╗██║  ██║███████╗███████╗██║ ╚████║
╚══════╝ ╚═════╝╚═╝  ╚═╝╚══════╝╚══════╝╚═╝  ╚═══╝`}
  hideTitle={true}
/>

The `dms screenshot` command captures screenshots from Wayland displays with support for multiple capture modes, output formats, and clipboard integration.

## Quick Start

```bash
# Region select, save file + clipboard
dms screenshot

# Full screen of focused output
dms screenshot full

# Clipboard only
dms screenshot --no-file
```

Press **Escape** to cancel region selection at any time.

## Capture Modes

| Mode | Command | Description |
|------|---------|-------------|
| `region` | `dms screenshot` | Select a region interactively (default) |
| `full` | `dms screenshot full` | Capture the focused output |
| `all` | `dms screenshot all` | Capture all outputs combined |
| `output` | `dms screenshot output -o NAME` | Capture a specific output by name |
| `last` | `dms screenshot last` | Capture the last selected region |

### List Available Outputs

```bash
dms screenshot list
```

## Output Formats

Use `--format` or `-f` to specify the output format. Default is `png`.

| Format | Flag | Notes |
|--------|------|-------|
| PNG | `-f png` | Default, lossless |
| JPEG | `-f jpg` | Use `-q` to set quality (1-100) |
| PPM | `-f ppm` | Raw format |

```bash
# JPEG with custom quality
dms screenshot -f jpg -q 85
```

## Options

| Flag | Short | Description |
|------|-------|-------------|
| `--cursor` | | Include cursor in screenshot |
| `--stdout` | | Output to stdout (for piping) |
| `--dir` | `-d` | Output directory |
| `--filename` | | Output filename (auto-generated if empty) |
| `--format` | `-f` | Output format: png, jpg, ppm (default: png) |
| `--quality` | `-q` | JPEG quality 1-100 (default: 90) |
| `--output` | `-o` | Output name for 'output' mode |
| `--no-clipboard` | | Don't copy to clipboard |
| `--no-file` | | Don't save to file |
| `--no-notify` | | Don't show notification |
| `--config` | `-c` | Custom DMS config directory path |
| `--help` | `-h` | Show help |

## Examples

### Region Selection

```bash
# Interactive selection, save file + clipboard
dms screenshot

# File only, no clipboard
dms screenshot --no-clipboard

# Clipboard only, no file
dms screenshot --no-file
```

### Full Screen Capture

```bash
# Focused output
dms screenshot full

# All outputs combined
dms screenshot all

# Specific output
dms screenshot output -o DP-1
```

### Repeat Last Capture

```bash
# Capture the same region as before
dms screenshot last
```

### Include Cursor

```bash
dms screenshot full --cursor
```

### Pipe to Editor

```bash
# Send to swappy for annotation
dms screenshot --stdout | swappy -f -
```

### Custom Output Location

```bash
# Save to specific directory
dms screenshot -d ~/Pictures/screenshots

# Custom filename
dms screenshot --filename my-screenshot.png
```



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/compositors.mdx
================================================
---
title: Compositor Setup
sidebar_position: 8
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell works with any Wayland compositor, but we provide optimized configurations for niri, Hyprland, Sway, MangoWC, and labwc. These configs include DMS-specific keybindings, proper layer shell rules, and recommended settings.

## niri Configuration

niri uses the KDL configuration format. DankMaterialShell integrates seamlessly with niri's scrollable tiling layout.


### Key Configuration Sections

DMS will automatically apply key binds, gaps, window radius, and colors if you include the following files in your niri config. You can customize gaps, border radius, and window radius in **Settings → Compositor**.


```kdl
// Add to the end of ~/.config/niri/config.kdl
include "dms/colors.kdl"
include "dms/layout.kdl"
include "dms/alttab.kdl"
include "dms/binds.kdl"
```

:::tip
Be sure that all files exist before including them in the niri configuration.
```bash
mkdir -p ~/.config/niri/dms
touch ~/.config/niri/dms/{colors,layout,alttab,binds}.kdl
```
:::

For manual configuration recommendations, continue below.

#### Layout

The niri layout should have a transparent background, in order to integrate wallpapers onto the overview.

```kdl
layout {
    // You can tailor the gaps to fit dms spacing.
    gaps 5
    background-color "transparent"
}
```

#### Layer Rules

Tell niri to place the wallpaper on the overview.

```kdl
layer-rule {
    match namespace="^quickshell$"
    place-within-backdrop true
}
```

If "Blur Layer" is enabled, you can place the blurred wallpaper on the overview.

```kdl
layer-rule {
    match namespace="dms:blurwallpaper"
    place-within-backdrop true
}
```
For more about layer rules see [layer rules](./layers.mdx).

#### Startup

niri has native systemd session integration. Bind DMS to niri's service so it only runs under niri (won't start in Plasma/GNOME):

```bash
systemctl --user add-wants niri.service dms
```

**Optional services:**

```kdl
// Clipboard history
spawn-at-startup "bash" "-c" "wl-paste --watch cliphist store &"
```

**Alternative: Direct launch (if not using systemd)**

```kdl
spawn-at-startup "dms" "run"
```

#### Environment Variables

```kdl
environment {
  XDG_CURRENT_DESKTOP "niri"
  QT_QPA_PLATFORM "wayland"
  ELECTRON_OZONE_PLATFORM_HINT "auto"
  QT_QPA_PLATFORMTHEME "gtk3"
  QT_QPA_PLATFORMTHEME_QT6 "gtk3"
}
```

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx)

```kdl
binds {
    // Application Launchers
    Mod+Space hotkey-overlay-title="Application Launcher" {
        spawn "dms" "ipc" "call" "spotlight" "toggle";
    }
    Mod+V hotkey-overlay-title="Clipboard Manager" {
        spawn "dms" "ipc" "call" "clipboard" "toggle";
    }
    Mod+M hotkey-overlay-title="Task Manager" {
        spawn "dms" "ipc" "call" "processlist" "focusOrToggle";
    }
    Mod+Comma hotkey-overlay-title="Settings" {
        spawn "dms" "ipc" "call" "settings" "focusOrToggle";
    }
    Mod+N hotkey-overlay-title="Notification Center" {
        spawn "dms" "ipc" "call" "notifications" "toggle";
    }
    Mod+Y hotkey-overlay-title="Browse Wallpapers" {
        spawn "dms" "ipc" "call" "dankdash" "wallpaper";
    }

    // Security
    Mod+Alt+L hotkey-overlay-title="Lock Screen" {
        spawn "dms" "ipc" "call" "lock" "lock";
    }

    // Audio Controls
    XF86AudioRaiseVolume allow-when-locked=true {
        spawn "dms" "ipc" "call" "audio" "increment" "3";
    }
    XF86AudioLowerVolume allow-when-locked=true {
        spawn "dms" "ipc" "call" "audio" "decrement" "3";
    }
    XF86AudioMute allow-when-locked=true {
        spawn "dms" "ipc" "call" "audio" "mute";
    }

    // Brightness Controls
    XF86MonBrightnessUp allow-when-locked=true {
       spawn "dms" "ipc" "call" "brightness" "increment" "5" "";
    }
    XF86MonBrightnessDown allow-when-locked=true {
       spawn "dms" "ipc" "call" "brightness" "decrement" "5" "";
    }
}
```

### Window Rules

Recommended window rules, tailor to your preferences:

```kdl
window-rule {
    match app-id=r#"^org\.gnome\."#
    draw-border-with-background false
    geometry-corner-radius 12
    clip-to-geometry true
}

window-rule {
    match app-id=r#"^org\.wezfurlong\.wezterm$"#
    match app-id="Alacritty"
    match app-id="zen"
    match app-id="com.mitchellh.ghostty"
    match app-id="kitty"
    draw-border-with-background false
}

window-rule {
    match is-active=false
    opacity 0.9
}

window-rule {
    geometry-corner-radius 12
    clip-to-geometry true
}

// Open DMS windows as floating by default
window-rule {
    match app-id=r#"org.quickshell$"#
    open-floating true
}
```

## Hyprland Configuration

Hyprland uses a simple config file format at `~/.config/hypr/hyprland.conf`.

### Key Configuration Sections

DMS will automatically apply gaps, window radius, and colors if you include the following files in your Hyprland config. You can customize gaps, border radius, and window radius in **Settings → Compositor**.

```conf
# Add to the end of ~/.config/hypr/hyprland.conf
source = ~/.config/hypr/dms/colors.conf
source = ~/.config/hypr/dms/layout.conf
source = ~/.config/hypr/dms/outputs.conf
```

:::tip
Be sure that all files exist before including them in the Hyprland configuration.
```bash
mkdir -p ~/.config/hypr/dms
touch ~/.config/hypr/dms/{colors,layout,outputs}.conf
```
:::

For manual configuration recommendations, continue below.

#### Startup

Hyprland doesn't initialize the systemd user session by default. Export the environment and start a session target:

```conf
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user start hyprland-session.target
```

Then bind DMS to the session target so it only runs under Hyprland (won't start in Plasma/GNOME):

```bash
systemctl --user add-wants hyprland-session.target dms
```

See the [Installation guide](./installation#hyprland) for creating the session target.

**Optional services:**

```conf
exec-once = bash -c "wl-paste --watch cliphist store &"
```

**Alternative: Direct launch (if not using systemd)**

```conf
exec-once = dms run
```

#### Miscellaneous

Disables the hyprland backdrop/logo

```conf
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}
```

#### Environment Variables

```conf
env = QT_QPA_PLATFORM,wayland
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = QT_QPA_PLATFORMTHEME,gtk3
env = QT_QPA_PLATFORMTHEME_QT6,gtk3
```

#### Layer Rules

```conf
layerrule = noanim, ^(dms)$
```
For more about layer rules see [layer rules](./layers.mdx).

#### General Layout

```conf
general {
    gaps_in = 5
    gaps_out = 5
    border_size = 0

    col.active_border = rgba(707070ff)
    col.inactive_border = rgba(d0d0d0ff)

    layout = dwindle
}
```

#### Decoration

```conf
decoration {
    rounding = 12

    active_opacity = 1.0
    inactive_opacity = 0.9

    shadow {
        enabled = true
        range = 30
        render_power = 5
        offset = 0 5
        color = rgba(00000070)
    }
}
```

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx)

```conf
$mod = SUPER

# Application Launchers
bind = $mod, space, exec, dms ipc call spotlight toggle
bind = $mod, V, exec, dms ipc call clipboard toggle
bind = $mod, M, exec, dms ipc call processlist focusOrToggle
bind = $mod, comma, exec, dms ipc call settings focusOrToggle
bind = $mod, N, exec, dms ipc call notifications toggle
bind = $mod, Y, exec, dms ipc call dankdash wallpaper
bind = $mod, TAB, exec, dms ipc call hypr toggleOverview

# Security
bind = $mod ALT, L, exec, dms ipc call lock lock

# Audio Controls
bindel = , XF86AudioRaiseVolume, exec, dms ipc call audio increment 3
bindel = , XF86AudioLowerVolume, exec, dms ipc call audio decrement 3
bindl = , XF86AudioMute, exec, dms ipc call audio mute

# Brightness Controls
bindel = , XF86MonBrightnessUp, exec, dms ipc call brightness increment 5
bindel = , XF86MonBrightnessDown, exec, dms ipc call brightness decrement 5
```

### Window Rules

```conf
# Opacity for inactive windows
windowrulev2 = opacity 0.9 0.9, floating:0, focus:0

# GNOME apps
windowrulev2 = rounding 12, class:^(org\.gnome\.)
windowrulev2 = noborder, class:^(org\.gnome\.)

# Terminal apps - no borders
windowrulev2 = noborder, class:^(org\.wezfurlong\.wezterm)$
windowrulev2 = noborder, class:^(Alacritty)$
windowrulev2 = noborder, class:^(zen)$
windowrulev2 = noborder, class:^(com\.mitchellh\.ghostty)$
windowrulev2 = noborder, class:^(kitty)$

# Floating windows
windowrulev2 = float, class:^(gnome-calculator)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(org\.gnome\.Nautilus)$

# Open DMS windows as floating by default
windowrulev2 = float, class:^(org.quickshell)$
```

## MangoWC Configuration

[MangoWC](https://github.com/DreamMaoMao/mangowc) is a dynamic tiling Wayland compositor based on dwl (wlroots). Configuration lives at `~/.config/mango/config.conf`.

### Key Configuration Sections

DMS will automatically apply gaps, window radius, and colors if you include the following files in your MangoWC config. You can customize gaps, border radius, and window radius in **Settings → Compositor**.

```conf
# Add to the end of ~/.config/mango/config.conf
source=~/.config/mango/dms/colors.conf
source=~/.config/mango/dms/layout.conf
source=~/.config/mango/dms/outputs.conf
```

:::tip
Be sure that all files exist before including them in the MangoWC configuration.
```bash
mkdir -p ~/.config/mango/dms
touch ~/.config/mango/dms/{colors,layout,outputs}.conf
```
:::

For manual configuration recommendations, continue below.

#### Startup

MangoWC is wlroots-based and requires manual environment export for systemd services. Export the environment and start a session target:

```conf
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=systemctl --user start mango-session.target
```

Then bind DMS to the session target so it only runs under MangoWC (won't start in Plasma/GNOME):

```bash
systemctl --user add-wants mango-session.target dms
```

See the [Installation guide](./installation#mangowc) for creating the session target.

**Optional services:**

```conf
exec-once=wl-paste --type text --watch cliphist store
```

**Alternative: Direct launch (if not using systemd)**

```conf
exec-once=dms run
```

#### Environment Variables

```conf
env=QT_QPA_PLATFORM,wayland
env=ELECTRON_OZONE_PLATFORM_HINT,auto
env=QT_QPA_PLATFORMTHEME,gtk3
```

#### Appearance

Recommended appearance settings for DMS integration:

```conf
# Window appearance
border_radius=12
borderpx=0
focused_opacity=1.0
unfocused_opacity=0.9

# Gaps
gappih=5
gappiv=5
gappoh=5
gappov=5

# Shadows (optional)
shadows=1
shadow_only_floating=1
shadows_size=10
shadows_blur=15
```

#### Layer Rules

```conf
# Disable animation on DMS layers
layerrule=noanim:1,layer_name:^dms
```

For more about layer rules see [layer rules](./layers.mdx).

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx).

```conf
# Application Launchers
bind=SUPER,space,spawn,dms ipc call spotlight toggle
bind=SUPER,v,spawn,dms ipc call clipboard toggle
bind=SUPER,m,spawn,dms ipc call processlist focusOrToggle
bind=SUPER,comma,spawn,dms ipc call settings focusOrToggle
bind=SUPER,n,spawn,dms ipc call notifications toggle
bind=SUPER,y,spawn,dms ipc call dankdash wallpaper

# Security
bind=SUPER+ALT,l,spawn,dms ipc call lock lock

# Audio Controls
bind=NONE,XF86AudioRaiseVolume,spawn,dms ipc call audio increment 3
bind=NONE,XF86AudioLowerVolume,spawn,dms ipc call audio decrement 3
bind=NONE,XF86AudioMute,spawn,dms ipc call audio mute

# Brightness Controls
bind=NONE,XF86MonBrightnessUp,spawn,dms ipc call brightness increment 5
bind=NONE,XF86MonBrightnessDown,spawn,dms ipc call brightness decrement 5
```

### Window Rules

```conf
# GNOME apps
windowrule=isnoborder:1,appid:^org\.gnome\.

# Terminal apps - no borders
windowrule=isnoborder:1,appid:^org\.wezfurlong\.wezterm$
windowrule=isnoborder:1,appid:^Alacritty$
windowrule=isnoborder:1,appid:^com\.mitchellh\.ghostty$
windowrule=isnoborder:1,appid:^kitty$

# Float DMS windows
windowrule=isfloating:1,appid:^org\.quickshell$
```

## Sway Configuration

[Sway](https://swaywm.org/) is an i3-compatible Wayland compositor. DankMaterialShell integrates with Sway's tiling layout.

### Key Configuration Sections

:::info Coming Soon

Detailed Sway configuration sections are coming soon. Sway configuration will include:
- Startup commands
- Environment variables
- DMS keybindings
- Layer rules
- Window rules

For now, refer to the [Example for Sway](#example-for-sway) in the "Other Compositors" section below for basic setup.

:::

#### Startup

Launch DankMaterialShell and optional services at compositor startup:

```conf
exec dms run
exec wl-paste --watch cliphist store
```

#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx). Basic Sway keybinding examples are available in the [Example for Sway](#example-for-sway) section below.

## labwc Configuration

[labwc](https://labwc.github.io/) is a wlroots-based window-stacking compositor for Wayland, inspired by Openbox.

### Key Configuration Sections

:::info Coming Soon

Detailed labwc configuration sections are coming soon. labwc configuration will include:
- Startup commands
- Environment variables
- DMS keybindings
- Layer rules
- Window rules

For now, refer to the [labwc documentation](https://labwc.github.io/manual.html) for basic setup.

:::


#### DMS Keybindings

For the full list of available IPC commands see [IPC](./keybinds-ipc.mdx). labwc keybinding configuration coming soon.

## Other Compositors

DankMaterialShell works with any Wayland compositor that supports:
- Layer shell protocol (for panels and overlays)
- Session lock protocol (for lock screen)
- ext-workspace-v1 protocol (for workspace management)
- wlr-output-management-unstable-v1 protocol (for interface scaling + output management)

**Note:** Some compositor-specific features will be unavailable, such as workspace switching.

### Basic Integration

For other compositors, you need to:

1. **Auto-start DMS:**
   ```bash
   dms run
   ```

2. **Configure keybindings** using the IPC commands from the [Keybinds & IPC](keybinds-ipc) guide

3. **Set environment variables** in `~/.config/environment.d/90-dms.conf` (for systemd users) or your compositor config:
   ```ini
   QT_QPA_PLATFORM=wayland
   ```

### Example for Sway

Add to `~/.config/sway/config`:

```conf
# Startup
exec dms run
exec wl-paste --watch cliphist store

# DMS Keybindings
bindsym $mod+space exec dms ipc call spotlight toggle
bindsym $mod+v exec dms ipc call clipboard toggle
bindsym $mod+m exec dms ipc call processlist focusOrToggle
bindsym $mod+comma exec dms ipc call settings focusOrToggle

# Audio controls
bindsym XF86AudioRaiseVolume exec dms ipc call audio increment 3
bindsym XF86AudioLowerVolume exec dms ipc call audio decrement 3
bindsym XF86AudioMute exec dms ipc call audio mute

# Brightness controls
bindsym XF86MonBrightnessUp exec dms ipc call brightness increment 5
bindsym XF86MonBrightnessDown exec dms ipc call brightness decrement 5
```

## Troubleshooting

### DMS doesn't start automatically

Check your compositor's logs to ensure the `exec-once` or equivalent startup command is running. You can also manually start DMS with `dms run` to see any error messages.

### Keybindings don't work

Verify that:
- DMS is running (`pgrep -f "dms run"`)
- Your keybinding syntax matches your compositor's format

## Next Steps

- Customize your shell appearance in [Themes](application-themes)
- Explore all available IPC commands in [Keybinds & IPC](keybinds-ipc)
- Add functionality with [Plugins](plugins-overview)



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/custom-themes.mdx
================================================
---
title: Custom Themes
description: Create custom color themes for DankMaterialShell
sidebar_position: 4.1
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`████████╗██╗  ██╗███████╗███╗   ███╗███████╗███████╗
╚══██╔══╝██║  ██║██╔════╝████╗ ████║██╔════╝██╔════╝
     ██║   ███████║█████╗  ██╔████╔██║█████╗  ███████╗
     ██║   ██╔══██║██╔══╝  ██║╚██╔╝██║██╔══╝  ╚════██║
     ██║   ██║  ██║███████╗██║ ╚═╝ ██║███████╗███████║
     ╚═╝   ╚═╝  ╚═╝╚══════╝╚═╝     ╚═╝╚══════╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell supports custom color themes using arbitrary color schemes. You can create your own themes or use pre-made ones.

## Theme Structure

Custom themes are defined in JSON files that generally map to [matugen color keywords](https://github.com/InioX/matugen/wiki/Configuration#colors). Themes can have separate `dark` and `light` variants, or use a single color scheme for both modes.

### Complete Theme Example

```json
{
  "dark": {
    "name": "Cyberpunk Electric Dark",
    "primary": "#00FFCC",
    "primaryText": "#000000",
    "primaryContainer": "#00CC99",
    "secondary": "#FF4DFF",
    "surface": "#0F0F0F",
    "surfaceText": "#E0FFE0",
    "surfaceVariant": "#1F2F1F",
    "surfaceVariantText": "#CCFFCC",
    "surfaceTint": "#00FFCC",
    "background": "#000000",
    "backgroundText": "#F0FFF0",
    "outline": "#80FF80",
    "surfaceContainer": "#1A2B1A",
    "surfaceContainerHigh": "#264026",
    "surfaceContainerHighest": "#33553F",
    "error": "#FF0066",
    "warning": "#CCFF00",
    "info": "#00FFCC",
    "matugen_type": "scheme-expressive"
  },
  "light": {
    "name": "Cyberpunk Electric Light",
    "primary": "#00B899",
    "primaryText": "#FFFFFF",
    "primaryContainer": "#66FFDD",
    "secondary": "#CC00CC",
    "surface": "#F0FFF0",
    "surfaceText": "#1F2F1F",
    "surfaceVariant": "#E6FFE6",
    "surfaceVariantText": "#2D4D2D",
    "surfaceTint": "#00B899",
    "background": "#FFFFFF",
    "backgroundText": "#000000",
    "outline": "#4DCC4D",
    "surfaceContainer": "#F5FFF5",
    "surfaceContainerHigh": "#EBFFEB",
    "surfaceContainerHighest": "#E1FFE1",
    "error": "#B3004D",
    "warning": "#99CC00",
    "info": "#00B899",
    "matugen_type": "scheme-expressive"
  }
}
```

### Single Mode Theme

For themes without light/dark variants, define colors at the top level:

```json
{
  "name": "Theme Name",
  "primary": "#eeeeee",
  "primaryText": "#000000",
  "surface": "#ffffff",
  "surfaceText": "#000000",
  "background": "#f5f5f5",
  "backgroundText": "#000000",
  "outline": "#cccccc",
  "matugen_type": "scheme-tonal-spot"
}
```

## Required Color Properties

### Primary Colors
- `primary` - Main accent color for buttons, highlights, and active states
- `primaryText` - Text color contrasting with primary background
- `primaryContainer` - Variant of primary for containers

### Secondary Colors
- `secondary` - Supporting accent color for variety and hierarchy
- `surfaceTint` - Tint color applied to surfaces (usually derived from primary)

### Surface Colors

<ThemedImage
  alt="Surface Colors Hierarchy"
  sources={{
    light: useBaseUrl('/img/surfacecolorslight.jpg'),
    dark: useBaseUrl('/img/surfacecolors.jpg'),
  }}
/>

- `surface` - Default surface color for cards and panels
- `surfaceText` - Primary text color on surface backgrounds
- `surfaceVariant` - Alternate surface for subtle differentiation
- `surfaceVariantText` - Text color for surfaceVariant backgrounds
- `surfaceContainer` - Container surface, slightly different from surface
- `surfaceContainerHigh` - Elevated container for layered interfaces
- `surfaceContainerHighest` - Highest elevation container for top-level surfaces

### Background Colors
- `background` - Main background color for the interface
- `backgroundText` - Text color for background areas

### Outline
- `outline` - Color for subtle borders, dividers, muted icons, and extra subtle text

## Optional Properties

### Semantic Colors
- `error` - Error states, delete buttons, critical warnings
- `warning` - Warning states and caution indicators
- `info` - Informational states and neutral indicators

### Matugen Type

The `matugen_type` property controls the color scheme algorithm used for system app theming. Default is `scheme-tonal-spot` if not specified.

Available options:
- `scheme-content` - Content-based color extraction
- `scheme-expressive` - Expressive, vibrant color schemes
- `scheme-fidelity` - High fidelity to source material
- `scheme-fruit-salad` - Colorful, fruit salad-like schemes
- `scheme-monochrome` - Monochromatic color schemes
- `scheme-neutral` - Neutral, subdued color schemes
- `scheme-rainbow` - Rainbow-like color schemes
- `scheme-tonal-spot` - Tonal spot color schemes (default)

## Example Themes

Pre-built example themes are available in the [DankMaterialShell repository](https://github.com/AvengeMedia/DankMaterialShell/tree/master/docs):

- [Cyberpunk Electric](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_cyberpunk_electric.json) - Neon green and magenta cyberpunk aesthetic
- [Hotline Miami](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_hotline_miami.json) - Retro 80s hot pink and blue
- [Miami Vice](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_miami_vice.json) - Classic teal and pink vice aesthetic
- [Synthwave Electric](https://github.com/AvengeMedia/DankMaterialShell/blob/master/docs/theme_synthwave_electric.json) - Electric purple and cyan synthwave

## Applying Custom Themes

### Via Settings UI

1. Open **Settings → Theme & Colors**
2. Select **Custom** from the theme dropdown
3. Choose your theme file path

### Via Configuration File

Edit `~/.config/DankMaterialShell/settings.json`:

```json
{
  "currentThemeName": "custom",
  "customThemeFile": "/path/to/mytheme.json"
}
```

### Live Editing

Custom theme files are reactive - editing the JSON file automatically updates the shell if it's the currently active theme.

## Theme Development Tips

- **Start from examples:** Use the pre-built themes as templates
- **Adjust incrementally:** Change one color at a time to see the impact
- **Test both modes:** If providing dark/light variants, test both thoroughly
- **Consider contrast:** Ensure text colors have sufficient contrast with backgrounds
- **Experiment with matugen_type:** Different schemes work better with different color palettes
- **Version control:** Store themes in your dotfiles for easy synchronization



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/icon-theming.mdx
================================================
---
title: Icon Theming
description: Configure icon themes for Qt and GTK applications in DMS
sidebar_position: 4.3
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██╗ ██████╗ ██████╗ ███╗   ██╗███████╗
██║██╔════╝██╔═══██╗████╗  ██║██╔════╝
██║██║     ██║   ██║██╔██╗ ██║███████╗
██║██║     ██║   ██║██║╚██╗██║╚════██║
██║╚██████╗╚██████╔╝██║ ╚████║███████║
╚═╝ ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell will use the QT6 icon theme system as primary source for application icons. Depending on which platform theme you're using, icons are configured in different locations.

## How Icon Theming Works

Qt6 applications, including DankMaterialShell, look for icon themes based on your `QT_QPA_PLATFORMTHEME` setting. Each platform theme reads icon configuration from a different location:

- **gtk3**: Reads from GTK settings (`~/.config/gtk-3.0/settings.ini`)
- **qt6ct**: Reads from qt6ct configuration (`~/.config/qt6ct/qt6ct.conf`)
- **kde**: Reads from KDE Plasma settings (`~/.config/kdeglobals`)

DMS respects these platform-specific configurations and doesn't override your icon theme choices.

### Environment Variable Override

You can also set the icon theme directly using the `QS_ICON_THEME` environment variable:

```bash
export QS_ICON_THEME=Papirus-Dark
```

This takes precedence over platform theme settings and is useful for testing or when you want DMS to use a different icon theme than your other Qt applications.

## GTK Platform Theme (gtk3)

If you're using the GTK passthrough method for Qt theming, icon themes are controlled via GTK settings.

### Configuration

Edit `~/.config/gtk-3.0/settings.ini`:

```ini
[Settings]
gtk-icon-theme-name=Papirus-Dark
```

**Common icon themes:**
- `Papirus` / `Papirus-Dark`
- `Adwaita`
- `breeze` / `breeze-dark`
- `Tela`
- `Nordzy`

### Installing Icon Themes

```bash
# Arch - Papirus
sudo pacman -S papirus-icon-theme

# Arch - Adwaita (usually pre-installed)
sudo pacman -S adwaita-icon-theme

# Flatpak icon themes (available to all apps)
flatpak install flathub org.kde.PaplirusIconTheme
```

## Qt6ct Platform Theme

When using qt6ct for dedicated Qt control, icon themes are managed through the qt6ct interface or configuration file.

### Configuration via GUI

1. Launch `qt6ct` from your application launcher
2. Navigate to the **Icon Theme** tab
3. Select your preferred icon theme from the list
4. Click **Apply**

### Configuration via File

Edit `~/.config/qt6ct/qt6ct.conf`:

```ini
[Appearance]
icon_theme=Papirus-Dark
```

## KDE Platform Theme

If you're using KDE Plasma or the KDE platform theme, icon themes are managed through KDE's configuration system.

### Configuration via File

Edit `~/.config/kdeglobals`:

```ini
[Icons]
Theme=Papirus-Dark
```

## Installing Icon Themes

Icon themes can be installed system-wide or per-user.

### System-wide Installation

```bash
# Arch
sudo pacman -S papirus-icon-theme
sudo pacman -S breeze-icons
sudo pacman -S adwaita-icon-theme

# Fedora
sudo dnf install papirus-icon-theme
sudo dnf install breeze-icon-theme
sudo dnf install adwaita-icon-theme
```

### Per-user Installation

Download icon themes and extract to `~/.local/share/icons/`:

```bash
# Example: Installing from a downloaded archive
mkdir -p ~/.local/share/icons
cd ~/.local/share/icons
tar xf ~/Downloads/Papirus-Dark.tar.gz
```

### Flatpak Icon Themes

Flatpak applications use icon themes from the Flatpak runtime:

```bash
# List available icon theme extensions
flatpak search icon

# Install Papirus for Flatpak apps
flatpak install flathub org.kde.PaplirusIconTheme
```

## Verifying Your Configuration

Check which platform theme you're currently using:

```bash
echo $QT_QPA_PLATFORMTHEME
```

:::tip DankInstall Users

dankinstall sets `QT_QPA_PLATFORMTHEME=gtk3` in `~/.config/environment.d/90-dms.conf`. Check this file to see your current setting.

:::

:::note

This variable must be exposed to the `dms` process. dankinstall users have this in `~/.config/environment.d/90-dms.conf`. Manual setups typically set it in the compositor config or a custom environment.d file.

:::

Check icon theme for each configuration:

```bash
# GTK configuration
cat ~/.config/gtk-3.0/settings.ini | grep icon-theme

# qt6ct configuration
cat ~/.config/qt6ct/qt6ct.conf | grep icon_theme

# KDE configuration
cat ~/.config/kdeglobals | grep -A 1 "\[Icons\]"
```

## Common Icon Theme Recommendations

### Material Design Style
- **Papirus** / **Papirus-Dark**: Most popular, excellent coverage
- **Tela**: Modern, colorful icons with good app coverage

### Gnome or KDE Style
- **Adwaita**: GNOME's default, clean and simple
- **breeze**: KDE's default, professional appearance

## Troubleshooting

### Icons not changing

Make sure you've restarted applications after changing icon themes. Qt applications cache icon information and need to be relaunched.

```bash
# Restart DMS to apply icon theme changes
dms restart
```

### Missing icons

Some applications might show missing icons if the theme doesn't include all required icons. Install a fallback theme:

```bash
# Arch
sudo pacman -S adwaita-icon-theme hicolor-icon-theme

# Fedora
sudo dnf install adwaita-icon-theme hicolor-icon-theme
```

### Wrong theme being used

Verify that your platform theme environment variable matches your configuration:

```bash
# Check current setting
echo $QT_QPA_PLATFORMTHEME
```

If you change `QT_QPA_PLATFORMTHEME`, you must restart your compositor session for the change to take effect.

### qt6ct shows no themes

If qt6ct shows an empty icon theme list, check that icon themes are installed in the correct location:

```bash
# Check system icon themes
ls /usr/share/icons/

# Check user icon themes
ls ~/.local/share/icons/
```

### Flatpak apps using different icons

Flatpak applications run in a sandboxed environment and may not see your system icon themes. Install icon themes via Flatpak:

```bash
flatpak install flathub org.kde.PaplirusIconTheme
```

## Platform Theme Comparison

| Feature | GTK3 | qt6ct | KDE |
|---------|------|-------|-----|
| **Configuration File** | `~/.config/gtk-3.0/settings.ini` | `~/.config/qt6ct/qt6ct.conf` | `~/.config/kdeglobals` |
| **GUI Tool** | GNOME Settings, nwg-look | `qt6ct` | System Settings |
| **Best For** | GTK-heavy desktops | Mixed Qt/GTK | KDE Plasma users |
| **Icon Cache** | GTK icon cache | Qt icon cache | KDE icon cache |

## Related Documentation

- [Application Theming](/docs/dankmaterialshell/application-themes): Configure color themes for GTK and Qt apps
- [Custom Themes](/docs/dankmaterialshell/custom-themes): Create custom DMS themes



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/installation.mdx
================================================
---
title: Installation
description: Install DankMaterialShell on your system
sidebar_position: 2
image: img/dankinstall.png
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

This guide covers installation of DankMaterialShell across different Linux distributions and methods.

## Dependencies

- [**Quickshell**](https://github.com/quickshell-mirror/quickshell) (required) - The core framework
- [**cava**](https://github.com/karlstav/cava) (optional) - Audio visualizer widget
- [**cliphist**](https://github.com/sentriz/cliphist) + [**wl-clipboard**](https://github.com/bugaevc/wl-clipboard) (optional) - Clipboard history
- [**dgop**](https://github.com/AvengeMedia/dgop) (optional) - System telemetry for resource widgets
- [**dsearch**](https://github.com/AvengeMedia/danksearch) (optional) - Filesystem search engine
- [**matugen**](https://github.com/InioX/matugen) (optional) - Material Design color palette generation
- [**niri**](https://github.com/niri-wm/niri) (optional) - DMS Team's choice of Wayland compositor
- [**qt6-multimedia**](https://github.com/qt/qtmultimedia) (optional) - System sound feedback

For pre-built packages on Fedora, Debian, Ubuntu, and OpenSUSE, see the [DankLinux Repository](../danklinux) page.

:::note

Only **Quickshell** is required. All other dependencies are optional and enable specific features.

:::

## Arch & Derivatives

`dms` is available on the [AUR](https://aur.archlinux.org/), it is assumed that you have an aur helper installed such as [paru](https://aur.archlinux.org/packages/paru) or [yay](https://aur.archlinux.org/packages/yay).

For the sake of consistency, we will use `paru` in the examples.

### Stable Release

```bash
paru -S dms-shell-bin
```

### Latest Development Build

```bash
paru -S dms-shell-git
```

These packages ship the shell, widgets, and CLI. Pair them with `niri`, `hyprland`, `sway`, `mangowc`, or `labwc` packages from the official repositories for a complete desktop stack.

## Fedora & CentOS

DankMaterialShell is available through COPR repositories for Fedora 41/42/43 rawhide and CentOS 10. Enable the COPR repositories managed by the team to install prebuilt packages:

### Stable Release

```bash
sudo dnf copr enable avengemedia/dms
sudo dnf install dms
```

### Latest Development Build

```bash
sudo dnf copr enable avengemedia/dms-git
sudo dnf install dms
```

The COPR repositories also provide companion packages such as `quickshell-git`, `cliphist`, `matugen`, and other utilities used by the default configuration.

## Debian & Ubuntu

DankMaterialShell is available through Open Build Service (OBS) for Debian and Launchpad PPA for Ubuntu.

### Debian

For **Debian 13 (Trixie)**:

```bash
# DankLinux repository
curl -fsSL https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/Debian_13/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/danklinux.gpg
echo "deb [signed-by=/etc/apt/keyrings/danklinux.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/danklinux/Debian_13/ /" | \
  sudo tee /etc/apt/sources.list.d/danklinux.list

# DMS stable repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_13/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_13/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms.list

# DMS development repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_13/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms-git.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms-git.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_13/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms-git.list
sudo apt update
```

For **Debian Testing**:

```bash
# DankLinux repository
curl -fsSL https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/Debian_Testing/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/danklinux.gpg
echo "deb [signed-by=/etc/apt/keyrings/danklinux.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/danklinux/Debian_Testing/ /" | \
  sudo tee /etc/apt/sources.list.d/danklinux.list

# DMS stable repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Testing/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Testing/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms.list

# DMS development repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Testing/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms-git.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms-git.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Testing/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms-git.list
sudo apt update
```

For **Debian Sid**:

```bash
# DankLinux repository
curl -fsSL https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/Debian_Unstable/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/danklinux.gpg
echo "deb [signed-by=/etc/apt/keyrings/danklinux.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/danklinux/Debian_Unstable/ /" | \
  sudo tee /etc/apt/sources.list.d/danklinux.list

# DMS stable repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Unstable/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/Debian_Unstable/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms.list

# DMS development repository
curl -fsSL https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Unstable/Release.key | \
  sudo gpg --dearmor -o /etc/apt/keyrings/avengemedia-dms-git.gpg
echo "deb [signed-by=/etc/apt/keyrings/avengemedia-dms-git.gpg] https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/Debian_Unstable/ /" | \
  sudo tee /etc/apt/sources.list.d/avengemedia-dms-git.list
sudo apt update
```

#### Install Packages

Install the **stable release**:

```bash
sudo apt install dms
```

Install the **latest development build**:

```bash
sudo apt install dms-git
```

### Ubuntu

Ubuntu 25.10+ (Questing) is supported via Launchpad PPA.

#### Stable Release

```bash
sudo add-apt-repository ppa:avengemedia/danklinux
sudo add-apt-repository ppa:avengemedia/dms
sudo apt update
sudo apt install dms
```

#### Latest Development Build

```bash
sudo add-apt-repository ppa:avengemedia/danklinux
sudo add-apt-repository ppa:avengemedia/dms-git
sudo apt update
sudo apt install dms-git
```

:::tip

Visit the [DankLinux Repository](../danklinux) page for OBS and PPA links and more information about available packages.\
Add **niri** or **niri-git** to your system to get the best experience.

:::

## OpenSUSE & Derivatives

DankMaterialShell is available through the Open Build Service (OBS) for OpenSUSE Tumbleweed, Leap 16/16.1 & Slowroll.

### OpenSUSE Tumbleweed

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Tumbleweed/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/openSUSE_Tumbleweed/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Tumbleweed/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/openSUSE_Tumbleweed/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

### OpenSUSE Leap 16

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.0/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/16.0/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.0/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/16.0/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

### OpenSUSE Leap 16.1

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.1/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/16.1/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/16.1/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/16.1/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

### OpenSUSE Slowroll

#### Stable Release

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Slowroll/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms/openSUSE_Slowroll/home:AvengeMedia:dms.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms
```

#### Latest Development Build

```bash
# DankLinux repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:AvengeMedia:danklinux/openSUSE_Slowroll/home:AvengeMedia:danklinux.repo

# DMS repository
sudo zypper addrepo https://download.opensuse.org/repositories/home:/AvengeMedia:/dms-git/openSUSE_Slowroll/home:AvengeMedia:dms-git.repo
sudo zypper refresh

# Install DMS
sudo zypper install dms-git
```

## NixOS

:::tip

NixOS has dedicated documentation with two installation methods:
- [Native nixpkgs installation](./nixos) - **Recommended** for NixOS unstable users
- [Flake-based installation](./nixos-flake) - For NixOS stable, home-manager support, or quicker updates

:::

## All Other Distributions

:::warning

This guide doesn't cover compositor installation. You need a compatible Wayland compositor (niri, Hyprland, sway, dwl/MangoWC, etc.).

:::

### 1. Install Essential Dependencies

#### Quickshell

If your distribution does not provide a quickshell package, you'll need to build it from source. Quickshell requires:

**Base dependencies:**
- cmake, qt6base, qt6declarative, qtshadertools, pkg-config, cli11
- Private Qt headers for qt6declarative (and qt6wayland on Qt < 6.10)
- Qt 6.6 or newer

**Key features and their dependencies:**
- **Wayland support** (enabled by default) - qt6wayland, wayland, wayland-protocols
- **Crash reporter** (recommended) - google-breakpad
- **Jemalloc** (recommended for better memory management) - jemalloc
- **System tray** - qt6dbus
- **PAM authentication** - pam

For complete build instructions and feature flags, see the [Quickshell BUILD.md](https://git.outfoxxed.me/quickshell/quickshell/raw/branch/master/BUILD.md).

#### AccountsService

:::note

AccountsService is needed to persist user profile configurations such as profile pictures. Available in most repositories as `accountsservice`.

:::

```bash
# Arch + Friends
sudo pacman -S accountsservice
# Fedora + Friends
sudo dnf install accountsservice
# Debian, Ubuntu + Friends
sudo apt install accountsservice
# openSUSE + Friends
sudo zypper install accountsservice
# Gentoo
sudo emerge --ask sys-apps/accountsservice
```

### 2. Clone the DMS Repository

```bash
git clone https://github.com/AvengeMedia/DankMaterialShell.git ~/dms
```

### 3. Compile & Install the DMS Backend

*Requires GO 1.24+*

```bash
cd ~/dms
sudo make install
```

:::note

To uninstall a source build, run `sudo make uninstall` from the repository directory.

:::

### 4. Install Optional Integrations

Install optional components for full functionality using your distribution's package manager:

- `dgop` - Detailed system metrics and process lists
- `dsearch` - Filesystem search engine
- `matugen` - Material Design color palette generation
- `i2c-tools` - ddc monitor backlight control
- `wl-clipboard` + `cliphist` - Clipboard history
- `cava` - Audio visualizer widget
- `qt6-multimedia` - System sound feedback

## Post Install

After completing installation:

1. **Generate compositor config** (niri/Hyprland only): Run `dms setup` to create a starter configuration with DMS keybinds and autostart. Other compositors (sway, MangoWC, labwc) are supported but require manual configuration.
2. Enable the systemd service (recommended) or add `dms run` to your compositor config
3. Configure your compositor keybinds - see the [Keybinds & IPC](keybinds-ipc) guide
4. Customize appearance via [Themes](application-themes)
5. Extend functionality with [Plugins](plugins-overview)

See [Managing Your Installation](managing) for detailed guidance on service management, environment variables, and updates.

### Systemd Integration (Recommended)

:::tip DankInstall Users

If you used [dankinstall](../dankinstall), this is already configured. The installer runs `systemctl --user enable --now dms` during setup.

:::

**Enable autostart:**

```bash
systemctl --user enable dms
```

**Manual control:**

```bash
# Start DMS now
systemctl --user start dms

# Check status
systemctl --user status dms

# View logs
journalctl --user -u dms -f

# Restart DMS
systemctl --user restart dms

# Disable autostart
systemctl --user disable dms
```

:::warning

If using systemd autostart, remove `dms run` / `spawn "dms" "run"` / `exec-once=dms run` from your compositor's configuration to avoid running DMS twice.

:::

### Compositor-Specific Systemd Setup

Different compositors have different levels of systemd session integration. Choose the section that matches your compositor.

:::tip Why use add-wants?

If you have multiple desktop environments installed (e.g., Plasma, GNOME, niri), using `systemctl --user enable dms` starts DMS in *all* of them. Using `add-wants` binds DMS to a specific compositor's service or session target, so it only runs where you want it. DMS won't launch when you log into Plasma or GNOME.

:::

#### niri

niri has native systemd session integration. Bind DMS to niri's service:

```bash
systemctl --user add-wants niri.service dms
```

DMS starts when niri starts and stops when niri exits. It won't run in other sessions.

#### Hyprland

Hyprland doesn't initialize the systemd user session by default. You need to export the environment to systemd for user services to work.

Create a session target:

```ini title="~/.config/systemd/user/hyprland-session.target"
[Unit]
Description=Hyprland Session Target
Requires=graphical-session.target
After=graphical-session.target
```

Add to your Hyprland config (after any `env =` lines):

```conf title="~/.config/hypr/hyprland.conf"
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user start hyprland-session.target
```

Bind DMS to the session target:

```bash
systemctl --user add-wants hyprland-session.target dms
```

#### MangoWC

[MangoWC](https://github.com/DreamMaoMao/mangowc) is a dynamic tiling compositor based on dwl (wlroots). Like other wlroots compositors, it requires manual environment export for systemd user services.

Create a session target:

```ini title="~/.config/systemd/user/mango-session.target"
[Unit]
Description=MangoWC Session Target
Requires=graphical-session.target
After=graphical-session.target
```

Add to your MangoWC config:

```conf title="~/.config/mango/config.conf"
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=systemctl --user start mango-session.target
```

Bind DMS to the session:

```bash
systemctl --user add-wants mango-session.target dms
```

#### Sway

Sway (wlroots-based) needs the environment exported for systemd services:

```conf title="~/.config/sway/config"
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
```

Create a session target and bind DMS:

```bash
systemctl --user add-wants sway-session.target dms
```



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/keybinds-ipc.mdx
================================================
---
title: Keybinds & IPC
description: Comprehensive IPC functionality for external control of DankMaterialShell
sidebar_position: 5
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell provides comprehensive IPC (Inter-Process Communication) functionality that allows external control of the shell through command-line commands. All IPC commands follow the format:

```bash
dms ipc call <target> <function> [parameters...]
```

## Core Controls

### audio

Manage audio output and input devices.

| Function | Description | Parameters |
| --- | --- | --- |
| `setvolume <percentage>` | Set output volume | percentage (0-100) |
| `increment <step>` | Increase output volume | step (default: 5) |
| `decrement <step>` | Decrease output volume | step (default: 5) |
| `mute` | Toggle output mute | - |
| `setmic <percentage>` | Set microphone volume | percentage (0-100) |
| `micmute` | Toggle microphone mute | - |
| `cycleoutput` | Cycle through audio output devices | - |
| `status` | Get current audio status | - |

**Examples:**
```bash
dms ipc call audio setvolume 50
dms ipc call audio increment 10
dms ipc call audio mute
dms ipc call audio cycleoutput
```

### brightness

Control display brightness for internal and external displays.

| Function | Description | Parameters |
| --- | --- | --- |
| `set <percentage> [device]` | Set brightness level | percentage (1-100), device (optional) |
| `increment <step> [device]` | Increase brightness | step, device (optional) |
| `decrement <step> [device]` | Decrease brightness | step, device (optional) |
| `status` | Get current brightness status | - |
| `list` | List all brightness devices | - |
| `enableExponential [device]` | Enable exponential brightness mode | device (optional, uses current if not specified) |
| `disableExponential [device]` | Disable exponential brightness mode | device (optional, uses current if not specified) |
| `toggleExponential [device]` | Toggle exponential brightness mode | device (optional, uses current if not specified) |

**Examples:**
```bash
dms ipc call brightness set 80
dms ipc call brightness increment 10 ""
dms ipc call brightness decrement 5 "intel_backlight"
dms ipc call brightness disableExponential "backlight:intel_backlight"
dms ipc call brightness toggleExponential
```

### night

Night mode (gamma/color temperature) control.

| Function | Description | Parameters |
| --- | --- | --- |
| `toggle` | Toggle night mode on/off | - |
| `enable` | Enable night mode | - |
| `disable` | Disable night mode | - |
| `status` | Get night mode status | - |
| `temperature [value]` | Get/set color temperature | value in Kelvin (2500-6000, optional) |
| `automation [mode]` | Get/set automation mode | "manual", "time", or "location" (optional) |
| `schedule <start> <end>` | Set time-based schedule | start time (HH:MM), end time (HH:MM) |
| `location <lat> <lon>` | Set location coordinates | latitude, longitude |

**Examples:**
```bash
dms ipc call night toggle
dms ipc call night temperature 4000
dms ipc call night automation time
dms ipc call night schedule 20:00 06:00
dms ipc call night location 40.7128 -74.0060
```

### mpris

Media player control via MPRIS interface.

| Function | Description |
| --- | --- |
| `list` | List all available media players |
| `play` | Start playback |
| `pause` | Pause playback |
| `playPause` | Toggle play/pause |
| `previous` | Skip to previous track |
| `next` | Skip to next track |
| `stop` | Stop playback |

**Examples:**
```bash
dms ipc call mpris playPause
dms ipc call mpris next
```

### lock

Screen lock control and status.

| Function | Description |
| --- | --- |
| `lock` | Lock the screen immediately |
| `demo` | Show lock screen demo (doesn't lock) |
| `isLocked` | Check if screen is locked |

**Examples:**
```bash
dms ipc call lock lock
dms ipc call lock isLocked
```

### inhibit

Idle inhibitor control to prevent automatic sleep/lock.

| Function | Description |
| --- | --- |
| `toggle` | Toggle idle inhibit state |
| `enable` | Enable idle inhibit (prevent sleep) |
| `disable` | Disable idle inhibit (allow sleep) |

**Examples:**
```bash
dms ipc call inhibit toggle
dms ipc call inhibit enable
```

## Wallpaper & Profile

### wallpaper

Wallpaper management with support for global and per-monitor configurations.

#### Global Wallpaper Functions

| Function | Description | Parameters |
| --- | --- | --- |
| `get` | Get current wallpaper path | - |
| `set <path>` | Set wallpaper | path to image file |
| `clear` | Clear all wallpapers | - |
| `next` | Cycle to next wallpaper | - |
| `prev` | Cycle to previous wallpaper | - |

#### Per-Monitor Functions

| Function | Description | Parameters |
| --- | --- | --- |
| `getFor <screen>` | Get wallpaper for monitor | monitor name (e.g., "DP-2") |
| `setFor <screen> <path>` | Set wallpaper for monitor | monitor name, path to image |
| `nextFor <screen>` | Cycle to next wallpaper | monitor name |
| `prevFor <screen>` | Cycle to previous wallpaper | monitor name |

**Examples:**
```bash
# Global wallpaper mode
dms ipc call wallpaper set /path/to/image.jpg
dms ipc call wallpaper next

# Per-monitor wallpaper mode
dms ipc call wallpaper setFor DP-2 /path/to/image1.jpg
dms ipc call wallpaper setFor eDP-1 /path/to/image2.jpg
dms ipc call wallpaper nextFor eDP-1

# Clear and return to global mode
dms ipc call wallpaper clear
```

**Note:** When per-monitor mode is enabled, legacy global functions will return error messages directing you to use the per-monitor equivalents.

### profile

User profile image management.

| Function | Description | Parameters |
| --- | --- | --- |
| `getImage` | Get current profile image path | - |
| `setImage <path>` | Set profile image | path to image file |
| `clearImage` | Clear profile image | - |

**Examples:**
```bash
dms ipc call profile setImage /path/to/avatar.png
dms ipc call profile clearImage
```

## Appearance Controls

### theme

Theme mode control (light/dark mode switching).

| Function | Description |
| --- | --- |
| `toggle` | Toggle between light and dark themes |
| `light` | Switch to light theme |
| `dark` | Switch to dark theme |
| `getMode` | Get current theme mode |

**Examples:**
```bash
dms ipc call theme toggle
dms ipc call theme dark
```

### bar

Control individual bars using flexible selectors.

| Function | Description | Parameters |
| --- | --- | --- |
| `reveal <selector> <value>` | Show a bar | selector + value |
| `hide <selector> <value>` | Hide a bar | selector + value |
| `toggle <selector> <value>` | Toggle bar visibility | selector + value |
| `status <selector> <value>` | Get bar visibility status | selector + value |
| `autoHide <selector> <value>` | Enable auto-hide mode | selector + value |
| `manualHide <selector> <value>` | Disable auto-hide mode | selector + value |
| `toggleAutoHide <selector> <value>` | Toggle auto-hide mode | selector + value |
| `getPosition <selector> <value>` | Get bar position | selector + value |
| `setPosition <selector> <value> <position>` | Set bar position | selector + value + position (top, bottom, left, right) |

**Selectors:**
- `index` - Select by position (0-based)
- `id` - Select by unique bar ID
- `name` - Select by bar name

**Examples:**
```bash
# By index
dms ipc call bar hide index 0
dms ipc call bar reveal index 1
dms ipc call bar toggle index 0

# By name
dms ipc call bar toggle name "Main Bar"
dms ipc call bar status name "Secondary"

# By ID
dms ipc call bar reveal id abc123

# Auto-hide controls
dms ipc call bar autoHide index 0
dms ipc call bar manualHide name "Main Bar"
dms ipc call bar toggleAutoHide index 1

# Position controls
dms ipc call bar getPosition index 0
dms ipc call bar getPosition id default
dms ipc call bar setPosition index 0 top
dms ipc call bar setPosition id default left
```

### dock

Dock visibility and behavior control.

| Function | Description |
| --- | --- |
| `reveal` | Show the dock |
| `hide` | Hide the dock |
| `toggle` | Toggle dock visibility |
| `status` | Get dock visibility status |
| `autoHide` | Enable auto-hide mode |
| `manualHide` | Disable auto-hide mode |
| `toggleAutoHide` | Toggle auto-hide mode |

**Examples:**
```bash
dms ipc call dock toggle
dms ipc call dock hide
dms ipc call dock reveal
dms ipc call dock status

# Auto-hide controls
dms ipc call dock autoHide
dms ipc call dock manualHide
dms ipc call dock toggleAutoHide
```

### widget

Control bar widget popouts, menus, and visibility (including plugins).

| Function | Description | Parameters |
| --- | --- | --- |
| `toggle <widgetId>` | Toggle widget popout visibility | widget ID |
| `list` | List all registered widget IDs with visibility state | - |
| `status <widgetId>` | Get widget popout visibility status | widget ID |
| `visibility <widgetId>` | Get widget visibility state | widget ID |
| `reveal <widgetId>` | Force widget to be visible | widget ID |
| `hide <widgetId>` | Force widget to be hidden | widget ID |
| `reset <widgetId>` | Clear visibility override, return to normal behavior | widget ID |

**Examples:**
```bash
dms ipc call widget list
dms ipc call widget toggle clock
dms ipc call widget status weather

# Control widget visibility on the bar
dms ipc call widget visibility weather
dms ipc call widget hide weather
dms ipc call widget reveal weather
dms ipc call widget reset weather
```

**Notes:**
- Use `list` to discover available widget IDs with their current visibility state (`[visible]` or `[hidden]`)
- Widget IDs depend on which widgets are enabled in your bar settings
- The `status` function returns "visible" or "hidden" for the widget **popout** state
- The `visibility`, `reveal`, `hide`, and `reset` functions control the widget's **bar presence** (whether it appears on the bar at all)
- Plugins can define conditional visibility via `visibilityCommand` — use `reset` to return to that behavior after overriding

## Modal Controls

These targets control various modal windows and overlays.

### spotlight

Application launcher modal with search capabilities.

| Function | Description | Parameters |
| --- | --- | --- |
| `open` | Show launcher | - |
| `close` | Hide launcher | - |
| `toggle` | Toggle launcher visibility | - |
| `openQuery <query>` | Show launcher with search | search text |
| `toggleQuery <query>` | Toggle launcher with search | search text |

**Examples:**
```bash
dms ipc call spotlight toggle
dms ipc call spotlight openQuery browser
dms ipc call spotlight toggleQuery "!"
```

### Other Modals

All these modals support `open`, `close`, and `toggle` functions:

- **clipboard** - Clipboard history manager
- **notifications** - Notification center (also supports `clearAll`, `dismissAllPopups`, `toggleDoNotDisturb`, and `getDoNotDisturb`)
- **processlist** - System process list and performance monitor (also supports `focusOrToggle`)
- **powermenu** - Power menu for system actions
- **control-center** - Quick settings (network, bluetooth, audio, etc.)
- **notepad** - Quick notepad/scratchpad

**Examples:**
```bash
dms ipc call clipboard toggle
dms ipc call notifications open
dms ipc call notifications clearAll
dms ipc call notifications dismissAllPopups
dms ipc call notifications toggleDoNotDisturb
dms ipc call notifications getDoNotDisturb
dms ipc call processlist open
dms ipc call powermenu toggle
dms ipc call control-center toggle
dms ipc call notepad open
```

### settings

Settings modal with additional read/write access to configuration values.

| Function | Description | Parameters |
| --- | --- | --- |
| `open` | Show settings modal | - |
| `openWith <tab>` | Open settings to specific tab | tab ID |
| `close` | Hide settings modal | - |
| `toggle` | Toggle settings modal | - |
| `toggleWith <tab>` | Toggle settings to specific tab | tab ID |
| `focusOrToggle` | Focus settings if open, otherwise toggle | - |
| `focusOrToggleWith <tab>` | Focus/toggle to specific tab | tab ID |
| `tabs` | List available tab IDs | - |
| `get <key>` | Get a setting value | setting key name |
| `set <key> <value>` | Set a setting value | setting key, new value |

**Available Tab IDs:**
- **Personalization:** `personalization`, `wallpaper`, `theme`, `typography`, `time_weather`, `sounds`
- **Dankbar:** `dankbar`, `dankbar_settings`, `dankbar_widgets`
- **Widgets:** `workspaces_widgets`, `workspaces`, `media_player`, `notifications`, `osd`, `running_apps`, `updater`
- **Dock & Launcher:** `dock_launcher`, `dock`, `launcher`
- **System:** `keybinds`, `displays`, `network`, `printers`
- **Power & Security:** `power_security`, `lock_screen`, `power_sleep`
- **Other:** `plugins`, `about`

**Examples:**
```bash
dms ipc call settings toggle
dms ipc call settings openWith theme
dms ipc call settings toggleWith dock
dms ipc call settings tabs
dms ipc call settings set showSeconds true
dms ipc call settings set opacity 0.9
```

**Note:** The `set` function supports boolean, number, and string values. Objects and arrays are not currently supported.

### dash

Dashboard popup with multiple tabs.

| Function | Description | Parameters |
| --- | --- | --- |
| `open [tab]` | Show dashboard | tab: "", "overview", "media", "weather" |
| `close` | Hide dashboard | - |
| `toggle [tab]` | Toggle dashboard | tab |

**Examples:**
```bash
dms ipc call dash toggle ""
dms ipc call dash open overview
dms ipc call dash toggle media
dms ipc call dash open weather
```

### file

File browser controls for selecting wallpapers and profile images.

| Function | Description | Parameters |
| --- | --- | --- |
| `browse <type>` | Open file browser | "wallpaper" or "profile" |

**Examples:**
```bash
dms ipc call file browse wallpaper
dms ipc call file browse profile
```

### dankdash

DankDash wallpaper browser control.

| Function | Description |
| --- | --- |
| `wallpaper` | Toggle DankDash wallpaper browser |

**Examples:**
```bash
dms ipc call dankdash wallpaper
```

### welcome

First-launch welcome wizard with feature overview, system diagnostics, and configuration quick links.

| Function | Description | Parameters |
| --- | --- | --- |
| `open` | Show wizard at Welcome page | - |
| `doctor` | Show wizard at System Check page | - |
| `page <num>` | Show wizard at specific page | 0=Welcome, 1=Doctor, 2=Complete |

**Pages:**
- **0 - Welcome**: Feature overview with DMS highlights
- **1 - System Check**: Runs `dms doctor` with filterable results (Errors, Warnings, Info, OK)
- **2 - Complete**: Configuration quick links, keybind shortcuts, and external resources

**Examples:**
```bash
dms ipc call welcome open
dms ipc call welcome doctor
dms ipc call welcome page 2
```

**Settings Integration:** Available in Settings → About → Tools as "Show Welcome" and "System Check" buttons.

## System Utilities

### niri

**Requires niri 25.11+**

Screenshot functionality for the niri compositor. Captures are opened in your configured editor for markup and annotation.

| Function | Description |
| --- | --- |
| `screenshot` | Interactive selection screenshot |
| `screenshotScreen` | Capture entire screen |
| `screenshotWindow` | Capture focused window |

**Examples:**
```bash
dms ipc call niri screenshot
dms ipc call niri screenshotScreen
dms ipc call niri screenshotWindow
```

**Configuration:**

Set the `DMS_SCREENSHOT_EDITOR` environment variable to choose your preferred screenshot editor backend:

```bash
# Use Swappy (default)
export DMS_SCREENSHOT_EDITOR=swappy

# Use Satty
export DMS_SCREENSHOT_EDITOR=satty
```

**Requirements:** niri compositor and your chosen screenshot editor (Swappy or Satty) must be installed.

### keybinds

Dynamic keybinds cheatsheet modal that works with multiple providers.

| Function | Description | Parameters |
| --- | --- | --- |
| `open <provider>` | Show keybinds modal | provider name (e.g., "hyprland", "sway", "mangowc") |
| `openWithPath <provider> <path>` | Show keybinds modal with custom config path | provider name, path to config |
| `close` | Hide keybinds modal | - |
| `toggle <provider>` | Toggle keybinds modal visibility | provider name |
| `toggleWithPath <provider> <path>` | Toggle keybinds modal with custom config path | provider name, path to config |

**Examples:**
```bash
dms ipc call keybinds toggle hyprland
dms ipc call keybinds toggle sway
dms ipc call keybinds toggle mangowc
dms ipc call keybinds open tmux

# With custom config paths
dms ipc call keybinds openWithPath hyprland /custom/path/to/hypr
dms ipc call keybinds toggleWithPath sway /etc/sway/config
```

**Supported Providers:**

The keybinds modal supports all providers available through the `dms keybinds` CLI:
- **Built-in providers**: Hyprland, Sway, MangoWC (automatically parse compositor configs)
- **Custom cheatsheets**: Any JSON-based cheatsheet in `~/.config/DankMaterialShell/cheatsheets/`

The modal automatically parses configuration files and displays keybinds organized by category with optional subcategories. See the [Keybinds & Cheatsheets](/docs/dankmaterialshell/cli-keybinds-cheatsheets) documentation for more details on providers and creating custom cheatsheets.

### hypr

**Hyprland-only features**

Hyprland-specific workspace overview control.

| Function | Description |
| --- | --- |
| `openOverview` | Show Hyprland workspace overview |
| `closeOverview` | Hide Hyprland workspace overview |
| `toggleOverview` | Toggle Hyprland workspace overview visibility |

**Examples:**
```bash
dms ipc call hypr toggleOverview
```

**Workspace Overview:**

The workspace overview shows all your workspaces across all monitors with live window previews:
- **Multi-monitor support** - Shows workspaces from all connected monitors with monitor name labels
- **Live window previews** - Real-time screen capture of all windows on each workspace
- **Drag-and-drop** - Move windows between workspaces and monitors by dragging
- **Keyboard navigation** - Use Left/Right arrow keys to switch between workspaces on current monitor
- **Visual indicators** - Active workspace highlighted when it contains windows
- **Click to switch** - Click any workspace to switch to it
- **Click outside or press Escape** - Close the overview

**Note:** All hypr functions return `HYPR_NOT_AVAILABLE` if not running Hyprland.

### plugins

Manage plugins at runtime - useful for development and troubleshooting.

| Function | Description | Parameters |
| --- | --- | --- |
| `list` | List all available plugins with status | - |
| `status <pluginId>` | Check if a plugin is loaded | plugin ID |
| `reload <pluginId>` | Hot-reload a plugin without restarting | plugin ID |
| `enable <pluginId>` | Enable a disabled plugin | plugin ID |
| `disable <pluginId>` | Disable a loaded plugin | plugin ID |

**Examples:**
```bash
# See what plugins are available
dms ipc call plugins list

# Check if a specific plugin is running
dms ipc call plugins status myPlugin

# Hot-reload during development (no shell restart needed)
dms ipc call plugins reload myPlugin

# Toggle plugins on/off
dms ipc call plugins enable myPlugin
dms ipc call plugins disable myPlugin
```

### systemupdater

System updater external check request.

| Function | Description |
| --- | --- |
| `updatestatus` | Trigger system update check |

**Examples:**
```bash
dms ipc call systemupdater updatestatus
```

### desktopWidget

Control desktop widget instances (clocks, system monitors, etc.).

| Function | Description | Parameters |
| --- | --- | --- |
| `list` | List all widget instances with ID, type, name, and status | - |
| `status <instanceId>` | Get widget status (enabled, overlay, clickThrough, etc.) | instance ID |
| `enable <instanceId>` | Enable the widget | instance ID |
| `disable <instanceId>` | Disable the widget | instance ID |
| `toggleEnabled <instanceId>` | Toggle widget enabled/disabled | instance ID |
| `toggleOverlay <instanceId>` | Toggle show on overlay layer | instance ID |
| `setOverlay <instanceId> <bool>` | Set overlay visibility | instance ID, true/false |
| `toggleClickThrough <instanceId>` | Toggle click-through mode | instance ID |
| `setClickThrough <instanceId> <bool>` | Set click-through mode | instance ID, true/false |
| `toggleSyncPosition <instanceId>` | Toggle position sync across screens | instance ID |
| `setSyncPosition <instanceId> <bool>` | Set position sync across screens | instance ID, true/false |

**Examples:**
```bash
# List all desktop widgets
dms ipc call desktopWidget list

# Get widget status
dms ipc call desktopWidget status dw_1234567890_abc123

# Toggle overlay visibility (useful for keybinds)
dms ipc call desktopWidget toggleOverlay dw_1234567890_abc123

# Enable click-through mode
dms ipc call desktopWidget setClickThrough dw_1234567890_abc123 true

# Toggle position sync
dms ipc call desktopWidget toggleSyncPosition dw_1234567890_abc123
```

**Notes:**
- Use `list` to discover widget instance IDs
- Click-through mode allows mouse clicks to pass through the widget to windows below
- Position sync keeps the widget at the same relative position across multiple monitors

## Scripting and Automation

IPC commands are designed for integration with keybindings, scripts, and automation tools.

### Time-based Automation

```bash
#!/bin/bash
# Toggle night mode based on time of day
hour=$(date +%H)
if [ $hour -ge 20 ] || [ $hour -le 6 ]; then
    dms ipc call night enable
else
    dms ipc call night disable
fi
```

### Status Checking

```bash
# Check if screen is locked before performing action
if dms ipc call lock isLocked | grep -q "false"; then
    dms ipc call notifications open
fi
```

### Conditional Logic

```bash
# Increase brightness only if below threshold
current=$(dms ipc call brightness status | grep -oP '\d+')
if [ "$current" -lt 50 ]; then
    dms ipc call brightness set 50
fi
```

## Return Values

Most IPC functions return string messages indicating:
- Success confirmation with current values
- Error messages if operation fails
- Status information for query functions
- Empty/void return for simple action functions

Functions that return void (like media controls) execute the action but don't provide feedback. Check the application state through other means if needed.

## Next Steps

See compositor-specific keybinding configuration in your compositor's documentation to integrate these IPC commands with your workflow.



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/layers.mdx
================================================
---
title: Layer Namespaces
description: Layer namespaces DMS components
sidebar_position: 7
---

# Wayland Layer Shell & Layer Rules

Configuring blur for Wayland layer shells can be tricky since each compositor handles it differently.

## Overview

DMS uses Wayland's layer shell protocol for all UI components: the bar, popups, modals, OSDs, and notifications. Each component type gets its own namespace, allowing your compositor to target them individually for blur effects.

Layer shell surfaces differ from regular windows—they're UI overlays positioned at specific layers (background, bottom, top, overlay). By assigning unique namespaces to each component type, you can apply blur selectively (e.g., "blur all modals" or "blur all popouts") without affecting other elements.

## Component Namespaces

Every component namespace starts with `dms:` followed by the rest of the namespace, DMS uses the following namespaces for layer shell components:

### Modals
Full-screen modal dialogs including settings, power menu, and clipboard history. These overlay the entire screen and optionally dim the background.

| Component            | Namespace                       |
| -------------------- | ------------------------------- |
| Clipboard history    | `dms:clipboard`                 |
| File browser         | `dms:file-browser`              |
| Settings             | `dms:settings`                  |
| Launcher             | `dms:spotlight`                 |
| Bluetooth pairing    | `dms:bluetooth-pairing`         |
| Color picker         | `dms:color-picker`              |
| Hyprkeybinds         | `dms:hyprkeybinds`              |
| Network info         | `dms:network-info`              |
| Network info (wired) | `dms:network-info-wired`        |
| Notification         | `dms:notification-center-modal` |
| Polkit               | `dms:polkit`                    |
| Power menu           | `dms:power-menu`                |
| Process list         | `dms:process-list-modal`        |
| Wifi password        | `dms:wifi-password`             |
| Confirm modal        | `dms:confirm-modal`             |
| Fallback namespace   | `dms:modal`                     |

### Popouts
Popup panels triggered by bar widgets, such as the control center, app drawer, and notification center. These are anchored to the bar and slide out accordingly.

| Component           | Namespace                        |
| ------------------- | -------------------------------- |
| App drawer          | `dms:app-launcher`               |
| Control center      | `dms:control-center`             |
| Battery             | `dms:battery`                    |
| Vpn                 | `dms:vpn`                        |
| DankDash            | `dms:dash`                       |
| Notification center | `dms:notification-center-popout` |
| Process list        | `dms:process-list-popout`        |
| Fallback namespace  | `dms:popout`                     |

### Misc Components
Namespaces for other component that aren't modals or popouts.

| Component          | Namespace                | Use                                                                                                                                  |
| ------------------ | ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| DankBar            | `dms:bar`                | The main panel, which can be positioned at the top, bottom, left, or right edge of the screen.                                       |
| Dock               | `dms:dock`               | Application dock (optional component).                                                                                               |
| Workspace overview | `dms:workspace-overview` | The workspace overview for hyprland.                                                                                                 |
| Notification popup | `dms:notification-popup` | Toast notifications displayed when applications request user attention.                                                              |
| OSD                | `dms:osd`                | On-screen displays for volume and brightness indicators. These appear briefly to show status information and fade out automatically. |
| Slideout           | `dms:slideout`           | Sliding panels from screen edges (optional component).                                                                               |
| Tooltip            | `dms:tooltip`            | Tooltip shown for example when hovering an app on the dock.                                                                          |
| Dock context menu  | `dock-context-menu`      | Context menu when right clicking an app on the dock.                                                                                 |
| Toast              | `dms:toast`              | Toast appearing on top middle of the screen.                                                                                         |
| Tray menu window   | `dms:tray-menu-window`   | Menu appearing when right clicking an applet in the system tray.                                                                     |
 
> **Tip:** If you are unsure about a component's namespace, you can check it using your compositor's tools:
> - **Hyprland**: Run `hyprctl layers` with the layer opened
> - **Niri**: Run `niri msg layers` to list active layer surfaces

### Plugins
By default, plugins without namespaces will fallback to `dms-plugin:plugin`, if the plugin has a specific namespaces you will have to run the command above or look at the plugin's code to know it if you do by looking at the code note the it will be `dms-plugin:` + the namespace, for example `dms-plugin:emoji-launcher`).

If you're a plugin dev, see the [plugin development](./plugin-development.mdx#widget-with-popout) page to add your layer namespace.
## Compositor Examples

Each compositor has its own syntax for layer rules.

### Hyprland

:::info

In order for some layer rules (such as `animation`, `blur` and `dimaround`), you will have to disable the shell's animations and dim effect.

- You can disable animations in **Settings**>**Personalization**>**Animation Speed** and set to **None**.
- You can disable the dim in **Theme & Colors**>**Widget Styling** and untoggle **Darken Modal Background**.

:::

#### Blur Settings

```conf
decoration {
    blur {
        enabled = true
        size = 10
        passes = 4

        ignore_opacity = true
        new_optimizations = true
        xray = false

        noise = 0.02
        contrast = 1.1
        vibrancy = 0.2
        vibrancy_darkness = 0.3
    }

    drop_shadow = true
    shadow_range = 20
    shadow_render_power = 3
    col.shadow = rgba(00000099)
}
```

#### Layer Rules

Add these layer rules to enable blur for DMS components:

```conf
# Animations
layerrule = animation slide right, dms:control-center
layerrule = animation slide top, dms:workspace-overview
# You can find all available animations here: https://wiki.hypr.land/Configuring/Animations/#animation-tree

# Blur
# You can use regex like so to apply a rule to multiple layer
# You can also use variables
$blur_layer = dms:(color-picker|clipboard|spotlight|settings)
layerrule = blur, $blur_layer 

# Dim (if you prefer a dim instead of a blur effect)
layerrule = dimaround, $blur_layer
```
#### Examples

<details>
<summary>Examples</summary>
##### Add a blur effect on the shell's Components

Lower the shell's components' opacity in **Theme & Colors**>**Widget Styling**.
```conf
$blur_layer = dms:(polkit|notification-center-modal|workspace-overview|color-picker|clipboard|spotlight|settings|process-list-modal)
layerrule = blur, $blur_layer
$blur_shell = dms:(bar|tooltip|toast|dock-context-menu|tray-menu-window|control-center|notification-center-popout|dash|system-update|process-list-popout|battery|popout|app-launcher)
layerrule = blur, $blur_shell
layerrule = ignorezero, $blur_shell 
```
</details>
#### Performance Tuning

If blur is impacting system performance, try these optimizations in order:

1. **Reduce passes**: Set `passes = 2` instead of 4
2. **Reduce size**: Set `size = 6` instead of 10
4. **Use xray mode**: Set `xray = true` to reduce blur on stacked layers

You can test blur impact in real-time:
```bash
hyprctl keyword decoration:blur:enabled false
# Test performance
hyprctl keyword decoration:blur:enabled true
```

You can find more about Hyprland's layer rules [here](https://wiki.hypr.land/Configuring/Window-Rules/#layer-rules).

### Niri

Niri uses a different configuration format with `layer-rule` blocks. Each rule can match namespaces using regex patterns.

#### Layer Rules

```kdl
// Block out sensitive components from screencasts
layer-rule {
    match namespace="^dms:clipboard$"

    block-out-from "screencast"
}

// Match all DMS layers with a regex
layer-rule {
    match namespace=r#"^dms:.*"#

    // Apply rules to all DMS components
}
```

#### Shadow Settings

```kdl
layer-rule {
    match namespace="^dms:bar$"
    match namespace="^dms:dock$"

    shadow {
        on
        // off
        softness 40
        spread 5
        offset x=0 y=5
        draw-behind-window true
        color "#00000064"
        // inactive-color "#00000064"
    }
}
```

You can find more about Niri's layer rules [here](https://github.com/niri-wm/niri/wiki/Configuration:-Layer-Rules).

## Other Compositors

Not all compositors support blur or layer rules. Check your compositor's documentation for available options.

DMS is compositor-agnostic—it only sets namespaces and lets the compositor handle the effects. Once you determine the appropriate layer rule syntax for your compositor, you can target the same namespaces listed above.

- [MangoWC's layer rules wiki page](https://github.com/DreamMaoMao/mangowc/wiki#layer-rules)


================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/managing.mdx
================================================
---
title: Managing Your Installation
description: Update, configure, and manage DankMaterialShell
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

This guide covers how to manage, update, and configure DankMaterialShell after installation.

## Service Management

DMS can run as a systemd user service or be launched manually. The `dms` CLI handles both transparently - commands like `dms restart` work regardless of how DMS was started.

:::tip DankInstall Users

If you installed via [dankinstall](../dankinstall), DMS is configured as a systemd service by default. The installer runs `systemctl --user enable --now dms` during setup. You don't need to add `dms run` to your compositor config.

:::

### Systemd (Recommended)

Systemd provides automatic startup, proper session integration, and logging via journalctl.

**Enable and start:**

```bash
systemctl --user enable --now dms
```

**Common operations:**

```bash
# Check status
systemctl --user status dms

# View logs
journalctl --user -u dms -f

# Restart (or just use: dms restart)
systemctl --user restart dms

# Stop
systemctl --user stop dms

# Disable autostart
systemctl --user disable dms
```

:::warning

If using systemd, remove any `dms run` / `spawn "dms" "run"` lines from your compositor config to avoid running DMS twice.

:::

#### niri: Per-Session Control

niri has proper systemd session integration. You can make DMS only start under niri (not Plasma, GNOME, etc.):

```bash
systemctl --user add-wants niri.service dms
```

This ties the dms service to niri's session, so it won't start under other desktop environments.

#### Other Compositors

Hyprland, Sway, and MangoWC don't have systemd session targets. If you use multiple desktop environments and only want DMS on one of them, disable the systemd unit and start DMS from your compositor config instead:

```bash
systemctl --user disable dms
```

Then add `dms run` to your compositor's autostart (see [Manual Launch](#manual-launch) below).

### Manual Launch

For testing, debugging, or if you prefer compositor-managed startup:

**Compositor autostart:**

```bash
# Hyprland (~/.config/hypr/hyprland.conf)
exec-once = dms run

# Sway (~/.config/sway/config)
exec dms run

# niri (~/.config/niri/config.kdl)
spawn-at-startup "dms" "run"
```

**Manual control:**

```bash
# Launch (foreground)
dms run

# Launch (background/daemon)
dms run -d

# Restart
dms restart

# Kill
dms kill
```

### Switching Between Methods

**From manual to systemd:**

1. Remove `dms run` from your compositor config
2. Enable the service: `systemctl --user enable --now dms`
3. Restart your compositor or log out/in

**From systemd to manual:**

1. Disable the service: `systemctl --user disable --now dms`
2. Add `dms run` to your compositor's autostart
3. Restart your compositor or log out/in

## Environment Variables

DMS and its themed applications need certain environment variables set. Where these live depends on your setup.

:::tip DankInstall Users

dankinstall creates `~/.config/environment.d/90-dms.conf` with the necessary variables. This file is loaded by systemd for all user sessions. If you need to change Qt theming (e.g., switching to qt6ct), edit this file.

:::

### Checking Your Environment

```bash
# See what's currently set
env | grep -E "QT_|GTK|XDG"

# Check dankinstall's environment file (if it exists)
cat ~/.config/environment.d/90-dms.conf
```

### Manual Configuration

If you didn't use dankinstall, set environment variables in your compositor config:

**niri** (`~/.config/niri/config.kdl`):
```kdl
environment {
  QT_QPA_PLATFORM "wayland"
  QT_QPA_PLATFORMTHEME "gtk3"
  ELECTRON_OZONE_PLATFORM_HINT "auto"
}
```

**Hyprland** (`~/.config/hypr/hyprland.conf`):
```conf
env = QT_QPA_PLATFORM,wayland
env = QT_QPA_PLATFORMTHEME,gtk3
env = ELECTRON_OZONE_PLATFORM_HINT,auto
```

Or create `~/.config/environment.d/90-dms.conf`:
```ini
QT_QPA_PLATFORM=wayland
QT_QPA_PLATFORMTHEME=gtk3
ELECTRON_OZONE_PLATFORM_HINT=auto
```

Changes to `environment.d` require logging out and back in (or rebooting) to take effect.

## Updating

### Package Installations

**Arch & Derivatives:**

```bash
paru -Syu dms-shell-bin
# or
paru -Syu dms-shell-git
```

**Fedora & Derivatives:**

```bash
sudo dnf upgrade dms
```

**Debian & Ubuntu:**

```bash
sudo apt update && sudo apt upgrade dms
# or dms-git
```

**OpenSUSE:**

```bash
sudo zypper refresh && sudo zypper update dms
```

**NixOS:**

```bash
# Update flake inputs, then:
sudo nixos-rebuild switch
```

After package updates, restart the shell:

```bash
dms restart
```

### Manual Installations

For source builds or dankinstall setups:

```bash
dms update
```

For manually compiled dependencies (quickshell, niri, etc.), use the interactive TUI:

```bash
dms
# Navigate to Update → select packages to rebuild
```

## After Updating

1. Restart DMS: `dms restart`
2. Check [release notes](https://github.com/AvengeMedia/DankMaterialShell/releases) for breaking changes
3. Review Settings if new options are available
4. Update plugins if needed

## Uninstalling

### Package Installations

**Arch & Derivatives:**

```bash
# Whichever you have installed
sudo pacman -Rns dms-shell-bin
# or
sudo pacman -Rns dms-shell-git
```

**Fedora, Debian, Ubuntu, OpenSUSE:**

```bash
# Stable
sudo dnf remove dms      # Fedora
sudo apt remove dms      # Debian/Ubuntu
sudo zypper remove dms   # OpenSUSE

# Or git version
sudo dnf remove dms-git
sudo apt remove dms-git
sudo zypper remove dms-git
```

### Manual/Source Installs

```bash
# Stop and disable the service
systemctl --user disable --now dms

# Remove the binary and shell config
rm -rf ~/.config/quickshell/dms
sudo rm /usr/local/bin/dms
```

## Troubleshooting

**DMS won't start:**
- Check logs: `journalctl --user -u dms -n 50` (systemd) or run `dms run` in a terminal
- Verify quickshell is installed: `which qs`
- Kill stuck processes: `dms kill`

**Settings not applying:**
- Backup and remove `~/.config/DankMaterialShell/settings.json`
- Restart DMS to regenerate defaults

**Environment variables not working:**
- For `environment.d` changes: log out and back in
- For compositor config changes: restart the compositor
- Verify with `echo $QT_QPA_PLATFORMTHEME`

**Multiple instances running:**
```bash
dms kill
dms restart
```



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/nixos-flake.mdx
================================================
---
title: NixOS Installation (Flake)
description: Install and configure DankMaterialShell on NixOS using flakes
sidebar_position: 4
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell can be installed on NixOS either system-wide using the NixOS module or per-user using home-manager. This guide covers both flake-based installation methods.

:::info Native nixpkgs Available
DankMaterialShell is now available in nixpkgs unstable! If you're on NixOS unstable (26.05), see [Installation - NixOS](nixos) for the native nixpkgs installation method which doesn't require flakes.
:::

## Installation Methods

Choose one of the following installation methods based on your needs:

- **NixOS Module**: System-wide installation, ideal for multi-user systems or when you want DMS available to all users
- **Home-Manager Module**: Per-user installation, ideal for single-user setups or when you want user-specific configurations

## Installation

### 1. Add Flake Inputs

First, add the required flake inputs to your `flake.nix`:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";

    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

:::tip Using Unstable Version
If you want to use the unstable (-git) version from the master branch, you can use:
```nix
dms.url = "github:AvengeMedia/DankMaterialShell";
```
However, be aware that the documentation here may not be updated for the latest changes. You're advised to check the Nix modules source code in the repository directly, and keep in mind that it may not work properly.
:::

### 2. Import the NixOS or home-manager Module

Add the relevant DankMaterialShell module to your configuration imports:

If you're using the NixOS module:

```nix
imports = [
  inputs.dms.nixosModules.dank-material-shell
];
```

Alternatively, if you're using the home-manager module:
```nix
imports = [
  inputs.dms.homeModules.dank-material-shell
];
```

### 3. Enable DankMaterialShell

In your configuration, enable DankMaterialShell:

```nix
programs.dank-material-shell.enable = true;
```

That's it! Rebuild your system (or standalone home-manager configuration) and DankMaterialShell will be installed  with sensible defaults.

:::warning dgop on NixOS Stable
`dgop` is not available in nixpkgs stable (25.11). If you're using NixOS stable, you'll need to either:
- Import dgop from the dgop flake and manually set the package, or
- Use nixpkgs unstable for dgop

To import dgop from the flake, first add it to your flake inputs:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-25.11";xd
    
    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
    
    dgop = {
      url = "github:AvengeMedia/dgop";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then configure DankMaterialShell to use the dgop package from the flake:

```nix
programs.dank-material-shell = {
  enable = true;
  enableSystemMonitoring = true;
  dgop.package = inputs.dgop.packages.${pkgs.system}.default;
};
```
:::

## niri Integration

If you're using the niri compositor, the home-manager module provides additional integration options including automatic keybindings and startup configuration.

:::warning
Note that `niri-stable` package from niri-flake is on version `25.08`, while the needed version for DankMaterialShell is the latest `25.11` (available in nixpkgs).
:::

### Prerequisites

If you choose to use [niri-flake](https://github.com/sodiboo/niri-flake), ensure you have it in your inputs:

```nix
niri = {
  url = "github:sodiboo/niri-flake";
  inputs.nixpkgs.follows = "nixpkgs";
};
```

Import it in your home-manager configuration:

```nix
imports = [
  inputs.niri.homeModules.niri
];
```

:::tip
If you're using the niri-flake's NixOS module (`inputs.niri.nixosModules.niri`), you don't need to import the home-manager module separately as it's already included.
:::

### Enable niri Module

You can import and use the niri-specific DankMaterialShell module:

```nix
imports = [
  inputs.dms.homeModules.dank-material-shell
  inputs.dms.homeModules.niri
];
```

Enable niri integration features:

```nix
programs.dank-material-shell = {
  enable = true;
  niri = {
    enableKeybinds = true;   # Sets static preset keybinds
    enableSpawn = true;      # Auto-start DMS with niri, if enabled
  };
};
```

This will automatically configure preset keybindings for launcher, notifications, settings, and all other DankMaterialShell features.

:::note
You should not use both `systemd.enable` and `niri.enableSpawn` at the same time, as this will make two instances of DankMaterialShell to be spawned at the same time.
:::


### Config includes

DankMaterialShell's niri home-manager module has a "hack" for config includes support under the `programs.dank-material-shell.niri.includes` option set.

:::note
It is not recommended to use both `niri.includes` (which is enabled by default) and `niri.enableKeybinds`, as the latter one is less flexible and may introduce conflicts.

Also note that this will overwrite your `~/.config/niri/config.kdl`, so your niri-flake generated files will be in `~/.config/niri/hm.kdl` instead (or whatever else you define in `originalFileName`).
:::

In most cases, it should work out of the box, but configuration options are available.

#### Defaults

```nix
programs.dank-material-shell = {
  enable = true;

  niri.includes = {
    enable = true;             # Enable config includes hack. Enabled by default.

    override = true;           # If disabled, DMS settings won't be prioritized over settings defined using niri-flake
    originalFileName = "hm";   # A new name (without extension) for the config file generated by niri-flake.
    filesToInclude = [         # Files under `$XDG_CONFIG_HOME/niri/dms` to be included into the new config
      "alttab"                 # Please note that niri will throw an error if any of these files are missing.
      "binds"
      "colors"
      "layout"
      "outputs"
      "wpblur"
    ];
  };
}
```

### Polkit Agent

If you want to use DankMaterialShell's built-in polkit agent and use the niri-flake's NixOS module, you'll need to disable niri-flake's default polkit agent to avoid conflicts:

```nix
systemd.user.services.niri-flake-polkit.enable = false;
```

## Configuration Options

:::info
The configuration options below work for **both** the NixOS module and the home-manager module. However, note that:
- **NixOS module**: Installs packages system-wide and places quickshell configs in `/etc/xdg/quickshell/dms`
- **Home-manager module**: Additionally supports plugins, default settings, and default session configuration
:::

DankMaterialShell provides numerous configuration options to customize your installation. Here are the main options:

### Feature Toggles

```nix
programs.dank-material-shell = {
  enable = true;

  systemd = {
    enable = true;             # Systemd service for auto-start
    restartIfChanged = true;   # Auto-restart dms.service when dank-material-shell changes
  };

  # Core features
  enableSystemMonitoring = true;     # System monitoring widgets (dgop)
  enableVPN = true;                  # VPN management widget
  enableDynamicTheming = true;       # Wallpaper-based theming (matugen)
  enableAudioWavelength = true;      # Audio visualizer (cava)
  enableCalendarEvents = true;       # Calendar integration (khal)
  enableClipboardPaste = true;       # Pasting items from the clipboard (wtype)
};
```

### Custom Quickshell Package

:::info Quickshell from Source

The DankMaterialShell flake already uses Quickshell built from source by default, as many features rely on unreleased Quickshell features. No additional configuration is needed.

:::

If you need to override the Quickshell package:

```nix
programs.dank-material-shell = {
  enable = true;
  quickshell.package = pkgs.quickshell; # or your custom package
};
```

### Settings (home-manager only)

You can configure settings using the home-manager module:

```nix
programs.dank-material-shell = {
  enable = true;

  settings = {
    theme = "dark";
    dynamicTheming = true;
    # Add any other settings here
  };

  session = {
    isLightMode = false;
    # Add any other session state settings here
  };

  clipboardSettings = {
    maxHistory = 25;
    maxEntrySize = 5242880;
    autoClearDays = 1;
    clearAtStartup = true;
    disabled = false;
    disableHistory = false;
    disablePersist = true;
  };
};
```

If you change settings in the GUI while managing settings with home-manager, you will get a popup saying that settings are read-only, with an option to copy the new settings. You can then use json2nix on the copied settings to update your home-manager configuration. 

A complete up-to-date list of available settings can be found [here](https://raw.githubusercontent.com/AvengeMedia/DankMaterialShell/refs/heads/master/quickshell/Common/settings/SettingsSpec.js) and similarly for session settings an up-to-date list can be found [here](https://github.com/AvengeMedia/DankMaterialShell/raw/refs/heads/master/quickshell/Common/settings/SessionSpec.js).


### Plugins

Install DankMaterialShell plugins declaratively. There are two methods:

#### Method 1: Using the Plugin Registry (Recommended)

The [dms-plugin-registry](https://github.com/AvengeMedia/dms-plugin-registry) flake provides all community plugins as packages with daily updates. This is the simplest way to install plugins using Nix.

First, add the plugin registry as a flake input:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
    
    dms-plugin-registry = {
      url = "github:AvengeMedia/dms-plugin-registry";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then import the module and enable plugins:

```nix
{
  imports = [
    inputs.dms.homeModules.dank-material-shell
    inputs.dms-plugin-registry.modules.default
  ];

  programs.dank-material-shell = {
    enable = true;

    plugins = {
      # Simply enable plugins by their ID (from the registry)
      dankBatteryAlerts.enable = true;
      dockerManager.enable = true;
      
      # Add plugin-specific settings
      mediaPlayer = {
        enable = true;

        # You can only define settings here if using the home-manager module
        settings = {
          preferredSource = "spotify";
        };
      };
    };
  };
}
```

The plugin IDs can be found in the [plugin store](https://danklinux.com/plugins) - it's the last part of the install URL. For example, `dms://plugin/install/dankBatteryAlerts` has the ID `dankBatteryAlerts`.

#### Method 2: Manual Installation from Source

If you don't want to use the registry flake, you can install plugins manually by providing the source:

```nix
programs.dank-material-shell = {
  enable = true;

  plugins = {
    DockerManager = {
      src = pkgs.fetchFromGitHub {
        owner = "LuckShiba";
        repo = "DmsDockerManager";
        rev = "v1.2.0";
        sha256 = "sha256-VoJCaygWnKpv0s0pqTOmzZnPM922qPDMHk4EPcgVnaU=";
      };
      settings = {
        someOption = "value";
      };
    };
    AnotherPlugin = {
      enable = true;
      src = pkgs.another-plugin;
    };
  };
};
```

#### Plugin Settings Management (home-manager only)

You can choose whether or not to manage plugin settings with home-manager through the `managePluginSettings` option. 

```nix
programs.dank-material-shell = {
  enable = true;
  
  # Auto-enabled when plugins have settings configured
  managePluginSettings = true;
  
  plugins = {
    somePlugin = {
      enable = true;
      settings = {
        # Your plugin settings here
      };
    };
  };
};
```

- If there are no plugins with settings defined but `managePluginSettings = true`, a minimal `plugin_settings.json` is created that enables the plugins.
- If there are plugin settings defined, `managePluginSettings` defaults to `true` and those settings are placed in `plugin_settings.json`.
- If there are plugin settings defined and `managePluginSettings` is set to `false`, there will be a warning, but `plugin_settings.json` won't be created.



## Advanced Configuration

For a complete list of available options, check the module files in the DankMaterialShell repository:
- **NixOS module**: `distro/nix/nixos.nix`
- **Home-manager module**: `distro/nix/home.nix`
- **niri module**: `distro/nix/niri.nix`
- **Common options**: `distro/nix/options.nix`

## Rebuilding

After making configuration changes, rebuild your system:

```bash
# For home-manager standalone
home-manager switch

# For NixOS with home-manager as a module
sudo nixos-rebuild switch
```

## Troubleshooting

### DMS doesn't start automatically

Make sure you have either:
- `systemd.enable = true` for systemd-based startup, or
- `niri.enableSpawn = true` for niri-managed startup

### Missing dependencies

Each feature has its own dependency set. If a feature isn't working, ensure the corresponding `enable` option is set to `true`. For example, system monitoring requires `enableSystemMonitoring = true` which installs `dgop`.

### Custom keybindings conflict with niri defaults

If `niri.enableKeybinds = true` conflicts with your existing niri configuration, you can disable it and manually configure keybindings using the examples in the [Keybinds & IPC](keybinds-ipc) guide.

## Next Steps

- Configure your preferences via [Themes](application-themes)
- Set up compositor keybindings in [Keybinds & IPC](keybinds-ipc)
- Extend functionality with [Plugins](plugins-overview)



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/nixos.mdx
================================================
---
title: NixOS Installation
description: Install and configure DankMaterialShell on NixOS using native nixpkgs
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell can be installed on NixOS using the NixOS module. This guide covers the native nixpkgs installation method.

:::note
DMS version available in `nixos-unstable` currently is DMS 1.0.3. This page will be updated as soon as [1.2](/blog/v1-2-release) gets updated in `nixpkgs`.
:::

:::info NixOS Unstable Required
DankMaterialShell is currently only available in the **unstable** branch of nixpkgs. If you're on NixOS stable (currently 25.11), you'll need to use the [Flake Installation](nixos-flake) method instead.
:::

## Installation

### 1. Enable NixOS Unstable

Ensure you're using NixOS unstable by setting your channel or flake input:

**Using channels:**
```bash
sudo nix-channel --add https://nixos.org/channels/nixos-unstable nixos
sudo nix-channel --update
```

**Using flakes (in `flake.nix`):**
```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
  };
}
```

### 2. Enable DankMaterialShell

In your NixOS configuration, enable DankMaterialShell:

```nix
programs.dms-shell.enable = true;
```

That's it! Rebuild your system and DankMaterialShell will be installed with sensible defaults.

## Configuration Options

DankMaterialShell provides numerous configuration options to customize your installation. Here are the main options:

### Feature Toggles

```nix
programs.dms-shell = {
  enable = true;

  systemd = {
    enable = true;             # Systemd service for auto-start
    restartIfChanged = true;   # Auto-restart dms.service when dms-shell changes
  };
  
  # Core features
  enableSystemMonitoring = true;     # System monitoring widgets (dgop)
  enableClipboard = true;            # Clipboard history manager
  enableVPN = true;                  # VPN management widget
  enableDynamicTheming = true;       # Wallpaper-based theming (matugen)
  enableAudioWavelength = true;      # Audio visualizer (cava)
  enableCalendarEvents = true;       # Calendar integration (khal)
};
```

### Custom Quickshell Package

If you need a specific version of Quickshell:

```nix
programs.dms-shell = {
  enable = true;
  quickshell.package = pkgs.quickshell; # or your custom package
};
```

#### Using Quickshell from Source

:::tip Recommended for Latest Features

Many features in DankMaterialShell rely on unreleased Quickshell features. For the best experience, you may want to use Quickshell built from source.

:::

To use Quickshell from source, add it as a flake input:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    quickshell = {
      url = "git+https://git.outfoxxed.me/quickshell/quickshell";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then use it in your configuration:

```nix
programs.dms-shell = {
  enable = true;
  quickshell.package = inputs.quickshell.packages.${pkgs.stdenv.hostPlatform.system}.quickshell;
};
```

### Using Flake Package with NixOS Module

You can use the package from the DankMaterialShell flake while still using the native NixOS module. This allows you to get quicker updates while keeping the module configuration:

First, add the flake input to your `flake.nix`:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    dms = {
      url = "github:AvengeMedia/DankMaterialShell/stable";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

:::tip Using Unstable Version
If you want to use the unstable (-git) version from the master branch for quicker updates, remove `/stable` from the URL:
```nix
dms.url = "github:AvengeMedia/DankMaterialShell";
```
However, be aware that the unstable version may not work properly and could contain breaking changes. The documentation may not reflect the latest changes in the unstable version.
:::

Then use the flake package with the native module:

```nix
programs.dms-shell = {
  enable = true;
  package = inputs.dms.packages.${pkgs.stdenv.hostPlatform.system}.default;
};
```

:::warning

When using the flake package with the native nixpkgs module, some dependencies may not be automatically enabled by default, and certain configurations might be missing. You may need to manually install optional dependencies or adjust feature toggles to match your needs.

:::

### Plugins

Install DankMaterialShell plugins declaratively. There are two methods:

#### Method 1: Using the Plugin Registry (Recommended)

The [dms-plugin-registry](https://github.com/AvengeMedia/dms-plugin-registry) flake provides all community plugins as packages with daily updates. This is the simplest way to install plugins.

First, add the plugin registry as a flake input:

```nix
{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    
    dms-plugin-registry = {
      url = "github:AvengeMedia/dms-plugin-registry";
      inputs.nixpkgs.follows = "nixpkgs";
    };
  };
}
```

Then import the module and enable plugins:

```nix
{
  imports = [ inputs.dms-plugin-registry.modules.default ];

  programs.dms-shell = {
    enable = true;

    plugins = {
      # Simply enable plugins by their ID (from the registry)
      dankBatteryAlerts.enable = true;
      dockerManager.enable = true;
    };
  };
}
```

The plugin IDs can be found in the [plugin store](https://danklinux.com/plugins) - it's the last part of the install URL. For example, `dms://plugin/install/dankBatteryAlerts` has the ID `dankBatteryAlerts`.

#### Method 2: Manual Installation from Source

If you don't want to use the registry flake, you can install plugins manually by providing the source:

```nix
programs.dms-shell = {
  enable = true;

  plugins = {
    dockerManager = {
      src = pkgs.fetchFromGitHub {
        owner = "LuckShiba";
        repo = "DmsDockerManager";
        rev = "v1.2.0";
        sha256 = "sha256-VoJCaygWnKpv0s0pqTOmzZnPM922qPDMHk4EPcgVnaU=";
      };
    };
    anotherPlugin = {
      enable = true;
      src = pkgs.another-plugin;
    };
  };
};
```

## Advanced Configuration

For a complete list of available options, check [the module file](https://github.com/NixOS/nixpkgs/blob/nixos-unstable/nixos/modules/programs/wayland/dms-shell.nix) in nixpkgs.

## Rebuilding

After making configuration changes, rebuild your system:

```bash
sudo nixos-rebuild switch
```

## Troubleshooting

### DMS doesn't start automatically

Make sure you have `systemd.enable = true` set:

```nix
programs.dms-shell = {
  enable = true;
  systemd.enable = true;
};
```

### Missing dependencies

Each feature has its own dependency set. If a feature isn't working, ensure the corresponding `enable` option is set to `true`. For example, clipboard history requires `enableClipboard = true` which installs `cliphist` and `wl-clipboard`.

## Next Steps

- Configure your preferences via [Themes](application-themes)
- Set up compositor keybindings in [Keybinds & IPC](keybinds-ipc)
- Extend functionality with [Plugins](plugins-overview)



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/overview.mdx
================================================
---
title: Overview & Architecture
description: Modern Wayland desktop shell
sidebar_position: 1
image: img/dankdash.png
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███╗   ███╗███████╗
██╔══██╗████╗ ████║██╔════╝
██║  ██║██╔████╔██║███████╗
██║  ██║██║╚██╔╝██║╚════██║
██████╔╝██║ ╚═╝ ██║███████║
╚═════╝ ╚═╝     ╚═╝╚══════╝`}
  hideTitle={true}
/>

DankMaterialShell (dms) is a Wayland desktop shell built with [Quickshell](https://quickshell.org/) and [Go](https://go.dev/). It serves a purpose similar to GNOME Shell or KDE Plasma, providing a unified interface for launching applications, managing windows, managing hardware interfaces, notifications, and much more.

## General Features

- Launcher (Apps, file search, web search, emoji search, calculations, and extendable with plugins)
- System Tray
- Notifications with grouping support
- Network Management (via NetworkManager, iwd, systemd-networkd, or some hybrid setups)
- VPN Management (via NetworkManager)
- Bluetooth Management (via BlueZ)
- Audio Management (via PipeWire)
- Idle & Power Management
- Brightness controls (Backlight, LEDs, and i2c/ddc)
- Lock Screen
- Process & System Monitoring
- Theming (Light, Dark, Automatic Colors, Premade themes, and Custom Accent Colors)
- Multi-monitor support
- Gamma control (night mode)
- Wallpaper management with transitions, multi-monitor support, and automatic transitioning.
- Clipboard history manager
- System sounds (such as notifications, volume changes, etc.)
- Mpris media controls with audio visualization
- Browser picker modal for URL handling with default browser selection
- Dozens of widgets and plugins available to allow virtually any feature you can imagine.

*There's really too much to list, but those are some of the highlights!*

## Architecture

DankMaterialShell uses a client-server architecture where a Go backend (`dms`) manages system integrations and spawns the Quickshell-based UI as a child process. Communication happens over Unix socket using REQ/REP and PUB/SUB patterns.

<div style={{overflowX: 'auto', maxWidth: '100%'}}>

```mermaid
flowchart TB
    DMS[dms]

    subgraph UI[" "]
        QS[Quickshell Qt6]
        QML[QML App]
        SOCK[Unix Socket<br/>REQ/REP & PUB/SUB]
    end

    subgraph SystemInterfaces["System Interfaces"]
        WL[Wayland]
        DBUS_DMS[D-Bus]
        I2C[i2c/DDC]
        SYSFS[sysfs]
        IPP[IPP]
        EVDEV[evdev]
    end

    subgraph QuickshellInterfaces[" "]
        DBUS_QS[D-Bus]
        WL_QS[Wayland]
    end

    subgraph DBusServices["D-Bus Services"]
        NM[NetworkManager]
        IWD[iwd]
        NETD[systemd-networkd]
        BLZ[BlueZ]
        ACC[accountsservice]
        LOGIN[login1]
    end

    CUPS[CUPS]

    DMS -->|spawns| QS
    QS --> QML
    QML <--> SOCK
    SOCK <--> DMS

    DMS --> WL
    DMS --> DBUS_DMS
    DMS --> I2C
    DMS --> SYSFS
    DMS --> IPP
    DMS --> EVDEV

    QS --> DBUS_QS
    QS --> WL_QS

    DBUS_DMS --> NM
    DBUS_DMS --> IWD
    DBUS_DMS --> NETD
    DBUS_DMS --> BLZ
    DBUS_DMS --> ACC
    DBUS_DMS --> LOGIN

    IPP --> CUPS
```

</div>

**Key Points:**

- **dms** spawns **Quickshell** as a child process
- **dms** and **Quickshell** both integrate with Wayland and D-Bus APIs independently
- **dms** fills gaps that Quickshell doesn't handle natively
- Communication between QML app and dms backend happens via Unix socket

### Component Overview

| Component | Role |
| --- | --- |
| **DankMaterialShell - Quickshell** | Frontend powering widgets, modals, and user experience. |
| **DankMaterialShell - Backend (cli)** | Bridges DBus, Wayland, and plugin APIs - also a management CLI |
| **dgop** | Optional system telemetry service used by resource widgets. |
| **dsearch** | Optional filesystem search engine used by the Spotlight launcher. |

## Desktop Integration

DankMaterialShell includes a browser picker modal that appears when URLs are activated within the shell.

### Opening URLs

You can open URLs directly from the terminal using the `dms open` command:

```bash
dms open https://danklinux.com
```

When a URL is opened, DankMaterialShell displays a modal dialog with a list of installed web browsers, allowing you to select your preferred browser or set a default for future URL openings.

### Setting Default Web Browser

To set DankMaterialShell as your default web browser handler:

```bash
xdg-settings set default-web-browser dms-open.desktop
```

### File Associations

You can configure file type associations using `xdg-mime` commands. For example, to set DankMaterialShell as the default handler for specific MIME types:

```bash
# Set as default for HTTP/HTTPS URLs
xdg-mime default dms-open.desktop x-scheme-handler/http
xdg-mime default dms-open.desktop x-scheme-handler/https
```

### Desktop Entry

The desktop entry file (`dms-open.desktop`) follows the [freedesktop.org Desktop Entry Specification](https://specifications.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html) and allows DankMaterialShell to be launched from application menus and integrated with desktop environments.

## Next Steps

Continue with [Installation](installation) to get DankMaterialShell running on your system.

DankMaterialShell is open source and welcomes contributions ranging from core code changes to new widgets and plugins to documentation improvements.



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/plugin-development.mdx
================================================
---
title: Development
description: Build plugins for DankMaterialShell
sidebar_position: 7
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗ ███████╗██╗   ██╗
██╔══██╗██╔════╝██║   ██║
██║  ██║█████╗  ██║   ██║
██║  ██║██╔══╝  ╚██╗ ██╔╝
██████╔╝███████╗ ╚████╔╝
╚═════╝ ╚══════╝  ╚═══╝  `}
  hideTitle={true}
/>

Build and ship plugins for DankMaterialShell. This guide covers the actual patterns and components you'll use, with real working examples from the plugin library.

## Development Environment

For IDE support (autocomplete, type checking, etc.), clone the DMS repo and develop plugins there:

```bash
mkdir -p ~/repos && cd ~/repos
git clone https://github.com/AvengeMedia/DankMaterialShell.git
cd DankMaterialShell/quickshell

# Generate QML language server config
touch .qmlls.ini
qs -p .  # Press Ctrl+C after it starts

# Create your plugins here
mkdir -p dms-plugins/MyPlugin
```

### VSCode Setup

1. Install the [QML Extension](https://marketplace.visualstudio.com/items?itemName=TheQtCompany.qt-qml)
2. Configure qmlls path via `Ctrl+Shift+P` → "Preferences: Open User Settings (JSON)":

```json
{
  "qt-qml.doNotAskForQmllsDownload": true,
  "qt-qml.qmlls.customExePath": "/usr/lib/qt6/bin/qmlls"
}
```

3. Open VSCode in the `~/repos/DankMaterialShell/quickshell` directory

### Live Development

Symlink your plugin to the DMS plugins directory for live testing:

```bash
ln -sf ~/repos/DankMaterialShell/quickshell/dms-plugins/MyPlugin \
       ~/.config/DankMaterialShell/plugins/MyPlugin
```

Reload your plugin at runtime without restarting DMS:

```bash
dms ipc call plugins reload myPlugin
```

List all plugins and their status:

```bash
dms ipc call plugins list
```

:::tip
Use [Run on Save](https://marketplace.visualstudio.com/items?itemName=emeraldwalk.RunOnSave) to auto-reload your plugin during development. The reload command uses the plugin `id` from your `plugin.json`.
:::

## Quick Start

### 1. Create Plugin Directory

```bash
mkdir -p ~/.config/DankMaterialShell/plugins/MyPlugin
cd ~/.config/DankMaterialShell/plugins/MyPlugin
```

### 2. Create Manifest

Save this as `plugin.json`:

```json
{
  "id": "myPlugin",
  "name": "My Plugin",
  "description": "What this plugin does",
  "version": "1.0.0",
  "author": "Your Name",
  "icon": "widgets",
  "type": "widget",
  "component": "./MyWidget.qml",
  "settings": "./MySettings.qml",
  "permissions": ["settings_read", "settings_write"]
}
```

### 3. Create Widget Component

Save this as `MyWidget.qml`:

```qml
import QtQuick
import qs.Common
import qs.Services
import qs.Widgets
import qs.Modules.Plugins

PluginComponent {
    id: root

    property string displayText: pluginData.displayText || "Hello"

    horizontalBarPill: Component {
        Row {
            spacing: Theme.spacingS

            DankIcon {
                name: "widgets"
                size: Theme.iconSize
                color: Theme.primary
                anchors.verticalCenter: parent.verticalCenter
            }

            StyledText {
                text: root.displayText
                font.pixelSize: Theme.fontSizeMedium
                color: Theme.surfaceText
                anchors.verticalCenter: parent.verticalCenter
            }
        }
    }

    verticalBarPill: Component {
        Column {
            spacing: Theme.spacingXS

            DankIcon {
                name: "widgets"
                size: Theme.iconSize
                color: Theme.primary
                anchors.horizontalCenter: parent.horizontalCenter
            }

            StyledText {
                text: root.displayText
                font.pixelSize: Theme.fontSizeSmall
                color: Theme.surfaceText
                anchors.horizontalCenter: parent.horizontalCenter
            }
        }
    }
}
```

### 4. Create Settings Component

Save this as `MySettings.qml`:

```qml
import QtQuick
import qs.Common
import qs.Modules.Plugins
import qs.Widgets

PluginSettings {
    id: root
    pluginId: "myPlugin"

    StyledText {
        width: parent.width
        text: "My Plugin Settings"
        font.pixelSize: Theme.fontSizeLarge
        font.weight: Font.Bold
        color: Theme.surfaceText
    }

    StyledText {
        width: parent.width
        text: "Configure your plugin here"
        font.pixelSize: Theme.fontSizeSmall
        color: Theme.surfaceVariantText
        wrapMode: Text.WordWrap
    }

    StringSetting {
        settingKey: "displayText"
        label: "Display Text"
        description: "Text shown in the bar"
        placeholder: "Enter text"
        defaultValue: "Hello"
    }
}
```

### 5. Load It

1. Open DMS Settings → Plugins
2. Click "Scan for Plugins"
3. Toggle your plugin on
4. Add to DankBar widget list
5. Restart shell: `dms restart`

You now have a working plugin.

## Widget Plugins

Widget plugins show up in DankBar or the Control Center. They use `PluginComponent` as the base.

### DankBar Widget

Here's a real color display widget:

```qml
import QtQuick
import qs.Common
import qs.Services
import qs.Widgets
import qs.Modules.Plugins

PluginComponent {
    id: root

    property color customColor: pluginData.customColor || Theme.primary

    horizontalBarPill: Component {
        Row {
            spacing: Theme.spacingS

            Rectangle {
                width: 20
                height: 20
                radius: 4
                color: root.customColor
                border.color: Theme.outlineStrong
                border.width: 1
                anchors.verticalCenter: parent.verticalCenter
            }

            StyledText {
                text: root.customColor.toString()
                font.pixelSize: Theme.fontSizeSmall
                color: Theme.surfaceText
                anchors.verticalCenter: parent.verticalCenter
            }
        }
    }

    verticalBarPill: Component {
        Column {
            spacing: Theme.spacingXS

            Rectangle {
                width: 20
                height: 20
                radius: 4
                color: root.customColor
                border.color: Theme.outlineStrong
                border.width: 1
                anchors.horizontalCenter: parent.horizontalCenter
            }

            StyledText {
                text: root.customColor.toString()
                font.pixelSize: Theme.fontSizeSmall
                color: Theme.surfaceText
                anchors.horizontalCenter: parent.horizontalCenter
            }
        }
    }
}
```

The widget pulls `customColor` from `pluginData`, which automatically syncs with your settings. No manual loading needed.

### Widget with Popout

Add a popout menu that opens when you click the widget.

To add a layer namespace to your plugin, just add `layerNamespacePlugin: "<namespace for your plugin>"` like below.
Make sure to only type what you want the namespace to be and to not add a prefix (like `dms:` or `dms-plugin:` for example) since the shell will add `dms-plugin:` as a prefix automatically.
For example, the namespace of the plugin below will be `dms-plugin:emoji-launcher`.

While you don't have to add a layer namespace to you widget (it will fallback to `dms-plugin:plugin`), it's prefered to do so.
:::warning

As of right now, layer namespace only work with popout widget plugins.

:::
```qml
PluginComponent {
    id: root

    layerNamespacePlugin: "emoji-launcher"

    property var displayedEmojis: ["😊", "😢", "❤️"]

    horizontalBarPill: Component {
        Row {
            spacing: Theme.spacingXS
            Repeater {
                model: root.displayedEmojis
                StyledText {
                    text: modelData
                    font.pixelSize: Theme.fontSizeLarge
                }
            }
        }
    }

    verticalBarPill: Component {
        Column {
            spacing: Theme.spacingXS
            Repeater {
                model: root.displayedEmojis
                StyledText {
                    text: modelData
                    font.pixelSize: Theme.fontSizeMedium
                    anchors.horizontalCenter: parent.horizontalCenter
                }
            }
        }
    }

    popoutContent: Component {
        PopoutComponent {
            id: popoutColumn

            headerText: "Emoji Picker"
            detailsText: "Click an emoji to copy it"
            showCloseButton: true

            property var allEmojis: [
                "😀", "😃", "😄", "😁", "😆", "🤣",
                "❤️", "🧡", "💛", "💚", "💙", "💜"
            ]

            Item {
                width: parent.width
                implicitHeight: root.popoutHeight - popoutColumn.headerHeight -
                               popoutColumn.detailsHeight - Theme.spacingXL

                DankGridView {
                    anchors.fill: parent
                    cellWidth: 50
                    cellHeight: 50
                    model: popoutColumn.allEmojis

                    delegate: StyledRect {
                        width: 45
                        height: 45
                        radius: Theme.cornerRadius
                        color: emojiMouse.containsMouse ?
                               Theme.surfaceContainerHighest :
                               Theme.surfaceContainerHigh

                        StyledText {
                            anchors.centerIn: parent
                            text: modelData
                            font.pixelSize: Theme.fontSizeXLarge
                        }

                        MouseArea {
                            id: emojiMouse
                            anchors.fill: parent
                            hoverEnabled: true
                            cursorShape: Qt.PointingHandCursor

                            onClicked: {
                                Quickshell.execDetached(["sh", "-c",
                                    "echo -n '" + modelData + "' | wl-copy"])
                                ToastService.showInfo("Copied " + modelData)
                                popoutColumn.closePopout()
                            }
                        }
                    }
                }
            }
        }
    }

    popoutWidth: 400
    popoutHeight: 500
}
```

The `PopoutComponent` helper gives you consistent header/footer and a `closePopout()` function.

### Control Center Widget

Add a toggle to the Control Center:

```qml
PluginComponent {
    id: root

    property bool isEnabled: pluginData.isEnabled || false
    property int clickCount: pluginData.clickCount || 0

    ccWidgetIcon: isEnabled ? "toggle_on" : "toggle_off"
    ccWidgetPrimaryText: "Example Toggle"
    ccWidgetSecondaryText: isEnabled ? `Active • ${clickCount} clicks` : "Inactive"
    ccWidgetIsActive: isEnabled

    onCcWidgetToggled: {
        isEnabled = !isEnabled
        clickCount += 1
        if (pluginService) {
            pluginService.savePluginData(pluginId, "isEnabled", isEnabled)
            pluginService.savePluginData(pluginId, "clickCount", clickCount)
        }
        ToastService.showInfo(isEnabled ? "Enabled" : "Disabled")
    }

    horizontalBarPill: Component {
        Row {
            DankIcon {
                name: root.isEnabled ? "toggle_on" : "toggle_off"
                color: root.isEnabled ? Theme.primary : Theme.surfaceVariantText
            }
            StyledText {
                text: `${root.clickCount} clicks`
                color: Theme.surfaceText
            }
        }
    }

    verticalBarPill: Component {
        Column {
            DankIcon {
                name: root.isEnabled ? "toggle_on" : "toggle_off"
                color: root.isEnabled ? Theme.primary : Theme.surfaceVariantText
                anchors.horizontalCenter: parent.horizontalCenter
            }
            StyledText {
                text: `${root.clickCount}`
                color: Theme.surfaceText
                anchors.horizontalCenter: parent.horizontalCenter
            }
        }
    }
}
```

Set `ccWidgetIcon`, `ccWidgetPrimaryText`, `ccWidgetSecondaryText`, and `ccWidgetIsActive`. Handle `onCcWidgetToggled` for toggle clicks.

## Daemon Plugins

Daemon plugins run in the background without UI. They monitor events, automate tasks, or provide services.

Here's a daemon that runs a script whenever the wallpaper changes:

```qml
import QtQuick
import Quickshell
import Quickshell.Io
import qs.Common
import qs.Services
import qs.Modules.Plugins

PluginComponent {
    id: root

    property string scriptPath: pluginData.scriptPath || ""

    Connections {
        target: SessionData
        function onWallpaperPathChanged() {
            if (scriptPath && scriptPath !== "") {
                var process = scriptProcessComponent.createObject(root, {
                    wallpaperPath: SessionData.wallpaperPath
                })
                process.running = true
            }
        }
    }

    Component {
        id: scriptProcessComponent

        Process {
            property string wallpaperPath: ""
            command: [scriptPath, wallpaperPath]

            stdout: SplitParser {
                onRead: line => console.log("Script:", line)
            }

            stderr: SplitParser {
                onRead: line => {
                    if (line.trim()) {
                        ToastService.showError("Script error", line)
                    }
                }
            }

            onExited: (exitCode) => {
                if (exitCode !== 0) {
                    ToastService.showError("Script failed", "Exit code: " + exitCode)
                }
                destroy()
            }
        }
    }

    Component.onCompleted: {
        console.info("Wallpaper watcher daemon started")
    }
}
```

Daemon manifest uses `"type": "daemon"`:

```json
{
  "id": "wallpaperWatcher",
  "type": "daemon",
  "component": "./WallpaperWatcher.qml"
}
```

## Desktop Plugins {#desktop-plugins}

Desktop plugins render directly on the desktop background layer using Wayland's wlr-layer-shell protocol. Users can freely position and resize them.

### Basic Desktop Widget

```qml
import QtQuick
import Quickshell
import qs.Common
import qs.Modules.Plugins

DesktopPluginComponent {
    id: root

    // Size constraints
    minWidth: 150
    minHeight: 100

    // Access saved settings via pluginData
    property string displayText: pluginData.displayText ?? "Hello"
    property real bgOpacity: (pluginData.backgroundOpacity ?? 80) / 100

    Rectangle {
        anchors.fill: parent
        radius: Theme.cornerRadius
        color: Theme.withAlpha(Theme.surfaceContainer, root.bgOpacity)

        Text {
            anchors.centerIn: parent
            text: root.displayText
            color: Theme.surfaceText
            font.pixelSize: Theme.fontSizeLarge
        }
    }
}
```

Desktop manifest uses `"type": "desktop"`:

```json
{
  "id": "myDesktopWidget",
  "name": "My Desktop Widget",
  "description": "A custom desktop widget",
  "version": "1.0.0",
  "author": "Your Name",
  "type": "desktop",
  "capabilities": ["desktop-widget"],
  "component": "./MyWidget.qml",
  "icon": "widgets",
  "settings": "./MySettings.qml",
  "requires_dms": ">=1.2.0",
  "permissions": ["settings_read", "settings_write"]
}
```

### DesktopPluginComponent Properties

**Auto-injected** (don't declare these):

| Property | Type | Description |
|----------|------|-------------|
| `pluginService` | var | Reference to PluginService for data persistence |
| `pluginId` | string | Your plugin's unique identifier |
| `widgetWidth` | real | Current widget width |
| `widgetHeight` | real | Current widget height |
| `pluginData` | var | Object containing all saved plugin settings |

**Optional** (define on your component):

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `minWidth` | real | 100 | Minimum allowed width |
| `minHeight` | real | 100 | Minimum allowed height |
| `defaultWidth` | real | 200 | Initial width for new widgets |
| `defaultHeight` | real | 200 | Initial height for new widgets |
| `forceSquare` | bool | false | Constrain to square aspect ratio |

**Helper functions:**

```qml
// Read a specific setting with default value
function getData(key, defaultValue)

// Write a setting (triggers pluginDataChanged signal)
function setData(key, value)
```

### User Interaction

Desktop widgets support:

| Action | Trigger | Description |
|--------|---------|-------------|
| Move | Right-click + drag anywhere | Repositions the widget |
| Resize | Right-click + drag bottom-right corner | Resizes within min/max bounds |

### Responsive Layout

Adapt to widget dimensions:

```qml
GridLayout {
    columns: {
        if (root.widgetWidth < 200) return 1
        if (root.widgetWidth < 400) return 2
        return 3
    }
}
```

### Dynamic Size Constraints

```qml
DesktopPluginComponent {
    id: root

    property bool showAllTiles: pluginData.showAllTiles ?? true

    minWidth: showAllTiles ? 200 : 100
    minHeight: {
        if (tileCount === 0) return 60
        if (tileCount === 1) return 80
        return 120 + (tileCount - 2) * 40
    }
}
```

### Time-Based Updates

Use `SystemClock` for efficient time updates:

```qml
import Quickshell

DesktopPluginComponent {
    id: root

    SystemClock {
        id: clock
        precision: SystemClock.Seconds  // or Minutes

        onDateChanged: updateDisplay()
    }

    function updateDisplay() {
        // Update widget content
    }
}
```

### Canvas/Graph Performance

For graphing widgets:

```qml
Canvas {
    id: graph
    renderStrategy: Canvas.Cooperative

    property var history: []

    onHistoryChanged: requestPaint()

    onPaint: {
        var ctx = getContext("2d")
        ctx.reset()
        // Draw graph...
    }
}
```

### Complete Example: Desktop Clock

A clock widget with analog and digital modes, demonstrating dynamic component loading and responsive sizing.

```qml
// DesktopClock.qml
import QtQuick
import Quickshell
import qs.Common
import qs.Modules.Plugins

DesktopPluginComponent {
    id: root

    minWidth: 120
    minHeight: 120

    property bool showSeconds: pluginData.showSeconds ?? true
    property bool showDate: pluginData.showDate ?? true
    property string clockStyle: pluginData.clockStyle ?? "analog"
    property real backgroundOpacity: (pluginData.backgroundOpacity ?? 50) / 100

    SystemClock {
        id: systemClock
        precision: root.showSeconds ? SystemClock.Seconds : SystemClock.Minutes
    }

    Rectangle {
        id: background
        anchors.fill: parent
        radius: Theme.cornerRadius
        color: Theme.surfaceContainer
        opacity: root.backgroundOpacity
    }

    Loader {
        anchors.fill: parent
        anchors.margins: Theme.spacingM
        sourceComponent: root.clockStyle === "digital" ? digitalClock : analogClock
    }

    Component {
        id: analogClock

        Item {
            id: analogClockRoot

            property real clockSize: Math.min(width, height) - (root.showDate ? 30 : 0)

            Item {
                id: clockFace
                width: analogClockRoot.clockSize
                height: analogClockRoot.clockSize
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.top: parent.top
                anchors.topMargin: Theme.spacingS

                // Hour markers
                Repeater {
                    model: 12

                    Rectangle {
                        required property int index
                        property real markAngle: index * 30
                        property real markRadius: clockFace.width / 2 - 8

                        x: clockFace.width / 2 + markRadius * Math.sin(markAngle * Math.PI / 180) - width / 2
                        y: clockFace.height / 2 - markRadius * Math.cos(markAngle * Math.PI / 180) - height / 2
                        width: index % 3 === 0 ? 8 : 4
                        height: width
                        radius: width / 2
                        color: index % 3 === 0 ? Theme.primary : Theme.outlineVariant
                    }
                }

                // Hour hand
                Rectangle {
                    id: hourHand
                    property int hours: systemClock.date?.getHours() % 12 ?? 0
                    property int minutes: systemClock.date?.getMinutes() ?? 0

                    x: clockFace.width / 2 - width / 2
                    y: clockFace.height / 2 - height + 4
                    width: 6
                    height: clockFace.height * 0.25
                    radius: 3
                    color: Theme.primary
                    antialiasing: true
                    transformOrigin: Item.Bottom
                    rotation: (hours + minutes / 60) * 30
                }

                // Minute hand
                Rectangle {
                    id: minuteHand
                    property int minutes: systemClock.date?.getMinutes() ?? 0
                    property int seconds: systemClock.date?.getSeconds() ?? 0

                    x: clockFace.width / 2 - width / 2
                    y: clockFace.height / 2 - height + 4
                    width: 4
                    height: clockFace.height * 0.35
                    radius: 2
                    color: Theme.onSurface
                    antialiasing: true
                    transformOrigin: Item.Bottom
                    rotation: (minutes + seconds / 60) * 6
                }

                // Second hand
                Rectangle {
                    id: secondHand
                    visible: root.showSeconds
                    property int seconds: systemClock.date?.getSeconds() ?? 0

                    x: clockFace.width / 2 - width / 2
                    y: clockFace.height / 2 - height + 4
                    width: 2
                    height: clockFace.height * 0.4
                    radius: 1
                    color: Theme.error
                    antialiasing: true
                    transformOrigin: Item.Bottom
                    rotation: seconds * 6
                }

                // Center dot
                Rectangle {
                    anchors.centerIn: parent
                    width: 10
                    height: 10
                    radius: 5
                    color: Theme.primary
                }
            }

            Text {
                visible: root.showDate
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.bottom: parent.bottom
                anchors.bottomMargin: Theme.spacingXS
                text: systemClock.date?.toLocaleDateString(Qt.locale(), "ddd, MMM d") ?? ""
                font.pixelSize: Theme.fontSizeSmall
                font.weight: Font.Medium
                color: Theme.surfaceText
            }
        }
    }

    Component {
        id: digitalClock

        Item {
            id: digitalRoot

            property real timeFontSize: Math.min(width * 0.16, height * (root.showDate ? 0.4 : 0.5))
            property real dateFontSize: Math.max(Theme.fontSizeSmall, timeFontSize * 0.35)

            Text {
                id: timeText
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.verticalCenter: parent.verticalCenter
                anchors.verticalCenterOffset: root.showDate ? -digitalRoot.dateFontSize * 0.8 : 0
                text: systemClock.date?.toLocaleTimeString(Qt.locale(), root.showSeconds ? "hh:mm:ss" : "hh:mm") ?? ""
                font.pixelSize: digitalRoot.timeFontSize
                font.weight: Font.Bold
                font.family: "monospace"
                color: Theme.primary
            }

            Text {
                id: dateText
                visible: root.showDate
                anchors.horizontalCenter: parent.horizontalCenter
                anchors.top: timeText.bottom
                anchors.topMargin: Theme.spacingXS
                text: systemClock.date?.toLocaleDateString(Qt.locale(), "ddd, MMM d") ?? ""
                font.pixelSize: digitalRoot.dateFontSize
                color: Theme.surfaceText
            }
        }
    }
}
```

```qml
// DesktopClockSettings.qml
import QtQuick
import qs.Common
import qs.Modules.Plugins

PluginSettings {
    id: root
    pluginId: "exampleDesktopClock"

    SelectionSetting {
        settingKey: "clockStyle"
        label: I18n.tr("Clock Style")
        options: [
            { label: I18n.tr("Analog"), value: "analog" },
            { label: I18n.tr("Digital"), value: "digital" }
        ]
        defaultValue: "analog"
    }

    ToggleSetting {
        settingKey: "showSeconds"
        label: I18n.tr("Show Seconds")
        defaultValue: true
    }

    ToggleSetting {
        settingKey: "showDate"
        label: I18n.tr("Show Date")
        defaultValue: true
    }

    SliderSetting {
        settingKey: "backgroundOpacity"
        label: I18n.tr("Background Opacity")
        defaultValue: 50
        minimum: 0
        maximum: 100
        unit: "%"
    }
}
```

### Desktop Plugin Best Practices

1. **Use Theme singleton** - Never hardcode colors, spacing, or font sizes
2. **Set appropriate minWidth/minHeight** - Prevent unusable widget sizes
3. **Handle null data** - Use `??` operator for all `pluginData` access
4. **Optimize Canvas redraws** - Use `renderStrategy: Canvas.Cooperative`
5. **Responsive layouts** - Adapt to widget dimensions dynamically
6. **Transparency** - Provide opacity controls so wallpaper shows through

## Launcher Plugins

Launcher plugins add items to Spotlight search. They use `QtObject` as their root (not `Item` or `PluginComponent`) since they don't render any UI directly.

### Required Interface

Your launcher plugin must provide:

| Property/Function | Description |
|-------------------|-------------|
| `pluginService` | Auto-injected service for data persistence |
| `trigger` | Prefix that activates your plugin (e.g., `"="` or `"#"`) |
| `itemsChanged` | Signal to emit when your items list updates |
| `getItems(query)` | Returns filtered items matching the query |
| `executeItem(item)` | Handles item selection |
| `getContextMenuActions(item)` | *(Optional)* Returns context menu actions for an item |

### Context Menu Actions

Add right-click context menus to your launcher items by implementing `getContextMenuActions(item)`:

```qml
function getContextMenuActions(item) {
    if (!item)
        return [];

    return [
        {
            icon: "content_copy",
            text: I18n.tr("Copy"),
            action: () => {
                Quickshell.execDetached(["sh", "-c", "echo -n '" + item.name + "' | wl-copy"]);
                ToastService.showInfo("Copied", item.name);
            }
        },
        {
            icon: "open_in_new",
            text: I18n.tr("Open"),
            action: () => executeItem(item)
        }
    ];
}
```

Each action object has:
- `icon` - Material icon name
- `text` - Menu item label
- `action` - Callback function to execute

Here's a more complete example with dynamic actions based on item state:

```qml
function getContextMenuActions(item) {
    if (!item || !item._id)
        return [];

    const pinned = isPinned(item._id);
    return [
        {
            icon: pinned ? "keep_off" : "push_pin",
            text: pinned ? I18n.tr("Unpin") : I18n.tr("Pin"),
            action: () => togglePin(item._id)
        },
        {
            icon: "content_copy",
            text: I18n.tr("Copy"),
            action: () => executeItem(item)
        }
    ];
}
```

### Example: Calculator Plugin

A complete launcher plugin that evaluates math expressions:

```qml
import QtQuick
import Quickshell
import qs.Services
import "calculator.js" as Calculator

QtObject {
    id: root

    property var pluginService: null
    property string trigger: ""

    signal itemsChanged

    Component.onCompleted: {
        if (!pluginService)
            return;
        trigger = pluginService.loadPluginData("calculator", "trigger", "=");
    }

    function getItems(query) {
        if (!query || query.trim().length === 0)
            return [];

        const trimmedQuery = query.trim();
        if (!Calculator.isMathExpression(trimmedQuery))
            return [];

        const result = Calculator.evaluate(trimmedQuery);
        if (!result.success)
            return [];

        return [{
            name: result.result.toString(),
            icon: "material:equal",
            comment: trimmedQuery + " = " + result.result,
            action: "copy:" + result.result,
            categories: ["Calculator"],
            keywords: ["math", "calculate", "equals"]
        }];
    }

    function executeItem(item) {
        if (!item?.action)
            return;

        const actionParts = item.action.split(":");
        const actionType = actionParts[0];
        const actionData = actionParts.slice(1).join(":");

        if (actionType === "copy") {
            Quickshell.execDetached(["sh", "-c", "echo -n '" + actionData + "' | wl-copy"]);
            ToastService.showInfo("Calculator", "Copied to clipboard: " + actionData);
        }
    }

    onTriggerChanged: {
        if (pluginService)
            pluginService.savePluginData("calculator", "trigger", trigger);
    }
}
```

### Launcher Settings

Launcher plugins use `PluginSettings` just like widget plugins:

```qml
import QtQuick
import qs.Common
import qs.Widgets
import qs.Modules.Plugins

PluginSettings {
    id: root
    pluginId: "calculator"

    StyledText {
        width: parent.width
        text: "Calculator Plugin"
        font.pixelSize: Theme.fontSizeLarge
        font.weight: Font.Bold
        color: Theme.surfaceText
    }

    StyledText {
        width: parent.width
        text: "Evaluates math expressions and copies results to clipboard."
        font.pixelSize: Theme.fontSizeSmall
        color: Theme.surfaceVariantText
        wrapMode: Text.WordWrap
    }

    ToggleSetting {
        id: noTriggerToggle
        settingKey: "noTrigger"
        label: "Always Active"
        description: value ? "Type expressions directly" : "Use trigger prefix"
        defaultValue: false
        onValueChanged: {
            if (value)
                root.saveValue("trigger", "");
            else
                root.saveValue("trigger", triggerSetting.value || "=");
        }
    }

    StringSetting {
        id: triggerSetting
        visible: !noTriggerToggle.value
        settingKey: "trigger"
        label: "Trigger"
        description: "Prefix to activate calculator (e.g., =, calc)"
        placeholder: "="
        defaultValue: "="
    }
}
```

Launcher manifest needs `"type": "launcher"` and a `"trigger"`:

```json
{
  "id": "emojiLauncher",
  "type": "launcher",
  "trigger": "#",
  "component": "./EmojiLauncher.qml"
}
```

**Item properties**:
- `name` - Display name (required)
- `icon` - Icon to show (see formats below)
- `comment` - Secondary text/description
- `action` - What happens on selection (see formats below)
- `categories` - Array of category strings
- `keywords` - Array of strings for search matching (e.g., `["math", "calculate"]`)

**Icon formats**:
- Material Design: `"material:icon_name"` or just `"icon_name"`
- Unicode/Emoji: `"unicode:🚀"`

**Action formats**:
- Copy to clipboard: `"copy:text"`
- Show toast: `"toast:message"`
- Run script: `"script:command args"`

## Plugin Settings

Use `PluginSettings` as the base and drop in setting components. They handle all the loading and saving automatically.

```qml
import QtQuick
import qs.Common
import qs.Modules.Plugins
import qs.Widgets

PluginSettings {
    id: root
    pluginId: "colorDemo"

    StyledText {
        width: parent.width
        text: "Color Demo Settings"
        font.pixelSize: Theme.fontSizeLarge
        font.weight: Font.Bold
        color: Theme.surfaceText
    }

    StyledText {
        width: parent.width
        text: "Pick colors for your widget"
        font.pixelSize: Theme.fontSizeSmall
        color: Theme.surfaceVariantText
        wrapMode: Text.WordWrap
    }

    ColorSetting {
        settingKey: "customColor"
        label: "Widget Color"
        description: "Color shown in the bar"
        defaultValue: Theme.primary
    }

    SliderSetting {
        settingKey: "updateInterval"
        label: "Update Speed"
        description: "How often to refresh"
        defaultValue: 60
        minimum: 10
        maximum: 300
        unit: "sec"
    }

    ToggleSetting {
        settingKey: "showInBar"
        label: "Show in Bar"
        description: "Display widget in DankBar"
        defaultValue: true
    }

    StringSetting {
        settingKey: "apiKey"
        label: "API Key"
        description: "Your service API key"
        placeholder: "Enter key"
        defaultValue: ""
    }

    SelectionSetting {
        settingKey: "theme"
        label: "Theme"
        description: "Widget appearance"
        options: [
            {label: "Light", value: "light"},
            {label: "Dark", value: "dark"},
            {label: "Auto", value: "auto"}
        ]
        defaultValue: "dark"
    }
}
```

The setting components available:
- `ColorSetting` - Opens color picker modal
- `SliderSetting` - Numeric slider
- `ToggleSetting` - Boolean switch
- `StringSetting` - Text input
- `SelectionSetting` - Dropdown menu

Access settings in your widget via `pluginData`:

```qml
property color customColor: pluginData.customColor || Theme.primary
property int updateInterval: pluginData.updateInterval || 60
property bool showInBar: pluginData.showInBar !== undefined ? pluginData.showInBar : true
property string apiKey: pluginData.apiKey || ""
property string theme: pluginData.theme || "dark"
```

## Common Patterns

### Auto-injected Properties

`PluginComponent` automatically provides these properties - don't declare them yourself:

- `pluginData` - Reactive settings object
- `pluginService` - Service for manual data operations
- `pluginId` - Your plugin's ID
- `axis` - Bar axis info
- `section` - "left", "center", or "right"
- `parentScreen` - Screen reference
- `widgetThickness` - Widget height/width
- `barThickness` - Bar height/width
- `iconSize` - Recommended icon size for the current bar context
- `variants` - Variant instances

Use `iconSize` for consistent icon sizing that adapts to bar orientation and user preferences:

```qml
DankIcon {
    name: "settings"
    size: root.iconSize
}
```

### Saving Data Manually

Most of the time `pluginData` handles everything, but if you need to save manually:

```qml
if (pluginService) {
    pluginService.savePluginData(pluginId, "key", value)
}
```

### Showing Notifications

```qml
ToastService.showInfo("Title", "Message")
ToastService.showError("Title", "Error message")
```

### Copying to Clipboard

```qml
Quickshell.execDetached(["sh", "-c", "echo -n 'text' | wl-copy"])
```

### Timers

```qml
PluginComponent {
    Timer {
        interval: 1000
        running: true
        repeat: true
        onTriggered: {
            // Do something every second
        }
    }
}
```

## Plugin Manifest Reference

### Required Fields

```json
{
  "id": "pluginId",
  "name": "Plugin Name",
  "description": "What it does",
  "version": "1.0.0",
  "author": "Your Name",
  "type": "widget",
  "component": "./Widget.qml"
}
```

### Optional Fields

```json
{
  "icon": "material_icon",
  "settings": "./Settings.qml",
  "trigger": "#",
  "permissions": ["settings_read", "settings_write"],
  "requires_dms": ">=0.1.18",
  "requires": ["tool1", "tool2"]
}
```

### Plugin Types

- `"widget"` - DankBar or Control Center widget
- `"daemon"` - Background service
- `"launcher"` - Spotlight extension
- `"desktop"` - Desktop layer widget

### Permissions

- `"settings_read"` - Read plugin settings
- `"settings_write"` - Write plugin settings
- `"process"` - Execute system commands
- `"network"` - Network access

## Testing

1. Enable plugin: Settings → Plugins → Scan → Toggle on
2. Add to bar: Settings → DankBar → Add widget
3. Check console: Look for errors in shell output
4. Hot-reload your plugin: `dms ipc call plugins reload myPlugin`
5. Check settings file: `~/.config/DankMaterialShell/settings.json`

### Hot Reloading

During development you can reload plugins without restarting the shell:

```bash
# Reload your plugin after making changes
dms ipc call plugins reload myPlugin

# Check if it's running
dms ipc call plugins status myPlugin

# List all plugins and their state
dms ipc call plugins list
```

This is way faster than `dms restart` when you're iterating on your code.

## Publishing

1. Create GitHub repo
2. Include `plugin.json`, README, screenshots
3. Tag releases: `git tag v1.0.0 && git push --tags`
4. Submit to registry: [dms-plugin-registry](https://github.com/AvengeMedia/dms-plugin-registry)

## Examples

Check the `PLUGINS/` directory in the DMS repo for real examples:

- **ColorDemoPlugin** - Color picker integration
- **ExampleEmojiPlugin** - Popout with grid view
- **ControlCenterExample** - Control Center toggle
- **LauncherExample** - Spotlight extension
- **WallpaperWatcherDaemon** - Background event watcher

**Built-in desktop widgets**

- **DesktopClockWidget** - Digital/analog clock with date display and style options
- **SystemMonitorWidget** - CPU, memory, network, disk, GPU tiles with real-time graphs

Clone them and experiment.



================================================
FILE: versioned_docs/version-1.2/dankmaterialshell/plugins-overview.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/danksearch/configuration.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/danksearch/index.mdx
================================================
---
title: DankSearch
description: Native file system search with fuzzy search capabilities
sidebar_position: 1
image: img/dsearch.png
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗ ███████╗███████╗ █████╗ ██████╗  ██████╗██╗  ██╗
██╔══██╗██╔════╝██╔════╝██╔══██╗██╔══██╗██╔════╝██║  ██║
██║  ██║███████╗█████╗  ███████║██████╔╝██║     ███████║
██║  ██║╚════██║██╔══╝  ██╔══██║██╔══██╗██║     ██╔══██║
██████╔╝███████║███████╗██║  ██║██║  ██║╚██████╗██║  ██║
╚═════╝ ╚══════╝╚══════╝╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝
                                                        `}
/>

# DankSearch

`dsearch` is a native file system search tool with configurable indexes and a CLI + REST API for searching files with various parameters.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DankSearch"
    sources={{
      light: useBaseUrl('/img/dsearchlight.png'),
      dark: useBaseUrl('/img/dsearch.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>DankSearch file search interface</figcaption>
</figure>

## Overview

DankSearch integrates seamlessly with DankMaterialShell's Spotlight launcher, offering:

- **Instant Search**: Blazingly fast filesystem search
- **Fuzzy Matching**: Intelligent search that finds files even with typos
= **Content Searching**: Search for files by content instead of just filename.
- **Efficient**: Indexes are loaded into memory on-demand, not held there indefinitely.
- **Fast**: Extremely fast, for tens of thousands of files.
- **Zero Dependency**: Zero dependencies, compiles to a single portable binary.

## Documentation

- [Installation](installation) - Detailed setup instructions and requirements
- [Configuration](configuration) - Configuration options
- [Usage](usage) - Learn CLI commands and API endpoints

## Contributing

`dsearch` is open source and welcomes contributions:

- **Source Code**: [GitHub Repository](https://github.com/AvengeMedia/danksearch)
- **Issues**: Report bugs and request features on GitHub
- **Documentation**: Help improve the documentation
- **Testing**: Test on different Linux distributions and hardware

## License

`dsearch` is released under the MIT License. See the [LICENSE](https://github.com/AvengeMedia/danksearch/blob/master/LICENSE) file for details.



================================================
FILE: versioned_docs/version-1.2/danksearch/installation.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/danksearch/nixos-flake.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/danksearch/nixos.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/danksearch/usage.mdx
================================================
[Binary file]


================================================
FILE: versioned_docs/version-1.2/dgop/configuration.mdx
================================================
---
title: Configuration
description: Configure DGOP appearance and commands
sidebar_position: 3
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP Configuration

## API

For the API, you can set the following environment variable to override the port of the http server:
- `API_PORT` (defaults to `63484`)

## Colors

dgop will ready colors from `~/.config/dgop/colors.json`:

Example:

```json
{
  "ui": {
    "border_primary": "#ccbeff",
    "border_secondary": "#cac3dc",
    "header_background": "#ccbeff",
    "header_text": "#33275e",
    "footer_background": "#141318",
    "footer_text": "#cac4cf",
    "text_primary": "#e6e1e9",
    "text_secondary": "#cac4cf",
    "text_accent": "#ccbeff",
    "selection_background": "#ccbeff",
    "selection_text": "#33275e"
  },
  "charts": {
    "network_download": "#ccbeff",
    "network_upload": "#4a3e76",
    "network_line": "#cac3dc",
    "cpu_core_low": "#4a3e76",
    "cpu_core_medium": "#ccbeff",
    "cpu_core_high": "#eeb8ca",
    "disk_read": "#ccbeff",
    "disk_write": "#4a3e76"
  },
  "progress_bars": {
    "memory_low": "#4a3e76",
    "memory_medium": "#ccbeff",
    "memory_high": "#eeb8ca",
    "disk_low": "#4a3e76",
    "disk_medium": "#ccbeff",
    "disk_high": "#eeb8ca",
    "cpu_low": "#4a3e76",
    "cpu_medium": "#ccbeff",
    "cpu_high": "#eeb8ca",
    "progress_background": "#201f24"
  },
  "temperature": {
    "cold": "#4a3e76",
    "warm": "#ccbeff",
    "hot": "#eeb8ca",
    "danger": "#ffb4ab"
  },
  "status": {
    "success": "#22C55E",
    "warning": "#F59E0B",
    "error": "#ffb4ab",
    "info": "#ccbeff"
  }
}
```

### matugen template

Below is a template that can be used with matugen:

```json
{
  "ui": {
    "border_primary": "{{colors.primary.default.hex}}",
    "border_secondary": "{{colors.secondary.default.hex}}",
    "header_background": "{{colors.primary.default.hex}}",
    "header_text": "{{colors.on_primary.default.hex}}",
    "footer_background": "{{colors.surface_container.default.hex}}",
    "footer_text": "{{colors.on_surface_variant.default.hex}}",
    "text_primary": "{{colors.on_surface.default.hex}}",
    "text_secondary": "{{colors.on_surface_variant.default.hex}}",
    "text_accent": "{{colors.primary.default.hex}}",
    "selection_background": "{{colors.primary.default.hex}}",
    "selection_text": "{{colors.on_primary.default.hex}}"
  },
  "charts": {
    "network_download": "{{colors.primary.default.hex}}",
    "network_upload": "{{colors.primary_container.default.hex}}",
    "network_line": "{{colors.secondary.default.hex}}",
    "cpu_core_low": "{{colors.primary_container.default.hex}}",
    "cpu_core_medium": "{{colors.primary.default.hex}}",
    "cpu_core_high": "{{colors.tertiary.default.hex}}",
    "disk_read": "{{colors.primary.default.hex}}",
    "disk_write": "{{colors.primary_container.default.hex}}"
  },
  "progress_bars": {
    "memory_low": "{{colors.primary_container.default.hex}}",
    "memory_medium": "{{colors.primary.default.hex}}",
    "memory_high": "{{colors.tertiary.default.hex}}",
    "disk_low": "{{colors.primary_container.default.hex}}",
    "disk_medium": "{{colors.primary.default.hex}}",
    "disk_high": "{{colors.tertiary.default.hex}}",
    "cpu_low": "{{colors.primary_container.default.hex}}",
    "cpu_medium": "{{colors.primary.default.hex}}",
    "cpu_high": "{{colors.tertiary.default.hex}}",
  "progress_background": "{{colors.surface_container_high.default.hex}}"
  },
  "temperature": {
    "cold": "{{colors.primary_container.default.hex}}",
    "warm": "{{colors.primary.default.hex}}",
    "hot": "{{colors.tertiary.default.hex}}",
    "danger": "{{colors.error.default.hex}}"
  },
  "status": {
    "success": "#22C55E",
    "warning": "#F59E0B",
    "error": "{{colors.error.default.hex}}",
    "info": "{{colors.primary.default.hex}}"
  }
}
```

## Troubleshooting

### Common Issues

**API not starting:**
- Check port availability: `netstat -tlnp | grep :63484`
- Check logs

## Next Steps

- [Usage](usage) - Learn CLI commands and API usage



================================================
FILE: versioned_docs/version-1.2/dgop/index.mdx
================================================
---
title: DGOP
description: Graphical power management tool for Wayland
sidebar_position: 1
image: img/dgop.png
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP

`dgop` (Dank GO Process Status) is a stateless system and process monitoring tool that provides a top-like tui, CLI, and REST API. It allows sampling numerous metrics related to the system.

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DGOP Preview"
    sources={{
      light: useBaseUrl('/img/dgoplight.png'),
      dark: useBaseUrl('/img/dgop.png'),
    }}
    style={{ maxWidth: '600px', width: '100%' }}
  />
  <figcaption>dgop tui interface</figcaption>
</figure>

## Features

- top-like TUI
- CPU, GPU, Memory, Process, Network, Disk, and other various metrics
- Cursor-based stateless method to sample data over any arbitrary time period.
- Fully documented with OpenAPI 3.1, REST API
- cli to query any metric, in human-readable or machine-readable formats
- mix and match different metrics under a single `meta` call

## Documentation

- [Installation](installation) - Detailed setup instructions and requirements
- [Configuration](configuration) - Configuration options
- [Usage](usage) - Learn CLI commands and API endpoints

## Contributing

`dgop` is open source and welcomes contributions:

- **Source Code**: [GitHub Repository](https://github.com/AvengeMedia/dgop)
- **Issues**: Report bugs and request features on GitHub
- **Documentation**: Help improve the documentation
- **Testing**: Test on different Linux distributions and hardware

## License

`dgop` is released under the MIT License. See the [LICENSE](https://github.com/AvengeMedia/dgop/blob/master/LICENSE) file for details.



================================================
FILE: versioned_docs/version-1.2/dgop/installation.mdx
================================================
---
title: Installation
description: Install DGOP power menu
sidebar_position: 2
---

import Hero from '@site/src/components/Hero';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP Installation

:::note

`dgop` has zero dependencies and compiles to a single static binary.

:::

### Distribution Packages

#### Arch Linux
```bash
sudo pacman -S dgop
```

#### Fedora
```bash
sudo dnf copr enable avengemedia/danklinux
sudo dnf install dgop
```

### Pre-built Binaries

Download the latest release for your architecture:

```bash
# Download and install
wget https://github.com/AvengeMedia/dgop/releases/latest/download/dgop-linux-amd64.gz
gunzip dgop-linux-amd64.gz
chmod +x dgop-linux-amd64
sudo mv dgop-linux-amd64 /usr/local/bin/dgop
```

### From Source

Requirements: Go 1.24+

```bash
git clone https://github.com/AvengeMedia/dgop
cd dgop
make
sudo make install
```

## Verification

Test the installation:

```bash
# Check version
dgop version

# Get system metrics
dgop system

# Run API server
dgop server

# See available commands
dgop --help
```

## System Requirements

- **Operating System**: Linux (uses `/proc` and `/sys` filesystems)
- **Go Version**: 1.24+ (for building from source)

### Optional Dependencies

For enhanced functionality:

- `nvidia-smi` - NVIDIA GPU monitoring

## Integration with DMS

:::tip

DankMaterialShell users gain access to system widgets (CPU, RAM, GPU, Disk, Network) and process monitoring when dgop is installed.

:::

## Next Steps

- [Configuration](configuration) - Configure dgop
- [Usage](usage) - Learn CLI commands and API usage



================================================
FILE: versioned_docs/version-1.2/dgop/usage.mdx
================================================
---
title: Usage
description: Launch DGOP and manage system power
sidebar_position: 4
---

import Hero from '@site/src/components/Hero';
import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

<Hero
  asciiArt={`██████╗  ██████╗  ██████╗ ██████╗
██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗
██║  ██║██║  ███╗██║   ██║██████╔╝
██║  ██║██║   ██║██║   ██║██╔═══╝
██████╔╝╚██████╔╝╚██████╔╝██║
╚═════╝  ╚═════╝  ╚═════╝ ╚═╝
                                  `}
/>

# DGOP Usage

## API Usage

The `dgop` API provides a documentation endpoint, with a full openapi 3.1 specification available at `http://localhost:63484/docs`

<figure style={{ textAlign: 'center' }}>
  <ThemedImage
    alt="DGOP API Documentation"
    sources={{
      light: useBaseUrl('/img/dgopdoclight.png'),
      dark: useBaseUrl('/img/dgopdoc.png'),
    }}
    style={{ maxWidth: '800px', width: '100%' }}
  />
  <figcaption>Interactive OpenAPI documentation interface</figcaption>
</figure>

It is guaranteed to be up to date so it's the best way to reference API usage.

## CLI Usage

DGOP provides a comprehensive command-line interface for querying system metrics. All commands support JSON output via the `--json` flag for easy integration with scripts and applications.

### Basic Commands

Get quick system information using individual commands:

```bash
# View CPU usage and information
dgop cpu

# Check memory usage
dgop memory

# Monitor network interfaces
dgop network

# View disk information
dgop disk

# List running processes
dgop processes

# Get general system information
dgop system
```

### Advanced Commands

For more specialized monitoring:

```bash
# Monitor disk I/O rates in real-time
dgop disk-rate

# Track network transfer rates
dgop net-rate

# View GPU information
dgop gpu

# Get GPU temperature readings
dgop gpu-temp

# Display hardware details (motherboard, BIOS)
dgop hardware

# Get all metrics at once
dgop all
```

### Process Management

The `processes` command provides detailed process information with sorting and filtering options:

```bash
# List top processes by CPU usage
dgop processes --sort cpu --limit 20

# List processes by memory usage
dgop processes --sort memory --limit 10

# Disable CPU calculation for faster listing
dgop processes --no-cpu
```

### Meta Command

The `meta` command is designed for efficient polling by requesting multiple modules in a single call:

```bash
# Query multiple metrics at once
dgop meta --modules cpu,memory,network

# Get all metrics with specific GPU monitoring
dgop meta --modules all --gpu-pci-ids 0000:01:00.0

# Efficient CPU monitoring with cursor-based sampling
dgop meta --modules cpu --cpu-cursor <previous-cursor>

# Process monitoring with cursor for accurate percentages
dgop meta --modules processes --proc-cursor <previous-cursor> --limit 100
```

#### Cursor-Based Sampling

For accurate CPU and process metrics over time, DGOP supports cursor-based sampling. The meta command returns cursor values that should be passed back on subsequent calls:

```bash
# First call - no cursor needed
dgop meta --modules cpu,processes --json

# Subsequent calls - use returned cursors for accurate deltas
dgop meta --modules cpu,processes --cpu-cursor abc123 --proc-cursor def456 --json
```

This ensures CPU percentages reflect actual usage between samples rather than system-wide averages.

### Interactive Monitor

Launch a real-time, interactive system monitor, similar to top, htop:

```bash
dgop
```

### API Server

Start the HTTP API server for programmatic access:

```bash
# Start server on default port (63484)
dgop server

# Access OpenAPI documentation at http://localhost:63484/docs
```

### Output Formats

All commands support JSON output for integration with other tools:

```bash
# Get CPU info in JSON format
dgop cpu --json

# Pipe to jq for parsing
dgop memory --json | jq '.usage'
```

### Common Flags

- `--json` - Output results in JSON format
- `--no-cpu` - Disable CPU calculation in process listing for better performance
- `--help` - Show help for any command

### List Available Modules

See which metric modules are available:

```bash
dgop modules
```


================================================
FILE: versioned_sidebars/version-1.2-sidebars.json
================================================
{
  "tutorialSidebar": [
    "index",
    "getting-started",
    "dankinstall",
    {
      "type": "category",
      "label": "DankMaterialShell (dms)",
      "collapsed": false,
      "items": [
        {
          "type": "doc",
          "id": "dankmaterialshell/overview",
          "label": "Overview & Architecture"
        },
        "dankmaterialshell/installation",
        {
          "type": "category",
          "label": "Installation - NixOS",
          "collapsed": true,
          "items": [
            {
              "type": "doc",
              "id": "dankmaterialshell/nixos",
              "label": "NixOS module"
            },
            {
              "type": "doc",
              "id": "dankmaterialshell/nixos-flake",
              "label": "Flake (NixOS/home-manager)"
            }
          ]
        },
        "dankmaterialshell/calendar-integration",
        {
          "type": "doc",
          "id": "dankmaterialshell/managing",
          "label": "Managing Your Installation"
        },
        "dankmaterialshell/compositors",
        "dankmaterialshell/layers",
        {
          "type": "category",
          "label": "Themes",
          "collapsed": false,
          "items": [
            "dankmaterialshell/application-themes",
            "dankmaterialshell/icon-theming",
            "dankmaterialshell/custom-themes"
          ]
        },
        "dankmaterialshell/keybinds-ipc",
        {
          "type": "category",
          "label": "CLI",
          "collapsed": false,
          "items": [
            "dankmaterialshell/cli-doctor",
            "dankmaterialshell/cli-process-management",
            "dankmaterialshell/cli-keybinds-cheatsheets",
            {
              "type": "doc",
              "id": "dankmaterialshell/cli-dank16",
              "label": "Dank16 (ANSI Colors)"
            },
            {
              "type": "doc",
              "id": "dankmaterialshell/cli-color-picker",
              "label": "Color Picker"
            },
            "dankmaterialshell/cli-brightness",
            {
              "type": "doc",
              "id": "dankmaterialshell/cli-clipboard",
              "label": "Clipboard Manager"
            },
            "dankmaterialshell/cli-screenshot"
          ]
        },
        {
          "type": "category",
          "label": "Plugins",
          "collapsed": false,
          "items": [
            "dankmaterialshell/plugins-overview",
            "dankmaterialshell/plugin-development"
          ]
        },
        "dankmaterialshell/advanced-configuration"
      ]
    },
    {
      "type": "category",
      "label": "DankLinux Repository",
      "collapsed": false,
      "items": [
        {
          "type": "doc",
          "id": "danklinux/index",
          "label": "Overview"
        }
      ]
    },
    {
      "type": "category",
      "label": "DankGreeter (dms-greeter)",
      "collapsed": false,
      "items": [
        {
          "type": "doc",
          "id": "dankgreeter/index",
          "label": "Overview"
        },
        "dankgreeter/installation",
        {
          "type": "category",
          "label": "Installation - NixOS",
          "collapsed": true,
          "items": [
            {
              "type": "doc",
              "id": "dankgreeter/nixos",
              "label": "NixOS module"
            },
            {
              "type": "doc",
              "id": "dankgreeter/nixos-flake",
              "label": "Flake"
            }
          ]
        },
        "dankgreeter/configuration"
      ]
    },
    {
      "type": "category",
      "label": "DankGOP (dgop)",
      "collapsed": false,
      "items": [
        {
          "type": "doc",
          "id": "dgop/index",
          "label": "Overview"
        },
        "dgop/installation",
        "dgop/configuration",
        "dgop/usage"
      ]
    },
    {
      "type": "category",
      "label": "DankSearch (dsearch)",
      "collapsed": false,
      "items": [
        {
          "type": "doc",
          "id": "danksearch/index",
          "label": "Overview"
        },
        "danksearch/installation",
        {
          "type": "category",
          "label": "Installation - NixOS",
          "collapsed": true,
          "items": [
            {
              "type": "doc",
              "id": "danksearch/nixos-flake",
              "label": "Flake (home-manager)"
            },
            {
              "type": "doc",
              "id": "danksearch/nixos",
              "label": "NixOS module"
            }
          ]
        },
        "danksearch/configuration",
        "danksearch/usage"
      ]
    },
    "contributing",
    {
      "type": "doc",
      "id": "contributing-registry",
      "label": "Contributing Plugins & Themes"
    },
    "support"
  ]
}



================================================
FILE: .github/dependabot.yml
================================================
# Source - https://stackoverflow.com/a/66819358
# Posted by Johnny, modified by community. See post 'Timeline' for change history
# Retrieved 2025-12-02, License - CC BY-SA 4.0
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
    # Always increase the version requirement
    # to match the new version.
    versioning-strategy: increase



================================================
FILE: .github/workflows/ci.yml
================================================
name: CI

on:
  push:
    branches: [ master ]

concurrency:
  group: environment-${{ github.ref }}
  cancel-in-progress: true

jobs:
  setup_env:
    name: ⚙️ Setup environment
    runs-on: ubuntu-24.04
    steps:
      - name: Add SHORT_SHA env property
        run: echo "SHORT_SHA=`echo ${GITHUB_SHA::7}`" >> $GITHUB_ENV

      - name: Put commit msg in environment
        run: |
          echo "COMMIT_MSG<<EOF" >> $GITHUB_ENV
          echo "${{ github.event.head_commit.message }}" | head -n 1 >> $GITHUB_ENV
          echo "EOF" >> $GITHUB_ENV

      - name: Get branch name (merge)
        if: github.event_name != 'pull_request'
        shell: bash
        run: echo "BRANCH_NAME=$(echo ${GITHUB_REF#refs/heads/} | tr / -)" >> $GITHUB_ENV

      - name: Get branch name (pull request)
        if: github.event_name == 'pull_request'
        shell: bash
        run: echo "BRANCH_NAME=$(echo ${GITHUB_HEAD_REF} | tr / -)" >> $GITHUB_ENV

      - name: Set build start in env variable
        run: echo "BUILD_START=$(date +%s)" >> $GITHUB_ENV

    outputs:
      short_sha: ${{ env.SHORT_SHA }}
      commit_msg: ${{ env.COMMIT_MSG }}
      branch_name: ${{ env.BRANCH_NAME }}
      build_start: ${{ env.BUILD_START }}

  build_and_publish:
    name: Build dlx-docs
    needs: setup_env
    strategy:
      matrix:
        include:
          - platform: linux/amd64
            runs-on: ubuntu-24.04
            arch: amd64
          - platform: linux/arm64
            runs-on: ubuntu-24.04-arm
            arch: arm64
    runs-on: ${{ matrix.runs-on }}
    env:
      GITHUB_RUN_ID: ${{ github.run_id }}
    steps:
      - uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Login to registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Build and push image
        if: success()
        uses: docker/build-push-action@v5
        with:
          context: .
          platforms: ${{ matrix.platform }}
          provenance: false
          push: true
          file: ./Dockerfile
          tags: ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-${{ matrix.arch }}

  build_and_publish_server:
    name: Build dlx-docs-server
    needs: setup_env
    strategy:
      matrix:
        include:
          - platform: linux/amd64
            runs-on: ubuntu-24.04
            arch: amd64
          - platform: linux/arm64
            runs-on: ubuntu-24.04-arm
            arch: arm64
    runs-on: ${{ matrix.runs-on }}
    env:
      GITHUB_RUN_ID: ${{ github.run_id }}
    steps:
      - uses: actions/checkout@v4

      - name: Setup Go with cache
        uses: actions/setup-go@v5
        with:
          go-version-file: ./server/go.mod

      - name: Build GO Server Binary
        run: |
          cd server/cmd/api && CGO_ENABLED=0 GOARCH=${{ matrix.arch }} go build -ldflags "-s -w -X main.Version=${{ needs.setup_env.outputs.short_sha }}" -o ./api && cd ../../..

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Login to registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Build and push server image
        if: success()
        uses: docker/build-push-action@v5
        with:
          context: .
          platforms: ${{ matrix.platform }}
          provenance: false
          push: true
          file: ./server/Dockerfile
          tags: ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-${{ matrix.arch }}

  create_manifest:
    name: 📦 Create Multi-Arch Manifest
    runs-on: ubuntu-24.04
    needs: [setup_env, build_and_publish]
    env:
      GITHUB_RUN_ID: ${{ github.run_id }}
    steps:
      - name: Login to registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Create and push manifest
        run: |
          docker manifest create ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }} \
            --amend ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-amd64 \
            --amend ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-arm64

          docker manifest annotate --arch amd64 --os linux ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }} ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-amd64
          docker manifest annotate --arch arm64 --os linux ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }} ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-arm64

          docker manifest push ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}

  create_manifest_server:
    name: 📦 Create Multi-Arch Manifest Server
    runs-on: ubuntu-24.04
    needs: [setup_env, build_and_publish_server]
    env:
      GITHUB_RUN_ID: ${{ github.run_id }}
    steps:
      - name: Login to registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Create and push server manifest
        run: |
          docker manifest create ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }} \
            --amend ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-amd64 \
            --amend ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-arm64

          docker manifest annotate --arch amd64 --os linux ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }} ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-amd64
          docker manifest annotate --arch arm64 --os linux ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }} ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}-arm64

          docker manifest push ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}

  deploy_image:
    name: Deploy dlx-docs
    needs: [setup_env, create_manifest, create_manifest_server]
    runs-on: ubuntu-24.04
    env:
      GITHUB_RUN_ID: ${{ github.run_id }}
    steps:
      - uses: actions/checkout@v4
      - uses: imranismail/setup-kustomize@v1
        with:
          kustomize-version: "3.5.4"

      - name: Set image
        working-directory: ./k8s
        run: |
          kustomize edit set image replaceme=ghcr.io/avengemedia/dlx-docs:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}
          kustomize edit set image replaceme-server=ghcr.io/avengemedia/dlx-docs-server:${{ needs.setup_env.outputs.branch_name }}-${{ env.GITHUB_RUN_ID }}
          kustomize build . > deployment-k.yaml

      - name: Deploy image to k8s cluster
        uses: bbedward/kubectl@master
        env:
          KUBE_CONFIG_DATA: ${{ secrets.KUBE_CONFIG_DATA }}
        with:
          args: apply -f ./k8s/deployment-k.yaml

